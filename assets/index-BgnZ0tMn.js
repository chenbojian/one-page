(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const equalFn=(a,t)=>a===t,$PROXY=Symbol("solid-proxy"),SUPPORTS_PROXY=typeof Proxy=="function",$TRACK=Symbol("solid-track"),signalOptions={equals:equalFn};let runEffects=runQueue;const STALE=1,PENDING=2,UNOWNED={owned:null,cleanups:null,context:null,owner:null},NO_INIT={};var Owner=null;let Transition=null,ExternalSourceConfig=null,Listener=null,Updates=null,Effects=null,ExecCount=0;function createRoot$1(a,t){const r=Listener,n=Owner,o=a.length===0,s=t===void 0?n:t,l=o?UNOWNED:{owned:null,cleanups:null,context:s?s.context:null,owner:s},u=o?a:()=>a(()=>untrack(()=>cleanNode(l)));Owner=l,Listener=null;try{return runUpdates(u,!0)}finally{Listener=r,Owner=n}}function createSignal(a,t){t=t?Object.assign({},signalOptions,t):signalOptions;const r={value:a,observers:null,observerSlots:null,comparator:t.equals||void 0},n=o=>(typeof o=="function"&&(o=o(r.value)),writeSignal(r,o));return[readSignal.bind(r),n]}function createComputed(a,t,r){const n=createComputation(a,t,!0,STALE);updateComputation(n)}function createRenderEffect(a,t,r){const n=createComputation(a,t,!1,STALE);updateComputation(n)}function createEffect(a,t,r){runEffects=runUserEffects;const n=createComputation(a,t,!1,STALE);n.user=!0,Effects?Effects.push(n):updateComputation(n)}function createMemo(a,t,r){r=r?Object.assign({},signalOptions,r):signalOptions;const n=createComputation(a,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,updateComputation(n),readSignal.bind(n)}function isPromise(a){return a&&typeof a=="object"&&"then"in a}function createResource(a,t,r){let n,o,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(n=!0,o=a,s={}):(n=a,o=t,s={});let l=null,u=NO_INIT,c=!1,f="initialValue"in s,h=typeof n=="function"&&createMemo(n);const v=new Set,[d,p]=(s.storage||createSignal)(s.initialValue),[g,y]=createSignal(void 0),[_,S]=createSignal(void 0,{equals:!1}),[x,T]=createSignal(f?"ready":"unresolved");function b(P,L,E,I){return l===P&&(l=null,I!==void 0&&(f=!0),(P===u||L===u)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(I,{value:L})),u=NO_INIT,C(L,E)),L}function C(P,L){runUpdates(()=>{L===void 0&&p(()=>P),T(L!==void 0?"errored":f?"ready":"unresolved"),y(L);for(const E of v.keys())E.decrement();v.clear()},!1)}function w(){const P=SuspenseContext,L=d(),E=g();if(E!==void 0&&!l)throw E;return Listener&&!Listener.user&&P&&createComputed(()=>{_(),l&&(P.resolved||v.has(P)||(P.increment(),v.add(P)))}),L}function M(P=!0){if(P!==!1&&c)return;c=!1;const L=h?h():n;if(L==null||L===!1){b(l,untrack(d));return}const E=u!==NO_INIT?u:untrack(()=>o(L,{value:d(),refetching:P}));return isPromise(E)?(l=E,"value"in E?(E.status==="success"?b(l,E.value,void 0,L):b(l,void 0,castError(E.value),L),E):(c=!0,queueMicrotask(()=>c=!1),runUpdates(()=>{T(f?"refreshing":"pending"),S()},!1),E.then(I=>b(E,I,void 0,L),I=>b(E,void 0,castError(I),L)))):(b(l,E,void 0,L),E)}return Object.defineProperties(w,{state:{get:()=>x()},error:{get:()=>g()},loading:{get(){const P=x();return P==="pending"||P==="refreshing"}},latest:{get(){if(!f)return w();const P=g();if(P&&!l)throw P;return d()}}}),h?createComputed(()=>M(!1)):M(!1),[w,{refetch:M,mutate:p}]}function batch(a){return runUpdates(a,!1)}function untrack(a){if(Listener===null)return a();const t=Listener;Listener=null;try{return a()}finally{Listener=t}}function on(a,t,r){const n=Array.isArray(a);let o,s=r&&r.defer;return l=>{let u;if(n){u=Array(a.length);for(let f=0;f<a.length;f++)u[f]=a[f]()}else u=a();if(s)return s=!1,l;const c=untrack(()=>t(u,o,l));return o=u,c}}function onMount(a){createEffect(()=>untrack(a))}function onCleanup(a){return Owner===null||(Owner.cleanups===null?Owner.cleanups=[a]:Owner.cleanups.push(a)),a}function getListener(){return Listener}function getOwner(){return Owner}function runWithOwner(a,t){const r=Owner,n=Listener;Owner=a,Listener=null;try{return runUpdates(t,!0)}catch(o){handleError(o)}finally{Owner=r,Listener=n}}function startTransition(a){const t=Listener,r=Owner;return Promise.resolve().then(()=>{Listener=t,Owner=r;let n;return runUpdates(a,!1),Listener=Owner=null,n?n.done:void 0})}function createContext(a,t){const r=Symbol("context");return{id:r,Provider:createProvider(r),defaultValue:a}}function useContext(a){let t;return Owner&&Owner.context&&(t=Owner.context[a.id])!==void 0?t:a.defaultValue}function children(a){const t=createMemo(a),r=createMemo(()=>resolveChildren(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}let SuspenseContext;function readSignal(){if(this.sources&&this.state)if(this.state===STALE)updateComputation(this);else{const a=Updates;Updates=null,runUpdates(()=>lookUpstream(this),!1),Updates=a}if(Listener){const a=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(a)):(Listener.sources=[this],Listener.sourceSlots=[a]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return this.value}function writeSignal(a,t,r){let n=a.value;return(!a.comparator||!a.comparator(n,t))&&(a.value=t,a.observers&&a.observers.length&&runUpdates(()=>{for(let o=0;o<a.observers.length;o+=1){const s=a.observers[o],l=Transition&&Transition.running;l&&Transition.disposed.has(s),(l?!s.tState:!s.state)&&(s.pure?Updates.push(s):Effects.push(s),s.observers&&markDownstream(s)),l||(s.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error},!1)),t}function updateComputation(a){if(!a.fn)return;cleanNode(a);const t=ExecCount;runComputation(a,a.value,t)}function runComputation(a,t,r){let n;const o=Owner,s=Listener;Listener=Owner=a;try{n=a.fn(t)}catch(l){return a.pure&&(a.state=STALE,a.owned&&a.owned.forEach(cleanNode),a.owned=null),a.updatedAt=r+1,handleError(l)}finally{Listener=s,Owner=o}(!a.updatedAt||a.updatedAt<=r)&&(a.updatedAt!=null&&"observers"in a?writeSignal(a,n):a.value=n,a.updatedAt=r)}function createComputation(a,t,r,n=STALE,o){const s={fn:a,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Owner,context:Owner?Owner.context:null,pure:r};return Owner===null||Owner!==UNOWNED&&(Owner.owned?Owner.owned.push(s):Owner.owned=[s]),s}function runTop(a){if(a.state===0)return;if(a.state===PENDING)return lookUpstream(a);if(a.suspense&&untrack(a.suspense.inFallback))return a.suspense.effects.push(a);const t=[a];for(;(a=a.owner)&&(!a.updatedAt||a.updatedAt<ExecCount);)a.state&&t.push(a);for(let r=t.length-1;r>=0;r--)if(a=t[r],a.state===STALE)updateComputation(a);else if(a.state===PENDING){const n=Updates;Updates=null,runUpdates(()=>lookUpstream(a,t[0]),!1),Updates=n}}function runUpdates(a,t){if(Updates)return a();let r=!1;t||(Updates=[]),Effects?r=!0:Effects=[],ExecCount++;try{const n=a();return completeUpdates(r),n}catch(n){r||(Effects=null),Updates=null,handleError(n)}}function completeUpdates(a){if(Updates&&(runQueue(Updates),Updates=null),a)return;const t=Effects;Effects=null,t.length&&runUpdates(()=>runEffects(t),!1)}function runQueue(a){for(let t=0;t<a.length;t++)runTop(a[t])}function runUserEffects(a){let t,r=0;for(t=0;t<a.length;t++){const n=a[t];n.user?a[r++]=n:runTop(n)}for(t=0;t<r;t++)runTop(a[t])}function lookUpstream(a,t){a.state=0;for(let r=0;r<a.sources.length;r+=1){const n=a.sources[r];if(n.sources){const o=n.state;o===STALE?n!==t&&(!n.updatedAt||n.updatedAt<ExecCount)&&runTop(n):o===PENDING&&lookUpstream(n,t)}}}function markDownstream(a){for(let t=0;t<a.observers.length;t+=1){const r=a.observers[t];r.state||(r.state=PENDING,r.pure?Updates.push(r):Effects.push(r),r.observers&&markDownstream(r))}}function cleanNode(a){let t;if(a.sources)for(;a.sources.length;){const r=a.sources.pop(),n=a.sourceSlots.pop(),o=r.observers;if(o&&o.length){const s=o.pop(),l=r.observerSlots.pop();n<o.length&&(s.sourceSlots[l]=n,o[n]=s,r.observerSlots[n]=l)}}if(a.tOwned){for(t=a.tOwned.length-1;t>=0;t--)cleanNode(a.tOwned[t]);delete a.tOwned}if(a.owned){for(t=a.owned.length-1;t>=0;t--)cleanNode(a.owned[t]);a.owned=null}if(a.cleanups){for(t=a.cleanups.length-1;t>=0;t--)a.cleanups[t]();a.cleanups=null}a.state=0}function castError(a){return a instanceof Error?a:new Error(typeof a=="string"?a:"Unknown error",{cause:a})}function handleError(a,t=Owner){throw castError(a)}function resolveChildren(a){if(typeof a=="function"&&!a.length)return resolveChildren(a());if(Array.isArray(a)){const t=[];for(let r=0;r<a.length;r++){const n=resolveChildren(a[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return a}function createProvider(a,t){return function(n){let o;return createRenderEffect(()=>o=untrack(()=>(Owner.context={...Owner.context,[a]:n.value},children(()=>n.children))),void 0),o}}const FALLBACK=Symbol("fallback");function dispose(a){for(let t=0;t<a.length;t++)a[t]()}function mapArray(a,t,r={}){let n=[],o=[],s=[],l=0,u=t.length>1?[]:null;return onCleanup(()=>dispose(s)),()=>{let c=a()||[],f=c.length,h,v;return c[$TRACK],untrack(()=>{let p,g,y,_,S,x,T,b,C;if(f===0)l!==0&&(dispose(s),s=[],n=[],o=[],l=0,u&&(u=[])),r.fallback&&(n=[FALLBACK],o[0]=createRoot$1(w=>(s[0]=w,r.fallback())),l=1);else if(l===0){for(o=new Array(f),v=0;v<f;v++)n[v]=c[v],o[v]=createRoot$1(d);l=f}else{for(y=new Array(f),_=new Array(f),u&&(S=new Array(f)),x=0,T=Math.min(l,f);x<T&&n[x]===c[x];x++);for(T=l-1,b=f-1;T>=x&&b>=x&&n[T]===c[b];T--,b--)y[b]=o[T],_[b]=s[T],u&&(S[b]=u[T]);for(p=new Map,g=new Array(b+1),v=b;v>=x;v--)C=c[v],h=p.get(C),g[v]=h===void 0?-1:h,p.set(C,v);for(h=x;h<=T;h++)C=n[h],v=p.get(C),v!==void 0&&v!==-1?(y[v]=o[h],_[v]=s[h],u&&(S[v]=u[h]),v=g[v],p.set(C,v)):s[h]();for(v=x;v<f;v++)v in y?(o[v]=y[v],s[v]=_[v],u&&(u[v]=S[v],u[v](v))):o[v]=createRoot$1(d);o=o.slice(0,l=f),n=c.slice(0)}return o});function d(p){if(s[v]=p,u){const[g,y]=createSignal(v);return u[v]=y,t(c[v],g)}return t(c[v])}}}function createComponent(a,t){return untrack(()=>a(t||{}))}function trueFn(){return!0}const propTraps={get(a,t,r){return t===$PROXY?r:a.get(t)},has(a,t){return t===$PROXY?!0:a.has(t)},set:trueFn,deleteProperty:trueFn,getOwnPropertyDescriptor(a,t){return{configurable:!0,enumerable:!0,get(){return a.get(t)},set:trueFn,deleteProperty:trueFn}},ownKeys(a){return a.keys()}};function resolveSource(a){return(a=typeof a=="function"?a():a)?a:{}}function resolveSources(){for(let a=0,t=this.length;a<t;++a){const r=this[a]();if(r!==void 0)return r}}function mergeProps(...a){let t=!1;for(let l=0;l<a.length;l++){const u=a[l];t=t||!!u&&$PROXY in u,a[l]=typeof u=="function"?(t=!0,createMemo(u)):u}if(SUPPORTS_PROXY&&t)return new Proxy({get(l){for(let u=a.length-1;u>=0;u--){const c=resolveSource(a[u])[l];if(c!==void 0)return c}},has(l){for(let u=a.length-1;u>=0;u--)if(l in resolveSource(a[u]))return!0;return!1},keys(){const l=[];for(let u=0;u<a.length;u++)l.push(...Object.keys(resolveSource(a[u])));return[...new Set(l)]}},propTraps);const r={},n=Object.create(null);for(let l=a.length-1;l>=0;l--){const u=a[l];if(!u)continue;const c=Object.getOwnPropertyNames(u);for(let f=c.length-1;f>=0;f--){const h=c[f];if(h==="__proto__"||h==="constructor")continue;const v=Object.getOwnPropertyDescriptor(u,h);if(!n[h])n[h]=v.get?{enumerable:!0,configurable:!0,get:resolveSources.bind(r[h]=[v.get.bind(u)])}:v.value!==void 0?v:void 0;else{const d=r[h];d&&(v.get?d.push(v.get.bind(u)):v.value!==void 0&&d.push(()=>v.value))}}}const o={},s=Object.keys(n);for(let l=s.length-1;l>=0;l--){const u=s[l],c=n[u];c&&c.get?Object.defineProperty(o,u,c):o[u]=c?c.value:void 0}return o}function splitProps(a,...t){if(SUPPORTS_PROXY&&$PROXY in a){const o=new Set(t.length>1?t.flat():t[0]),s=t.map(l=>new Proxy({get(u){return l.includes(u)?a[u]:void 0},has(u){return l.includes(u)&&u in a},keys(){return l.filter(u=>u in a)}},propTraps));return s.push(new Proxy({get(l){return o.has(l)?void 0:a[l]},has(l){return o.has(l)?!1:l in a},keys(){return Object.keys(a).filter(l=>!o.has(l))}},propTraps)),s}const r={},n=t.map(()=>({}));for(const o of Object.getOwnPropertyNames(a)){const s=Object.getOwnPropertyDescriptor(a,o),l=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let u=!1,c=0;for(const f of t)f.includes(o)&&(u=!0,l?n[c][o]=s.value:Object.defineProperty(n[c],o,s)),++c;u||(l?r[o]=s.value:Object.defineProperty(r,o,s))}return[...n,r]}const narrowedError=a=>`Stale read from <${a}>.`;function For(a){const t="fallback"in a&&{fallback:()=>a.fallback};return createMemo(mapArray(()=>a.each,a.children,t||void 0))}function Show(a){const t=a.keyed,r=createMemo(()=>a.when,void 0,{equals:(n,o)=>t?n===o:!n==!o});return createMemo(()=>{const n=r();if(n){const o=a.children;return typeof o=="function"&&o.length>0?untrack(()=>o(t?n:()=>{if(!untrack(r))throw narrowedError("Show");return a.when})):o}return a.fallback},void 0,void 0)}const booleans=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Properties=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...booleans]),ChildProperties=new Set(["innerHTML","textContent","innerText","children"]),Aliases=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PropAliases=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function getPropAlias(a,t){const r=PropAliases[a];return typeof r=="object"?r[t]?r.$:void 0:r}const DelegatedEvents=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function reconcileArrays(a,t,r){let n=r.length,o=t.length,s=n,l=0,u=0,c=t[o-1].nextSibling,f=null;for(;l<o||u<s;){if(t[l]===r[u]){l++,u++;continue}for(;t[o-1]===r[s-1];)o--,s--;if(o===l){const h=s<n?u?r[u-1].nextSibling:r[s-u]:c;for(;u<s;)a.insertBefore(r[u++],h)}else if(s===u)for(;l<o;)(!f||!f.has(t[l]))&&t[l].remove(),l++;else if(t[l]===r[s-1]&&r[u]===t[o-1]){const h=t[--o].nextSibling;a.insertBefore(r[u++],t[l++].nextSibling),a.insertBefore(r[--s],h),t[o]=r[s]}else{if(!f){f=new Map;let v=u;for(;v<s;)f.set(r[v],v++)}const h=f.get(t[l]);if(h!=null)if(u<h&&h<s){let v=l,d=1,p;for(;++v<o&&v<s&&!((p=f.get(t[v]))==null||p!==h+d);)d++;if(d>h-u){const g=t[l];for(;u<h;)a.insertBefore(r[u++],g)}else a.replaceChild(r[u++],t[l++])}else l++;else t[l++].remove()}}}const $$EVENTS="_$DX_DELEGATE";function render$1(a,t,r,n={}){let o;return createRoot$1(s=>{o=s,t===document?a():insert(t,a(),t.firstChild?null:void 0,r)},n.owner),()=>{o(),t.textContent=""}}function template(a,t,r){let n;const o=()=>{const l=document.createElement("template");return l.innerHTML=a,l.content.firstChild},s=()=>(n||(n=o())).cloneNode(!0);return s.cloneNode=s,s}function delegateEvents(a,t=window.document){const r=t[$$EVENTS]||(t[$$EVENTS]=new Set);for(let n=0,o=a.length;n<o;n++){const s=a[n];r.has(s)||(r.add(s),t.addEventListener(s,eventHandler))}}function setAttribute$1(a,t,r){r==null?a.removeAttribute(t):a.setAttribute(t,r)}function setBoolAttribute(a,t,r){r?a.setAttribute(t,""):a.removeAttribute(t)}function className(a,t){t==null?a.removeAttribute("class"):a.className=t}function addEventListener$1(a,t,r,n){if(n)Array.isArray(r)?(a[`$$${t}`]=r[0],a[`$$${t}Data`]=r[1]):a[`$$${t}`]=r;else if(Array.isArray(r)){const o=r[0];a.addEventListener(t,r[0]=s=>o.call(a,r[1],s))}else a.addEventListener(t,r,typeof r!="function"&&r)}function classList(a,t,r={}){const n=Object.keys(t||{}),o=Object.keys(r);let s,l;for(s=0,l=o.length;s<l;s++){const u=o[s];!u||u==="undefined"||t[u]||(toggleClassKey(a,u,!1),delete r[u])}for(s=0,l=n.length;s<l;s++){const u=n[s],c=!!t[u];!u||u==="undefined"||r[u]===c||!c||(toggleClassKey(a,u,!0),r[u]=c)}return r}function style(a,t,r){if(!t)return r?setAttribute$1(a,"style"):t;const n=a.style;if(typeof t=="string")return n.cssText=t;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),t||(t={});let o,s;for(s in r)t[s]==null&&n.removeProperty(s),delete r[s];for(s in t)o=t[s],o!==r[s]&&(n.setProperty(s,o),r[s]=o);return r}function spread(a,t={},r,n){const o={};return createRenderEffect(()=>o.children=insertExpression(a,t.children,o.children)),createRenderEffect(()=>typeof t.ref=="function"&&use$1(t.ref,a)),createRenderEffect(()=>assign(a,t,r,!0,o,!0)),o}function use$1(a,t,r){return untrack(()=>a(t,r))}function insert(a,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return insertExpression(a,t,n,r);createRenderEffect(o=>insertExpression(a,t(),o,r),n)}function assign(a,t,r,n,o={},s=!1){t||(t={});for(const l in o)if(!(l in t)){if(l==="children")continue;o[l]=assignProp(a,l,null,o[l],r,s,t)}for(const l in t){if(l==="children")continue;const u=t[l];o[l]=assignProp(a,l,u,o[l],r,s,t)}}function toPropertyName(a){return a.toLowerCase().replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function toggleClassKey(a,t,r){const n=t.trim().split(/\s+/);for(let o=0,s=n.length;o<s;o++)a.classList.toggle(n[o],r)}function assignProp(a,t,r,n,o,s,l){let u,c,f,h,v;if(t==="style")return style(a,r,n);if(t==="classList")return classList(a,r,n);if(r===n)return n;if(t==="ref")s||r(a);else if(t.slice(0,3)==="on:"){const d=t.slice(3);n&&a.removeEventListener(d,n,typeof n!="function"&&n),r&&a.addEventListener(d,r,typeof r!="function"&&r)}else if(t.slice(0,10)==="oncapture:"){const d=t.slice(10);n&&a.removeEventListener(d,n,!0),r&&a.addEventListener(d,r,!0)}else if(t.slice(0,2)==="on"){const d=t.slice(2).toLowerCase(),p=DelegatedEvents.has(d);if(!p&&n){const g=Array.isArray(n)?n[0]:n;a.removeEventListener(d,g)}(p||r)&&(addEventListener$1(a,d,r,p),p&&delegateEvents([d]))}else t.slice(0,5)==="attr:"?setAttribute$1(a,t.slice(5),r):t.slice(0,5)==="bool:"?setBoolAttribute(a,t.slice(5),r):(v=t.slice(0,5)==="prop:")||(f=ChildProperties.has(t))||(h=getPropAlias(t,a.tagName))||(c=Properties.has(t))||(u=a.nodeName.includes("-")||"is"in l)?(v&&(t=t.slice(5),c=!0),t==="class"||t==="className"?className(a,r):u&&!c&&!f?a[toPropertyName(t)]=r:a[h||t]=r):setAttribute$1(a,Aliases[t]||t,r);return r}function eventHandler(a){let t=a.target;const r=`$$${a.type}`,n=a.target,o=a.currentTarget,s=c=>Object.defineProperty(a,"target",{configurable:!0,value:c}),l=()=>{const c=t[r];if(c&&!t.disabled){const f=t[`${r}Data`];if(f!==void 0?c.call(t,f,a):c.call(t,a),a.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(a.target)&&s(t.host),!0},u=()=>{for(;l()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(a,"currentTarget",{configurable:!0,get(){return t||document}}),a.composedPath){const c=a.composedPath();s(c[0]);for(let f=0;f<c.length-2&&(t=c[f],!!l());f++){if(t._$host){t=t._$host,u();break}if(t.parentNode===o)break}}else u();s(n)}function insertExpression(a,t,r,n,o){for(;typeof r=="function";)r=r();if(t===r)return r;const s=typeof t,l=n!==void 0;if(a=l&&r[0]&&r[0].parentNode||a,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===r))return r;if(l){let u=r[0];u&&u.nodeType===3?u.data!==t&&(u.data=t):u=document.createTextNode(t),r=cleanChildren(a,r,n,u)}else r!==""&&typeof r=="string"?r=a.firstChild.data=t:r=a.textContent=t}else if(t==null||s==="boolean")r=cleanChildren(a,r,n);else{if(s==="function")return createRenderEffect(()=>{let u=t();for(;typeof u=="function";)u=u();r=insertExpression(a,u,r,n)}),()=>r;if(Array.isArray(t)){const u=[],c=r&&Array.isArray(r);if(normalizeIncomingArray(u,t,r,o))return createRenderEffect(()=>r=insertExpression(a,u,r,n,!0)),()=>r;if(u.length===0){if(r=cleanChildren(a,r,n),l)return r}else c?r.length===0?appendNodes(a,u,n):reconcileArrays(a,r,u):(r&&cleanChildren(a),appendNodes(a,u));r=u}else if(t.nodeType){if(Array.isArray(r)){if(l)return r=cleanChildren(a,r,n,t);cleanChildren(a,r,null,t)}else r==null||r===""||!a.firstChild?a.appendChild(t):a.replaceChild(t,a.firstChild);r=t}}return r}function normalizeIncomingArray(a,t,r,n){let o=!1;for(let s=0,l=t.length;s<l;s++){let u=t[s],c=r&&r[a.length],f;if(!(u==null||u===!0||u===!1))if((f=typeof u)=="object"&&u.nodeType)a.push(u);else if(Array.isArray(u))o=normalizeIncomingArray(a,u,c)||o;else if(f==="function")if(n){for(;typeof u=="function";)u=u();o=normalizeIncomingArray(a,Array.isArray(u)?u:[u],Array.isArray(c)?c:[c])||o}else a.push(u),o=!0;else{const h=String(u);c&&c.nodeType===3&&c.data===h?a.push(c):a.push(document.createTextNode(h))}}return o}function appendNodes(a,t,r=null){for(let n=0,o=t.length;n<o;n++)a.insertBefore(t[n],r)}function cleanChildren(a,t,r,n){if(r===void 0)return a.textContent="";const o=n||document.createTextNode("");if(t.length){let s=!1;for(let l=t.length-1;l>=0;l--){const u=t[l];if(o!==u){const c=u.parentNode===a;!s&&!l?c?a.replaceChild(o,u):a.insertBefore(o,r):c&&u.remove()}else s=!0}}else a.insertBefore(o,r);return[o]}const voidFn=()=>{},isServer=!1;function createBeforeLeave(){let a=new Set;function t(o){return a.add(o),()=>a.delete(o)}let r=!1;function n(o,s){if(r)return!(r=!1);const l={to:o,options:s,defaultPrevented:!1,preventDefault:()=>l.defaultPrevented=!0};for(const u of a)u.listener({...l,from:u.location,retry:c=>{c&&(r=!0),u.navigate(o,{...s,resolve:!1})}});return!l.defaultPrevented}return{subscribe:t,confirm:n}}let depth;function saveCurrentDepth(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),depth=window.history.state._depth}saveCurrentDepth();function keepDepth(a){return{...a,_depth:window.history.state&&window.history.state._depth}}function notifyIfNotBlocked(a,t){let r=!1;return()=>{const n=depth;saveCurrentDepth();const o=n==null?null:depth-n;if(r){r=!1;return}o&&t(o)?(r=!0,window.history.go(-o)):a()}}const hasSchemeRegex=/^(?:[a-z0-9]+:)?\/\//i,trimPathRegex=/^\/+|(\/)\/+$/g,mockBase="http://sr";function normalizePath(a,t=!1){const r=a.replace(trimPathRegex,"$1");return r?t||/^[?#]/.test(r)?r:"/"+r:""}function resolvePath(a,t,r){if(hasSchemeRegex.test(t))return;const n=normalizePath(a),o=r&&normalizePath(r);let s="";return!o||t.startsWith("/")?s=n:o.toLowerCase().indexOf(n.toLowerCase())!==0?s=n+o:s=o,(s||"/")+normalizePath(t,!s)}function invariant(a,t){if(a==null)throw new Error(t);return a}function joinPaths(a,t){return normalizePath(a).replace(/\/*(\*.*)?$/g,"")+normalizePath(t)}function extractSearchParams(a){const t={};return a.searchParams.forEach((r,n)=>{n in t?Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]:t[n]=r}),t}function createMatcher(a,t,r){const[n,o]=a.split("/*",2),s=n.split("/").filter(Boolean),l=s.length;return u=>{const c=u.split("/").filter(Boolean),f=c.length-l;if(f<0||f>0&&o===void 0&&!t)return null;const h={path:l?"":"/",params:{}},v=d=>r===void 0?void 0:r[d];for(let d=0;d<l;d++){const p=s[d],g=p[0]===":",y=g?c[d]:c[d].toLowerCase(),_=g?p.slice(1):p.toLowerCase();if(g&&matchSegment(y,v(_)))h.params[_]=y;else if(g||!matchSegment(y,_))return null;h.path+=`/${y}`}if(o){const d=f?c.slice(-f).join("/"):"";if(matchSegment(d,v(o)))h.params[o]=d;else return null}return h}}function matchSegment(a,t){const r=n=>n===a;return t===void 0?!0:typeof t=="string"?r(t):typeof t=="function"?t(a):Array.isArray(t)?t.some(r):t instanceof RegExp?t.test(a):!1}function scoreRoute(a){const[t,r]=a.pattern.split("/*",2),n=t.split("/").filter(Boolean);return n.reduce((o,s)=>o+(s.startsWith(":")?2:3),n.length-(r===void 0?0:1))}function createMemoObject(a){const t=new Map,r=getOwner();return new Proxy({},{get(n,o){return t.has(o)||runWithOwner(r,()=>t.set(o,createMemo(()=>a()[o]))),t.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(a())}})}function mergeSearchString(a,t){const r=new URLSearchParams(a);Object.entries(t).forEach(([o,s])=>{s==null||s===""||s instanceof Array&&!s.length?r.delete(o):s instanceof Array?(r.delete(o),s.forEach(l=>{r.append(o,String(l))})):r.set(o,String(s))});const n=r.toString();return n?`?${n}`:""}function expandOptionals(a){let t=/(\/?\:[^\/]+)\?/.exec(a);if(!t)return[a];let r=a.slice(0,t.index),n=a.slice(t.index+t[0].length);const o=[r,r+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(n);)o.push(r+=t[1]),n=n.slice(t[0].length);return expandOptionals(n).reduce((s,l)=>[...s,...o.map(u=>u+l)],[])}const MAX_REDIRECTS=100,RouterContextObj=createContext(),RouteContextObj=createContext(),useRouter=()=>invariant(useContext(RouterContextObj),"<A> and 'use' router primitives can be only used inside a Route."),useRoute=()=>useContext(RouteContextObj)||useRouter().base,useResolvedPath=a=>{const t=useRoute();return createMemo(()=>t.resolvePath(a()))},useHref=a=>{const t=useRouter();return createMemo(()=>{const r=a();return r!==void 0?t.renderPath(r):r})},useNavigate=()=>useRouter().navigatorFactory(),useLocation=()=>useRouter().location,useSearchParams=()=>{const a=useLocation(),t=useNavigate(),r=(n,o)=>{const s=untrack(()=>mergeSearchString(a.search,n)+a.hash);t(s,{scroll:!1,resolve:!1,...o})};return[a.query,r]};function createRoutes(a,t=""){const{component:r,preload:n,load:o,children:s,info:l}=a,u=!s||Array.isArray(s)&&!s.length,c={key:a,component:r,preload:n||o,info:l};return asArray(a.path).reduce((f,h)=>{for(const v of expandOptionals(h)){const d=joinPaths(t,v);let p=u?d:d.split("/*",1)[0];p=p.split("/").map(g=>g.startsWith(":")||g.startsWith("*")?g:encodeURIComponent(g)).join("/"),f.push({...c,originalPath:h,pattern:p,matcher:createMatcher(p,!u,a.matchFilters)})}return f},[])}function createBranch(a,t=0){return{routes:a,score:scoreRoute(a[a.length-1])*1e4-t,matcher(r){const n=[];for(let o=a.length-1;o>=0;o--){const s=a[o],l=s.matcher(r);if(!l)return null;n.unshift({...l,route:s})}return n}}}function asArray(a){return Array.isArray(a)?a:[a]}function createBranches(a,t="",r=[],n=[]){const o=asArray(a);for(let s=0,l=o.length;s<l;s++){const u=o[s];if(u&&typeof u=="object"){u.hasOwnProperty("path")||(u.path="");const c=createRoutes(u,t);for(const f of c){r.push(f);const h=Array.isArray(u.children)&&u.children.length===0;if(u.children&&!h)createBranches(u.children,f.pattern,r,n);else{const v=createBranch([...r],n.length);n.push(v)}r.pop()}}}return r.length?n:n.sort((s,l)=>l.score-s.score)}function getRouteMatches(a,t){for(let r=0,n=a.length;r<n;r++){const o=a[r].matcher(t);if(o)return o}return[]}function createLocation(a,t,r){const n=new URL(mockBase),o=createMemo(h=>{const v=a();try{return new URL(v,n)}catch{return console.error(`Invalid path ${v}`),h}},n,{equals:(h,v)=>h.href===v.href}),s=createMemo(()=>o().pathname),l=createMemo(()=>o().search,!0),u=createMemo(()=>o().hash),c=()=>"",f=on(l,()=>extractSearchParams(o()));return{get pathname(){return s()},get search(){return l()},get hash(){return u()},get state(){return t()},get key(){return c()},query:r?r(f):createMemoObject(f)}}let intent;function getIntent(){return intent}function setInPreloadFn(a){}function createRouterContext(a,t,r,n={}){const{signal:[o,s],utils:l={}}=a,u=l.parsePath||(O=>O),c=l.renderPath||(O=>O),f=l.beforeLeave||createBeforeLeave(),h=resolvePath("",n.base||"");if(h===void 0)throw new Error(`${h} is not a valid base path`);h&&!o().value&&s({value:h,replace:!0,scroll:!1});const[v,d]=createSignal(!1);let p;const g=(O,$)=>{$.value===y()&&$.state===S()||(p===void 0&&d(!0),intent=O,p=$,startTransition(()=>{p===$&&(_(p.value),x(p.state),C[1]([]))}).finally(()=>{p===$&&batch(()=>{intent=void 0,O==="navigate"&&R(p),d(!1),p=void 0})}))},[y,_]=createSignal(o().value),[S,x]=createSignal(o().state),T=createLocation(y,S,l.queryWrapper),b=[],C=createSignal([]),w=createMemo(()=>typeof n.transformUrl=="function"?getRouteMatches(t(),n.transformUrl(T.pathname)):getRouteMatches(t(),T.pathname)),M=()=>{const O=w(),$={};for(let N=0;N<O.length;N++)Object.assign($,O[N].params);return $},P=l.paramsWrapper?l.paramsWrapper(M,t):createMemoObject(M),L={pattern:h,path:()=>h,outlet:()=>null,resolvePath(O){return resolvePath(h,O)}};return createRenderEffect(on(o,O=>g("native",O),{defer:!0})),{base:L,location:T,params:P,isRouting:v,renderPath:c,parsePath:u,navigatorFactory:I,matches:w,beforeLeave:f,preloadRoute:D,singleFlight:n.singleFlight===void 0?!0:n.singleFlight,submissions:C};function E(O,$,N){untrack(()=>{if(typeof $=="number"){$&&(l.go?l.go($):console.warn("Router integration does not support relative routing"));return}const V=!$||$[0]==="?",{replace:B,resolve:F,scroll:G,state:z}={replace:!1,resolve:!V,scroll:!0,...N},H=F?O.resolvePath($):resolvePath(V&&T.pathname||"",$);if(H===void 0)throw new Error(`Path '${$}' is not a routable path`);if(b.length>=MAX_REDIRECTS)throw new Error("Too many redirects");const U=y();(H!==U||z!==S())&&(isServer||f.confirm(H,N)&&(b.push({value:U,replace:B,scroll:G,state:S()}),g("navigate",{value:H,state:z})))})}function I(O){return O=O||useContext(RouteContextObj)||L,($,N)=>E(O,$,N)}function R(O){const $=b[0];$&&(s({...O,replace:$.replace,scroll:$.scroll}),b.length=0)}function D(O,$){const N=getRouteMatches(t(),O.pathname),V=intent;intent="preload";for(let B in N){const{route:F,params:G}=N[B];F.component&&F.component.preload&&F.component.preload();const{preload:z}=F;$&&z&&runWithOwner(r(),()=>z({params:G,location:{pathname:O.pathname,search:O.search,hash:O.hash,query:extractSearchParams(O),state:null,key:""},intent:"preload"}))}intent=V}}function createRouteContext(a,t,r,n){const{base:o,location:s,params:l}=a,{pattern:u,component:c,preload:f}=n().route,h=createMemo(()=>n().path);c&&c.preload&&c.preload();const v=f?f({params:l,location:s,intent:intent||"initial"}):void 0;return{parent:t,pattern:u,path:h,outlet:()=>c?createComponent(c,{params:l,location:s,data:v,get children(){return r()}}):r(),resolvePath(p){return resolvePath(o.path(),p,h())}}}const createRouterComponent=a=>t=>{const{base:r}=t,n=children(()=>t.children),o=createMemo(()=>createBranches(n(),t.base||""));let s;const l=createRouterContext(a,o,()=>s,{base:r,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return a.create&&a.create(l),createComponent(RouterContextObj.Provider,{value:l,get children(){return createComponent(Root,{routerState:l,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[createMemo(()=>(s=getOwner())&&null),createComponent(Routes,{routerState:l,get branches(){return o()}})]}})}})};function Root(a){const t=a.routerState.location,r=a.routerState.params,n=createMemo(()=>a.preload&&untrack(()=>{a.preload({params:r,location:t,intent:getIntent()||"initial"})}));return createComponent(Show,{get when(){return a.root},keyed:!0,get fallback(){return a.children},children:o=>createComponent(o,{params:r,location:t,get data(){return n()},get children(){return a.children}})})}function Routes(a){const t=[];let r;const n=createMemo(on(a.routerState.matches,(o,s,l)=>{let u=s&&o.length===s.length;const c=[];for(let f=0,h=o.length;f<h;f++){const v=s&&s[f],d=o[f];l&&v&&d.route.key===v.route.key?c[f]=l[f]:(u=!1,t[f]&&t[f](),createRoot$1(p=>{t[f]=p,c[f]=createRouteContext(a.routerState,c[f-1]||a.routerState.base,createOutlet(()=>n()[f+1]),()=>a.routerState.matches()[f])}))}return t.splice(o.length).forEach(f=>f()),l&&u?l:(r=c[0],c)}));return createOutlet(()=>n()&&r)()}const createOutlet=a=>()=>createComponent(Show,{get when(){return a()},keyed:!0,children:t=>createComponent(RouteContextObj.Provider,{value:t,get children(){return t.outlet()}})}),Route=a=>{const t=children(()=>a.children);return mergeProps(a,{get children(){return t()}})};function intercept([a,t],r,n){return[a,n?o=>t(n(o)):t]}function createRouter(a){let t=!1;const r=o=>typeof o=="string"?{value:o}:o,n=intercept(createSignal(r(a.get()),{equals:(o,s)=>o.value===s.value&&o.state===s.state}),void 0,o=>(!t&&a.set(o),o));return a.init&&onCleanup(a.init((o=a.get())=>{t=!0,n[1](r(o)),t=!1})),createRouterComponent({signal:n,create:a.create,utils:a.utils})}function bindEvent(a,t,r){return a.addEventListener(t,r),()=>a.removeEventListener(t,r)}function scrollToHash(a,t){const r=a&&document.getElementById(a);r?r.scrollIntoView():t&&window.scrollTo(0,0)}const actions$1=new Map;function setupNativeEvents(a=!0,t=!1,r="/_server",n){return o=>{const s=o.base.path(),l=o.navigatorFactory(o.base);let u,c;function f(y){return y.namespaceURI==="http://www.w3.org/2000/svg"}function h(y){if(y.defaultPrevented||y.button!==0||y.metaKey||y.altKey||y.ctrlKey||y.shiftKey)return;const _=y.composedPath().find(w=>w instanceof Node&&w.nodeName.toUpperCase()==="A");if(!_||t&&!_.hasAttribute("link"))return;const S=f(_),x=S?_.href.baseVal:_.href;if((S?_.target.baseVal:_.target)||!x&&!_.hasAttribute("state"))return;const b=(_.getAttribute("rel")||"").split(/\s+/);if(_.hasAttribute("download")||b&&b.includes("external"))return;const C=S?new URL(x,document.baseURI):new URL(x);if(!(C.origin!==window.location.origin||s&&C.pathname&&!C.pathname.toLowerCase().startsWith(s.toLowerCase())))return[_,C]}function v(y){const _=h(y);if(!_)return;const[S,x]=_,T=o.parsePath(x.pathname+x.search+x.hash),b=S.getAttribute("state");y.preventDefault(),l(T,{resolve:!1,replace:S.hasAttribute("replace"),scroll:!S.hasAttribute("noscroll"),state:b?JSON.parse(b):void 0})}function d(y){const _=h(y);if(!_)return;const[S,x]=_;o.preloadRoute(x,S.getAttribute("preload")!=="false")}function p(y){clearTimeout(u);const _=h(y);if(!_)return c=null;const[S,x]=_;c!==S&&(u=setTimeout(()=>{o.preloadRoute(x,S.getAttribute("preload")!=="false"),c=S},20))}function g(y){if(y.defaultPrevented)return;let _=y.submitter&&y.submitter.hasAttribute("formaction")?y.submitter.getAttribute("formaction"):y.target.getAttribute("action");if(!_)return;if(!_.startsWith("https://action/")){const x=new URL(_,mockBase);if(_=o.parsePath(x.pathname+x.search),!_.startsWith(r))return}if(y.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const S=actions$1.get(_);if(S){y.preventDefault();const x=new FormData(y.target,y.submitter);S.call({r:o,f:y.target},y.target.enctype==="multipart/form-data"?x:new URLSearchParams(x))}}delegateEvents(["click","submit"]),document.addEventListener("click",v),a&&(document.addEventListener("mousemove",p,{passive:!0}),document.addEventListener("focusin",d,{passive:!0}),document.addEventListener("touchstart",d,{passive:!0})),document.addEventListener("submit",g),onCleanup(()=>{document.removeEventListener("click",v),a&&(document.removeEventListener("mousemove",p),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",g)})}}function hashParser(a){const t=a.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,r="/"]=window.location.hash.split("#",2);return`${r}#${t}`}return t}function HashRouter(a){const t=()=>window.location.hash.slice(1),r=createBeforeLeave();return createRouter({get:t,set({value:n,replace:o,scroll:s,state:l}){o?window.history.replaceState(keepDepth(l),"","#"+n):window.history.pushState(l,"","#"+n);const u=n.indexOf("#"),c=u>=0?n.slice(u+1):"";scrollToHash(c,s),saveCurrentDepth()},init:n=>bindEvent(window,"hashchange",notifyIfNotBlocked(n,o=>!r.confirm(o&&o<0?o:t()))),create:setupNativeEvents(a.preload,a.explicitLinks,a.actionBase),utils:{go:n=>window.history.go(n),renderPath:n=>`#${n}`,parsePath:hashParser,beforeLeave:r}})(a)}var _tmpl$$5=template("<a>");function A(a){a=mergeProps({inactiveClass:"inactive",activeClass:"active"},a);const[,t]=splitProps(a,["href","state","class","activeClass","inactiveClass","end"]),r=useResolvedPath(()=>a.href),n=useHref(r),o=useLocation(),s=createMemo(()=>{const l=r();if(l===void 0)return[!1,!1];const u=normalizePath(l.split(/[?#]/,1)[0]).toLowerCase(),c=decodeURI(normalizePath(o.pathname).toLowerCase());return[a.end?u===c:c.startsWith(u+"/")||c===u,u===c]});return(()=>{var l=_tmpl$$5();return spread(l,mergeProps(t,{get href(){return n()||a.href},get state(){return JSON.stringify(a.state)},get classList(){return{...a.class&&{[a.class]:!0},[a.inactiveClass]:!s()[0],[a.activeClass]:s()[0],...t.classList}},link:"",get"aria-current"(){return s()[1]?"page":void 0}}),!1),l})()}const $RAW=Symbol("store-raw"),$NODE=Symbol("store-node"),$HAS=Symbol("store-has"),$SELF=Symbol("store-self");function wrap$1(a){let t=a[$PROXY];if(!t&&(Object.defineProperty(a,$PROXY,{value:t=new Proxy(a,proxyTraps$1)}),!Array.isArray(a))){const r=Object.keys(a),n=Object.getOwnPropertyDescriptors(a);for(let o=0,s=r.length;o<s;o++){const l=r[o];n[l].get&&Object.defineProperty(a,l,{enumerable:n[l].enumerable,get:n[l].get.bind(t)})}}return t}function isWrappable(a){let t;return a!=null&&typeof a=="object"&&(a[$PROXY]||!(t=Object.getPrototypeOf(a))||t===Object.prototype||Array.isArray(a))}function unwrap(a,t=new Set){let r,n,o,s;if(r=a!=null&&a[$RAW])return r;if(!isWrappable(a)||t.has(a))return a;if(Array.isArray(a)){Object.isFrozen(a)?a=a.slice(0):t.add(a);for(let l=0,u=a.length;l<u;l++)o=a[l],(n=unwrap(o,t))!==o&&(a[l]=n)}else{Object.isFrozen(a)?a=Object.assign({},a):t.add(a);const l=Object.keys(a),u=Object.getOwnPropertyDescriptors(a);for(let c=0,f=l.length;c<f;c++)s=l[c],!u[s].get&&(o=a[s],(n=unwrap(o,t))!==o&&(a[s]=n))}return a}function getNodes(a,t){let r=a[t];return r||Object.defineProperty(a,t,{value:r=Object.create(null)}),r}function getNode(a,t,r){if(a[t])return a[t];const[n,o]=createSignal(r,{equals:!1,internal:!0});return n.$=o,a[t]=n}function proxyDescriptor$1(a,t){const r=Reflect.getOwnPropertyDescriptor(a,t);return!r||r.get||!r.configurable||t===$PROXY||t===$NODE||(delete r.value,delete r.writable,r.get=()=>a[$PROXY][t]),r}function trackSelf(a){getListener()&&getNode(getNodes(a,$NODE),$SELF)()}function ownKeys(a){return trackSelf(a),Reflect.ownKeys(a)}const proxyTraps$1={get(a,t,r){if(t===$RAW)return a;if(t===$PROXY)return r;if(t===$TRACK)return trackSelf(a),r;const n=getNodes(a,$NODE),o=n[t];let s=o?o():a[t];if(t===$NODE||t===$HAS||t==="__proto__")return s;if(!o){const l=Object.getOwnPropertyDescriptor(a,t);getListener()&&(typeof s!="function"||a.hasOwnProperty(t))&&!(l&&l.get)&&(s=getNode(n,t,s)())}return isWrappable(s)?wrap$1(s):s},has(a,t){return t===$RAW||t===$PROXY||t===$TRACK||t===$NODE||t===$HAS||t==="__proto__"?!0:(getListener()&&getNode(getNodes(a,$HAS),t)(),t in a)},set(){return!0},deleteProperty(){return!0},ownKeys,getOwnPropertyDescriptor:proxyDescriptor$1};function setProperty(a,t,r,n=!1){if(!n&&a[t]===r)return;const o=a[t],s=a.length;r===void 0?(delete a[t],a[$HAS]&&a[$HAS][t]&&o!==void 0&&a[$HAS][t].$()):(a[t]=r,a[$HAS]&&a[$HAS][t]&&o===void 0&&a[$HAS][t].$());let l=getNodes(a,$NODE),u;if((u=getNode(l,t,o))&&u.$(()=>r),Array.isArray(a)&&a.length!==s){for(let c=a.length;c<s;c++)(u=l[c])&&u.$();(u=getNode(l,"length",s))&&u.$(a.length)}(u=l[$SELF])&&u.$()}function mergeStoreNode(a,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const o=r[n];setProperty(a,o,t[o])}}function updateArray(a,t){if(typeof t=="function"&&(t=t(a)),t=unwrap(t),Array.isArray(t)){if(a===t)return;let r=0,n=t.length;for(;r<n;r++){const o=t[r];a[r]!==o&&setProperty(a,r,o)}setProperty(a,"length",n)}else mergeStoreNode(a,t)}function updatePath(a,t,r=[]){let n,o=a;if(t.length>1){n=t.shift();const l=typeof n,u=Array.isArray(a);if(Array.isArray(n)){for(let c=0;c<n.length;c++)updatePath(a,[n[c]].concat(t),r);return}else if(u&&l==="function"){for(let c=0;c<a.length;c++)n(a[c],c)&&updatePath(a,[c].concat(t),r);return}else if(u&&l==="object"){const{from:c=0,to:f=a.length-1,by:h=1}=n;for(let v=c;v<=f;v+=h)updatePath(a,[v].concat(t),r);return}else if(t.length>1){updatePath(a[n],t,[n].concat(r));return}o=a[n],r=[n].concat(r)}let s=t[0];typeof s=="function"&&(s=s(o,r),s===o)||n===void 0&&s==null||(s=unwrap(s),n===void 0||isWrappable(o)&&isWrappable(s)&&!Array.isArray(s)?mergeStoreNode(o,s):setProperty(a,n,s))}function createStore(...[a,t]){const r=unwrap(a||{}),n=Array.isArray(r),o=wrap$1(r);function s(...l){batch(()=>{n&&l.length===1?updateArray(r,l[0]):updatePath(r,l)})}return[o,s]}const producers=new WeakMap,setterTraps={get(a,t){if(t===$RAW)return a;const r=a[t];let n;return isWrappable(r)?producers.get(r)||(producers.set(r,n=new Proxy(r,setterTraps)),n):r},set(a,t,r){return setProperty(a,t,unwrap(r)),!0},deleteProperty(a,t){return setProperty(a,t,void 0,!0),!0}};function produce(a){return t=>{if(isWrappable(t)){let r;(r=producers.get(t))||producers.set(t,r=new Proxy(t,setterTraps)),a(r)}return t}}const savedState=localStorage.getItem("appState");console.log("loading from localstorage");const[appState$1,setAppState$1]=createStore(savedState?JSON.parse(savedState):{books:{},chapters:{}});createEffect(()=>{localStorage.setItem("appState",JSON.stringify(appState$1))});const useAppState=()=>[appState$1,setAppState$1],[appState,setAppState]=useAppState();function proxy(a){return"https://corsproxy.io/?url="+encodeURIComponent(a)}async function loadBooks(){const t=await(await fetch(proxy("https://www.veryim.com/rank/"))).text(),r=document.createElement("html");return r.innerHTML=t,[...r.querySelectorAll("div.container div.panel-body div.media-body h4.book-title a")].map(o=>({name:o.textContent,url:"https://www.veryim.com"+new URL(o.href).pathname}))}async function loadBook(a){if(a in appState.books)return;const r=await(await fetch(proxy(a),{headers:{Referer:"https://www.veryim.com"}})).text(),o=new DOMParser().parseFromString(r,"text/html"),s=o.querySelector("div.info2 h1").innerHTML,l=[...o.querySelectorAll("div.rowzhangjie div.panel-body ul li a")].map(u=>({name:u.textContent,url:"https://www.veryim.com"+new URL(u.href).pathname}));l.reverse(),setAppState("books",produce(u=>{u[a]={name:s,url:a,chapters:l.map(c=>c.url)}})),setAppState("chapters",produce(u=>{for(const c of l)c.url in u||(u[c.url]={bookUrl:a,name:c.name,url:c.url,images:[]})}))}async function loadChapter(chapterUrl){const bookUrl=getParentPath(chapterUrl);(!(bookUrl in appState.books)||!(chapterUrl in appState.chapters))&&await loadBook(bookUrl);const res=await fetch(proxy(chapterUrl),{headers:{Referer:"https://www.veryim.com"}}),text=await res.text(),html=document.createElement("html");html.innerHTML=text;const obj={};eval(html.querySelectorAll("script")[3].innerHTML.replaceAll("var ","obj."));let imgUrls=atob(obj.qTcms_S_m_murl_e).split("$qingtiandy$");imgUrls=imgUrls.map(a=>a.startsWith("https://cdn1.npdn.top")?a.replace("https://cdn1.npdn.top","https://cdn2.npdn.top"):a),setAppState("chapters",produce(a=>{a[chapterUrl].images=imgUrls}))}function getParentPath(a){const t=new URL(a),r=t.pathname,n=r.substring(0,r.lastIndexOf("/"));return`${t.origin}${n}/`}var _tmpl$$4=template("<div class=back-to-book>"),_tmpl$2$3=template("<h2>"),_tmpl$3$1=template("<div class=content>"),_tmpl$4$1=template("<div class=next-chapter>"),_tmpl$5$1=template("<img>");function Chapter(){const[a]=useSearchParams(),[t,r]=useAppState();createEffect(()=>{a.url&&a.url.startsWith("https://www.veryim.com")&&loadChapter(a.url)});const n=()=>t.chapters[a.url],o=()=>{var c;return((c=n())==null?void 0:c.images)??[]},s=()=>{var c;return"/manki/book?url="+(((c=n())==null?void 0:c.bookUrl)??"")},l=()=>{var v;if(!n())return"";const c=t.books[n().bookUrl].chapters,f=c.indexOf(a.url);if(f===-1||f===c.length-1)return"";const h=c[f+1];return"/manki/chapter?url="+(((v=t.chapters[h])==null?void 0:v.url)??"")},u=()=>{r(produce(c=>{c.chapters[a.url].finished=!0}))};return[(()=>{var c=_tmpl$$4();return insert(c,createComponent(A,{get href(){return s()},children:"Book"})),c})(),(()=>{var c=_tmpl$2$3();return insert(c,()=>{var f;return(f=n())==null?void 0:f.name}),c})(),(()=>{var c=_tmpl$3$1();return insert(c,createComponent(For,{get each(){return o()},children:f=>(()=>{var h=_tmpl$5$1();return setAttribute$1(h,"src",f),h})()})),c})(),(()=>{var c=_tmpl$4$1();return insert(c,createComponent(A,{get href(){return l()},onClick:u,children:"Next Chapter"})),c})(),(()=>{var c=_tmpl$$4();return insert(c,createComponent(A,{get href(){return s()},onClick:u,children:"Book"})),c})()]}const solidLogo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20166%20155.3'%3e%3cpath%20d='M163%2035S110-4%2069%205l-3%201c-6%202-11%205-14%209l-2%203-15%2026%2026%205c11%207%2025%2010%2038%207l46%209%2018-30z'%20fill='%2376b3e1'/%3e%3clinearGradient%20id='a'%20gradientUnits='userSpaceOnUse'%20x1='27.5'%20y1='3'%20x2='152'%20y2='63.5'%3e%3cstop%20offset='.1'%20stop-color='%2376b3e1'/%3e%3cstop%20offset='.3'%20stop-color='%23dcf2fd'/%3e%3cstop%20offset='1'%20stop-color='%2376b3e1'/%3e%3c/linearGradient%3e%3cpath%20d='M163%2035S110-4%2069%205l-3%201c-6%202-11%205-14%209l-2%203-15%2026%2026%205c11%207%2025%2010%2038%207l46%209%2018-30z'%20opacity='.3'%20fill='url(%23a)'/%3e%3cpath%20d='M52%2035l-4%201c-17%205-22%2021-13%2035%2010%2013%2031%2020%2048%2015l62-21S92%2026%2052%2035z'%20fill='%23518ac8'/%3e%3clinearGradient%20id='b'%20gradientUnits='userSpaceOnUse'%20x1='95.8'%20y1='32.6'%20x2='74'%20y2='105.2'%3e%3cstop%20offset='0'%20stop-color='%2376b3e1'/%3e%3cstop%20offset='.5'%20stop-color='%234377bb'/%3e%3cstop%20offset='1'%20stop-color='%231f3b77'/%3e%3c/linearGradient%3e%3cpath%20d='M52%2035l-4%201c-17%205-22%2021-13%2035%2010%2013%2031%2020%2048%2015l62-21S92%2026%2052%2035z'%20opacity='.3'%20fill='url(%23b)'/%3e%3clinearGradient%20id='c'%20gradientUnits='userSpaceOnUse'%20x1='18.4'%20y1='64.2'%20x2='144.3'%20y2='149.8'%3e%3cstop%20offset='0'%20stop-color='%23315aa9'/%3e%3cstop%20offset='.5'%20stop-color='%23518ac8'/%3e%3cstop%20offset='1'%20stop-color='%23315aa9'/%3e%3c/linearGradient%3e%3cpath%20d='M134%2080a45%2045%200%2000-48-15L24%2085%204%20120l112%2019%2020-36c4-7%203-15-2-23z'%20fill='url(%23c)'/%3e%3clinearGradient%20id='d'%20gradientUnits='userSpaceOnUse'%20x1='75.2'%20y1='74.5'%20x2='24.4'%20y2='260.8'%3e%3cstop%20offset='0'%20stop-color='%234377bb'/%3e%3cstop%20offset='.5'%20stop-color='%231a336b'/%3e%3cstop%20offset='1'%20stop-color='%231a336b'/%3e%3c/linearGradient%3e%3cpath%20d='M114%20115a45%2045%200%2000-48-15L4%20120s53%2040%2094%2030l3-1c17-5%2023-21%2013-34z'%20fill='url(%23d)'/%3e%3c/svg%3e",viteLogo="/one-page/vite.svg";var _tmpl$$3=template('<nav class=flex><a href=#/jd class=app-link><img alt="JD Icon"class=app-icon>JD</a><a href=#/manki class=app-link><img alt="Manki Icon"class=app-icon>Manki');const Home=()=>(()=>{var a=_tmpl$$3(),t=a.firstChild,r=t.firstChild,n=t.nextSibling,o=n.firstChild;return setAttribute$1(r,"src",solidLogo),setAttribute$1(o,"src",viteLogo),a})();var _tmpl$$2=template("<ul>"),_tmpl$2$2=template("<li>");function Book(){const[a]=useSearchParams(),[t,r]=useAppState();createEffect(()=>{a.url&&a.url.startsWith("https://www.veryim.com")&&loadBook(a.url)});const n=()=>{var s;return(((s=t.books[a.url])==null?void 0:s.chapters)??[]).map(l=>t.chapters[l]).filter(l=>l)};return(()=>{var o=_tmpl$$2();return insert(o,createComponent(For,{get each(){return n()},children:s=>(()=>{var l=_tmpl$2$2();return l.style.setProperty("display","flex"),insert(l,createComponent(A,{get href(){return"/manki/chapter?url="+s.url},get children(){return s.name}}),null),insert(l,()=>s.finished?"âœ…":"",null),l})()})),o})()}var _tmpl$$1=template("<div>"),_tmpl$2$1=template("<div>Loading...");function Books(){const[a,{mutate:t,refetch:r}]=createResource(loadBooks);return(()=>{var n=_tmpl$$1();return insert(n,createComponent(For,{get each(){return a()},get fallback(){return _tmpl$2$1()},children:o=>(()=>{var s=_tmpl$$1();return insert(s,createComponent(A,{get href(){return"/manki/book?url="+o.url},get children(){return o.name}})),s})()})),n})()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(a,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},extendStatics(a,t)};function __extends(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(a,t);function r(){this.constructor=a}a.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Browser=function(){function a(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return a}(),Env=function(){function a(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return a}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:!env.hasGlobalWindow||"Deno"in window||typeof navigator<"u"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Node.js")>-1?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(a,t){var r=t.browser,n=a.match(/Firefox\/([\d.]+)/),o=a.match(/MSIE\s([\d.]+)/)||a.match(/Trident\/.+?rv:(([\d.]+))/),s=a.match(/Edge?\/([\d.]+)/),l=/micromessenger/i.test(a);n&&(r.firefox=!0,r.version=n[1]),o&&(r.ie=!0,r.version=o[1]),s&&(r.edge=!0,r.version=s[1],r.newEdge=+s[1].split(".")[0]>18),l&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11);var u=t.domSupported=typeof document<"u";if(u){var c=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in c||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in c)&&!("OTransition"in c),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(a){var t={};if(typeof JSON>"u")return t;for(var r=0;r<a.length;r++){var n=String.fromCharCode(r+32),o=(a.charCodeAt(r)-OFFSET)/SCALE;t[n]=o}return t}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var a,t;return function(r,n){if(!a){var o=platformApi.createCanvas();a=o&&o.getContext("2d")}if(a)return t!==n&&(t=a.font=n||DEFAULT_FONT),a.measureText(r);r=r||"",n=n||DEFAULT_FONT;var s=/((?:\d+)?\.?\d*)px/.exec(n),l=s&&+s[1]||DEFAULT_FONT_SIZE,u=0;if(n.indexOf("mono")>=0)u=l*r.length;else for(var c=0;c<r.length;c++){var f=DEFAULT_TEXT_WIDTH_MAP[r[c]];u+=f==null?l:f*l}return{width:u}}}(),loadImage:function(a,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=a,n}},BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(a,t){return a["[object "+t+"]"]=!0,a},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(a,t){return a["[object "+t+"Array]"]=!0,a},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];typeof console<"u"&&console.error.apply(console,a)}function clone$4(a){if(a==null||typeof a!="object")return a;var t=a,r=objToString.call(a);if(r==="[object Array]"){if(!isPrimitive(a)){t=[];for(var n=0,o=a.length;n<o;n++)t[n]=clone$4(a[n])}}else if(TYPED_ARRAY[r]){if(!isPrimitive(a)){var s=a.constructor;if(s.from)t=s.from(a);else{t=new s(a.length);for(var n=0,o=a.length;n<o;n++)t[n]=a[n]}}}else if(!BUILTIN_OBJECT[r]&&!isPrimitive(a)&&!isDom(a)){t={};for(var l in a)a.hasOwnProperty(l)&&l!==protoKey&&(t[l]=clone$4(a[l]))}return t}function merge(a,t,r){if(!isObject$3(t)||!isObject$3(a))return r?clone$4(t):a;for(var n in t)if(t.hasOwnProperty(n)&&n!==protoKey){var o=a[n],s=t[n];isObject$3(s)&&isObject$3(o)&&!isArray$1(s)&&!isArray$1(o)&&!isDom(s)&&!isDom(o)&&!isBuiltInObject(s)&&!isBuiltInObject(o)&&!isPrimitive(s)&&!isPrimitive(o)?merge(o,s,r):(r||!(n in a))&&(a[n]=clone$4(t[n]))}return a}function mergeAll(a,t){for(var r=a[0],n=1,o=a.length;n<o;n++)r=merge(r,a[n],t);return r}function extend(a,t){if(Object.assign)Object.assign(a,t);else for(var r in t)t.hasOwnProperty(r)&&r!==protoKey&&(a[r]=t[r]);return a}function defaults(a,t,r){for(var n=keys(t),o=0,s=n.length;o<s;o++){var l=n[o];(r?t[l]!=null:a[l]==null)&&(a[l]=t[l])}return a}function indexOf(a,t){if(a){if(a.indexOf)return a.indexOf(t);for(var r=0,n=a.length;r<n;r++)if(a[r]===t)return r}return-1}function inherits(a,t){var r=a.prototype;function n(){}n.prototype=t.prototype,a.prototype=new n;for(var o in r)r.hasOwnProperty(o)&&(a.prototype[o]=r[o]);a.prototype.constructor=a,a.superClass=t}function mixin(a,t,r){if(a="prototype"in a?a.prototype:a,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),o=0;o<n.length;o++){var s=n[o];s!=="constructor"&&(r?t[s]!=null:a[s]==null)&&(a[s]=t[s])}else defaults(a,t,r)}function isArrayLike(a){return!a||typeof a=="string"?!1:typeof a.length=="number"}function each$f(a,t,r){if(a&&t)if(a.forEach&&a.forEach===nativeForEach)a.forEach(t,r);else if(a.length===+a.length)for(var n=0,o=a.length;n<o;n++)t.call(r,a[n],n,a);else for(var s in a)a.hasOwnProperty(s)&&t.call(r,a[s],s,a)}function map$1(a,t,r){if(!a)return[];if(!t)return slice(a);if(a.map&&a.map===nativeMap)return a.map(t,r);for(var n=[],o=0,s=a.length;o<s;o++)n.push(t.call(r,a[o],o,a));return n}function reduce(a,t,r,n){if(a&&t){for(var o=0,s=a.length;o<s;o++)r=t.call(n,r,a[o],o,a);return r}}function filter(a,t,r){if(!a)return[];if(!t)return slice(a);if(a.filter&&a.filter===nativeFilter)return a.filter(t,r);for(var n=[],o=0,s=a.length;o<s;o++)t.call(r,a[o],o,a)&&n.push(a[o]);return n}function find(a,t,r){if(a&&t){for(var n=0,o=a.length;n<o;n++)if(t.call(r,a[n],n,a))return a[n]}}function keys(a){if(!a)return[];if(Object.keys)return Object.keys(a);var t=[];for(var r in a)a.hasOwnProperty(r)&&t.push(r);return t}function bindPolyfill(a,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return a.apply(t,r.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(a){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return a.apply(this,t.concat(nativeSlice.call(arguments)))}}function isArray$1(a){return Array.isArray?Array.isArray(a):objToString.call(a)==="[object Array]"}function isFunction(a){return typeof a=="function"}function isString(a){return typeof a=="string"}function isStringSafe(a){return objToString.call(a)==="[object String]"}function isNumber(a){return typeof a=="number"}function isObject$3(a){var t=typeof a;return t==="function"||!!a&&t==="object"}function isBuiltInObject(a){return!!BUILTIN_OBJECT[objToString.call(a)]}function isTypedArray(a){return!!TYPED_ARRAY[objToString.call(a)]}function isDom(a){return typeof a=="object"&&typeof a.nodeType=="number"&&typeof a.ownerDocument=="object"}function isGradientObject(a){return a.colorStops!=null}function isImagePatternObject(a){return a.image!=null}function isRegExp(a){return objToString.call(a)==="[object RegExp]"}function eqNaN(a){return a!==a}function retrieve(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];for(var r=0,n=a.length;r<n;r++)if(a[r]!=null)return a[r]}function retrieve2(a,t){return a??t}function retrieve3(a,t,r){return a??t??r}function slice(a){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return nativeSlice.apply(a,t)}function normalizeCssArray$1(a){if(typeof a=="number")return[a,a,a,a];var t=a.length;return t===2?[a[0],a[1],a[0],a[1]]:t===3?[a[0],a[1],a[2],a[1]]:a}function assert(a,t){if(!a)throw new Error(t)}function trim$1(a){return a==null?null:typeof a.trim=="function"?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(a){a[primitiveKey]=!0}function isPrimitive(a){return a[primitiveKey]}var MapPolyfill=function(){function a(){this.data={}}return a.prototype.delete=function(t){var r=this.has(t);return r&&delete this.data[t],r},a.prototype.has=function(t){return this.data.hasOwnProperty(t)},a.prototype.get=function(t){return this.data[t]},a.prototype.set=function(t,r){return this.data[t]=r,this},a.prototype.keys=function(){return keys(this.data)},a.prototype.forEach=function(t){var r=this.data;for(var n in r)r.hasOwnProperty(n)&&t(r[n],n)},a}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function a(t){var r=isArray$1(t);this.data=maybeNativeMap();var n=this;t instanceof a?t.each(o):t&&each$f(t,o);function o(s,l){r?n.set(s,l):n.set(l,s)}}return a.prototype.hasKey=function(t){return this.data.has(t)},a.prototype.get=function(t){return this.data.get(t)},a.prototype.set=function(t,r){return this.data.set(t,r),r},a.prototype.each=function(t,r){this.data.forEach(function(n,o){t.call(r,n,o)})},a.prototype.keys=function(){var t=this.data.keys();return isNativeMapSupported?Array.from(t):t},a.prototype.removeKey=function(t){this.data.delete(t)},a}();function createHashMap(a){return new HashMap(a)}function concatArray(a,t){for(var r=new a.constructor(a.length+t.length),n=0;n<a.length;n++)r[n]=a[n];for(var o=a.length,n=0;n<t.length;n++)r[n+o]=t[n];return r}function createObject(a,t){var r;if(Object.create)r=Object.create(a);else{var n=function(){};n.prototype=a,r=new n}return t&&extend(r,t),r}function disableUserSelect(a){var t=a.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function hasOwn(a,t){return a.hasOwnProperty(t)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;function create$2(a,t){return a==null&&(a=0),t==null&&(t=0),[a,t]}function copy$1(a,t){return a[0]=t[0],a[1]=t[1],a}function clone$3(a){return[a[0],a[1]]}function set$1(a,t,r){return a[0]=t,a[1]=r,a}function add(a,t,r){return a[0]=t[0]+r[0],a[1]=t[1]+r[1],a}function scaleAndAdd$1(a,t,r,n){return a[0]=t[0]+r[0]*n,a[1]=t[1]+r[1]*n,a}function sub(a,t,r){return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a}function len(a){return Math.sqrt(lenSquare(a))}function lenSquare(a){return a[0]*a[0]+a[1]*a[1]}function scale$2(a,t,r){return a[0]=t[0]*r,a[1]=t[1]*r,a}function normalize$3(a,t){var r=len(t);return r===0?(a[0]=0,a[1]=0):(a[0]=t[0]/r,a[1]=t[1]/r),a}function distance(a,t){return Math.sqrt((a[0]-t[0])*(a[0]-t[0])+(a[1]-t[1])*(a[1]-t[1]))}var dist$1=distance;function distanceSquare(a,t){return(a[0]-t[0])*(a[0]-t[0])+(a[1]-t[1])*(a[1]-t[1])}var distSquare=distanceSquare;function lerp$1(a,t,r,n){return a[0]=t[0]+n*(r[0]-t[0]),a[1]=t[1]+n*(r[1]-t[1]),a}function applyTransform$1(a,t,r){var n=t[0],o=t[1];return a[0]=r[0]*n+r[2]*o+r[4],a[1]=r[1]*n+r[3]*o+r[5],a}function min$1(a,t,r){return a[0]=Math.min(t[0],r[0]),a[1]=Math.min(t[1],r[1]),a}function max$1(a,t,r){return a[0]=Math.max(t[0],r[0]),a[1]=Math.max(t[1],r[1]),a}var Param=function(){function a(t,r){this.target=t,this.topTarget=r&&r.topTarget}return a}(),Draggable=function(){function a(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return a.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Param(r,t),"dragstart",t.event))},a.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,o=t.offsetY,s=n-this._x,l=o-this._y;this._x=n,this._y=o,r.drift(s,l,t),this.handler.dispatchToElement(new Param(r,t),"drag",t.event);var u=this.handler.findHover(n,o,r).target,c=this._dropTarget;this._dropTarget=u,r!==u&&(c&&u!==c&&this.handler.dispatchToElement(new Param(c,t),"dragleave",t.event),u&&u!==c&&this.handler.dispatchToElement(new Param(u,t),"dragenter",t.event))}},a.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Param(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},a}(),Eventful=function(){function a(t){t&&(this._$eventProcessor=t)}return a.prototype.on=function(t,r,n,o){this._$handlers||(this._$handlers={});var s=this._$handlers;if(typeof r=="function"&&(o=n,n=r,r=null),!n||!t)return this;var l=this._$eventProcessor;r!=null&&l&&l.normalizeQuery&&(r=l.normalizeQuery(r)),s[t]||(s[t]=[]);for(var u=0;u<s[t].length;u++)if(s[t][u].h===n)return this;var c={h:n,query:r,ctx:o||this,callAtLast:n.zrEventfulCallAtLast},f=s[t].length-1,h=s[t][f];return h&&h.callAtLast?s[t].splice(f,0,c):s[t].push(c),this},a.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},a.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var o=[],s=0,l=n[t].length;s<l;s++)n[t][s].h!==r&&o.push(n[t][s]);n[t]=o}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},a.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var o=this._$handlers[t],s=this._$eventProcessor;if(o)for(var l=r.length,u=o.length,c=0;c<u;c++){var f=o[c];if(!(s&&s.filter&&f.query!=null&&!s.filter(t,f.query)))switch(l){case 0:f.h.call(f.ctx);break;case 1:f.h.call(f.ctx,r[0]);break;case 2:f.h.call(f.ctx,r[0],r[1]);break;default:f.h.apply(f.ctx,r);break}}return s&&s.afterTrigger&&s.afterTrigger(t),this},a.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var o=this._$handlers[t],s=this._$eventProcessor;if(o)for(var l=r.length,u=r[l-1],c=o.length,f=0;f<c;f++){var h=o[f];if(!(s&&s.filter&&h.query!=null&&!s.filter(t,h.query)))switch(l){case 0:h.h.call(u);break;case 1:h.h.call(u,r[0]);break;case 2:h.h.call(u,r[0],r[1]);break;default:h.h.apply(u,r.slice(1,l-1));break}}return s&&s.afterTrigger&&s.afterTrigger(t),this},a}(),LN2=Math.log(2);function determinant(a,t,r,n,o,s){var l=n+"-"+o,u=a.length;if(s.hasOwnProperty(l))return s[l];if(t===1){var c=Math.round(Math.log((1<<u)-1&~o)/LN2);return a[r][c]}for(var f=n|1<<r,h=r+1;n&1<<h;)h++;for(var v=0,d=0,p=0;d<u;d++){var g=1<<d;g&o||(v+=(p%2?-1:1)*a[r][d]*determinant(a,t-1,h,f,o|g,s),p++)}return s[l]=v,v}function buildTransformer(a,t){var r=[[a[0],a[1],1,0,0,0,-t[0]*a[0],-t[0]*a[1]],[0,0,0,a[0],a[1],1,-t[1]*a[0],-t[1]*a[1]],[a[2],a[3],1,0,0,0,-t[2]*a[2],-t[2]*a[3]],[0,0,0,a[2],a[3],1,-t[3]*a[2],-t[3]*a[3]],[a[4],a[5],1,0,0,0,-t[4]*a[4],-t[4]*a[5]],[0,0,0,a[4],a[5],1,-t[5]*a[4],-t[5]*a[5]],[a[6],a[7],1,0,0,0,-t[6]*a[6],-t[6]*a[7]],[0,0,0,a[6],a[7],1,-t[7]*a[6],-t[7]*a[7]]],n={},o=determinant(r,8,0,0,0,n);if(o!==0){for(var s=[],l=0;l<8;l++)for(var u=0;u<8;u++)s[u]==null&&(s[u]=0),s[u]+=((l+u)%2?-1:1)*determinant(r,7,l===0?1:0,1<<l,1<<u,n)/o*t[l];return function(c,f,h){var v=f*s[6]+h*s[7]+1;c[0]=(f*s[0]+h*s[1]+s[2])/v,c[1]=(f*s[3]+h*s[4]+s[5])/v}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(a,t,r,n,o){return transformCoordWithViewport(_calcOut$1,t,n,o,!0)&&transformCoordWithViewport(a,r,_calcOut$1[0],_calcOut$1[1])}function transformLocalCoordClear(a,t){a&&r(a),t&&r(t);function r(n){var o=n[EVENT_SAVED_PROP];o&&(o.clearMarkers&&o.clearMarkers(),delete n[EVENT_SAVED_PROP])}}function transformCoordWithViewport(a,t,r,n,o){if(t.getBoundingClientRect&&env.domSupported&&!isCanvasEl(t)){var s=t[EVENT_SAVED_PROP]||(t[EVENT_SAVED_PROP]={}),l=prepareCoordMarkers(t,s),u=preparePointerTransformer(l,s,o);if(u)return u(a,r,n),!0}return!1}function prepareCoordMarkers(a,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],o=["top","bottom"],s=0;s<4;s++){var l=document.createElement("div"),u=l.style,c=s%2,f=(s>>1)%2;u.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[c]+":0",o[f]+":0",n[1-c]+":auto",o[1-f]+":auto",""].join("!important;"),a.appendChild(l),r.push(l)}return t.clearMarkers=function(){each$f(r,function(h){h.parentNode&&h.parentNode.removeChild(h)})},r}function preparePointerTransformer(a,t,r){for(var n=r?"invTrans":"trans",o=t[n],s=t.srcCoords,l=[],u=[],c=!0,f=0;f<4;f++){var h=a[f].getBoundingClientRect(),v=2*f,d=h.left,p=h.top;l.push(d,p),c=c&&s&&d===s[v]&&p===s[v+1],u.push(a[f].offsetLeft,a[f].offsetTop)}return c&&o?o:(t.srcCoords=l,t[n]=r?buildTransformer(u,l):buildTransformer(l,u))}function isCanvasEl(a){return a.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(a){return a==null?"":(a+"").replace(replaceReg,function(t,r){return replaceMap[r]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(a,t,r,n){return r=r||{},n?calculateZrXY(a,t,r):firefoxNotSupportOffsetXY&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):calculateZrXY(a,t,r),r}function calculateZrXY(a,t,r){if(env.domSupported&&a.getBoundingClientRect){var n=t.clientX,o=t.clientY;if(isCanvasEl(a)){var s=a.getBoundingClientRect();r.zrX=n-s.left,r.zrY=o-s.top;return}else if(transformCoordWithViewport(_calcOut,a,n,o)){r.zrX=_calcOut[0],r.zrY=_calcOut[1];return}}r.zrX=r.zrY=0}function getNativeEvent(a){return a||window.event}function normalizeEvent(a,t,r){if(t=getNativeEvent(t),t.zrX!=null)return t;var n=t.type,o=n&&n.indexOf("touch")>=0;if(o){var l=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];l&&clientToLocal(a,l,t,r)}else{clientToLocal(a,t,t,r);var s=getWheelDeltaMayPolyfill(t);t.zrDelta=s?s/120:-(t.detail||0)/3}var u=t.button;return t.which==null&&u!==void 0&&MOUSE_EVENT_REG.test(t.type)&&(t.which=u&1?1:u&2?3:u&4?2:0),t}function getWheelDeltaMayPolyfill(a){var t=a.wheelDelta;if(t)return t;var r=a.deltaX,n=a.deltaY;if(r==null||n==null)return t;var o=Math.abs(n!==0?n:r),s=n>0?-1:n<0?1:r>0?-1:1;return 3*o*s}function addEventListener(a,t,r,n){a.addEventListener(t,r,n)}function removeEventListener(a,t,r,n){a.removeEventListener(t,r,n)}var stop=function(a){a.preventDefault(),a.stopPropagation(),a.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(a){return a.which===2||a.which===3}var GestureMgr=function(){function a(){this._track=[]}return a.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},a.prototype.clear=function(){return this._track.length=0,this},a.prototype._doTrack=function(t,r,n){var o=t.touches;if(o){for(var s={points:[],touches:[],target:r,event:t},l=0,u=o.length;l<u;l++){var c=o[l],f=clientToLocal(n,c,{});s.points.push([f.zrX,f.zrY]),s.touches.push(c)}this._track.push(s)}},a.prototype._recognize=function(t){for(var r in recognizers)if(recognizers.hasOwnProperty(r)){var n=recognizers[r](this._track,t);if(n)return n}},a}();function dist(a){var t=a[1][0]-a[0][0],r=a[1][1]-a[0][1];return Math.sqrt(t*t+r*r)}function center$1(a){return[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]}var recognizers={pinch:function(a,t){var r=a.length;if(r){var n=(a[r-1]||{}).points,o=(a[r-2]||{}).points||n;if(o&&o.length>1&&n&&n.length>1){var s=dist(n)/dist(o);!isFinite(s)&&(s=1),t.pinchScale=s;var l=center$1(n);return t.pinchX=l[0],t.pinchY=l[1],{type:"pinch",target:a[0].target,event:t}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a}function copy(a,t){return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a}function mul(a,t,r){var n=t[0]*r[0]+t[2]*r[1],o=t[1]*r[0]+t[3]*r[1],s=t[0]*r[2]+t[2]*r[3],l=t[1]*r[2]+t[3]*r[3],u=t[0]*r[4]+t[2]*r[5]+t[4],c=t[1]*r[4]+t[3]*r[5]+t[5];return a[0]=n,a[1]=o,a[2]=s,a[3]=l,a[4]=u,a[5]=c,a}function translate(a,t,r){return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4]+r[0],a[5]=t[5]+r[1],a}function rotate(a,t,r,n){n===void 0&&(n=[0,0]);var o=t[0],s=t[2],l=t[4],u=t[1],c=t[3],f=t[5],h=Math.sin(r),v=Math.cos(r);return a[0]=o*v+u*h,a[1]=-o*h+u*v,a[2]=s*v+c*h,a[3]=-s*h+v*c,a[4]=v*(l-n[0])+h*(f-n[1])+n[0],a[5]=v*(f-n[1])-h*(l-n[0])+n[1],a}function scale$1(a,t,r){var n=r[0],o=r[1];return a[0]=t[0]*n,a[1]=t[1]*o,a[2]=t[2]*n,a[3]=t[3]*o,a[4]=t[4]*n,a[5]=t[5]*o,a}function invert(a,t){var r=t[0],n=t[2],o=t[4],s=t[1],l=t[3],u=t[5],c=r*l-s*n;return c?(c=1/c,a[0]=l*c,a[1]=-s*c,a[2]=-n*c,a[3]=r*c,a[4]=(n*u-l*o)*c,a[5]=(s*o-r*u)*c,a):null}function clone$2(a){var t=create$1();return copy(t,a),t}var Point=function(){function a(t,r){this.x=t||0,this.y=r||0}return a.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.set=function(t,r){return this.x=t,this.y=r,this},a.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},a.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},a.prototype.scale=function(t){this.x*=t,this.y*=t},a.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},a.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},a.prototype.dot=function(t){return this.x*t.x+this.y*t.y},a.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},a.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},a.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},a.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},a.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.transform=function(t){if(t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},a.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},a.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},a.set=function(t,r,n){t.x=r,t.y=n},a.copy=function(t,r){t.x=r.x,t.y=r.y},a.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},a.lenSquare=function(t){return t.x*t.x+t.y*t.y},a.dot=function(t,r){return t.x*r.x+t.y*r.y},a.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},a.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},a.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},a.scaleAndAdd=function(t,r,n,o){t.x=r.x+n.x*o,t.y=r.y+n.y*o},a.lerp=function(t,r,n,o){var s=1-o;t.x=s*r.x+o*n.x,t.y=s*r.y+o*n.y},a}(),mathMin$b=Math.min,mathMax$b=Math.max,mathAbs$5=Math.abs,XY$3=["x","y"],WH$3=["width","height"],lt=new Point,rb=new Point,lb=new Point,rt=new Point,_intersectCtx$1=createIntersectContext(),_minTv$1=_intersectCtx$1.minTv,_maxTv$1=_intersectCtx$1.maxTv,_lenMinMax=[0,0],BoundingRect=function(){function a(t,r,n,o){a.set(this,t,r,n,o)}return a.set=function(t,r,n,o,s){return o<0&&(r=r+o,o=-o),s<0&&(n=n+s,s=-s),t.x=r,t.y=n,t.width=o,t.height=s,t},a.prototype.union=function(t){var r=mathMin$b(t.x,this.x),n=mathMin$b(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$b(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$b(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},a.prototype.applyTransform=function(t){a.applyTransform(this,this,t)},a.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,o=t.height/r.height,s=create$1();return translate(s,s,[-r.x,-r.y]),scale$1(s,s,[n,o]),translate(s,s,[t.x,t.y]),s},a.prototype.intersect=function(t,r,n){return a.intersect(this,t,r,n)},a.intersect=function(t,r,n,o){n&&Point.set(n,0,0);var s=o&&o.outIntersectRect||null,l=o&&o.clamp;if(s&&(s.x=s.y=s.width=s.height=NaN),!t||!r)return!1;t instanceof a||(t=a.set(_tmpIntersectA,t.x,t.y,t.width,t.height)),r instanceof a||(r=a.set(_tmpIntersectB,r.x,r.y,r.width,r.height));var u=!!n;_intersectCtx$1.reset(o,u);var c=_intersectCtx$1.touchThreshold,f=t.x+c,h=t.x+t.width-c,v=t.y+c,d=t.y+t.height-c,p=r.x+c,g=r.x+r.width-c,y=r.y+c,_=r.y+r.height-c;if(f>h||v>d||p>g||y>_)return!1;var S=!(h<p||g<f||d<y||_<v);return(u||s)&&(_lenMinMax[0]=1/0,_lenMinMax[1]=0,intersectOneDim(f,h,p,g,0,u,s,l),intersectOneDim(v,d,y,_,1,u,s,l),u&&Point.copy(n,S?_intersectCtx$1.useDir?_intersectCtx$1.dirMinTv:_minTv$1:_maxTv$1)),S},a.contain=function(t,r,n){return r>=t.x&&r<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},a.prototype.contain=function(t,r){return a.contain(this,t,r)},a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(t){a.copy(this,t)},a.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},a.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},a.prototype.isZero=function(){return this.width===0||this.height===0},a.create=function(t){return new a(t.x,t.y,t.width,t.height)},a.copy=function(t,r){return t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height,t},a.applyTransform=function(t,r,n){if(!n){t!==r&&a.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var o=n[0],s=n[3],l=n[4],u=n[5];t.x=r.x*o+l,t.y=r.y*s+u,t.width=r.width*o,t.height=r.height*s,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}lt.x=lb.x=r.x,lt.y=rt.y=r.y,rb.x=rt.x=r.x+r.width,rb.y=lb.y=r.y+r.height,lt.transform(n),rt.transform(n),rb.transform(n),lb.transform(n),t.x=mathMin$b(lt.x,rb.x,lb.x,rt.x),t.y=mathMin$b(lt.y,rb.y,lb.y,rt.y);var c=mathMax$b(lt.x,rb.x,lb.x,rt.x),f=mathMax$b(lt.y,rb.y,lb.y,rt.y);t.width=c-t.x,t.height=f-t.y},a}(),_tmpIntersectA=new BoundingRect(0,0,0,0),_tmpIntersectB=new BoundingRect(0,0,0,0);function intersectOneDim(a,t,r,n,o,s,l,u){var c=mathAbs$5(t-r),f=mathAbs$5(n-a),h=mathMin$b(c,f),v=XY$3[o],d=XY$3[1-o],p=WH$3[o];t<r||n<a?c<f?(s&&(_maxTv$1[v]=-c),u&&(l[v]=t,l[p]=0)):(s&&(_maxTv$1[v]=f),u&&(l[v]=a,l[p]=0)):(l&&(l[v]=mathMax$b(a,r),l[p]=mathMin$b(t,n)-l[v]),s&&(h<_lenMinMax[0]||_intersectCtx$1.useDir)&&(_lenMinMax[0]=mathMin$b(h,_lenMinMax[0]),(c<f||!_intersectCtx$1.bidirectional)&&(_minTv$1[v]=c,_minTv$1[d]=0,_intersectCtx$1.useDir&&_intersectCtx$1.calcDirMTV()),(c>=f||!_intersectCtx$1.bidirectional)&&(_minTv$1[v]=-f,_minTv$1[d]=0,_intersectCtx$1.useDir&&_intersectCtx$1.calcDirMTV())))}function createIntersectContext(){var a=0,t=new Point,r=new Point,n={minTv:new Point,maxTv:new Point,useDir:!1,dirMinTv:new Point,touchThreshold:0,bidirectional:!0,negativeSize:!1,reset:function(s,l){n.touchThreshold=0,s&&s.touchThreshold!=null&&(n.touchThreshold=mathMax$b(0,s.touchThreshold)),n.negativeSize=!1,l&&(n.minTv.set(1/0,1/0),n.maxTv.set(0,0),n.useDir=!1,s&&s.direction!=null&&(n.useDir=!0,n.dirMinTv.copy(n.minTv),r.copy(n.minTv),a=s.direction,n.bidirectional=s.bidirectional==null||!!s.bidirectional,n.bidirectional||t.set(Math.cos(a),Math.sin(a))))},calcDirMTV:function(){var s=n.minTv,l=n.dirMinTv,u=s.y*s.y+s.x*s.x,c=Math.sin(a),f=Math.cos(a),h=c*s.y+f*s.x;if(o(h)){o(s.x)&&o(s.y)&&l.set(0,0);return}if(r.x=u*f/h,r.y=u*c/h,o(r.x)&&o(r.y)){l.set(0,0);return}(n.bidirectional||t.dot(r)>0)&&r.len()<l.len()&&l.copy(r)}};function o(s){return mathAbs$5(s)<1e-10}return n}var SILENT="silent";function makeEventPacket(a,t,r){return{type:a,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Eventful),HoveredResult=function(){function a(t,r){this.x=t,this.y=r}return a}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=function(a){__extends(t,a);function t(r,n,o,s,l){var u=a.call(this)||this;return u._hovered=new HoveredResult(0,0),u.storage=r,u.painter=n,u.painterRoot=s,u._pointerSize=l,o=o||new EmptyProxy,u.proxy=null,u.setHandlerProxy(o),u._draggingMgr=new Draggable(u),u}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(each$f(handlerNames,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,o=r.zrY,s=isOutsideBoundary(this,n,o),l=this._hovered,u=l.target;u&&!u.__zr&&(l=this.findHover(l.x,l.y),u=l.target);var c=this._hovered=s?new HoveredResult(n,o):this.findHover(n,o),f=c.target,h=this.proxy;h.setCursor&&h.setCursor(f?f.cursor:"default"),u&&f!==u&&this.dispatchToElement(l,"mouseout",r),this.dispatchToElement(c,"mousemove",r),f&&f!==u&&this.dispatchToElement(c,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},t.prototype.dispatch=function(r,n){var o=this[r];o&&o.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,o){r=r||{};var s=r.target;if(!(s&&s.silent)){for(var l="on"+n,u=makeEventPacket(n,r,o);s&&(s[l]&&(u.cancelBubble=!!s[l].call(s,u)),s.trigger(n,u),s=s.__hostTarget?s.__hostTarget:s.parent,!u.cancelBubble););u.cancelBubble||(this.trigger(n,u),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(c){typeof c[l]=="function"&&c[l].call(c,u),c.trigger&&c.trigger(n,u)}))}},t.prototype.findHover=function(r,n,o){var s=this.storage.getDisplayList(),l=new HoveredResult(r,n);if(setHoverTarget(s,l,r,n,o),this._pointerSize&&!l.target){for(var u=[],c=this._pointerSize,f=c/2,h=new BoundingRect(r-f,n-f,c,c),v=s.length-1;v>=0;v--){var d=s[v];d!==o&&!d.ignore&&!d.ignoreCoarsePointer&&(!d.parent||!d.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(d.getBoundingRect()),d.transform&&tmpRect$1.applyTransform(d.transform),tmpRect$1.intersect(h)&&u.push(d))}if(u.length)for(var p=4,g=Math.PI/12,y=Math.PI*2,_=0;_<f;_+=p)for(var S=0;S<y;S+=g){var x=r+_*Math.cos(S),T=n+_*Math.sin(S);if(setHoverTarget(u,l,x,T,o),l.target)return l}}return l},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new GestureMgr);var o=this._gestureMgr;n==="start"&&o.clear();var s=o.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&o.clear(),s){var l=s.type;r.gestureEvent=l;var u=new HoveredResult;u.target=s.target,this.dispatchToElement(u,l,s.event)}},t}(Eventful);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(a){Handler.prototype[a]=function(t){var r=t.zrX,n=t.zrY,o=isOutsideBoundary(this,r,n),s,l;if((a!=="mouseup"||!o)&&(s=this.findHover(r,n),l=s.target),a==="mousedown")this._downEl=l,this._downPoint=[t.zrX,t.zrY],this._upEl=l;else if(a==="mouseup")this._upEl=l;else if(a==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(s,a,t)}});function isHover(a,t,r){if(a[a.rectHover?"rectContain":"contain"](t,r)){for(var n=a,o=void 0,s=!1;n;){if(n.ignoreClip&&(s=!0),!s){var l=n.getClipPath();if(l&&!l.contain(t,r))return!1}n.silent&&(o=!0);var u=n.__hostTarget;n=u?n.ignoreHostSilent?null:u:n.parent}return o?SILENT:!0}return!1}function setHoverTarget(a,t,r,n,o){for(var s=a.length-1;s>=0;s--){var l=a[s],u=void 0;if(l!==o&&!l.ignore&&(u=isHover(l,r,n))&&(!t.topTarget&&(t.topTarget=l),u!==SILENT)){t.target=l;break}}}function isOutsideBoundary(a,t,r){var n=a.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(a){for(var t=0;a>=DEFAULT_MIN_MERGE;)t|=a&1,a>>=1;return a+t}function makeAscendingRun(a,t,r,n){var o=t+1;if(o===r)return 1;if(n(a[o++],a[t])<0){for(;o<r&&n(a[o],a[o-1])<0;)o++;reverseRun(a,t,o)}else for(;o<r&&n(a[o],a[o-1])>=0;)o++;return o-t}function reverseRun(a,t,r){for(r--;t<r;){var n=a[t];a[t++]=a[r],a[r--]=n}}function binaryInsertionSort(a,t,r,n,o){for(n===t&&n++;n<r;n++){for(var s=a[n],l=t,u=n,c;l<u;)c=l+u>>>1,o(s,a[c])<0?u=c:l=c+1;var f=n-l;switch(f){case 3:a[l+3]=a[l+2];case 2:a[l+2]=a[l+1];case 1:a[l+1]=a[l];break;default:for(;f>0;)a[l+f]=a[l+f-1],f--}a[l]=s}}function gallopLeft(a,t,r,n,o,s){var l=0,u=0,c=1;if(s(a,t[r+o])>0){for(u=n-o;c<u&&s(a,t[r+o+c])>0;)l=c,c=(c<<1)+1,c<=0&&(c=u);c>u&&(c=u),l+=o,c+=o}else{for(u=o+1;c<u&&s(a,t[r+o-c])<=0;)l=c,c=(c<<1)+1,c<=0&&(c=u);c>u&&(c=u);var f=l;l=o-c,c=o-f}for(l++;l<c;){var h=l+(c-l>>>1);s(a,t[r+h])>0?l=h+1:c=h}return c}function gallopRight(a,t,r,n,o,s){var l=0,u=0,c=1;if(s(a,t[r+o])<0){for(u=o+1;c<u&&s(a,t[r+o-c])<0;)l=c,c=(c<<1)+1,c<=0&&(c=u);c>u&&(c=u);var f=l;l=o-c,c=o-f}else{for(u=n-o;c<u&&s(a,t[r+o+c])>=0;)l=c,c=(c<<1)+1,c<=0&&(c=u);c>u&&(c=u),l+=o,c+=o}for(l++;l<c;){var h=l+(c-l>>>1);s(a,t[r+h])<0?c=h:l=h+1}return c}function TimSort(a,t){var r=DEFAULT_MIN_GALLOPING,n,o,s=0,l=[];n=[],o=[];function u(p,g){n[s]=p,o[s]=g,s+=1}function c(){for(;s>1;){var p=s-2;if(p>=1&&o[p-1]<=o[p]+o[p+1]||p>=2&&o[p-2]<=o[p]+o[p-1])o[p-1]<o[p+1]&&p--;else if(o[p]>o[p+1])break;h(p)}}function f(){for(;s>1;){var p=s-2;p>0&&o[p-1]<o[p+1]&&p--,h(p)}}function h(p){var g=n[p],y=o[p],_=n[p+1],S=o[p+1];o[p]=y+S,p===s-3&&(n[p+1]=n[p+2],o[p+1]=o[p+2]),s--;var x=gallopRight(a[_],a,g,y,0,t);g+=x,y-=x,y!==0&&(S=gallopLeft(a[g+y-1],a,_,S,S-1,t),S!==0&&(y<=S?v(g,y,_,S):d(g,y,_,S)))}function v(p,g,y,_){var S=0;for(S=0;S<g;S++)l[S]=a[p+S];var x=0,T=y,b=p;if(a[b++]=a[T++],--_===0){for(S=0;S<g;S++)a[b+S]=l[x+S];return}if(g===1){for(S=0;S<_;S++)a[b+S]=a[T+S];a[b+_]=l[x];return}for(var C=r,w,M,P;;){w=0,M=0,P=!1;do if(t(a[T],l[x])<0){if(a[b++]=a[T++],M++,w=0,--_===0){P=!0;break}}else if(a[b++]=l[x++],w++,M=0,--g===1){P=!0;break}while((w|M)<C);if(P)break;do{if(w=gallopRight(a[T],l,x,g,0,t),w!==0){for(S=0;S<w;S++)a[b+S]=l[x+S];if(b+=w,x+=w,g-=w,g<=1){P=!0;break}}if(a[b++]=a[T++],--_===0){P=!0;break}if(M=gallopLeft(l[x],a,T,_,0,t),M!==0){for(S=0;S<M;S++)a[b+S]=a[T+S];if(b+=M,T+=M,_-=M,_===0){P=!0;break}}if(a[b++]=l[x++],--g===1){P=!0;break}C--}while(w>=DEFAULT_MIN_GALLOPING||M>=DEFAULT_MIN_GALLOPING);if(P)break;C<0&&(C=0),C+=2}if(r=C,r<1&&(r=1),g===1){for(S=0;S<_;S++)a[b+S]=a[T+S];a[b+_]=l[x]}else{if(g===0)throw new Error;for(S=0;S<g;S++)a[b+S]=l[x+S]}}function d(p,g,y,_){var S=0;for(S=0;S<_;S++)l[S]=a[y+S];var x=p+g-1,T=_-1,b=y+_-1,C=0,w=0;if(a[b--]=a[x--],--g===0){for(C=b-(_-1),S=0;S<_;S++)a[C+S]=l[S];return}if(_===1){for(b-=g,x-=g,w=b+1,C=x+1,S=g-1;S>=0;S--)a[w+S]=a[C+S];a[b]=l[T];return}for(var M=r;;){var P=0,L=0,E=!1;do if(t(l[T],a[x])<0){if(a[b--]=a[x--],P++,L=0,--g===0){E=!0;break}}else if(a[b--]=l[T--],L++,P=0,--_===1){E=!0;break}while((P|L)<M);if(E)break;do{if(P=g-gallopRight(l[T],a,p,g,g-1,t),P!==0){for(b-=P,x-=P,g-=P,w=b+1,C=x+1,S=P-1;S>=0;S--)a[w+S]=a[C+S];if(g===0){E=!0;break}}if(a[b--]=l[T--],--_===1){E=!0;break}if(L=_-gallopLeft(a[x],l,0,_,_-1,t),L!==0){for(b-=L,T-=L,_-=L,w=b+1,C=T+1,S=0;S<L;S++)a[w+S]=l[C+S];if(_<=1){E=!0;break}}if(a[b--]=a[x--],--g===0){E=!0;break}M--}while(P>=DEFAULT_MIN_GALLOPING||L>=DEFAULT_MIN_GALLOPING);if(E)break;M<0&&(M=0),M+=2}if(r=M,r<1&&(r=1),_===1){for(b-=g,x-=g,w=b+1,C=x+1,S=g-1;S>=0;S--)a[w+S]=a[C+S];a[b]=l[T]}else{if(_===0)throw new Error;for(C=b-(_-1),S=0;S<_;S++)a[C+S]=l[S]}}return{mergeRuns:c,forceMergeRuns:f,pushRun:u}}function sort$2(a,t,r,n){r||(r=0),n||(n=a.length);var o=n-r;if(!(o<2)){var s=0;if(o<DEFAULT_MIN_MERGE){s=makeAscendingRun(a,r,n,t),binaryInsertionSort(a,r,n,r+s,t);return}var l=TimSort(a,t),u=minRunLength(o);do{if(s=makeAscendingRun(a,r,n,t),s<u){var c=o;c>u&&(c=u),binaryInsertionSort(a,r,r+c,r+s,t),s=c}l.pushRun(r,s),l.mergeRuns(),o-=s,r+=s}while(o!==0);l.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(a,t){return a.zlevel===t.zlevel?a.z===t.z?a.z2-t.z2:a.z-t.z:a.zlevel-t.zlevel}var Storage=function(){function a(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return a.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},a.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},a.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,o=0,s=r.length;o<s;o++)this._updateAndAddDisplayable(r[o],null,t);n.length=this._displayListLen,sort$2(n,shapeCompareFunc)},a.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var o=t.getClipPath(),s=r&&r.length,l=0,u=t.__clipPaths;if(!t.ignoreClip&&(s||o)){if(u||(u=t.__clipPaths=[]),s)for(var c=0;c<r.length;c++)u[l++]=r[c];for(var f=o,h=t;f;)f.parent=h,f.updateTransform(),u[l++]=f,h=f,f=f.getClipPath()}if(u&&(u.length=l),t.childrenRef){for(var v=t.childrenRef(),d=0;d<v.length;d++){var p=v[d];t.__dirty&&(p.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(p,u,n)}t.__dirty=0}else{var g=t;isNaN(g.z)&&(logInvalidZError(),g.z=0),isNaN(g.z2)&&(logInvalidZError(),g.z2=0),isNaN(g.zlevel)&&(logInvalidZError(),g.zlevel=0),this._displayList[this._displayListLen++]=g}var y=t.getDecalElement&&t.getDecalElement();y&&this._updateAndAddDisplayable(y,u,n);var _=t.getTextGuideLine();_&&this._updateAndAddDisplayable(_,u,n);var S=t.getTextContent();S&&this._updateAndAddDisplayable(S,u,n)}},a.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},a.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var o=indexOf(this._roots,t);o>=0&&this._roots.splice(o,1)},a.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},a.prototype.getRoots=function(){return this._roots},a.prototype.dispose=function(){this._displayList=null,this._roots=null},a}(),requestAnimationFrame;requestAnimationFrame=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(a){return setTimeout(a,16)};var easingFuncs={linear:function(a){return a},quadraticIn:function(a){return a*a},quadraticOut:function(a){return a*(2-a)},quadraticInOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)},cubicIn:function(a){return a*a*a},cubicOut:function(a){return--a*a*a+1},cubicInOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},quarticIn:function(a){return a*a*a*a},quarticOut:function(a){return 1- --a*a*a*a},quarticInOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},quinticIn:function(a){return a*a*a*a*a},quinticOut:function(a){return--a*a*a*a*a+1},quinticInOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},sinusoidalIn:function(a){return 1-Math.cos(a*Math.PI/2)},sinusoidalOut:function(a){return Math.sin(a*Math.PI/2)},sinusoidalInOut:function(a){return .5*(1-Math.cos(Math.PI*a))},exponentialIn:function(a){return a===0?0:Math.pow(1024,a-1)},exponentialOut:function(a){return a===1?1:1-Math.pow(2,-10*a)},exponentialInOut:function(a){return a===0?0:a===1?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)},circularIn:function(a){return 1-Math.sqrt(1-a*a)},circularOut:function(a){return Math.sqrt(1- --a*a)},circularInOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},elasticIn:function(a){var t,r=.1,n=.4;return a===0?0:a===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(a-=1))*Math.sin((a-t)*(2*Math.PI)/n)))},elasticOut:function(a){var t,r=.1,n=.4;return a===0?0:a===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*a)*Math.sin((a-t)*(2*Math.PI)/n)+1)},elasticInOut:function(a){var t,r=.1,n=.4;return a===0?0:a===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(a*=2)<1?-.5*(r*Math.pow(2,10*(a-=1))*Math.sin((a-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(a-=1))*Math.sin((a-t)*(2*Math.PI)/n)*.5+1)},backIn:function(a){var t=1.70158;return a*a*((t+1)*a-t)},backOut:function(a){var t=1.70158;return--a*a*((t+1)*a+t)+1},backInOut:function(a){var t=2.5949095;return(a*=2)<1?.5*(a*a*((t+1)*a-t)):.5*((a-=2)*a*((t+1)*a+t)+2)},bounceIn:function(a){return 1-easingFuncs.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bounceInOut:function(a){return a<.5?easingFuncs.bounceIn(a*2)*.5:easingFuncs.bounceOut(a*2-1)*.5+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(a){return a>-EPSILON$4&&a<EPSILON$4}function isNotAroundZero$1(a){return a>EPSILON$4||a<-EPSILON$4}function cubicAt(a,t,r,n,o){var s=1-o;return s*s*(s*a+3*o*t)+o*o*(o*n+3*s*r)}function cubicDerivativeAt(a,t,r,n,o){var s=1-o;return 3*(((t-a)*s+2*(r-t)*o)*s+(n-r)*o*o)}function cubicRootAt(a,t,r,n,o,s){var l=n+3*(t-r)-a,u=3*(r-t*2+a),c=3*(t-a),f=a-o,h=u*u-3*l*c,v=u*c-9*l*f,d=c*c-3*u*f,p=0;if(isAroundZero$1(h)&&isAroundZero$1(v))if(isAroundZero$1(u))s[0]=0;else{var g=-c/u;g>=0&&g<=1&&(s[p++]=g)}else{var y=v*v-4*h*d;if(isAroundZero$1(y)){var _=v/h,g=-u/l+_,S=-_/2;g>=0&&g<=1&&(s[p++]=g),S>=0&&S<=1&&(s[p++]=S)}else if(y>0){var x=mathSqrt$3(y),T=h*u+1.5*l*(-v+x),b=h*u+1.5*l*(-v-x);T<0?T=-mathPow$2(-T,ONE_THIRD):T=mathPow$2(T,ONE_THIRD),b<0?b=-mathPow$2(-b,ONE_THIRD):b=mathPow$2(b,ONE_THIRD);var g=(-u-(T+b))/(3*l);g>=0&&g<=1&&(s[p++]=g)}else{var C=(2*h*u-3*l*v)/(2*mathSqrt$3(h*h*h)),w=Math.acos(C)/3,M=mathSqrt$3(h),P=Math.cos(w),g=(-u-2*M*P)/(3*l),S=(-u+M*(P+THREE_SQRT*Math.sin(w)))/(3*l),L=(-u+M*(P-THREE_SQRT*Math.sin(w)))/(3*l);g>=0&&g<=1&&(s[p++]=g),S>=0&&S<=1&&(s[p++]=S),L>=0&&L<=1&&(s[p++]=L)}}return p}function cubicExtrema(a,t,r,n,o){var s=6*r-12*t+6*a,l=9*t+3*n-3*a-9*r,u=3*t-3*a,c=0;if(isAroundZero$1(l)){if(isNotAroundZero$1(s)){var f=-u/s;f>=0&&f<=1&&(o[c++]=f)}}else{var h=s*s-4*l*u;if(isAroundZero$1(h))o[0]=-s/(2*l);else if(h>0){var v=mathSqrt$3(h),f=(-s+v)/(2*l),d=(-s-v)/(2*l);f>=0&&f<=1&&(o[c++]=f),d>=0&&d<=1&&(o[c++]=d)}}return c}function cubicSubdivide(a,t,r,n,o,s){var l=(t-a)*o+a,u=(r-t)*o+t,c=(n-r)*o+r,f=(u-l)*o+l,h=(c-u)*o+u,v=(h-f)*o+f;s[0]=a,s[1]=l,s[2]=f,s[3]=v,s[4]=v,s[5]=h,s[6]=c,s[7]=n}function cubicProjectPoint(a,t,r,n,o,s,l,u,c,f,h){var v,d=.005,p=1/0,g,y,_,S;_v0[0]=c,_v0[1]=f;for(var x=0;x<1;x+=.05)_v1[0]=cubicAt(a,r,o,l,x),_v1[1]=cubicAt(t,n,s,u,x),_=distSquare(_v0,_v1),_<p&&(v=x,p=_);p=1/0;for(var T=0;T<32&&!(d<EPSILON_NUMERIC);T++)g=v-d,y=v+d,_v1[0]=cubicAt(a,r,o,l,g),_v1[1]=cubicAt(t,n,s,u,g),_=distSquare(_v1,_v0),g>=0&&_<p?(v=g,p=_):(_v2[0]=cubicAt(a,r,o,l,y),_v2[1]=cubicAt(t,n,s,u,y),S=distSquare(_v2,_v0),y<=1&&S<p?(v=y,p=S):d*=.5);return h&&(h[0]=cubicAt(a,r,o,l,v),h[1]=cubicAt(t,n,s,u,v)),mathSqrt$3(p)}function cubicLength(a,t,r,n,o,s,l,u,c){for(var f=a,h=t,v=0,d=1/c,p=1;p<=c;p++){var g=p*d,y=cubicAt(a,r,o,l,g),_=cubicAt(t,n,s,u,g),S=y-f,x=_-h;v+=Math.sqrt(S*S+x*x),f=y,h=_}return v}function quadraticAt$1(a,t,r,n){var o=1-n;return o*(o*a+2*n*t)+n*n*r}function quadraticDerivativeAt(a,t,r,n){return 2*((1-n)*(t-a)+n*(r-t))}function quadraticRootAt(a,t,r,n,o){var s=a-2*t+r,l=2*(t-a),u=a-n,c=0;if(isAroundZero$1(s)){if(isNotAroundZero$1(l)){var f=-u/l;f>=0&&f<=1&&(o[c++]=f)}}else{var h=l*l-4*s*u;if(isAroundZero$1(h)){var f=-l/(2*s);f>=0&&f<=1&&(o[c++]=f)}else if(h>0){var v=mathSqrt$3(h),f=(-l+v)/(2*s),d=(-l-v)/(2*s);f>=0&&f<=1&&(o[c++]=f),d>=0&&d<=1&&(o[c++]=d)}}return c}function quadraticExtremum(a,t,r){var n=a+r-2*t;return n===0?.5:(a-t)/n}function quadraticSubdivide(a,t,r,n,o){var s=(t-a)*n+a,l=(r-t)*n+t,u=(l-s)*n+s;o[0]=a,o[1]=s,o[2]=u,o[3]=u,o[4]=l,o[5]=r}function quadraticProjectPoint(a,t,r,n,o,s,l,u,c){var f,h=.005,v=1/0;_v0[0]=l,_v0[1]=u;for(var d=0;d<1;d+=.05){_v1[0]=quadraticAt$1(a,r,o,d),_v1[1]=quadraticAt$1(t,n,s,d);var p=distSquare(_v0,_v1);p<v&&(f=d,v=p)}v=1/0;for(var g=0;g<32&&!(h<EPSILON_NUMERIC);g++){var y=f-h,_=f+h;_v1[0]=quadraticAt$1(a,r,o,y),_v1[1]=quadraticAt$1(t,n,s,y);var p=distSquare(_v1,_v0);if(y>=0&&p<v)f=y,v=p;else{_v2[0]=quadraticAt$1(a,r,o,_),_v2[1]=quadraticAt$1(t,n,s,_);var S=distSquare(_v2,_v0);_<=1&&S<v?(f=_,v=S):h*=.5}}return c&&(c[0]=quadraticAt$1(a,r,o,f),c[1]=quadraticAt$1(t,n,s,f)),mathSqrt$3(v)}function quadraticLength(a,t,r,n,o,s,l){for(var u=a,c=t,f=0,h=1/l,v=1;v<=l;v++){var d=v*h,p=quadraticAt$1(a,r,o,d),g=quadraticAt$1(t,n,s,d),y=p-u,_=g-c;f+=Math.sqrt(y*y+_*_),u=p,c=g}return f}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(a){var t=a&&regexp.exec(a);if(t){var r=t[1].split(","),n=+trim$1(r[0]),o=+trim$1(r[1]),s=+trim$1(r[2]),l=+trim$1(r[3]);if(isNaN(n+o+s+l))return;var u=[];return function(c){return c<=0?0:c>=1?1:cubicRootAt(0,n,s,1,c,u)&&cubicAt(0,o,l,1,u[0])}}}var Clip=function(){function a(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||noop,this.ondestroy=t.ondestroy||noop,this.onrestart=t.onrestart||noop,t.easing&&this.setEasing(t.easing)}return a.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,o=t-this._startTime-this._pausedTime,s=o/n;s<0&&(s=0),s=Math.min(s,1);var l=this.easingFunc,u=l?l(s):s;if(this.onframe(u),s===1)if(this.loop){var c=o%n;this._startTime=t-c,this._pausedTime=0,this.onrestart()}else return!0;return!1},a.prototype.pause=function(){this._paused=!0},a.prototype.resume=function(){this._paused=!1},a.prototype.setEasing=function(t){this.easing=t,this.easingFunc=isFunction(t)?t:easingFuncs[t]||createCubicEasingFunc(t)},a}(),Entry=function(){function a(t){this.value=t}return a}(),LinkedList=function(){function a(){this._len=0}return a.prototype.insert=function(t){var r=new Entry(t);return this.insertEntry(r),r},a.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},a.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},a.prototype.len=function(){return this._len},a.prototype.clear=function(){this.head=this.tail=null,this._len=0},a}(),LRU=function(){function a(t){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=t}return a.prototype.put=function(t,r){var n=this._list,o=this._map,s=null;if(o[t]==null){var l=n.len(),u=this._lastRemovedEntry;if(l>=this._maxSize&&l>0){var c=n.head;n.remove(c),delete o[c.key],s=c.value,this._lastRemovedEntry=c}u?u.value=r:u=new Entry(r),u.key=t,n.insertEntry(u),o[t]=u}return s},a.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},a.prototype.clear=function(){this._list.clear(),this._map={}},a.prototype.len=function(){return this._list.len()},a}(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(a){return a=Math.round(a),a<0?0:a>255?255:a}function clampCssAngle(a){return a=Math.round(a),a<0?0:a>360?360:a}function clampCssFloat(a){return a<0?0:a>1?1:a}function parseCssInt(a){var t=a;return t.length&&t.charAt(t.length-1)==="%"?clampCssByte(parseFloat(t)/100*255):clampCssByte(parseInt(t,10))}function parseCssFloat(a){var t=a;return t.length&&t.charAt(t.length-1)==="%"?clampCssFloat(parseFloat(t)/100):clampCssFloat(parseFloat(t))}function cssHueToRgb(a,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?a+(t-a)*r*6:r*2<1?t:r*3<2?a+(t-a)*(2/3-r)*6:a}function lerpNumber(a,t,r){return a+(t-a)*r}function setRgba(a,t,r,n,o){return a[0]=t,a[1]=r,a[2]=n,a[3]=o,a}function copyRgba(a,t){return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(a,t){lastRemovedArr&&copyRgba(lastRemovedArr,t),lastRemovedArr=colorCache.put(a,lastRemovedArr||t.slice())}function parse(a,t){if(a){t=t||[];var r=colorCache.get(a);if(r)return copyRgba(t,r);a=a+"";var n=a.replace(/ /g,"").toLowerCase();if(n in kCSSColorTable)return copyRgba(t,kCSSColorTable[n]),putToCache(a,t),t;var o=n.length;if(n.charAt(0)==="#"){if(o===4||o===5){var s=parseInt(n.slice(1,4),16);if(!(s>=0&&s<=4095)){setRgba(t,0,0,0,1);return}return setRgba(t,(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,o===5?parseInt(n.slice(4),16)/15:1),putToCache(a,t),t}else if(o===7||o===9){var s=parseInt(n.slice(1,7),16);if(!(s>=0&&s<=16777215)){setRgba(t,0,0,0,1);return}return setRgba(t,(s&16711680)>>16,(s&65280)>>8,s&255,o===9?parseInt(n.slice(7),16)/255:1),putToCache(a,t),t}return}var l=n.indexOf("("),u=n.indexOf(")");if(l!==-1&&u+1===o){var c=n.substr(0,l),f=n.substr(l+1,u-(l+1)).split(","),h=1;switch(c){case"rgba":if(f.length!==4)return f.length===3?setRgba(t,+f[0],+f[1],+f[2],1):setRgba(t,0,0,0,1);h=parseCssFloat(f.pop());case"rgb":if(f.length>=3)return setRgba(t,parseCssInt(f[0]),parseCssInt(f[1]),parseCssInt(f[2]),f.length===3?h:parseCssFloat(f[3])),putToCache(a,t),t;setRgba(t,0,0,0,1);return;case"hsla":if(f.length!==4){setRgba(t,0,0,0,1);return}return f[3]=parseCssFloat(f[3]),hsla2rgba(f,t),putToCache(a,t),t;case"hsl":if(f.length!==3){setRgba(t,0,0,0,1);return}return hsla2rgba(f,t),putToCache(a,t),t;default:return}}setRgba(t,0,0,0,1)}}function hsla2rgba(a,t){var r=(parseFloat(a[0])%360+360)%360/360,n=parseCssFloat(a[1]),o=parseCssFloat(a[2]),s=o<=.5?o*(n+1):o+n-o*n,l=o*2-s;return t=t||[],setRgba(t,clampCssByte(cssHueToRgb(l,s,r+1/3)*255),clampCssByte(cssHueToRgb(l,s,r)*255),clampCssByte(cssHueToRgb(l,s,r-1/3)*255),1),a.length===4&&(t[3]=a[3]),t}function rgba2hsla(a){if(a){var t=a[0]/255,r=a[1]/255,n=a[2]/255,o=Math.min(t,r,n),s=Math.max(t,r,n),l=s-o,u=(s+o)/2,c,f;if(l===0)c=0,f=0;else{u<.5?f=l/(s+o):f=l/(2-s-o);var h=((s-t)/6+l/2)/l,v=((s-r)/6+l/2)/l,d=((s-n)/6+l/2)/l;t===s?c=d-v:r===s?c=1/3+h-d:n===s&&(c=2/3+v-h),c<0&&(c+=1),c>1&&(c-=1)}var p=[c*360,f,u];return a[3]!=null&&p.push(a[3]),p}}function lift(a,t){var r=parse(a);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return stringify(r,r.length===4?"rgba":"rgb")}}function fastLerp(a,t,r){if(!(!(t&&t.length)||!(a>=0&&a<=1))){r=r||[];var n=a*(t.length-1),o=Math.floor(n),s=Math.ceil(n),l=t[o],u=t[s],c=n-o;return r[0]=clampCssByte(lerpNumber(l[0],u[0],c)),r[1]=clampCssByte(lerpNumber(l[1],u[1],c)),r[2]=clampCssByte(lerpNumber(l[2],u[2],c)),r[3]=clampCssFloat(lerpNumber(l[3],u[3],c)),r}}function lerp(a,t,r){if(!(!(t&&t.length)||!(a>=0&&a<=1))){var n=a*(t.length-1),o=Math.floor(n),s=Math.ceil(n),l=parse(t[o]),u=parse(t[s]),c=n-o,f=stringify([clampCssByte(lerpNumber(l[0],u[0],c)),clampCssByte(lerpNumber(l[1],u[1],c)),clampCssByte(lerpNumber(l[2],u[2],c)),clampCssFloat(lerpNumber(l[3],u[3],c))],"rgba");return r?{color:f,leftIndex:o,rightIndex:s,value:n}:f}}function modifyHSL(a,t,r,n){var o=parse(a);if(a)return o=rgba2hsla(o),t!=null&&(o[0]=clampCssAngle(isFunction(t)?t(o[0]):t)),r!=null&&(o[1]=parseCssFloat(isFunction(r)?r(o[1]):r)),n!=null&&(o[2]=parseCssFloat(isFunction(n)?n(o[2]):n)),stringify(hsla2rgba(o),"rgba")}function modifyAlpha(a,t){var r=parse(a);if(r&&t!=null)return r[3]=clampCssFloat(t),stringify(r,"rgba")}function stringify(a,t){if(!(!a||!a.length)){var r=a[0]+","+a[1]+","+a[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+a[3]),t+"("+r+")"}}function lum(a,t){var r=parse(a);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}var liftedColorCache=new LRU(100);function liftColor(a){if(isString(a)){var t=liftedColorCache.get(a);return t||(t=lift(a,-.1),liftedColorCache.put(a,t)),t}else if(isGradientObject(a)){var r=extend({},a);return r.colorStops=map$1(a.colorStops,function(n){return{offset:n.offset,color:lift(n.color,-.1)}}),r}return a}var mathRound$1=Math.round;function normalizeColor(a){var t;if(!a||a==="transparent")a="none";else if(typeof a=="string"&&a.indexOf("rgba")>-1){var r=parse(a);r&&(a="rgb("+r[0]+","+r[1]+","+r[2]+")",t=r[3])}return{color:a,opacity:t??1}}var EPSILON$3=1e-4;function isAroundZero(a){return a<EPSILON$3&&a>-EPSILON$3}function round3(a){return mathRound$1(a*1e3)/1e3}function round4(a){return mathRound$1(a*1e4)/1e4}function getMatrixStr(a){return"matrix("+round3(a[0])+","+round3(a[1])+","+round3(a[2])+","+round3(a[3])+","+round4(a[4])+","+round4(a[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(a,t,r){return r==="top"?a+=t/2:r==="bottom"&&(a-=t/2),a}function hasShadow(a){return a&&(a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY)}function getShadowKey(a){var t=a.style,r=a.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function isImagePattern(a){return a&&!!a.image}function isSVGPattern(a){return a&&!!a.svgElement}function isPattern(a){return isImagePattern(a)||isSVGPattern(a)}function isLinearGradient(a){return a.type==="linear"}function isRadialGradient(a){return a.type==="radial"}function isGradient(a){return a&&(a.type==="linear"||a.type==="radial")}function getIdURL(a){return"url(#"+a+")"}function getPathPrecision(a){var t=a.getGlobalScale(),r=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function getSRTTransformString(a){var t=a.x||0,r=a.y||0,n=(a.rotation||0)*RADIAN_TO_DEGREE,o=retrieve2(a.scaleX,1),s=retrieve2(a.scaleY,1),l=a.skewX||0,u=a.skewY||0,c=[];return(t||r)&&c.push("translate("+t+"px,"+r+"px)"),n&&c.push("rotate("+n+")"),(o!==1||s!==1)&&c.push("scale("+o+","+s+")"),(l||u)&&c.push("skew("+mathRound$1(l*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(u*RADIAN_TO_DEGREE)+"deg)"),c.join(" ")}var encodeBase64=function(){return env.hasGlobalWindow&&isFunction(window.btoa)?function(a){return window.btoa(unescape(encodeURIComponent(a)))}:typeof Buffer<"u"?function(a){return Buffer.from(a).toString("base64")}:function(a){return null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(a,t,r){return(t-a)*r+a}function interpolate1DArray(a,t,r,n){for(var o=t.length,s=0;s<o;s++)a[s]=interpolateNumber$1(t[s],r[s],n);return a}function interpolate2DArray(a,t,r,n){for(var o=t.length,s=o&&t[0].length,l=0;l<o;l++){a[l]||(a[l]=[]);for(var u=0;u<s;u++)a[l][u]=interpolateNumber$1(t[l][u],r[l][u],n)}return a}function add1DArray(a,t,r,n){for(var o=t.length,s=0;s<o;s++)a[s]=t[s]+r[s]*n;return a}function add2DArray(a,t,r,n){for(var o=t.length,s=o&&t[0].length,l=0;l<o;l++){a[l]||(a[l]=[]);for(var u=0;u<s;u++)a[l][u]=t[l][u]+r[l][u]*n}return a}function fillColorStops(a,t){for(var r=a.length,n=t.length,o=r>n?t:a,s=Math.min(r,n),l=o[s-1]||{color:[0,0,0,0],offset:0},u=s;u<Math.max(r,n);u++)o.push({offset:l.offset,color:l.color.slice()})}function fillArray(a,t,r){var n=a,o=t;if(!(!n.push||!o.push)){var s=n.length,l=o.length;if(s!==l){var u=s>l;if(u)n.length=l;else for(var c=s;c<l;c++)n.push(r===1?o[c]:arraySlice.call(o[c]))}for(var f=n[0]&&n[0].length,c=0;c<n.length;c++)if(r===1)isNaN(n[c])&&(n[c]=o[c]);else for(var h=0;h<f;h++)isNaN(n[c][h])&&(n[c][h]=o[c][h])}}function cloneValue(a){if(isArrayLike(a)){var t=a.length;if(isArrayLike(a[0])){for(var r=[],n=0;n<t;n++)r.push(arraySlice.call(a[n]));return r}return arraySlice.call(a)}return a}function rgba2String(a){return a[0]=Math.floor(a[0])||0,a[1]=Math.floor(a[1])||0,a[2]=Math.floor(a[2])||0,a[3]=a[3]==null?1:a[3],"rgba("+a.join(",")+")"}function guessArrayDim(a){return isArrayLike(a&&a[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(a){return a===VALUE_TYPE_LINEAR_GRADIENT||a===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(a){return a===VALUE_TYPE_1D_ARRAY||a===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function a(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return a.prototype.isFinished=function(){return this._finished},a.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},a.prototype.needsAnimate=function(){return this.keyframes.length>=1},a.prototype.getAdditiveTrack=function(){return this._additiveTrack},a.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var o=this.keyframes,s=o.length,l=!1,u=VALUE_TYPE_UNKOWN,c=r;if(isArrayLike(r)){var f=guessArrayDim(r);u=f,(f===1&&!isNumber(r[0])||f===2&&!isNumber(r[0][0]))&&(l=!0)}else if(isNumber(r)&&!eqNaN(r))u=VALUE_TYPE_NUMBER;else if(isString(r))if(!isNaN(+r))u=VALUE_TYPE_NUMBER;else{var h=parse(r);h&&(c=h,u=VALUE_TYPE_COLOR)}else if(isGradientObject(r)){var v=extend({},c);v.colorStops=map$1(r.colorStops,function(p){return{offset:p.offset,color:parse(p.color)}}),isLinearGradient(r)?u=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(r)&&(u=VALUE_TYPE_RADIAL_GRADIENT),c=v}s===0?this.valType=u:(u!==this.valType||u===VALUE_TYPE_UNKOWN)&&(l=!0),this.discrete=this.discrete||l;var d={time:t,value:c,rawValue:r,percent:0};return n&&(d.easing=n,d.easingFunc=isFunction(n)?n:easingFuncs[n]||createCubicEasingFunc(n)),o.push(d),d},a.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(y,_){return y.time-_.time});for(var o=this.valType,s=n.length,l=n[s-1],u=this.discrete,c=isArrayValueType(o),f=isGradientValueType(o),h=0;h<s;h++){var v=n[h],d=v.value,p=l.value;v.percent=v.time/t,u||(c&&h!==s-1?fillArray(d,p,o):f&&fillColorStops(d.colorStops,p.colorStops))}if(!u&&o!==VALUE_TYPE_RADIAL_GRADIENT&&r&&this.needsAnimate()&&r.needsAnimate()&&o===r.valType&&!r._finished){this._additiveTrack=r;for(var g=n[0].value,h=0;h<s;h++)o===VALUE_TYPE_NUMBER?n[h].additiveValue=n[h].value-g:o===VALUE_TYPE_COLOR?n[h].additiveValue=add1DArray([],n[h].value,g,-1):isArrayValueType(o)&&(n[h].additiveValue=o===VALUE_TYPE_1D_ARRAY?add1DArray([],n[h].value,g,-1):add2DArray([],n[h].value,g,-1))}},a.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,o=n?"additiveValue":"value",s=this.valType,l=this.keyframes,u=l.length,c=this.propName,f=s===VALUE_TYPE_COLOR,h,v=this._lastFr,d=Math.min,p,g;if(u===1)p=g=l[0];else{if(r<0)h=0;else if(r<this._lastFrP){var y=d(v+1,u-1);for(h=y;h>=0&&!(l[h].percent<=r);h--);h=d(h,u-2)}else{for(h=v;h<u&&!(l[h].percent>r);h++);h=d(h-1,u-2)}g=l[h+1],p=l[h]}if(p&&g){this._lastFr=h,this._lastFrP=r;var _=g.percent-p.percent,S=_===0?1:d((r-p.percent)/_,1);g.easingFunc&&(S=g.easingFunc(S));var x=n?this._additiveValue:f?tmpRgba:t[c];if((isArrayValueType(s)||f)&&!x&&(x=this._additiveValue=[]),this.discrete)t[c]=S<1?p.rawValue:g.rawValue;else if(isArrayValueType(s))s===VALUE_TYPE_1D_ARRAY?interpolate1DArray(x,p[o],g[o],S):interpolate2DArray(x,p[o],g[o],S);else if(isGradientValueType(s)){var T=p[o],b=g[o],C=s===VALUE_TYPE_LINEAR_GRADIENT;t[c]={type:C?"linear":"radial",x:interpolateNumber$1(T.x,b.x,S),y:interpolateNumber$1(T.y,b.y,S),colorStops:map$1(T.colorStops,function(M,P){var L=b.colorStops[P];return{offset:interpolateNumber$1(M.offset,L.offset,S),color:rgba2String(interpolate1DArray([],M.color,L.color,S))}}),global:b.global},C?(t[c].x2=interpolateNumber$1(T.x2,b.x2,S),t[c].y2=interpolateNumber$1(T.y2,b.y2,S)):t[c].r=interpolateNumber$1(T.r,b.r,S)}else if(f)interpolate1DArray(x,p[o],g[o],S),n||(t[c]=rgba2String(x));else{var w=interpolateNumber$1(p[o],g[o],S);n?this._additiveValue=w:t[c]=w}n&&this._addToTarget(t)}}},a.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,o=this._additiveValue;r===VALUE_TYPE_NUMBER?t[n]=t[n]+o:r===VALUE_TYPE_COLOR?(parse(t[n],tmpRgba),add1DArray(tmpRgba,tmpRgba,o,1),t[n]=rgba2String(tmpRgba)):r===VALUE_TYPE_1D_ARRAY?add1DArray(t[n],t[n],o,1):r===VALUE_TYPE_2D_ARRAY&&add2DArray(t[n],t[n],o,1)},a}(),Animator=function(){function a(t,r,n,o){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&o){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=o,this._allowDiscrete=n}return a.prototype.getMaxTime=function(){return this._maxTime},a.prototype.getDelay=function(){return this._delay},a.prototype.getLoop=function(){return this._loop},a.prototype.getTarget=function(){return this._target},a.prototype.changeTarget=function(t){this._target=t},a.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,keys(r),n)},a.prototype.whenWithKeys=function(t,r,n,o){for(var s=this._tracks,l=0;l<n.length;l++){var u=n[l],c=s[u];if(!c){c=s[u]=new Track(u);var f=void 0,h=this._getAdditiveTrack(u);if(h){var v=h.keyframes,d=v[v.length-1];f=d&&d.value,h.valType===VALUE_TYPE_COLOR&&f&&(f=rgba2String(f))}else f=this._target[u];if(f==null)continue;t>0&&c.addKeyframe(0,cloneValue(f),o),this._trackKeys.push(u)}c.addKeyframe(t,cloneValue(r[u]),o)}return this._maxTime=Math.max(this._maxTime,t),this},a.prototype.pause=function(){this._clip.pause(),this._paused=!0},a.prototype.resume=function(){this._clip.resume(),this._paused=!1},a.prototype.isPaused=function(){return!!this._paused},a.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},a.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},a.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},a.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},a.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var o=0;o<n.length;o++){var s=n[o].getTrack(t);s&&(r=s)}return r},a.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],o=this._maxTime||0,s=0;s<this._trackKeys.length;s++){var l=this._trackKeys[s],u=this._tracks[l],c=this._getAdditiveTrack(l),f=u.keyframes,h=f.length;if(u.prepare(o,c),u.needsAnimate())if(!this._allowDiscrete&&u.discrete){var v=f[h-1];v&&(r._target[u.propName]=v.rawValue),u.setFinished()}else n.push(u)}if(n.length||this._force){var d=new Clip({life:o,loop:this._loop,delay:this._delay||0,onframe:function(p){r._started=2;var g=r._additiveAnimators;if(g){for(var y=!1,_=0;_<g.length;_++)if(g[_]._clip){y=!0;break}y||(r._additiveAnimators=null)}for(var _=0;_<n.length;_++)n[_].step(r._target,p);var S=r._onframeCbs;if(S)for(var _=0;_<S.length;_++)S[_](r._target,p)},ondestroy:function(){r._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),t&&d.setEasing(t)}else this._doneCallback();return this}},a.prototype.stop=function(t){if(this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},a.prototype.delay=function(t){return this._delay=t,this},a.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},a.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},a.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},a.prototype.getClip=function(){return this._clip},a.prototype.getTrack=function(t){return this._tracks[t]},a.prototype.getTracks=function(){var t=this;return map$1(this._trackKeys,function(r){return t._tracks[r]})},a.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,o=this._trackKeys,s=0;s<t.length;s++){var l=n[t[s]];l&&!l.isFinished()&&(r?l.step(this._target,1):this._started===1&&l.step(this._target,0),l.setFinished())}for(var u=!0,s=0;s<o.length;s++)if(!n[o[s]].isFinished()){u=!1;break}return u&&this._abortedCallback(),u},a.prototype.saveTo=function(t,r,n){if(t){r=r||this._trackKeys;for(var o=0;o<r.length;o++){var s=r[o],l=this._tracks[s];if(!(!l||l.isFinished())){var u=l.keyframes,c=u[n?0:u.length-1];c&&(t[s]=cloneValue(c.rawValue))}}}},a.prototype.__changeFinalValue=function(t,r){r=r||keys(t);for(var n=0;n<r.length;n++){var o=r[n],s=this._tracks[o];if(s){var l=s.keyframes;if(l.length>1){var u=l.pop();s.addKeyframe(u.time,t[o]),s.prepare(this._maxTime,s.getAdditiveTrack())}}}},a}();function getTime(){return new Date().getTime()}var Animation=function(a){__extends(t,a);function t(r){var n=a.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(r.animation){var n=r.prev,o=r.next;n?n.next=o:this._head=o,o?o.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=getTime()-this._pausedTime,o=n-this._time,s=this._head;s;){var l=s.next,u=s.step(n,o);u&&(s.ondestroy(),this.removeClip(s)),s=l}this._time=n,r||(this.trigger("frame",o),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(requestAnimationFrame(n),!r._paused&&r.update())}requestAnimationFrame(n)},t.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var o=new Animator(r,n.loop);return this.addAnimator(o),o},t}(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=function(){var a=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=map$1(a,function(o){var s=o.replace("mouse","pointer");return r.hasOwnProperty(s)?s:o});return{mouse:a,touch:t,pointer:n}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(a){var t=a.pointerType;return t==="pen"||t==="touch"}function setTouchTimer(a){a.touching=!0,a.touchTimer!=null&&(clearTimeout(a.touchTimer),a.touchTimer=null),a.touchTimer=setTimeout(function(){a.touching=!1,a.touchTimer=null},700)}function markTouch(a){a&&(a.zrByTouch=!0)}function normalizeGlobalEvent(a,t){return normalizeEvent(a.dom,new FakeGlobalEvent(a,t),!0)}function isLocalEl(a,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===a.painterRoot);)r=r.parentNode;return n}var FakeGlobalEvent=function(){function a(t,r){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return a}(),localDOMHandlers={mousedown:function(a){a=normalizeEvent(this.dom,a),this.__mayPointerCapture=[a.zrX,a.zrY],this.trigger("mousedown",a)},mousemove:function(a){a=normalizeEvent(this.dom,a);var t=this.__mayPointerCapture;t&&(a.zrX!==t[0]||a.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",a)},mouseup:function(a){a=normalizeEvent(this.dom,a),this.__togglePointerCapture(!1),this.trigger("mouseup",a)},mouseout:function(a){a=normalizeEvent(this.dom,a);var t=a.toElement||a.relatedTarget;isLocalEl(this,t)||(this.__pointerCapturing&&(a.zrEventControl="no_globalout"),this.trigger("mouseout",a))},wheel:function(a){wheelEventSupported=!0,a=normalizeEvent(this.dom,a),this.trigger("mousewheel",a)},mousewheel:function(a){wheelEventSupported||(a=normalizeEvent(this.dom,a),this.trigger("mousewheel",a))},touchstart:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.__lastTouchMoment=new Date,this.handler.processGesture(a,"start"),localDOMHandlers.mousemove.call(this,a),localDOMHandlers.mousedown.call(this,a)},touchmove:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.handler.processGesture(a,"change"),localDOMHandlers.mousemove.call(this,a)},touchend:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.handler.processGesture(a,"end"),localDOMHandlers.mouseup.call(this,a),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,a)},pointerdown:function(a){localDOMHandlers.mousedown.call(this,a)},pointermove:function(a){isPointerFromTouch(a)||localDOMHandlers.mousemove.call(this,a)},pointerup:function(a){localDOMHandlers.mouseup.call(this,a)},pointerout:function(a){isPointerFromTouch(a)||localDOMHandlers.mouseout.call(this,a)}};each$f(["click","dblclick","contextmenu"],function(a){localDOMHandlers[a]=function(t){t=normalizeEvent(this.dom,t),this.trigger(a,t)}});var globalDOMHandlers={pointermove:function(a){isPointerFromTouch(a)||globalDOMHandlers.mousemove.call(this,a)},pointerup:function(a){globalDOMHandlers.mouseup.call(this,a)},mousemove:function(a){this.trigger("mousemove",a)},mouseup:function(a){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",a),t&&(a.zrEventControl="only_globalout",this.trigger("mouseout",a))}};function mountLocalDOMEventListeners(a,t){var r=t.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(n){mountSingleDOMEventListener(t,n,function(o){r[n].call(a,o)})}):(env.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(n){mountSingleDOMEventListener(t,n,function(o){r[n].call(a,o),setTouchTimer(t)})}),each$f(localNativeListenerNames.mouse,function(n){mountSingleDOMEventListener(t,n,function(o){o=getNativeEvent(o),t.touching||r[n].call(a,o)})}))}function mountGlobalDOMEventListeners(a,t){env.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,r):env.touchEventsSupported||each$f(globalNativeListenerNames.mouse,r);function r(n){function o(s){s=getNativeEvent(s),isLocalEl(a,s.target)||(s=normalizeGlobalEvent(a,s),t.domHandlers[n].call(a,s))}mountSingleDOMEventListener(t,n,o,{capture:!0})}}function mountSingleDOMEventListener(a,t,r,n){a.mounted[t]=r,a.listenerOpts[t]=n,addEventListener(a.domTarget,t,r,n)}function unmountDOMEventListeners(a){var t=a.mounted;for(var r in t)t.hasOwnProperty(r)&&removeEventListener(a.domTarget,r,t[r],a.listenerOpts[r]);a.mounted={}}var DOMHandlerScope=function(){function a(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return a}(),HandlerDomProxy=function(a){__extends(t,a);function t(r,n){var o=a.call(this)||this;return o.__pointerCapturing=!1,o.dom=r,o.painterRoot=n,o._localHandlerScope=new DOMHandlerScope(r,localDOMHandlers),globalEventSupported&&(o._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(o,o._localHandlerScope),o}return t.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?mountGlobalDOMEventListeners(this,n):unmountDOMEventListeners(n)}},t}(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(a){return a>EPSILON$2||a<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function a(){}return a.prototype.getLocalTransform=function(t){return a.getLocalTransform(this,t)},a.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},a.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},a.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},a.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},a.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},a.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&(mIdentity(n),this.invTransform=null);return}n=n||create$1(),r?this.getLocalTransform(n):mIdentity(n),t&&(r?mul(n,t,n):copy(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},a.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(scaleTmp);var n=scaleTmp[0]<0?-1:1,o=scaleTmp[1]<0?-1:1,s=((scaleTmp[0]-n)*r+n)/scaleTmp[0]||0,l=((scaleTmp[1]-o)*r+o)/scaleTmp[1]||0;t[0]*=s,t[1]*=s,t[2]*=l,t[3]*=l}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,t)},a.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},a.prototype.setLocalTransform=function(t){if(t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],o=Math.atan2(t[1],t[0]),s=Math.PI/2+o-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(s),r=Math.sqrt(r),this.skewX=s,this.skewY=0,this.rotation=-o,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},a.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||create$1(),mul(tmpTransform,t.invTransform,r),r=tmpTransform);var n=this.originX,o=this.originY;(n||o)&&(originTransform[4]=n,originTransform[5]=o,mul(tmpTransform,r,originTransform),tmpTransform[4]-=n,tmpTransform[5]-=o,r=tmpTransform),this.setLocalTransform(r)}},a.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},a.prototype.transformCoordToLocal=function(t,r){var n=[t,r],o=this.invTransform;return o&&applyTransform$1(n,n,o),n},a.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],o=this.transform;return o&&applyTransform$1(n,n,o),n},a.prototype.getLineScale=function(){var t=this.transform;return t&&abs(t[0]-1)>1e-10&&abs(t[3]-1)>1e-10?Math.sqrt(abs(t[0]*t[3]-t[2]*t[1])):1},a.prototype.copyTransform=function(t){copyTransform(this,t)},a.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,o=t.originY||0,s=t.scaleX,l=t.scaleY,u=t.anchorX,c=t.anchorY,f=t.rotation||0,h=t.x,v=t.y,d=t.skewX?Math.tan(t.skewX):0,p=t.skewY?Math.tan(-t.skewY):0;if(n||o||u||c){var g=n+u,y=o+c;r[4]=-g*s-d*y*l,r[5]=-y*l-p*g*s}else r[4]=r[5]=0;return r[0]=s,r[3]=l,r[1]=p*s,r[2]=d*l,f&&rotate(r,r,f),r[4]+=n+h,r[5]+=o+v,r},a.initDefaultProps=function(){var t=a.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),a}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(a,t){for(var r=0;r<TRANSFORMABLE_PROPS.length;r++){var n=TRANSFORMABLE_PROPS[r];a[n]=t[n]}}function ensureFontMeasureInfo(a){_fontMeasureInfoCache||(_fontMeasureInfoCache=new LRU(100)),a=a||DEFAULT_FONT;var t=_fontMeasureInfoCache.get(a);return t||(t={font:a,strWidthCache:new LRU(500),asciiWidthMap:null,asciiWidthMapTried:!1,stWideCharWidth:platformApi.measureText("å›½",a).width,asciiCharWidth:platformApi.measureText("a",a).width},_fontMeasureInfoCache.put(a,t)),t}var _fontMeasureInfoCache;function tryCreateASCIIWidthMap(a){if(!(_getASCIIWidthMapLongCount>=GET_ASCII_WIDTH_LONG_COUNT_MAX)){a=a||DEFAULT_FONT;for(var t=[],r=+new Date,n=0;n<=127;n++)t[n]=platformApi.measureText(String.fromCharCode(n),a).width;var o=+new Date-r;return o>16?_getASCIIWidthMapLongCount=GET_ASCII_WIDTH_LONG_COUNT_MAX:o>2&&_getASCIIWidthMapLongCount++,t}}var _getASCIIWidthMapLongCount=0,GET_ASCII_WIDTH_LONG_COUNT_MAX=5;function measureCharWidth(a,t){return a.asciiWidthMapTried||(a.asciiWidthMap=tryCreateASCIIWidthMap(a.font),a.asciiWidthMapTried=!0),0<=t&&t<=127?a.asciiWidthMap!=null?a.asciiWidthMap[t]:a.asciiCharWidth:a.stWideCharWidth}function measureWidth(a,t){var r=a.strWidthCache,n=r.get(t);return n==null&&(n=platformApi.measureText(t,a.font).width,r.put(t,n)),n}function innerGetBoundingRect(a,t,r,n){var o=measureWidth(ensureFontMeasureInfo(t),a),s=getLineHeight(t),l=adjustTextX(0,o,r),u=adjustTextY(0,s,n),c=new BoundingRect(l,u,o,s);return c}function getBoundingRect(a,t,r,n){var o=((a||"")+"").split(`
`),s=o.length;if(s===1)return innerGetBoundingRect(o[0],t,r,n);for(var l=new BoundingRect(0,0,0,0),u=0;u<o.length;u++){var c=innerGetBoundingRect(o[u],t,r,n);u===0?l.copy(c):l.union(c)}return l}function adjustTextX(a,t,r,n){return r==="right"?n?a+=t:a-=t:r==="center"&&(n?a+=t/2:a-=t/2),a}function adjustTextY(a,t,r,n){return r==="middle"?n?a+=t/2:a-=t/2:r==="bottom"&&(n?a+=t:a-=t),a}function getLineHeight(a){return ensureFontMeasureInfo(a).stWideCharWidth}function parsePercent$1(a,t){return typeof a=="string"?a.lastIndexOf("%")>=0?parseFloat(a)/100*t:parseFloat(a):a}function calculateTextPosition(a,t,r){var n=t.position||"inside",o=t.distance!=null?t.distance:5,s=r.height,l=r.width,u=s/2,c=r.x,f=r.y,h="left",v="top";if(n instanceof Array)c+=parsePercent$1(n[0],r.width),f+=parsePercent$1(n[1],r.height),h=null,v=null;else switch(n){case"left":c-=o,f+=u,h="right",v="middle";break;case"right":c+=o+l,f+=u,v="middle";break;case"top":c+=l/2,f-=o,h="center",v="bottom";break;case"bottom":c+=l/2,f+=s+o,h="center";break;case"inside":c+=l/2,f+=u,h="center",v="middle";break;case"insideLeft":c+=o,f+=u,v="middle";break;case"insideRight":c+=l-o,f+=u,h="right",v="middle";break;case"insideTop":c+=l/2,f+=o,h="center";break;case"insideBottom":c+=l/2,f+=s-o,h="center",v="bottom";break;case"insideTopLeft":c+=o,f+=o;break;case"insideTopRight":c+=l-o,f+=o,h="right";break;case"insideBottomLeft":c+=o,f+=s-o,v="bottom";break;case"insideBottomRight":c+=l-o,f+=s-o,h="right",v="bottom";break}return a=a||{},a.x=c,a.y=f,a.align=h,a.verticalAlign=v,a}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(a,t){return a[t]=!0,a},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),tmpInnerTextTrans=[],Element=function(){function a(t){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return a.prototype._init=function(t){this.attr(t)},a.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var o=this.transform;o||(o=this.transform=[1,0,0,1,0,0]),o[4]+=t,o[5]+=r,this.decomposeTransform(),this.markRedraw()},a.prototype.beforeUpdate=function(){},a.prototype.afterUpdate=function(){},a.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},a.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,o=n.local,s=r.innerTransformable,l=void 0,u=void 0,c=!1;s.parent=o?this:null;var f=!1;s.copyTransform(r);var h=n.position!=null,v=n.autoOverflowArea,d=void 0;if((v||h)&&(d=tmpBoundingRect,n.layoutRect?d.copy(n.layoutRect):d.copy(this.getBoundingRect()),o||d.applyTransform(this.transform)),h){this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,n,d):calculateTextPosition(tmpTextPosCalcRes,n,d),s.x=tmpTextPosCalcRes.x,s.y=tmpTextPosCalcRes.y,l=tmpTextPosCalcRes.align,u=tmpTextPosCalcRes.verticalAlign;var p=n.origin;if(p&&n.rotation!=null){var g=void 0,y=void 0;p==="center"?(g=d.width*.5,y=d.height*.5):(g=parsePercent$1(p[0],d.width),y=parsePercent$1(p[1],d.height)),f=!0,s.originX=-s.x+g+(o?0:d.x),s.originY=-s.y+y+(o?0:d.y)}}n.rotation!=null&&(s.rotation=n.rotation);var _=n.offset;_&&(s.x+=_[0],s.y+=_[1],f||(s.originX=-_[0],s.originY=-_[1]));var S=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={});if(v){var x=S.overflowRect=S.overflowRect||new BoundingRect(0,0,0,0);s.getLocalTransform(tmpInnerTextTrans),invert(tmpInnerTextTrans,tmpInnerTextTrans),BoundingRect.copy(x,d),x.applyTransform(tmpInnerTextTrans)}else S.overflowRect=null;var T=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,b=void 0,C=void 0,w=void 0;T&&this.canBeInsideText()?(b=n.insideFill,C=n.insideStroke,(b==null||b==="auto")&&(b=this.getInsideTextFill()),(C==null||C==="auto")&&(C=this.getInsideTextStroke(b),w=!0)):(b=n.outsideFill,C=n.outsideStroke,(b==null||b==="auto")&&(b=this.getOutsideFill()),(C==null||C==="auto")&&(C=this.getOutsideStroke(b),w=!0)),b=b||"#000",(b!==S.fill||C!==S.stroke||w!==S.autoStroke||l!==S.align||u!==S.verticalAlign)&&(c=!0,S.fill=b,S.stroke=C,S.autoStroke=w,S.align=l,S.verticalAlign=u,r.setDefaultTextStyle(S)),r.__dirty|=REDRAW_BIT,c&&r.dirtyStyle(!0)}},a.prototype.canBeInsideText=function(){return!0},a.prototype.getInsideTextFill=function(){return"#fff"},a.prototype.getInsideTextStroke=function(t){return"#000"},a.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},a.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&parse(r);n||(n=[255,255,255,1]);for(var o=n[3],s=this.__zr.isDarkMode(),l=0;l<3;l++)n[l]=n[l]*o+(s?0:255)*(1-o);return n[3]=1,stringify(n,"rgba")},a.prototype.traverse=function(t,r){},a.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},extend(this.extra,r)):this[t]=r},a.prototype.hide=function(){this.ignore=!0,this.markRedraw()},a.prototype.show=function(){this.ignore=!1,this.markRedraw()},a.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(isObject$3(t))for(var n=t,o=keys(n),s=0;s<o.length;s++){var l=o[s];this.attrKV(l,t[l])}return this.markRedraw(),this},a.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var o=this.animators[n],s=o.__fromStateTransition;if(!(o.getLoop()||s&&s!==PRESERVED_NORMAL_STATE)){var l=o.targetName,u=l?r[l]:r;o.saveTo(u)}}},a.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,PRIMARY_STATES_KEYS$1)},a.prototype._savePrimaryToNormal=function(t,r,n){for(var o=0;o<n.length;o++){var s=n[o];t[s]!=null&&!(s in r)&&(r[s]=this[s])}},a.prototype.hasState=function(){return this.currentStates.length>0},a.prototype.getState=function(t){return this.states[t]},a.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},a.prototype.clearStates=function(t){this.useState(PRESERVED_NORMAL_STATE,!1,t)},a.prototype.useState=function(t,r,n,o){var s=t===PRESERVED_NORMAL_STATE,l=this.hasState();if(!(!l&&s)){var u=this.currentStates,c=this.stateTransition;if(!(indexOf(u,t)>=0&&(r||u.length===1))){var f;if(this.stateProxy&&!s&&(f=this.stateProxy(t)),f||(f=this.states&&this.states[t]),!f&&!s){logError("State "+t+" not exists.");return}s||this.saveCurrentToNormalState(f);var h=!!(f&&f.hoverLayer||o);h&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,f,this._normalState,r,!n&&!this.__inHover&&c&&c.duration>0,c);var v=this._textContent,d=this._textGuide;return v&&v.useState(t,r,n,h),d&&d.useState(t,r,n,h),s?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),f}}},a.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var o=[],s=this.currentStates,l=t.length,u=l===s.length;if(u){for(var c=0;c<l;c++)if(t[c]!==s[c]){u=!1;break}}if(u)return;for(var c=0;c<l;c++){var f=t[c],h=void 0;this.stateProxy&&(h=this.stateProxy(f,t)),h||(h=this.states[f]),h&&o.push(h)}var v=o[l-1],d=!!(v&&v.hoverLayer||n);d&&this._toggleHoverLayerFlag(!0);var p=this._mergeStates(o),g=this.stateTransition;this.saveCurrentToNormalState(p),this._applyStateObj(t.join(","),p,this._normalState,!1,!r&&!this.__inHover&&g&&g.duration>0,g);var y=this._textContent,_=this._textGuide;y&&y.useStates(t,r,d),_&&_.useStates(t,r,d),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},a.prototype.isSilent=function(){for(var t=this;t;){if(t.silent)return!0;var r=t.__hostTarget;t=r?t.ignoreHostSilent?null:r:t.parent}return!1},a.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},a.prototype.removeState=function(t){var r=indexOf(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},a.prototype.replaceState=function(t,r,n){var o=this.currentStates.slice(),s=indexOf(o,t),l=indexOf(o,r)>=0;s>=0?l?o.splice(s,1):o[s]=r:n&&!l&&o.push(r),this.useStates(o)},a.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},a.prototype._mergeStates=function(t){for(var r={},n,o=0;o<t.length;o++){var s=t[o];extend(r,s),s.textConfig&&(n=n||{},extend(n,s.textConfig))}return n&&(r.textConfig=n),r},a.prototype._applyStateObj=function(t,r,n,o,s,l){var u=!(r&&o);r&&r.textConfig?(this.textConfig=extend({},o?this.textConfig:n.textConfig),extend(this.textConfig,r.textConfig)):u&&n.textConfig&&(this.textConfig=n.textConfig);for(var c={},f=!1,h=0;h<PRIMARY_STATES_KEYS$1.length;h++){var v=PRIMARY_STATES_KEYS$1[h],d=s&&DEFAULT_ANIMATABLE_MAP[v];r&&r[v]!=null?d?(f=!0,c[v]=r[v]):this[v]=r[v]:u&&n[v]!=null&&(d?(f=!0,c[v]=n[v]):this[v]=n[v])}if(!s)for(var h=0;h<this.animators.length;h++){var p=this.animators[h],g=p.targetName;p.getLoop()||p.__changeFinalValue(g?(r||n)[g]:r||n)}f&&this._transitionState(t,c,l)},a.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},a.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},a.prototype.getClipPath=function(){return this._clipPath},a.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},a.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},a.prototype.getTextContent=function(){return this._textContent},a.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new Transformable,this._attachComponent(t),this._textContent=t,this.markRedraw())},a.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),extend(this.textConfig,t),this.markRedraw()},a.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},a.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},a.prototype.getTextGuideLine=function(){return this._textGuide},a.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},a.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},a.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},a.prototype.dirty=function(){this.markRedraw()},a.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},a.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},a.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},a.prototype.animate=function(t,r,n){var o=t?this[t]:this,s=new Animator(o,r,n);return t&&(s.targetName=t),this.addAnimator(s,t),s},a.prototype.addAnimator=function(t,r){var n=this.__zr,o=this;t.during(function(){o.updateDuringAnimation(r)}).done(function(){var s=o.animators,l=indexOf(s,t);l>=0&&s.splice(l,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},a.prototype.updateDuringAnimation=function(t){this.markRedraw()},a.prototype.stopAnimation=function(t,r){for(var n=this.animators,o=n.length,s=[],l=0;l<o;l++){var u=n[l];!t||t===u.scope?u.stop(r):s.push(u)}return this.animators=s,this},a.prototype.animateTo=function(t,r,n){animateTo(this,t,r,n)},a.prototype.animateFrom=function(t,r,n){animateTo(this,t,r,n,!0)},a.prototype._transitionState=function(t,r,n,o){for(var s=animateTo(this,r,n,o),l=0;l<s.length;l++)s[l].__fromStateTransition=t},a.prototype.getBoundingRect=function(){return null},a.prototype.getPaintRect=function(){return null},a.initDefaultProps=function(){var t=a.prototype;t.type="element",t.name="",t.ignore=t.silent=t.ignoreHostSilent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=REDRAW_BIT;function r(n,o,s,l){Object.defineProperty(t,n,{get:function(){if(!this[o]){var c=this[o]=[];u(this,c)}return this[o]},set:function(c){this[s]=c[0],this[l]=c[1],this[o]=c,u(this,c)}});function u(c,f){Object.defineProperty(f,0,{get:function(){return c[s]},set:function(h){c[s]=h}}),Object.defineProperty(f,1,{get:function(){return c[l]},set:function(h){c[l]=h}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),a}();mixin(Element,Eventful);mixin(Element,Transformable);function animateTo(a,t,r,n,o){r=r||{};var s=[];animateToShallow(a,"",a,t,r,n,s,o);var l=s.length,u=!1,c=r.done,f=r.aborted,h=function(){u=!0,l--,l<=0&&(u?c&&c():f&&f())},v=function(){l--,l<=0&&(u?c&&c():f&&f())};l||c&&c(),s.length>0&&r.during&&s[0].during(function(g,y){r.during(y)});for(var d=0;d<s.length;d++){var p=s[d];h&&p.done(h),v&&p.aborted(v),r.force&&p.duration(r.duration),p.start(r.easing)}return s}function copyArrShallow(a,t,r){for(var n=0;n<r;n++)a[n]=t[n]}function is2DArray(a){return isArrayLike(a[0])}function copyValue(a,t,r){if(isArrayLike(t[r]))if(isArrayLike(a[r])||(a[r]=[]),isTypedArray(t[r])){var n=t[r].length;a[r].length!==n&&(a[r]=new t[r].constructor(n),copyArrShallow(a[r],t[r],n))}else{var o=t[r],s=a[r],l=o.length;if(is2DArray(o))for(var u=o[0].length,c=0;c<l;c++)s[c]?copyArrShallow(s[c],o[c],u):s[c]=Array.prototype.slice.call(o[c]);else copyArrShallow(s,o,l);s.length=o.length}else a[r]=t[r]}function isValueSame(a,t){return a===t||isArrayLike(a)&&isArrayLike(t)&&is1DArraySame(a,t)}function is1DArraySame(a,t){var r=a.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(a[n]!==t[n])return!1;return!0}function animateToShallow(a,t,r,n,o,s,l,u){for(var c=keys(n),f=o.duration,h=o.delay,v=o.additive,d=o.setToFinal,p=!isObject$3(s),g=a.animators,y=[],_=0;_<c.length;_++){var S=c[_],x=n[S];if(x!=null&&r[S]!=null&&(p||s[S]))if(isObject$3(x)&&!isArrayLike(x)&&!isGradientObject(x)){if(t){u||(r[S]=x,a.updateDuringAnimation(t));continue}animateToShallow(a,S,r[S],x,o,s&&s[S],l,u)}else y.push(S);else u||(r[S]=x,a.updateDuringAnimation(t),y.push(S))}var T=y.length;if(!v&&T)for(var b=0;b<g.length;b++){var C=g[b];if(C.targetName===t){var w=C.stopTracks(y);if(w){var M=indexOf(g,C);g.splice(M,1)}}}if(o.force||(y=filter(y,function(I){return!isValueSame(n[I],r[I])}),T=y.length),T>0||o.force&&!l.length){var P=void 0,L=void 0,E=void 0;if(u){L={},d&&(P={});for(var b=0;b<T;b++){var S=y[b];L[S]=r[S],d?P[S]=n[S]:r[S]=n[S]}}else if(d){E={};for(var b=0;b<T;b++){var S=y[b];E[S]=cloneValue(r[S]),copyValue(r,n,S)}}var C=new Animator(r,!1,!1,v?filter(g,function(R){return R.targetName===t}):null);C.targetName=t,o.scope&&(C.scope=o.scope),d&&P&&C.whenWithKeys(0,P,y),E&&C.whenWithKeys(0,E,y),C.whenWithKeys(f??500,u?L:n,y).delay(h||0),a.addAnimator(C,t),l.push(C)}}var Group$3=function(a){__extends(t,a);function t(r){var n=a.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,o=0;o<n.length;o++)if(n[o].name===r)return n[o]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var o=this._children,s=o.indexOf(n);s>=0&&(o.splice(s,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var o=indexOf(this._children,r);return o>=0&&this.replaceAt(n,o),this},t.prototype.replaceAt=function(r,n){var o=this._children,s=o[n];if(r&&r!==this&&r.parent!==this&&r!==s){o[n]=r,s.parent=null;var l=this.__zr;l&&s.removeSelfFromZr(l),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,o=this._children,s=indexOf(o,r);return s<0?this:(o.splice(s,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,o=0;o<r.length;o++){var s=r[o];n&&s.removeSelfFromZr(n),s.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var o=this._children,s=0;s<o.length;s++){var l=o[s];r.call(n,l,s)}return this},t.prototype.traverse=function(r,n){for(var o=0;o<this._children.length;o++){var s=this._children[o],l=r.call(n,s);s.isGroup&&!l&&s.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){a.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var o=this._children[n];o.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){a.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var o=this._children[n];o.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new BoundingRect(0,0,0,0),o=r||this._children,s=[],l=null,u=0;u<o.length;u++){var c=o[u];if(!(c.ignore||c.invisible)){var f=c.getBoundingRect(),h=c.getLocalTransform(s);h?(BoundingRect.applyTransform(n,f,h),l=l||n.clone(),l.union(n)):(l=l||f.clone(),l.union(f))}}return l||n},t}(Element);Group$3.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(a){delete instances$1[a]}function isDarkMode(a){if(!a)return!1;if(typeof a=="string")return lum(a,1)<DARK_MODE_THRESHOLD;if(a.colorStops){for(var t=a.colorStops,r=0,n=t.length,o=0;o<n;o++)r+=lum(t[o].color,1);return r/=n,r<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function a(t,r,n){var o=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var s=new Storage,l=n.renderer||"canvas";painterCtors[l]||(l=keys(painterCtors)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var u=new painterCtors[l](r,s,n,t),c=n.ssr||u.ssrOnly;this.storage=s,this.painter=u;var f=!env.node&&!env.worker&&!c?new HandlerDomProxy(u.getViewportRoot(),u.root):null,h=n.useCoarsePointer,v=h==null||h==="auto"?env.touchEventsSupported:!!h,d=44,p;v&&(p=retrieve2(n.pointerSize,d)),this.handler=new Handler(s,u,f,u.root,p),this.animation=new Animation({stage:{update:c?null:function(){return o._flush(!0)}}}),c||this.animation.start()}return a.prototype.add=function(t){this._disposed||!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},a.prototype.remove=function(t){this._disposed||!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},a.prototype.configLayer=function(t,r){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh())},a.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=isDarkMode(t))},a.prototype.getBackgroundColor=function(){return this._backgroundColor},a.prototype.setDarkMode=function(t){this._darkMode=t},a.prototype.isDarkMode=function(){return this._darkMode},a.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},a.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},a.prototype.flush=function(){this._disposed||this._flush(!1)},a.prototype._flush=function(t){var r,n=getTime();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var o=getTime();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:o-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},a.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},a.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},a.prototype.refreshHover=function(){this._needsRefreshHover=!0},a.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},a.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},a.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},a.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},a.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},a.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},a.prototype.findHover=function(t,r){if(!this._disposed)return this.handler.findHover(t,r)},a.prototype.on=function(t,r,n){return this._disposed||this.handler.on(t,r,n),this},a.prototype.off=function(t,r){this._disposed||this.handler.off(t,r)},a.prototype.trigger=function(t,r){this._disposed||this.handler.trigger(t,r)},a.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof Group$3&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},a.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},a}();function init$2(a,t){var r=new ZRender(guid(),a,t);return instances$1[r.id]=r,r}function registerPainter(a,t){painterCtors[a]=t}var ssrDataGetter;function getElementSSRData(a){if(typeof ssrDataGetter=="function")return ssrDataGetter(a)}function registerSSRDataGetter(a){ssrDataGetter=a}var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(a){return a.replace(/^\s+|\s+$/g,"")}var mathMin$a=Math.min,mathMax$a=Math.max,mathAbs$4=Math.abs;function linearMap$2(a,t,r,n){var o=t[0],s=t[1],l=r[0],u=r[1],c=s-o,f=u-l;if(c===0)return f===0?l:(l+u)/2;if(n)if(c>0){if(a<=o)return l;if(a>=s)return u}else{if(a>=o)return l;if(a<=s)return u}else{if(a===o)return l;if(a===s)return u}return(a-o)/c*f+l}var parsePercent=parsePositionOption;function parsePositionOption(a,t,r){switch(a){case"center":case"middle":a="50%";break;case"left":case"top":a="0%";break;case"right":case"bottom":a="100%";break}return parsePositionSizeOption(a,t,r)}function parsePositionSizeOption(a,t,r){return isString(a)?_trim(a).match(/%$/)?parseFloat(a)/100*t+(r||0):parseFloat(a):a==null?NaN:+a}function round$4(a,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),ROUND_SUPPORTED_PRECISION_MAX),a=(+a).toFixed(t),r?a:+a}function asc$2(a){return a.sort(function(t,r){return t-r}),a}function getPrecision(a){if(a=+a,isNaN(a))return 0;if(a>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(a*t)/t===a)return r}return getPrecisionSafe(a)}function getPrecisionSafe(a){var t=a.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,o=r>0?r:t.length,s=t.indexOf("."),l=s<0?0:o-1-s;return Math.max(0,l-n)}function getPixelPrecision(a,t){var r=Math.log,n=Math.LN10,o=Math.floor(r(a[1]-a[0])/n),s=Math.round(r(mathAbs$4(t[1]-t[0]))/n),l=Math.min(Math.max(-o+s,0),20);return isFinite(l)?l:20}function getPercentSeats(a,t){var r=reduce(a,function(p,g){return p+(isNaN(g)?0:g)},0);if(r===0)return[];for(var n=Math.pow(10,t),o=map$1(a,function(p){return(isNaN(p)?0:p)/r*n*100}),s=n*100,l=map$1(o,function(p){return Math.floor(p)}),u=reduce(l,function(p,g){return p+g},0),c=map$1(o,function(p,g){return p-l[g]});u<s;){for(var f=Number.NEGATIVE_INFINITY,h=null,v=0,d=c.length;v<d;++v)c[v]>f&&(f=c[v],h=v);++l[h],c[h]=0,++u}return map$1(l,function(p){return p/n})}function addSafe(a,t){var r=Math.max(getPrecision(a),getPrecision(t)),n=a+t;return r>ROUND_SUPPORTED_PRECISION_MAX?n:round$4(n,r)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(a){var t=Math.PI*2;return(a%t+t)%t}function isRadianAroundZero(a){return a>-RADIAN_EPSILON&&a<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(a){if(a instanceof Date)return a;if(isString(a)){var t=TIME_REG.exec(a);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(a==null)return new Date(NaN);return new Date(Math.round(a))}function quantity(a){return Math.pow(10,quantityExponent(a))}function quantityExponent(a){if(a===0)return 0;var t=Math.floor(Math.log(a)/Math.LN10);return a/Math.pow(10,t)>=10&&t++,t}function nice(a,t){var r=quantityExponent(a),n=Math.pow(10,r),o=a/n,s;return o<1.5?s=1:o<2.5?s=2:o<4?s=3:o<7?s=5:s=10,a=s*n,r>=-20?+a.toFixed(r<0?-r:0):a}function quantile(a,t){var r=(a.length-1)*t+1,n=Math.floor(r),o=+a[n-1],s=r-n;return s?o+s*(a[n]-o):o}function reformIntervals(a){a.sort(function(c,f){return u(c,f,0)?-1:1});for(var t=-1/0,r=1,n=0;n<a.length;){for(var o=a[n].interval,s=a[n].close,l=0;l<2;l++)o[l]<=t&&(o[l]=t,s[l]=l?1:1-r),t=o[l],r=s[l];o[0]===o[1]&&s[0]*s[1]!==1?a.splice(n,1):n++}return a;function u(c,f,h){return c.interval[h]<f.interval[h]||c.interval[h]===f.interval[h]&&(c.close[h]-f.close[h]===(h?-1:1)||!h&&u(c,f,1))}}function numericToNumber(a){var t=parseFloat(a);return t==a&&(t!==0||!isString(a)||a.indexOf("x")<=0)?t:NaN}function isNumeric(a){return!isNaN(numericToNumber(a))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(a,t){return t===0?a:getGreatestCommonDividor(t,a%t)}function getLeastCommonMultiple(a,t){return a==null?t:t==null?a:a*t/getGreatestCommonDividor(a,t)}var ECHARTS_PREFIX="[ECharts] ",storedLogs={},hasConsole=typeof console<"u"&&console.warn&&console.log;function outputLog(a,t,r){if(hasConsole){if(r){if(storedLogs[t])return;storedLogs[t]=!0}console[a](ECHARTS_PREFIX+t)}}function warn(a,t){outputLog("warn",a,t)}function error(a,t){outputLog("error",a,t)}function throwError(a){throw new Error(a)}function interpolateNumber(a,t,r){return(t-a)*r+a}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(a){return a instanceof Array?a:a==null?[]:[a]}function defaultEmphasis(a,t,r){if(a){a[t]=a[t]||{},a.emphasis=a.emphasis||{},a.emphasis[t]=a.emphasis[t]||{};for(var n=0,o=r.length;n<o;n++){var s=r[n];!a.emphasis[t].hasOwnProperty(s)&&a[t].hasOwnProperty(s)&&(a.emphasis[t][s]=a[t][s])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(a){return isObject$3(a)&&!isArray$1(a)&&!(a instanceof Date)?a.value:a}function isDataItemOption(a){return isObject$3(a)&&!(a instanceof Array)}function mappingToExists(a,t,r){var n=r==="normalMerge",o=r==="replaceMerge",s=r==="replaceAll";a=a||[],t=(t||[]).slice();var l=createHashMap();each$f(t,function(c,f){if(!isObject$3(c)){t[f]=null;return}});var u=prepareResult(a,l,r);return(n||o)&&mappingById(u,a,l,t),n&&mappingByName(u,t),n||o?mappingByIndex(u,t,o):s&&mappingInReplaceAllMode(u,t),makeIdAndName(u),u}function prepareResult(a,t,r){var n=[];if(r==="replaceAll")return n;for(var o=0;o<a.length;o++){var s=a[o];s&&s.id!=null&&t.set(s.id,o),n.push({existing:r==="replaceMerge"||isComponentIdInternal(s)?null:s,newOption:null,keyInfo:null,brandNew:null})}return n}function mappingById(a,t,r,n){each$f(n,function(o,s){if(!(!o||o.id==null)){var l=makeComparableKey(o.id),u=r.get(l);if(u!=null){var c=a[u];assert(!c.newOption,'Duplicated option on id "'+l+'".'),c.newOption=o,c.existing=t[u],n[s]=null}}})}function mappingByName(a,t){each$f(t,function(r,n){if(!(!r||r.name==null))for(var o=0;o<a.length;o++){var s=a[o].existing;if(!a[o].newOption&&s&&(s.id==null||r.id==null)&&!isComponentIdInternal(r)&&!isComponentIdInternal(s)&&keyExistAndEqual("name",s,r)){a[o].newOption=r,t[n]=null;return}}})}function mappingByIndex(a,t,r){each$f(t,function(n){if(n){for(var o,s=0;(o=a[s])&&(o.newOption||isComponentIdInternal(o.existing)||o.existing&&n.id!=null&&!keyExistAndEqual("id",n,o.existing));)s++;o?(o.newOption=n,o.brandNew=r):a.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),s++}})}function mappingInReplaceAllMode(a,t){each$f(t,function(r){a.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(a){var t=createHashMap();each$f(a,function(r){var n=r.existing;n&&t.set(n.id,r)}),each$f(a,function(r){var n=r.newOption;assert(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),each$f(a,function(r,n){var o=r.existing,s=r.newOption,l=r.keyInfo;if(isObject$3(s)){if(l.name=s.name!=null?makeComparableKey(s.name):o?o.name:DUMMY_COMPONENT_NAME_PREFIX+n,o)l.id=makeComparableKey(o.id);else if(s.id!=null)l.id=makeComparableKey(s.id);else{var u=0;do l.id="\0"+l.name+"\0"+u++;while(t.get(l.id))}t.set(l.id,r)}})}function keyExistAndEqual(a,t,r){var n=convertOptionIdName(t[a],null),o=convertOptionIdName(r[a],null);return n!=null&&o!=null&&n===o}function makeComparableKey(a){return convertOptionIdName(a,"")}function convertOptionIdName(a,t){return a==null?t:isString(a)?a:isNumber(a)||isStringSafe(a)?a+"":t}function isNameSpecified(a){var t=a.name;return!!(t&&t.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(a){return a&&a.id!=null&&makeComparableKey(a.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(a){return INTERNAL_COMPONENT_ID_PREFIX+a}function setComponentTypeToKeyInfo(a,t,r){each$f(a,function(n){var o=n.newOption;isObject$3(o)&&(n.keyInfo.mainType=t,n.keyInfo.subType=determineSubType(t,o,n.existing,r))})}function determineSubType(a,t,r,n){var o=t.type?t.type:r?r.subType:n.determineSubType(a,t);return o}function compressBatches(a,t){var r={},n={};return o(a||[],r),o(t||[],n,r),[s(r),s(n)];function o(l,u,c){for(var f=0,h=l.length;f<h;f++){var v=convertOptionIdName(l[f].seriesId,null);if(v==null)return;for(var d=normalizeToArray(l[f].dataIndex),p=c&&c[v],g=0,y=d.length;g<y;g++){var _=d[g];p&&p[_]?p[_]=null:(u[v]||(u[v]={}))[_]=1}}}function s(l,u){var c=[];for(var f in l)if(l.hasOwnProperty(f)&&l[f]!=null)if(u)c.push(+f);else{var h=s(l[f],!0);h.length&&c.push({seriesId:f,dataIndex:h})}return c}}function queryDataIndex(a,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return isArray$1(t.dataIndex)?map$1(t.dataIndex,function(r){return a.indexOfRawIndex(r)}):a.indexOfRawIndex(t.dataIndex);if(t.name!=null)return isArray$1(t.name)?map$1(t.name,function(r){return a.indexOfName(r)}):a.indexOfName(t.name)}function makeInner(){var a="__ec_inner_"+innerUniqueIndex++;return function(t){return t[a]||(t[a]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(a,t,r){var n=preParseFinder(t,r),o=n.mainTypeSpecified,s=n.queryOptionMap,l=n.others,u=l,c=r?r.defaultMainType:null;return!o&&c&&s.set(c,{}),s.each(function(f,h){var v=queryReferringComponents(a,h,f,{useDefault:c===h,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});u[h+"Models"]=v.models,u[h+"Model"]=v.models[0]}),u}function preParseFinder(a,t){var r;if(isString(a)){var n={};n[a+"Index"]=0,r=n}else r=a;var o=createHashMap(),s={},l=!1;return each$f(r,function(u,c){if(c==="dataIndex"||c==="dataIndexInside"){s[c]=u;return}var f=c.match(/^(\w+)(Index|Id|Name)$/)||[],h=f[1],v=(f[2]||"").toLowerCase();if(!(!h||!v||t&&t.includeMainTypes&&indexOf(t.includeMainTypes,h)<0)){l=l||!!h;var d=o.get(h)||o.set(h,{});d[v]=u}}),{mainTypeSpecified:l,queryOptionMap:o,others:s}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(a,t,r,n){n=n||SINGLE_REFERRING;var o=r.index,s=r.id,l=r.name,u={models:null,specified:o!=null||s!=null||l!=null};if(!u.specified){var c=void 0;return u.models=n.useDefault&&(c=a.getComponent(t))?[c]:[],u}if(o==="none"||o===!1){if(n.enableNone)return u.models=[],u;o=-1}return o==="all"&&(n.enableAll?o=s=l=null:o=-1),u.models=a.queryComponents({mainType:t,index:o,id:s,name:l}),u}function setAttribute(a,t,r){a.setAttribute?a.setAttribute(t,r):a[t]=r}function getAttribute(a,t){return a.getAttribute?a.getAttribute(t):a[t]}function getTooltipRenderMode(a){return a==="auto"?env.domSupported?"html":"richText":a||"html"}function groupData(a,t){var r=createHashMap(),n=[];return each$f(a,function(o){var s=t(o);(r.get(s)||(n.push(s),r.set(s,[]))).push(o)}),{keys:n,buckets:r}}function interpolateRawValues(a,t,r,n,o){var s=t==null||t==="auto";if(n==null)return n;if(isNumber(n)){var l=interpolateNumber(r||0,n,o);return round$4(l,s?Math.max(getPrecision(r||0),getPrecision(n)):t)}else{if(isString(n))return o<1?r:n;for(var u=[],c=r,f=n,h=Math.max(c?c.length:0,f.length),v=0;v<h;++v){var d=a.getDimensionInfo(v);if(d&&d.type==="ordinal")u[v]=(o<1&&c?c:f)[v];else{var p=c&&c[v]?c[v]:0,g=f[v],l=interpolateNumber(p,g,o);u[v]=round$4(l,s?Math.max(getPrecision(p),getPrecision(g)):t)}}return u}}var ListIterator=function(){function a(){}return a.prototype.reset=function(t,r,n,o){return this._list=t,this._step=o=o||1,this._idx=r,this._end=n??(o>0?t.length:0),this.item=null,this.key=NaN,this},a.prototype.next=function(){return(this._step>0?this._idx<this._end:this._idx>=this._end)?(this.item=this._list[this._idx],this.key=this._idx=this._idx+this._step,!0):!1},a}();function clearTmpModel(a){a.option=a.parentModel=a.ecModel=null}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(a){var t={main:"",sub:""};if(a){var r=a.split(TYPE_DELIMITER);t.main=r[0]||"",t.sub=r[1]||""}return t}function checkClassType(a){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(a),'componentType "'+a+'" illegal')}function isExtendedClass(a){return!!(a&&a[IS_EXTENDED_CLASS])}function enableClassExtend(a,t){a.$constructor=a,a.extend=function(r){var n=this,o;return isESClass(n)?o=function(s){__extends(l,s);function l(){return s.apply(this,arguments)||this}return l}(n):(o=function(){(r.$constructor||n).apply(this,arguments)},inherits(o,this)),extend(o.prototype,r),o[IS_EXTENDED_CLASS]=!0,o.extend=this.extend,o.superCall=superCall,o.superApply=superApply,o.superClass=n,o}}function isESClass(a){return isFunction(a)&&/^class\s/.test(Function.prototype.toString.call(a))}function mountExtend(a,t){a.extend=t.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(a){var t=["__\0is_clz",classBase++].join("_");a.prototype[t]=!0,a.isInstance=function(r){return!!(r&&r[t])}}function superCall(a,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(a,r)}function superApply(a,t,r){return this.superClass.prototype[t].apply(a,r)}function enableClassManagement(a){var t={};a.registerClass=function(n){var o=n.type||n.prototype.type;if(o){checkClassType(o),n.prototype.type=o;var s=parseClassType(o);if(!s.sub)t[s.main]=n;else if(s.sub!==IS_CONTAINER){var l=r(s);l[s.sub]=n}}return n},a.getClass=function(n,o,s){var l=t[n];if(l&&l[IS_CONTAINER]&&(l=o?l[o]:null),s&&!l)throw new Error(o?"Component "+n+"."+(o||"")+" is used but not imported.":n+".type should be specified.");return l},a.getClassesByMainType=function(n){var o=parseClassType(n),s=[],l=t[o.main];return l&&l[IS_CONTAINER]?each$f(l,function(u,c){c!==IS_CONTAINER&&s.push(u)}):s.push(l),s},a.hasClass=function(n){var o=parseClassType(n);return!!t[o.main]},a.getAllClassMainTypes=function(){var n=[];return each$f(t,function(o,s){n.push(s)}),n},a.hasSubTypes=function(n){var o=parseClassType(n),s=t[o.main];return s&&s[IS_CONTAINER]};function r(n){var o=t[n.main];return(!o||!o[IS_CONTAINER])&&(o=t[n.main]={},o[IS_CONTAINER]=!0),o}}function makeStyleMapper(a,t){for(var r=0;r<a.length;r++)a[r][1]||(a[r][1]=a[r][0]);return t=t||!1,function(n,o,s){for(var l={},u=0;u<a.length;u++){var c=a[u][1];if(!(o&&indexOf(o,c)>=0||s&&indexOf(s,c)<0)){var f=n.getShallow(c,t);f!=null&&(l[a[u][0]]=f)}}return l}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function a(){}return a.prototype.getAreaStyle=function(t,r){return getAreaStyle(this,t,r)},a}(),globalImageCache=new LRU(50);function findExistImage(a){if(typeof a=="string"){var t=globalImageCache.get(a);return t&&t.image}else return a}function createOrUpdateImage(a,t,r,n,o){if(a)if(typeof a=="string"){if(t&&t.__zrImageSrc===a||!r)return t;var s=globalImageCache.get(a),l={hostEl:r,cb:n,cbPayload:o};return s?(t=s.image,!isImageReady(t)&&s.pending.push(l)):(t=platformApi.loadImage(a,imageOnLoad,imageOnLoad),t.__zrImageSrc=a,globalImageCache.put(a,t.__cachedImgObj={image:t,pending:[l]})),t}else return a;else return t}function imageOnLoad(){var a=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<a.pending.length;t++){var r=a.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}a.pending.length=0}function isImageReady(a){return a&&a.width&&a.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText2(a,t,r,n,o,s){if(!r){a.text="",a.isTruncated=!1;return}var l=(t+"").split(`
`);s=prepareTruncateOptions(r,n,o,s);for(var u=!1,c={},f=0,h=l.length;f<h;f++)truncateSingleLine(c,l[f],s),l[f]=c.textLine,u=u||c.isTruncated;a.text=l.join(`
`),a.isTruncated=u}function prepareTruncateOptions(a,t,r,n){n=n||{};var o=extend({},n);r=retrieve2(r,"..."),o.maxIterations=retrieve2(n.maxIterations,2);var s=o.minChar=retrieve2(n.minChar,0),l=o.fontMeasureInfo=ensureFontMeasureInfo(t),u=l.asciiCharWidth;o.placeholder=retrieve2(n.placeholder,"");for(var c=a=Math.max(0,a-1),f=0;f<s&&c>=u;f++)c-=u;var h=measureWidth(l,r);return h>c&&(r="",h=0),c=a-h,o.ellipsis=r,o.ellipsisWidth=h,o.contentWidth=c,o.containerWidth=a,o}function truncateSingleLine(a,t,r){var n=r.containerWidth,o=r.contentWidth,s=r.fontMeasureInfo;if(!n){a.textLine="",a.isTruncated=!1;return}var l=measureWidth(s,t);if(l<=n){a.textLine=t,a.isTruncated=!1;return}for(var u=0;;u++){if(l<=o||u>=r.maxIterations){t+=r.ellipsis;break}var c=u===0?estimateLength(t,o,s):l>0?Math.floor(t.length*o/l):0;t=t.substr(0,c),l=measureWidth(s,t)}t===""&&(t=r.placeholder),a.textLine=t,a.isTruncated=!0}function estimateLength(a,t,r){for(var n=0,o=0,s=a.length;o<s&&n<t;o++)n+=measureCharWidth(r,a.charCodeAt(o));return o}function parsePlainText(a,t,r,n){var o=formatText(a),s=t.overflow,l=t.padding,u=l?l[1]+l[3]:0,c=l?l[0]+l[2]:0,f=t.font,h=s==="truncate",v=getLineHeight(f),d=retrieve2(t.lineHeight,v),p=t.lineOverflow==="truncate",g=!1,y=t.width;y==null&&r!=null&&(y=r-u);var _=t.height;_==null&&n!=null&&(_=n-c);var S;y!=null&&(s==="break"||s==="breakAll")?S=o?wrapText(o,t.font,y,s==="breakAll",0).lines:[]:S=o?o.split(`
`):[];var x=S.length*d;if(_==null&&(_=x),x>_&&p){var T=Math.floor(_/d);g=g||S.length>T,S=S.slice(0,T),x=S.length*d}if(o&&h&&y!=null)for(var b=prepareTruncateOptions(y,f,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),C={},w=0;w<S.length;w++)truncateSingleLine(C,S[w],b),S[w]=C.textLine,g=g||C.isTruncated;for(var M=_,P=0,L=ensureFontMeasureInfo(f),w=0;w<S.length;w++)P=Math.max(measureWidth(L,S[w]),P);y==null&&(y=P);var E=y;return M+=c,E+=u,{lines:S,height:_,outerWidth:E,outerHeight:M,lineHeight:d,calculatedLineHeight:v,contentWidth:P,contentHeight:x,width:y,isTruncated:g}}var RichTextToken=function(){function a(){}return a}(),RichTextLine=function(){function a(t){this.tokens=[],t&&(this.tokens=t)}return a}(),RichTextContentBlock=function(){function a(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return a}();function parseRichText(a,t,r,n,o){var s=new RichTextContentBlock,l=formatText(a);if(!l)return s;var u=t.padding,c=u?u[1]+u[3]:0,f=u?u[0]+u[2]:0,h=t.width;h==null&&r!=null&&(h=r-c);var v=t.height;v==null&&n!=null&&(v=n-f);for(var d=t.overflow,p=(d==="break"||d==="breakAll")&&h!=null?{width:h,accumWidth:0,breakAll:d==="breakAll"}:null,g=STYLE_REG.lastIndex=0,y;(y=STYLE_REG.exec(l))!=null;){var _=y.index;_>g&&pushTokens(s,l.substring(g,_),t,p),pushTokens(s,y[2],t,p,y[1]),g=STYLE_REG.lastIndex}g<l.length&&pushTokens(s,l.substring(g,l.length),t,p);var S=[],x=0,T=0,b=d==="truncate",C=t.lineOverflow==="truncate",w={};function M(J,ee,K){J.width=ee,J.lineHeight=K,x+=K,T=Math.max(T,ee)}e:for(var P=0;P<s.lines.length;P++){for(var L=s.lines[P],E=0,I=0,R=0;R<L.tokens.length;R++){var D=L.tokens[R],O=D.styleName&&t.rich[D.styleName]||{},$=D.textPadding=O.padding,N=$?$[1]+$[3]:0,V=D.font=O.font||t.font;D.contentHeight=getLineHeight(V);var B=retrieve2(O.height,D.contentHeight);if(D.innerHeight=B,$&&(B+=$[0]+$[2]),D.height=B,D.lineHeight=retrieve3(O.lineHeight,t.lineHeight,B),D.align=O&&O.align||o,D.verticalAlign=O&&O.verticalAlign||"middle",C&&v!=null&&x+D.lineHeight>v){var F=s.lines.length;R>0?(L.tokens=L.tokens.slice(0,R),M(L,I,E),s.lines=s.lines.slice(0,P+1)):s.lines=s.lines.slice(0,P),s.isTruncated=s.isTruncated||s.lines.length<F;break e}var G=O.width,z=G==null||G==="auto";if(typeof G=="string"&&G.charAt(G.length-1)==="%")D.percentWidth=G,S.push(D),D.contentWidth=measureWidth(ensureFontMeasureInfo(V),D.text);else{if(z){var H=O.backgroundColor,U=H&&H.image;U&&(U=findExistImage(U),isImageReady(U)&&(D.width=Math.max(D.width,U.width*B/U.height)))}var Y=b&&h!=null?h-I:null;Y!=null&&Y<D.width?!z||Y<N?(D.text="",D.width=D.contentWidth=0):(truncateText2(w,D.text,Y-N,V,t.ellipsis,{minChar:t.truncateMinChar}),D.text=w.text,s.isTruncated=s.isTruncated||w.isTruncated,D.width=D.contentWidth=measureWidth(ensureFontMeasureInfo(V),D.text)):D.contentWidth=measureWidth(ensureFontMeasureInfo(V),D.text)}D.width+=N,I+=D.width,O&&(E=Math.max(E,D.lineHeight))}M(L,I,E)}s.outerWidth=s.width=retrieve2(h,T),s.outerHeight=s.height=retrieve2(v,x),s.contentHeight=x,s.contentWidth=T,s.outerWidth+=c,s.outerHeight+=f;for(var P=0;P<S.length;P++){var D=S[P],Z=D.percentWidth;D.width=parseInt(Z,10)/100*s.width}return s}function pushTokens(a,t,r,n,o){var s=t==="",l=o&&r.rich[o]||{},u=a.lines,c=l.font||r.font,f=!1,h,v;if(n){var d=l.padding,p=d?d[1]+d[3]:0;if(l.width!=null&&l.width!=="auto"){var g=parsePercent$1(l.width,n.width)+p;u.length>0&&g+n.accumWidth>n.width&&(h=t.split(`
`),f=!0),n.accumWidth=g}else{var y=wrapText(t,c,n.width,n.breakAll,n.accumWidth);n.accumWidth=y.accumWidth+p,v=y.linesWidths,h=y.lines}}h||(h=t.split(`
`));for(var _=ensureFontMeasureInfo(c),S=0;S<h.length;S++){var x=h[S],T=new RichTextToken;if(T.styleName=o,T.text=x,T.isLineHolder=!x&&!s,typeof l.width=="number"?T.width=l.width:T.width=v?v[S]:measureWidth(_,x),!S&&!f){var b=(u[u.length-1]||(u[0]=new RichTextLine)).tokens,C=b.length;C===1&&b[0].isLineHolder?b[0]=T:(x||!C||s)&&b.push(T)}else u.push(new RichTextLine([T]))}}function isAlphabeticLetter(a){var t=a.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(a,t){return a[t]=!0,a},{});function isWordBreakChar(a){return isAlphabeticLetter(a)?!!breakCharMap[a]:!0}function wrapText(a,t,r,n,o){for(var s=[],l=[],u="",c="",f=0,h=0,v=ensureFontMeasureInfo(t),d=0;d<a.length;d++){var p=a.charAt(d);if(p===`
`){c&&(u+=c,h+=f),s.push(u),l.push(h),u="",c="",f=0,h=0;continue}var g=measureCharWidth(v,p.charCodeAt(0)),y=n?!1:!isWordBreakChar(p);if(s.length?h+g>r:o+h+g>r){h?(u||c)&&(y?(u||(u=c,c="",f=0,h=f),s.push(u),l.push(h-f),c+=p,f+=g,u="",h=f):(c&&(u+=c,c="",f=0),s.push(u),l.push(h),u=p,h=g)):y?(s.push(c),l.push(f),c=p,f=g):(s.push(p),l.push(g));continue}h+=g,y?(c+=p,f+=g):(c&&(u+=c,c="",f=0),u+=p)}return c&&(u+=c),u&&(s.push(u),l.push(h)),s.length===1&&(h+=o),{accumWidth:h,lines:s,linesWidths:l}}function calcInnerTextOverflowArea(a,t,r,n,o,s){if(a.baseX=r,a.baseY=n,a.outerWidth=a.outerHeight=null,!!t){var l=t.width*2,u=t.height*2;BoundingRect.set(tmpCITCTextRect,adjustTextX(r,l,o),adjustTextY(n,u,s),l,u),BoundingRect.intersect(t,tmpCITCTextRect,null,tmpCITCIntersectRectOpt);var c=tmpCITCIntersectRectOpt.outIntersectRect;a.outerWidth=c.width,a.outerHeight=c.height,a.baseX=adjustTextX(c.x,c.width,o,!0),a.baseY=adjustTextY(c.y,c.height,s,!0)}}var tmpCITCTextRect=new BoundingRect(0,0,0,0),tmpCITCIntersectRectOpt={outIntersectRect:{},clamp:!0};function formatText(a){return a!=null?a+="":a=""}function tSpanCreateBoundingRect(a){var t=formatText(a.text),r=a.font,n=measureWidth(ensureFontMeasureInfo(r),t),o=getLineHeight(r);return tSpanCreateBoundingRect2(a,n,o,null)}function tSpanCreateBoundingRect2(a,t,r,n){var o=new BoundingRect(adjustTextX(a.x||0,t,a.textAlign),adjustTextY(a.y||0,r,a.textBaseline),t,r),s=n??(tSpanHasStroke(a)?a.lineWidth:0);return s>0&&(o.x-=s/2,o.y-=s/2,o.width+=s,o.height+=s),o}function tSpanHasStroke(a){var t=a.stroke;return t!=null&&t!=="none"&&a.lineWidth>0}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype._init=function(r){for(var n=keys(r),o=0;o<n.length;o++){var s=n[o];s==="style"?this.useStyle(r[s]):a.prototype.attrKV.call(this,s,r[s])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,o,s){var l=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,r,n)||l&&!l[0]&&!l[3])return!1;if(o&&this.__clipPaths&&this.__clipPaths.length){for(var u=0;u<this.__clipPaths.length;++u)if(this.__clipPaths[u].isZeroArea())return!1}if(s&&this.parent)for(var c=this.parent;c;){if(c.ignore)return!1;c=c.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var o=this.transformCoordToLocal(r,n),s=this.getBoundingRect();return s.contain(o[0],o[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,o=this.getBoundingRect(),s=this.style,l=s.shadowBlur||0,u=s.shadowOffsetX||0,c=s.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),n?BoundingRect.applyTransform(r,o,n):r.copy(o),(l||u||c)&&(r.width+=l*2+Math.abs(u),r.height+=l*2+Math.abs(c),r.x=Math.min(r.x,r.x+u-l),r.y=Math.min(r.y,r.y+c-l));var f=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-f),r.y=Math.floor(r.y-f),r.width=Math.ceil(r.width+1+f*2),r.height=Math.ceil(r.height+1+f*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?a.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:extend(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},t.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},t.prototype.createStyle=function(r){return createObject(DEFAULT_COMMON_STYLE,r)},t.prototype.useStyle=function(r){r[STYLE_MAGIC_KEY]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[STYLE_MAGIC_KEY]},t.prototype._innerSaveToNormal=function(r){a.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,PRIMARY_STATES_KEYS)},t.prototype._applyStateObj=function(r,n,o,s,l,u){a.prototype._applyStateObj.call(this,r,n,o,s,l,u);var c=!(n&&s),f;if(n&&n.style?l?s?f=n.style:(f=this._mergeStyle(this.createStyle(),o.style),this._mergeStyle(f,n.style)):(f=this._mergeStyle(this.createStyle(),s?this.style:o.style),this._mergeStyle(f,n.style)):c&&(f=o.style),f)if(l){var h=this.style;if(this.style=this.createStyle(c?{}:h),c)for(var v=keys(h),d=0;d<v.length;d++){var p=v[d];p in f&&(f[p]=f[p],this.style[p]=h[p])}for(var g=keys(f),d=0;d<g.length;d++){var p=g[d];this.style[p]=this.style[p]}this._transitionState(r,{style:f},u,this.getAnimationStyleProps())}else this.useStyle(f);for(var y=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,d=0;d<y.length;d++){var p=y[d];n&&n[p]!=null?this[p]=n[p]:c&&o[p]!=null&&(this[p]=o[p])}},t.prototype._mergeStates=function(r){for(var n=a.prototype._mergeStates.call(this,r),o,s=0;s<r.length;s++){var l=r[s];l.style&&(o=o||{},this._mergeStyle(o,l.style))}return o&&(n.style=o),n},t.prototype._mergeStyle=function(r,n){return extend(r,n),r},t.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),t}(Element),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(a,t,r){return tmpRect.copy(a.getBoundingRect()),a.transform&&tmpRect.applyTransform(a.transform),viewRect.width=t,viewRect.height=r,!tmpRect.intersect(viewRect)}var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(a,t,r){if(a.length!==0){for(var n=a[0],o=n[0],s=n[0],l=n[1],u=n[1],c=1;c<a.length;c++)n=a[c],o=mathMin$9(o,n[0]),s=mathMax$9(s,n[0]),l=mathMin$9(l,n[1]),u=mathMax$9(u,n[1]);t[0]=o,t[1]=l,r[0]=s,r[1]=u}}function fromLine(a,t,r,n,o,s){o[0]=mathMin$9(a,r),o[1]=mathMin$9(t,n),s[0]=mathMax$9(a,r),s[1]=mathMax$9(t,n)}var xDim=[],yDim=[];function fromCubic(a,t,r,n,o,s,l,u,c,f){var h=cubicExtrema,v=cubicAt,d=h(a,r,o,l,xDim);c[0]=1/0,c[1]=1/0,f[0]=-1/0,f[1]=-1/0;for(var p=0;p<d;p++){var g=v(a,r,o,l,xDim[p]);c[0]=mathMin$9(g,c[0]),f[0]=mathMax$9(g,f[0])}d=h(t,n,s,u,yDim);for(var p=0;p<d;p++){var y=v(t,n,s,u,yDim[p]);c[1]=mathMin$9(y,c[1]),f[1]=mathMax$9(y,f[1])}c[0]=mathMin$9(a,c[0]),f[0]=mathMax$9(a,f[0]),c[0]=mathMin$9(l,c[0]),f[0]=mathMax$9(l,f[0]),c[1]=mathMin$9(t,c[1]),f[1]=mathMax$9(t,f[1]),c[1]=mathMin$9(u,c[1]),f[1]=mathMax$9(u,f[1])}function fromQuadratic(a,t,r,n,o,s,l,u){var c=quadraticExtremum,f=quadraticAt$1,h=mathMax$9(mathMin$9(c(a,r,o),1),0),v=mathMax$9(mathMin$9(c(t,n,s),1),0),d=f(a,r,o,h),p=f(t,n,s,v);l[0]=mathMin$9(a,o,d),l[1]=mathMin$9(t,s,p),u[0]=mathMax$9(a,o,d),u[1]=mathMax$9(t,s,p)}function fromArc(a,t,r,n,o,s,l,u,c){var f=min$1,h=max$1,v=Math.abs(o-s);if(v%PI2$8<1e-4&&v>1e-4){u[0]=a-r,u[1]=t-n,c[0]=a+r,c[1]=t+n;return}if(start[0]=mathCos$4(o)*r+a,start[1]=mathSin$4(o)*n+t,end[0]=mathCos$4(s)*r+a,end[1]=mathSin$4(s)*n+t,f(u,start,end),h(c,start,end),o=o%PI2$8,o<0&&(o=o+PI2$8),s=s%PI2$8,s<0&&(s=s+PI2$8),o>s&&!l?s+=PI2$8:o<s&&l&&(o+=PI2$8),l){var d=s;s=o,o=d}for(var p=0;p<s;p+=Math.PI/2)p>o&&(extremity[0]=mathCos$4(p)*r+a,extremity[1]=mathSin$4(p)*n+t,f(u,extremity,u),h(c,extremity,c))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$3=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(a){var t=Math.round(a/PI$8*1e8)/1e8;return t%2*PI$8}function normalizeArcAngles(a,t){var r=modPI2(a[0]);r<0&&(r+=PI2$7);var n=r-a[0],o=a[1];o+=n,!t&&o-r>=PI2$7?o=r+PI2$7:t&&r-o>=PI2$7?o=r-PI2$7:!t&&r>o?o=r+(PI2$7-modPI2(r-o)):t&&r<o&&(o=r-(PI2$7-modPI2(o-r))),a[0]=r,a[1]=o}var PathProxy=function(){function a(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return a.prototype.increaseVersion=function(){this._version++},a.prototype.getVersion=function(){return this._version},a.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=mathAbs$3(n/devicePixelRatio/t)||0,this._uy=mathAbs$3(n/devicePixelRatio/r)||0)},a.prototype.setDPR=function(t){this.dpr=t},a.prototype.setContext=function(t){this._ctx=t},a.prototype.getContext=function(){return this._ctx},a.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},a.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},a.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(CMD$4.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},a.prototype.lineTo=function(t,r){var n=mathAbs$3(t-this._xi),o=mathAbs$3(r-this._yi),s=n>this._ux||o>this._uy;if(this.addData(CMD$4.L,t,r),this._ctx&&s&&this._ctx.lineTo(t,r),s)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var l=n*n+o*o;l>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=l)}return this},a.prototype.bezierCurveTo=function(t,r,n,o,s,l){return this._drawPendingPt(),this.addData(CMD$4.C,t,r,n,o,s,l),this._ctx&&this._ctx.bezierCurveTo(t,r,n,o,s,l),this._xi=s,this._yi=l,this},a.prototype.quadraticCurveTo=function(t,r,n,o){return this._drawPendingPt(),this.addData(CMD$4.Q,t,r,n,o),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,o),this._xi=n,this._yi=o,this},a.prototype.arc=function(t,r,n,o,s,l){this._drawPendingPt(),tmpAngles[0]=o,tmpAngles[1]=s,normalizeArcAngles(tmpAngles,l),o=tmpAngles[0],s=tmpAngles[1];var u=s-o;return this.addData(CMD$4.A,t,r,n,n,o,u,0,l?0:1),this._ctx&&this._ctx.arc(t,r,n,o,s,l),this._xi=mathCos$3(s)*n+t,this._yi=mathSin$3(s)*n+r,this},a.prototype.arcTo=function(t,r,n,o,s){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,o,s),this},a.prototype.rect=function(t,r,n,o){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,o),this.addData(CMD$4.R,t,r,n,o),this},a.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},a.prototype.fill=function(t){t&&t.fill(),this.toStatic()},a.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},a.prototype.len=function(){return this._len},a.prototype.setData=function(t){if(this._saveData){var r=t.length;!(this.data&&this.data.length===r)&&hasTypedArray&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r}},a.prototype.appendPath=function(t){if(this._saveData){t instanceof Array||(t=[t]);for(var r=t.length,n=0,o=this._len,s=0;s<r;s++)n+=t[s].len();var l=this.data;if(hasTypedArray&&(l instanceof Float32Array||!l)&&(this.data=new Float32Array(o+n),o>0&&l))for(var u=0;u<o;u++)this.data[u]=l[u];for(var s=0;s<r;s++)for(var c=t[s].data,u=0;u<c.length;u++)this.data[o++]=c[u];this._len=o}},a.prototype.addData=function(t,r,n,o,s,l,u,c,f){if(this._saveData){var h=this.data;this._len+arguments.length>h.length&&(this._expandData(),h=this.data);for(var v=0;v<arguments.length;v++)h[this._len++]=arguments[v]}},a.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},a.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},a.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(t)))}},a.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,o=0,s=0,l;for(l=0;l<this._len;){var u=t[l++],c=l===1;switch(c&&(r=t[l],n=t[l+1],o=r,s=n),u){case CMD$4.M:r=o=t[l++],n=s=t[l++],min2[0]=o,min2[1]=s,max2[0]=o,max2[1]=s;break;case CMD$4.L:fromLine(r,n,t[l],t[l+1],min2,max2),r=t[l++],n=t[l++];break;case CMD$4.C:fromCubic(r,n,t[l++],t[l++],t[l++],t[l++],t[l],t[l+1],min2,max2),r=t[l++],n=t[l++];break;case CMD$4.Q:fromQuadratic(r,n,t[l++],t[l++],t[l],t[l+1],min2,max2),r=t[l++],n=t[l++];break;case CMD$4.A:var f=t[l++],h=t[l++],v=t[l++],d=t[l++],p=t[l++],g=t[l++]+p;l+=1;var y=!t[l++];c&&(o=mathCos$3(p)*v+f,s=mathSin$3(p)*d+h),fromArc(f,h,v,d,p,g,y,min2,max2),r=mathCos$3(g)*v+f,n=mathSin$3(g)*d+h;break;case CMD$4.R:o=r=t[l++],s=n=t[l++];var _=t[l++],S=t[l++];fromLine(o,s,o+_,s+S,min2,max2);break;case CMD$4.Z:r=o,n=s;break}min$1(min,min,min2),max$1(max,max,max2)}return l===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},a.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,o=this._uy,s=0,l=0,u=0,c=0;this._pathSegLen||(this._pathSegLen=[]);for(var f=this._pathSegLen,h=0,v=0,d=0;d<r;){var p=t[d++],g=d===1;g&&(s=t[d],l=t[d+1],u=s,c=l);var y=-1;switch(p){case CMD$4.M:s=u=t[d++],l=c=t[d++];break;case CMD$4.L:{var _=t[d++],S=t[d++],x=_-s,T=S-l;(mathAbs$3(x)>n||mathAbs$3(T)>o||d===r-1)&&(y=Math.sqrt(x*x+T*T),s=_,l=S);break}case CMD$4.C:{var b=t[d++],C=t[d++],_=t[d++],S=t[d++],w=t[d++],M=t[d++];y=cubicLength(s,l,b,C,_,S,w,M,10),s=w,l=M;break}case CMD$4.Q:{var b=t[d++],C=t[d++],_=t[d++],S=t[d++];y=quadraticLength(s,l,b,C,_,S,10),s=_,l=S;break}case CMD$4.A:var P=t[d++],L=t[d++],E=t[d++],I=t[d++],R=t[d++],D=t[d++],O=D+R;d+=1,g&&(u=mathCos$3(R)*E+P,c=mathSin$3(R)*I+L),y=mathMax$8(E,I)*mathMin$8(PI2$7,Math.abs(D)),s=mathCos$3(O)*E+P,l=mathSin$3(O)*I+L;break;case CMD$4.R:{u=s=t[d++],c=l=t[d++];var $=t[d++],N=t[d++];y=$*2+N*2;break}case CMD$4.Z:{var x=u-s,T=c-l;y=Math.sqrt(x*x+T*T),s=u,l=c;break}}y>=0&&(f[v++]=y,h+=y)}return this._pathLen=h,h},a.prototype.rebuildPath=function(t,r){var n=this.data,o=this._ux,s=this._uy,l=this._len,u,c,f,h,v,d,p=r<1,g,y,_=0,S=0,x,T=0,b,C;if(!(p&&(this._pathSegLen||this._calculateLength(),g=this._pathSegLen,y=this._pathLen,x=r*y,!x)))e:for(var w=0;w<l;){var M=n[w++],P=w===1;switch(P&&(f=n[w],h=n[w+1],u=f,c=h),M!==CMD$4.L&&T>0&&(t.lineTo(b,C),T=0),M){case CMD$4.M:u=f=n[w++],c=h=n[w++],t.moveTo(f,h);break;case CMD$4.L:{v=n[w++],d=n[w++];var L=mathAbs$3(v-f),E=mathAbs$3(d-h);if(L>o||E>s){if(p){var I=g[S++];if(_+I>x){var R=(x-_)/I;t.lineTo(f*(1-R)+v*R,h*(1-R)+d*R);break e}_+=I}t.lineTo(v,d),f=v,h=d,T=0}else{var D=L*L+E*E;D>T&&(b=v,C=d,T=D)}break}case CMD$4.C:{var O=n[w++],$=n[w++],N=n[w++],V=n[w++],B=n[w++],F=n[w++];if(p){var I=g[S++];if(_+I>x){var R=(x-_)/I;cubicSubdivide(f,O,N,B,R,tmpOutX),cubicSubdivide(h,$,V,F,R,tmpOutY),t.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}_+=I}t.bezierCurveTo(O,$,N,V,B,F),f=B,h=F;break}case CMD$4.Q:{var O=n[w++],$=n[w++],N=n[w++],V=n[w++];if(p){var I=g[S++];if(_+I>x){var R=(x-_)/I;quadraticSubdivide(f,O,N,R,tmpOutX),quadraticSubdivide(h,$,V,R,tmpOutY),t.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}_+=I}t.quadraticCurveTo(O,$,N,V),f=N,h=V;break}case CMD$4.A:var G=n[w++],z=n[w++],H=n[w++],U=n[w++],Y=n[w++],Z=n[w++],J=n[w++],ee=!n[w++],K=H>U?H:U,X=mathAbs$3(H-U)>.001,q=Y+Z,W=!1;if(p){var I=g[S++];_+I>x&&(q=Y+Z*(x-_)/I,W=!0),_+=I}if(X&&t.ellipse?t.ellipse(G,z,H,U,J,Y,q,ee):t.arc(G,z,K,Y,q,ee),W)break e;P&&(u=mathCos$3(Y)*H+G,c=mathSin$3(Y)*U+z),f=mathCos$3(q)*H+G,h=mathSin$3(q)*U+z;break;case CMD$4.R:u=f=n[w],c=h=n[w+1],v=n[w++],d=n[w++];var j=n[w++],re=n[w++];if(p){var I=g[S++];if(_+I>x){var Q=x-_;t.moveTo(v,d),t.lineTo(v+mathMin$8(Q,j),d),Q-=j,Q>0&&t.lineTo(v+j,d+mathMin$8(Q,re)),Q-=re,Q>0&&t.lineTo(v+mathMax$8(j-Q,0),d+re),Q-=j,Q>0&&t.lineTo(v,d+mathMax$8(re-Q,0));break e}_+=I}t.rect(v,d,j,re);break;case CMD$4.Z:if(p){var I=g[S++];if(_+I>x){var R=(x-_)/I;t.lineTo(f*(1-R)+u*R,h*(1-R)+c*R);break e}_+=I}t.closePath(),f=u,h=c}}},a.prototype.clone=function(){var t=new a,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},a.prototype.canSave=function(){return!!this._saveData},a.CMD=CMD$4,a.initDefaultProps=function(){var t=a.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),a}();function containStroke$4(a,t,r,n,o,s,l){if(o===0)return!1;var u=o,c=0,f=a;if(l>t+u&&l>n+u||l<t-u&&l<n-u||s>a+u&&s>r+u||s<a-u&&s<r-u)return!1;if(a!==r)c=(t-n)/(a-r),f=(a*n-r*t)/(a-r);else return Math.abs(s-a)<=u/2;var h=c*s-l+f,v=h*h/(c*c+1);return v<=u/2*u/2}function containStroke$3(a,t,r,n,o,s,l,u,c,f,h){if(c===0)return!1;var v=c;if(h>t+v&&h>n+v&&h>s+v&&h>u+v||h<t-v&&h<n-v&&h<s-v&&h<u-v||f>a+v&&f>r+v&&f>o+v&&f>l+v||f<a-v&&f<r-v&&f<o-v&&f<l-v)return!1;var d=cubicProjectPoint(a,t,r,n,o,s,l,u,f,h,null);return d<=v/2}function containStroke$2(a,t,r,n,o,s,l,u,c){if(l===0)return!1;var f=l;if(c>t+f&&c>n+f&&c>s+f||c<t-f&&c<n-f&&c<s-f||u>a+f&&u>r+f&&u>o+f||u<a-f&&u<r-f&&u<o-f)return!1;var h=quadraticProjectPoint(a,t,r,n,o,s,u,c,null);return h<=f/2}var PI2$6=Math.PI*2;function normalizeRadian(a){return a%=PI2$6,a<0&&(a+=PI2$6),a}var PI2$5=Math.PI*2;function containStroke$1(a,t,r,n,o,s,l,u,c){if(l===0)return!1;var f=l;u-=a,c-=t;var h=Math.sqrt(u*u+c*c);if(h-f>r||h+f<r)return!1;if(Math.abs(n-o)%PI2$5<1e-4)return!0;if(s){var v=n;n=normalizeRadian(o),o=normalizeRadian(v)}else n=normalizeRadian(n),o=normalizeRadian(o);n>o&&(o+=PI2$5);var d=Math.atan2(c,u);return d<0&&(d+=PI2$5),d>=n&&d<=o||d+PI2$5>=n&&d+PI2$5<=o}function windingLine(a,t,r,n,o,s){if(s>t&&s>n||s<t&&s<n||n===t)return 0;var l=(s-t)/(n-t),u=n<t?1:-1;(l===1||l===0)&&(u=n<t?.5:-.5);var c=l*(r-a)+a;return c===o?1/0:c>o?u:0}var CMD$3=PathProxy.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(a,t){return Math.abs(a-t)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var a=extrema[0];extrema[0]=extrema[1],extrema[1]=a}function windingCubic(a,t,r,n,o,s,l,u,c,f){if(f>t&&f>n&&f>s&&f>u||f<t&&f<n&&f<s&&f<u)return 0;var h=cubicRootAt(t,n,s,u,f,roots);if(h===0)return 0;for(var v=0,d=-1,p=void 0,g=void 0,y=0;y<h;y++){var _=roots[y],S=_===0||_===1?.5:1,x=cubicAt(a,r,o,l,_);x<c||(d<0&&(d=cubicExtrema(t,n,s,u,extrema),extrema[1]<extrema[0]&&d>1&&swapExtrema(),p=cubicAt(t,n,s,u,extrema[0]),d>1&&(g=cubicAt(t,n,s,u,extrema[1]))),d===2?_<extrema[0]?v+=p<t?S:-S:_<extrema[1]?v+=g<p?S:-S:v+=u<g?S:-S:_<extrema[0]?v+=p<t?S:-S:v+=u<p?S:-S)}return v}function windingQuadratic(a,t,r,n,o,s,l,u){if(u>t&&u>n&&u>s||u<t&&u<n&&u<s)return 0;var c=quadraticRootAt(t,n,s,u,roots);if(c===0)return 0;var f=quadraticExtremum(t,n,s);if(f>=0&&f<=1){for(var h=0,v=quadraticAt$1(t,n,s,f),d=0;d<c;d++){var p=roots[d]===0||roots[d]===1?.5:1,g=quadraticAt$1(a,r,o,roots[d]);g<l||(roots[d]<f?h+=v<t?p:-p:h+=s<v?p:-p)}return h}else{var p=roots[0]===0||roots[0]===1?.5:1,g=quadraticAt$1(a,r,o,roots[0]);return g<l?0:s<t?p:-p}}function windingArc(a,t,r,n,o,s,l,u){if(u-=t,u>r||u<-r)return 0;var c=Math.sqrt(r*r-u*u);roots[0]=-c,roots[1]=c;var f=Math.abs(n-o);if(f<1e-4)return 0;if(f>=PI2$4-1e-4){n=0,o=PI2$4;var h=s?1:-1;return l>=roots[0]+a&&l<=roots[1]+a?h:0}if(n>o){var v=n;n=o,o=v}n<0&&(n+=PI2$4,o+=PI2$4);for(var d=0,p=0;p<2;p++){var g=roots[p];if(g+a>l){var y=Math.atan2(u,g),h=s?1:-1;y<0&&(y=PI2$4+y),(y>=n&&y<=o||y+PI2$4>=n&&y+PI2$4<=o)&&(y>Math.PI/2&&y<Math.PI*1.5&&(h=-h),d+=h)}}return d}function containPath(a,t,r,n,o){for(var s=a.data,l=a.len(),u=0,c=0,f=0,h=0,v=0,d,p,g=0;g<l;){var y=s[g++],_=g===1;switch(y===CMD$3.M&&g>1&&(r||(u+=windingLine(c,f,h,v,n,o))),_&&(c=s[g],f=s[g+1],h=c,v=f),y){case CMD$3.M:h=s[g++],v=s[g++],c=h,f=v;break;case CMD$3.L:if(r){if(containStroke$4(c,f,s[g],s[g+1],t,n,o))return!0}else u+=windingLine(c,f,s[g],s[g+1],n,o)||0;c=s[g++],f=s[g++];break;case CMD$3.C:if(r){if(containStroke$3(c,f,s[g++],s[g++],s[g++],s[g++],s[g],s[g+1],t,n,o))return!0}else u+=windingCubic(c,f,s[g++],s[g++],s[g++],s[g++],s[g],s[g+1],n,o)||0;c=s[g++],f=s[g++];break;case CMD$3.Q:if(r){if(containStroke$2(c,f,s[g++],s[g++],s[g],s[g+1],t,n,o))return!0}else u+=windingQuadratic(c,f,s[g++],s[g++],s[g],s[g+1],n,o)||0;c=s[g++],f=s[g++];break;case CMD$3.A:var S=s[g++],x=s[g++],T=s[g++],b=s[g++],C=s[g++],w=s[g++];g+=1;var M=!!(1-s[g++]);d=Math.cos(C)*T+S,p=Math.sin(C)*b+x,_?(h=d,v=p):u+=windingLine(c,f,d,p,n,o);var P=(n-S)*b/T+S;if(r){if(containStroke$1(S,x,b,C,C+w,M,t,P,o))return!0}else u+=windingArc(S,x,b,C,C+w,M,P,o);c=Math.cos(C+w)*T+S,f=Math.sin(C+w)*b+x;break;case CMD$3.R:h=c=s[g++],v=f=s[g++];var L=s[g++],E=s[g++];if(d=h+L,p=v+E,r){if(containStroke$4(h,v,d,v,t,n,o)||containStroke$4(d,v,d,p,t,n,o)||containStroke$4(d,p,h,p,t,n,o)||containStroke$4(h,p,h,v,t,n,o))return!0}else u+=windingLine(d,v,d,p,n,o),u+=windingLine(h,p,h,v,n,o);break;case CMD$3.Z:if(r){if(containStroke$4(c,f,h,v,t,n,o))return!0}else u+=windingLine(c,f,h,v,n,o);c=h,f=v;break}}return!r&&!isAroundEqual$1(f,v)&&(u+=windingLine(c,f,h,v,n,o)||0),u!==0}function contain$2(a,t,r){return containPath(a,0,!1,t,r)}function containStroke(a,t,r,n){return containPath(a,t,!0,r,n)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.update=function(){var r=this;a.prototype.update.call(this);var n=this.style;if(n.decal){var o=this._decalEl=this._decalEl||new t;o.buildPath===t.prototype.buildPath&&(o.buildPath=function(c){r.buildPath(c,r.shape)}),o.silent=!0;var s=o.style;for(var l in n)s[l]!==n[l]&&(s[l]=n[l]);s.fill=n.fill?n.decal:null,s.decal=null,s.shadowColor=null,n.strokeFirst&&(s.stroke=null);for(var u=0;u<pathCopyParams.length;++u)o[pathCopyParams[u]]=this[pathCopyParams[u]];o.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=keys(r);this.shape=this.getDefaultShape();var o=this.getDefaultStyle();o&&this.useStyle(o);for(var s=0;s<n.length;s++){var l=n[s],u=r[l];l==="style"?this.style?extend(this.style,u):this.useStyle(u):l==="shape"?extend(this.shape,u):a.prototype.attrKV.call(this,l,u)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(isString(r)){var n=lum(r,0);return n>.5?DARK_LABEL_COLOR:n>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(r)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(isString(n)){var o=this.__zr,s=!!(o&&o.isDarkMode()),l=lum(r,0)<DARK_MODE_THRESHOLD;if(s===l)return n}},t.prototype.buildPath=function(r,n,o){},t.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,o=!r;if(o){var s=!1;this.path||(s=!0,this.createPathProxy());var l=this.path;(s||this.__dirty&SHAPE_CHANGED_BIT)&&(l.beginPath(),this.buildPath(l,this.shape,!1),this.pathUpdated()),r=l.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var u=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||o){u.copy(r);var c=n.strokeNoScale?this.getLineScale():1,f=n.lineWidth;if(!this.hasFill()){var h=this.strokeContainThreshold;f=Math.max(f,h??4)}c>1e-10&&(u.width+=f/c,u.height+=f/c,u.x-=f/c/2,u.y-=f/c/2)}return u}return r},t.prototype.contain=function(r,n){var o=this.transformCoordToLocal(r,n),s=this.getBoundingRect(),l=this.style;if(r=o[0],n=o[1],s.contain(r,n)){var u=this.path;if(this.hasStroke()){var c=l.lineWidth,f=l.strokeNoScale?this.getLineScale():1;if(f>1e-10&&(this.hasFill()||(c=Math.max(c,this.strokeContainThreshold)),containStroke(u,c/f,r,n)))return!0}if(this.hasFill())return contain$2(u,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):a.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var o=this.shape;return o||(o=this.shape={}),typeof r=="string"?o[r]=n:extend(o,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},t.prototype.createStyle=function(r){return createObject(DEFAULT_PATH_STYLE,r)},t.prototype._innerSaveToNormal=function(r){a.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=extend({},this.shape))},t.prototype._applyStateObj=function(r,n,o,s,l,u){a.prototype._applyStateObj.call(this,r,n,o,s,l,u);var c=!(n&&s),f;if(n&&n.shape?l?s?f=n.shape:(f=extend({},o.shape),extend(f,n.shape)):(f=extend({},s?this.shape:o.shape),extend(f,n.shape)):c&&(f=o.shape),f)if(l){this.shape=extend({},this.shape);for(var h={},v=keys(f),d=0;d<v.length;d++){var p=v[d];typeof f[p]=="object"?this.shape[p]=f[p]:h[p]=f[p]}this._transitionState(r,{shape:h},u)}else this.shape=f,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=a.prototype._mergeStates.call(this,r),o,s=0;s<r.length;s++){var l=r[s];l.shape&&(o=o||{},this._mergeStyle(o,l.shape))}return o&&(n.shape=o),n},t.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(s){__extends(l,s);function l(u){var c=s.call(this,u)||this;return r.init&&r.init.call(c,u),c}return l.prototype.getDefaultStyle=function(){return clone$4(r.style)},l.prototype.getDefaultShape=function(){return clone$4(r.shape)},l}(t);for(var o in r)typeof r[o]=="function"&&(n.prototype[o]=r[o]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),t}(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.hasStroke=function(){return tSpanHasStroke(this.style)},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return createObject(DEFAULT_TSPAN_STYLE,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){return this._rect||(this._rect=tSpanCreateBoundingRect(this.style)),this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(a){return!!(a&&typeof a!="string"&&a.width&&a.height)}var ZRImage=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return createObject(DEFAULT_IMAGE_STYLE,r)},t.prototype._getSize=function(r){var n=this.style,o=n[r];if(o!=null)return o;var s=isImageLike$1(n.image)?n.image:this.__image;if(!s)return 0;var l=r==="width"?"height":"width",u=n[l];return u==null?s[r]:s[r]/s[l]*u},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new BoundingRect(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Displayable);ZRImage.prototype.type="image";function buildPath$2(a,t){var r=t.x,n=t.y,o=t.width,s=t.height,l=t.r,u,c,f,h;o<0&&(r=r+o,o=-o),s<0&&(n=n+s,s=-s),typeof l=="number"?u=c=f=h=l:l instanceof Array?l.length===1?u=c=f=h=l[0]:l.length===2?(u=f=l[0],c=h=l[1]):l.length===3?(u=l[0],c=h=l[1],f=l[2]):(u=l[0],c=l[1],f=l[2],h=l[3]):u=c=f=h=0;var v;u+c>o&&(v=u+c,u*=o/v,c*=o/v),f+h>o&&(v=f+h,f*=o/v,h*=o/v),c+f>s&&(v=c+f,c*=s/v,f*=s/v),u+h>s&&(v=u+h,u*=s/v,h*=s/v),a.moveTo(r+u,n),a.lineTo(r+o-c,n),c!==0&&a.arc(r+o-c,n+c,c,-Math.PI/2,0),a.lineTo(r+o,n+s-f),f!==0&&a.arc(r+o-f,n+s-f,f,0,Math.PI/2),a.lineTo(r+h,n+s),h!==0&&a.arc(r+h,n+s-h,h,Math.PI/2,Math.PI),a.lineTo(r,n+u),u!==0&&a.arc(r+u,n+u,u,Math.PI,Math.PI*1.5)}var round$3=Math.round;function subPixelOptimizeLine$1(a,t,r){if(t){var n=t.x1,o=t.x2,s=t.y1,l=t.y2;a.x1=n,a.x2=o,a.y1=s,a.y2=l;var u=r&&r.lineWidth;return u&&(round$3(n*2)===round$3(o*2)&&(a.x1=a.x2=subPixelOptimize$1(n,u,!0)),round$3(s*2)===round$3(l*2)&&(a.y1=a.y2=subPixelOptimize$1(s,u,!0))),a}}function subPixelOptimizeRect$1(a,t,r){if(t){var n=t.x,o=t.y,s=t.width,l=t.height;a.x=n,a.y=o,a.width=s,a.height=l;var u=r&&r.lineWidth;return u&&(a.x=subPixelOptimize$1(n,u,!0),a.y=subPixelOptimize$1(o,u,!0),a.width=Math.max(subPixelOptimize$1(n+s,u,!1)-a.x,s===0?0:1),a.height=Math.max(subPixelOptimize$1(o+l,u,!1)-a.y,l===0?0:1)),a}}function subPixelOptimize$1(a,t,r){if(!t)return a;var n=round$3(a*2);return(n+round$3(t))%2===0?n/2:(n+(r?1:-1))/2}var RectShape=function(){function a(){this.x=0,this.y=0,this.width=0,this.height=0}return a}(),subPixelOptimizeOutputShape$1={},Rect$2=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new RectShape},t.prototype.buildPath=function(r,n){var o,s,l,u;if(this.subPixelOptimize){var c=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,n,this.style);o=c.x,s=c.y,l=c.width,u=c.height,c.r=n.r,n=c}else o=n.x,s=n.y,l=n.width,u=n.height;n.r?buildPath$2(r,n):r.rect(o,s,l,u)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,tmpCITOverflowAreaOut={},DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(a){__extends(t,a);function t(r){var n=a.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=DEFAULT_RICH_TEXT_COLOR,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){a.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):a.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):a.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),a.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){a.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){a.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new BoundingRect(0,0,0,0),n=this._children,o=[],s=null,l=0;l<n.length;l++){var u=n[l],c=u.getBoundingRect(),f=u.getLocalTransform(o);f?(r.copy(c),r.applyTransform(f),s=s||r.clone(),s.union(r)):(s=s||c.clone(),s.union(c))}this._rect=s||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||DEFAULT_RICH_TEXT_COLOR},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var o=n.rich,s=r.rich||o&&{};return extend(r,n),o&&s?(this._mergeRich(s,o),r.rich=s):s&&(r.rich=s),r},t.prototype._mergeRich=function(r,n){for(var o=keys(n),s=0;s<o.length;s++){var l=o[s];r[l]=r[l]||{},extend(r[l],n[l])}},t.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||DEFAULT_FONT,o=r.padding,s=this._defaultStyle,l=r.x||0,u=r.y||0,c=r.align||s.align||"left",f=r.verticalAlign||s.verticalAlign||"top";calcInnerTextOverflowArea(tmpCITOverflowAreaOut,s.overflowRect,l,u,c,f),l=tmpCITOverflowAreaOut.baseX,u=tmpCITOverflowAreaOut.baseY;var h=getStyleText(r),v=parsePlainText(h,r,tmpCITOverflowAreaOut.outerWidth,tmpCITOverflowAreaOut.outerHeight),d=needDrawBackground(r),p=!!r.backgroundColor,g=v.outerHeight,y=v.outerWidth,_=v.lines,S=v.lineHeight;this.isTruncated=!!v.isTruncated;var x=l,T=adjustTextY(u,v.contentHeight,f);if(d||o){var b=adjustTextX(l,y,c),C=adjustTextY(u,g,f);d&&this._renderBackground(r,r,b,C,y,g)}T+=S/2,o&&(x=getTextXForPadding(l,c,o),f==="top"?T+=o[0]:f==="bottom"&&(T-=o[2]));for(var w=0,M=!1,P=!1,L=getFill("fill"in r?r.fill:(P=!0,s.fill)),E=getStroke("stroke"in r?r.stroke:!p&&(!s.autoStroke||P)?(w=DEFAULT_STROKE_LINE_WIDTH,M=!0,s.stroke):null),I=r.textShadowBlur>0,R=0;R<_.length;R++){var D=this._getOrCreateChild(TSpan),O=D.createStyle();D.useStyle(O),O.text=_[R],O.x=x,O.y=T,c&&(O.textAlign=c),O.textBaseline="middle",O.opacity=r.opacity,O.strokeFirst=!0,I&&(O.shadowBlur=r.textShadowBlur||0,O.shadowColor=r.textShadowColor||"transparent",O.shadowOffsetX=r.textShadowOffsetX||0,O.shadowOffsetY=r.textShadowOffsetY||0),O.stroke=E,O.fill=L,E&&(O.lineWidth=r.lineWidth||w,O.lineDash=r.lineDash,O.lineDashOffset=r.lineDashOffset||0),O.font=n,setSeparateFont(O,r),T+=S,D.setBoundingRect(tSpanCreateBoundingRect2(O,v.contentWidth,v.calculatedLineHeight,M?0:null))}},t.prototype._updateRichTexts=function(){var r=this.style,n=this._defaultStyle,o=r.align||n.align,s=r.verticalAlign||n.verticalAlign,l=r.x||0,u=r.y||0;calcInnerTextOverflowArea(tmpCITOverflowAreaOut,n.overflowRect,l,u,o,s),l=tmpCITOverflowAreaOut.baseX,u=tmpCITOverflowAreaOut.baseY;var c=getStyleText(r),f=parseRichText(c,r,tmpCITOverflowAreaOut.outerWidth,tmpCITOverflowAreaOut.outerHeight,o),h=f.width,v=f.outerWidth,d=f.outerHeight,p=r.padding;this.isTruncated=!!f.isTruncated;var g=adjustTextX(l,v,o),y=adjustTextY(u,d,s),_=g,S=y;p&&(_+=p[3],S+=p[0]);var x=_+h;needDrawBackground(r)&&this._renderBackground(r,r,g,y,v,d);for(var T=!!r.backgroundColor,b=0;b<f.lines.length;b++){for(var C=f.lines[b],w=C.tokens,M=w.length,P=C.lineHeight,L=C.width,E=0,I=_,R=x,D=M-1,O=void 0;E<M&&(O=w[E],!O.align||O.align==="left");)this._placeToken(O,r,P,S,I,"left",T),L-=O.width,I+=O.width,E++;for(;D>=0&&(O=w[D],O.align==="right");)this._placeToken(O,r,P,S,R,"right",T),L-=O.width,R-=O.width,D--;for(I+=(h-(I-_)-(x-R)-L)/2;E<=D;)O=w[E],this._placeToken(O,r,P,S,I+O.width/2,"center",T),I+=O.width,E++;S+=P}},t.prototype._placeToken=function(r,n,o,s,l,u,c){var f=n.rich[r.styleName]||{};f.text=r.text;var h=r.verticalAlign,v=s+o/2;h==="top"?v=s+r.height/2:h==="bottom"&&(v=s+o-r.height/2);var d=!r.isLineHolder&&needDrawBackground(f);d&&this._renderBackground(f,n,u==="right"?l-r.width:u==="center"?l-r.width/2:l,v-r.height/2,r.width,r.height);var p=!!f.backgroundColor,g=r.textPadding;g&&(l=getTextXForPadding(l,u,g),v-=r.height/2-g[0]-r.innerHeight/2);var y=this._getOrCreateChild(TSpan),_=y.createStyle();y.useStyle(_);var S=this._defaultStyle,x=!1,T=0,b=!1,C=getFill("fill"in f?f.fill:"fill"in n?n.fill:(x=!0,S.fill)),w=getStroke("stroke"in f?f.stroke:"stroke"in n?n.stroke:!p&&!c&&(!S.autoStroke||x)?(T=DEFAULT_STROKE_LINE_WIDTH,b=!0,S.stroke):null),M=f.textShadowBlur>0||n.textShadowBlur>0;_.text=r.text,_.x=l,_.y=v,M&&(_.shadowBlur=f.textShadowBlur||n.textShadowBlur||0,_.shadowColor=f.textShadowColor||n.textShadowColor||"transparent",_.shadowOffsetX=f.textShadowOffsetX||n.textShadowOffsetX||0,_.shadowOffsetY=f.textShadowOffsetY||n.textShadowOffsetY||0),_.textAlign=u,_.textBaseline="middle",_.font=r.font||DEFAULT_FONT,_.opacity=retrieve3(f.opacity,n.opacity,1),setSeparateFont(_,f),w&&(_.lineWidth=retrieve3(f.lineWidth,n.lineWidth,T),_.lineDash=retrieve2(f.lineDash,n.lineDash),_.lineDashOffset=n.lineDashOffset||0,_.stroke=w),C&&(_.fill=C),y.setBoundingRect(tSpanCreateBoundingRect2(_,r.contentWidth,r.contentHeight,b?0:null))},t.prototype._renderBackground=function(r,n,o,s,l,u){var c=r.backgroundColor,f=r.borderWidth,h=r.borderColor,v=c&&c.image,d=c&&!v,p=r.borderRadius,g=this,y,_;if(d||r.lineHeight||f&&h){y=this._getOrCreateChild(Rect$2),y.useStyle(y.createStyle()),y.style.fill=null;var S=y.shape;S.x=o,S.y=s,S.width=l,S.height=u,S.r=p,y.dirtyShape()}if(d){var x=y.style;x.fill=c||null,x.fillOpacity=retrieve2(r.fillOpacity,1)}else if(v){_=this._getOrCreateChild(ZRImage),_.onload=function(){g.dirtyStyle()};var T=_.style;T.image=c.image,T.x=o,T.y=s,T.width=l,T.height=u}if(f&&h){var x=y.style;x.lineWidth=f,x.stroke=h,x.strokeOpacity=retrieve2(r.strokeOpacity,1),x.lineDash=r.borderDash,x.lineDashOffset=r.borderDashOffset||0,y.strokeContainThreshold=0,y.hasFill()&&y.hasStroke()&&(x.strokeFirst=!0,x.lineWidth*=2)}var b=(y||_).style;b.shadowBlur=r.shadowBlur||0,b.shadowColor=r.shadowColor||"transparent",b.shadowOffsetX=r.shadowOffsetX||0,b.shadowOffsetY=r.shadowOffsetY||0,b.opacity=retrieve3(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return hasSeparateFont(r)&&(n=[r.fontStyle,r.fontWeight,parseFontSize(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&trim$1(n)||r.textFont||r.font},t}(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(a){return typeof a=="string"&&(a.indexOf("px")!==-1||a.indexOf("rem")!==-1||a.indexOf("em")!==-1)?a:isNaN(+a)?DEFAULT_FONT_SIZE+"px":a+"px"}function setSeparateFont(a,t){for(var r=0;r<FONT_PARTS.length;r++){var n=FONT_PARTS[r],o=t[n];o!=null&&(a[n]=o)}}function hasSeparateFont(a){return a.fontSize!=null||a.fontFamily||a.fontWeight}function normalizeTextStyle(a){return normalizeStyle(a),each$f(a.rich,normalizeStyle),a}function normalizeStyle(a){if(a){a.font=ZRText.makeFont(a);var t=a.align;t==="middle"&&(t="center"),a.align=t==null||VALID_TEXT_ALIGN[t]?t:"left";var r=a.verticalAlign;r==="center"&&(r="middle"),a.verticalAlign=r==null||VALID_TEXT_VERTICAL_ALIGN[r]?r:"top";var n=a.padding;n&&(a.padding=normalizeCssArray$1(a.padding))}}function getStroke(a,t){return a==null||t<=0||a==="transparent"||a==="none"?null:a.image||a.colorStops?"#000":a}function getFill(a){return a==null||a==="none"?null:a.image||a.colorStops?"#000":a}function getTextXForPadding(a,t,r){return t==="right"?a-r[1]:t==="center"?a+r[3]/2-r[1]/2:a+r[3]}function getStyleText(a){var t=a.text;return t!=null&&(t+=""),t}function needDrawBackground(a){return!!(a.backgroundColor||a.lineHeight||a.borderWidth&&a.borderColor)}var getECData=makeInner(),setCommonECData=function(a,t,r,n){if(n){var o=getECData(n);o.dataIndex=r,o.dataType=t,o.seriesIndex=a,o.ssrType="chart",n.type==="group"&&n.traverse(function(s){var l=getECData(s);l.seriesIndex=a,l.dataIndex=r,l.dataType=t,l.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect",SELECT_CHANGED_EVENT_TYPE="selectchanged";function hasFillOrStroke(a){return a!=null&&a!=="none"}function doChangeHoverState(a,t,r){a.onHoverStateChange&&(a.hoverState||0)!==r&&a.onHoverStateChange(t),a.hoverState=r}function singleEnterEmphasis(a){doChangeHoverState(a,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(a){a.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(a,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(a){doChangeHoverState(a,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(a){a.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(a,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(a){a.selected=!0}function singleLeaveSelect(a){a.selected=!1}function updateElementState(a,t,r){t(a,r)}function traverseUpdateState(a,t,r){updateElementState(a,t,r),a.isGroup&&a.traverse(function(n){updateElementState(n,t,r)})}function setStatesFlag(a,t){switch(t){case"emphasis":a.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":a.hoverState=HOVER_STATE_NORMAL;break;case"blur":a.hoverState=HOVER_STATE_BLUR;break;case"select":a.selected=!0}}function getFromStateStyle(a,t,r,n){for(var o=a.style,s={},l=0;l<t.length;l++){var u=t[l],c=o[u];s[u]=c??(n&&n[u])}for(var l=0;l<a.animators.length;l++){var f=a.animators[l];f.__fromStateTransition&&f.__fromStateTransition.indexOf(r)<0&&f.targetName==="style"&&f.saveTo(s,t)}return s}function createEmphasisDefaultState(a,t,r,n){var o=r&&indexOf(r,"select")>=0,s=!1;if(a instanceof Path){var l=getSavedStates(a),u=o&&l.selectFill||l.normalFill,c=o&&l.selectStroke||l.normalStroke;if(hasFillOrStroke(u)||hasFillOrStroke(c)){n=n||{};var f=n.style||{};f.fill==="inherit"?(s=!0,n=extend({},n),f=extend({},f),f.fill=u):!hasFillOrStroke(f.fill)&&hasFillOrStroke(u)?(s=!0,n=extend({},n),f=extend({},f),f.fill=liftColor(u)):!hasFillOrStroke(f.stroke)&&hasFillOrStroke(c)&&(s||(n=extend({},n),f=extend({},f)),f.stroke=liftColor(c)),n.style=f}}if(n&&n.z2==null){s||(n=extend({},n));var h=a.z2EmphasisLift;n.z2=a.z2+(h??Z2_EMPHASIS_LIFT)}return n}function createSelectDefaultState(a,t,r){if(r&&r.z2==null){r=extend({},r);var n=a.z2SelectLift;r.z2=a.z2+(n??Z2_SELECT_LIFT)}return r}function createBlurDefaultState(a,t,r){var n=indexOf(a.currentStates,t)>=0,o=a.style.opacity,s=n?null:getFromStateStyle(a,["opacity"],t,{opacity:1});r=r||{};var l=r.style||{};return l.opacity==null&&(r=extend({},r),l=extend({opacity:n?o:s.opacity*.1},l),r.style=l),r}function elementStateProxy(a,t){var r=this.states[a];if(this.style){if(a==="emphasis")return createEmphasisDefaultState(this,a,t,r);if(a==="blur")return createBlurDefaultState(this,a,r);if(a==="select")return createSelectDefaultState(this,a,r)}return r}function setDefaultStateProxy(a){a.stateProxy=elementStateProxy;var t=a.getTextContent(),r=a.getTextGuideLine();t&&(t.stateProxy=elementStateProxy),r&&(r.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(a,t){!shouldSilent(a,t)&&!a.__highByOuter&&traverseUpdateState(a,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(a,t){!shouldSilent(a,t)&&!a.__highByOuter&&traverseUpdateState(a,singleLeaveEmphasis)}function enterEmphasis(a,t){a.__highByOuter|=1<<(t||0),traverseUpdateState(a,singleEnterEmphasis)}function leaveEmphasis(a,t){!(a.__highByOuter&=~(1<<(t||0)))&&traverseUpdateState(a,singleLeaveEmphasis)}function enterBlur(a){traverseUpdateState(a,singleEnterBlur)}function leaveBlur(a){traverseUpdateState(a,singleLeaveBlur)}function enterSelect(a){traverseUpdateState(a,singleEnterSelect)}function leaveSelect(a){traverseUpdateState(a,singleLeaveSelect)}function shouldSilent(a,t){return a.__highDownSilentOnTouch&&t.zrByTouch}function allLeaveBlur(a){var t=a.getModel(),r=[],n=[];t.eachComponent(function(o,s){var l=getComponentStates(s),u=o==="series",c=u?a.getViewOfSeriesModel(s):a.getViewOfComponentModel(s);!u&&n.push(c),l.isBlured&&(c.group.traverse(function(f){singleLeaveBlur(f)}),u&&r.push(s)),l.isBlured=!1}),each$f(n,function(o){o&&o.toggleBlurSeries&&o.toggleBlurSeries(r,!1,t)})}function blurSeries(a,t,r,n){var o=n.getModel();r=r||"coordinateSystem";function s(f,h){for(var v=0;v<h.length;v++){var d=f.getItemGraphicEl(h[v]);d&&leaveBlur(d)}}if(a!=null&&!(!t||t==="none")){var l=o.getSeriesByIndex(a),u=l.coordinateSystem;u&&u.master&&(u=u.master);var c=[];o.eachSeries(function(f){var h=l===f,v=f.coordinateSystem;v&&v.master&&(v=v.master);var d=v&&u?v===u:h;if(!(r==="series"&&!h||r==="coordinateSystem"&&!d||t==="series"&&h)){var p=n.getViewOfSeriesModel(f);if(p.group.traverse(function(_){_.__highByOuter&&h&&t==="self"||singleEnterBlur(_)}),isArrayLike(t))s(f.getData(),t);else if(isObject$3(t))for(var g=keys(t),y=0;y<g.length;y++)s(f.getData(g[y]),t[g[y]]);c.push(f),getComponentStates(f).isBlured=!0}}),o.eachComponent(function(f,h){if(f!=="series"){var v=n.getViewOfComponentModel(h);v&&v.toggleBlurSeries&&v.toggleBlurSeries(c,!0,o)}})}}function blurComponent(a,t,r){if(!(a==null||t==null)){var n=r.getModel().getComponent(a,t);if(n){getComponentStates(n).isBlured=!0;var o=r.getViewOfComponentModel(n);!o||!o.focusBlurEnabled||o.group.traverse(function(s){singleEnterBlur(s)})}}}function blurSeriesFromHighlightPayload(a,t,r){var n=a.seriesIndex,o=a.getData(t.dataType);if(o){var s=queryDataIndex(o,t);s=(isArray$1(s)?s[0]:s)||0;var l=o.getItemGraphicEl(s);if(!l)for(var u=o.count(),c=0;!l&&c<u;)l=o.getItemGraphicEl(c++);if(l){var f=getECData(l);blurSeries(n,f.focus,f.blurScope,r)}else{var h=a.get(["emphasis","focus"]),v=a.get(["emphasis","blurScope"]);h!=null&&blurSeries(n,h,v,r)}}}function findComponentHighDownDispatchers(a,t,r,n){var o={focusSelf:!1,dispatchers:null};if(a==null||a==="series"||t==null||r==null)return o;var s=n.getModel().getComponent(a,t);if(!s)return o;var l=n.getViewOfComponentModel(s);if(!l||!l.findHighDownDispatchers)return o;for(var u=l.findHighDownDispatchers(r),c,f=0;f<u.length;f++)if(getECData(u[f]).focus==="self"){c=!0;break}return{focusSelf:c,dispatchers:u}}function handleGlobalMouseOverForHighDown(a,t,r){var n=getECData(a),o=findComponentHighDownDispatchers(n.componentMainType,n.componentIndex,n.componentHighDownName,r),s=o.dispatchers,l=o.focusSelf;s?(l&&blurComponent(n.componentMainType,n.componentIndex,r),each$f(s,function(u){return enterEmphasisWhenMouseOver(u,t)})):(blurSeries(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&blurComponent(n.componentMainType,n.componentIndex,r),enterEmphasisWhenMouseOver(a,t))}function handleGlobalMouseOutForHighDown(a,t,r){allLeaveBlur(r);var n=getECData(a),o=findComponentHighDownDispatchers(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;o?each$f(o,function(s){return leaveEmphasisWhenMouseOut(s,t)}):leaveEmphasisWhenMouseOut(a,t)}function toggleSelectionFromPayload(a,t,r){if(isSelectChangePayload(t)){var n=t.dataType,o=a.getData(n),s=queryDataIndex(o,t);isArray$1(s)||(s=[s]),a[t.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":t.type===SELECT_ACTION_TYPE?"select":"unselect"](s,n)}}function updateSeriesElementSelection(a){var t=a.getAllData();each$f(t,function(r){var n=r.data,o=r.type;n.eachItemGraphicEl(function(s,l){a.isSelected(l,o)?enterSelect(s):leaveSelect(s)})})}function getAllSelectedIndices(a){var t=[];return a.eachSeries(function(r){var n=r.getAllData();each$f(n,function(o){o.data;var s=o.type,l=r.getSelectedDataIndices();if(l.length>0){var u={dataIndex:l,seriesIndex:r.seriesIndex};s!=null&&(u.dataType=s),t.push(u)}})}),t}function enableHoverEmphasis(a,t,r){setAsHighDownDispatcher(a,!0),traverseUpdateState(a,setDefaultStateProxy),enableHoverFocus(a,t,r)}function disableHoverEmphasis(a){setAsHighDownDispatcher(a,!1)}function toggleHoverEmphasis(a,t,r,n){n?disableHoverEmphasis(a):enableHoverEmphasis(a,t,r)}function enableHoverFocus(a,t,r){var n=getECData(a);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(a,t,r,n){r=r||"itemStyle";for(var o=0;o<OTHER_STATES.length;o++){var s=OTHER_STATES[o],l=t.getModel([s,r]),u=a.ensureState(s);u.style=n?n(l):l[defaultStyleGetterMap[r]]()}}function setAsHighDownDispatcher(a,t){var r=t===!1,n=a;a.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=a.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function isHighDownDispatcher(a){return!!(a&&a.__highDownDispatcher)}function enableComponentHighDownFeatures(a,t,r){var n=getECData(a);n.componentMainType=t.mainType,n.componentIndex=t.componentIndex,n.componentHighDownName=r}function getHighlightDigit(a){var t=_highlightKeyMap[a];return t==null&&_highlightNextDigit<=32&&(t=_highlightKeyMap[a]=_highlightNextDigit++),t}function isSelectChangePayload(a){var t=a.type;return t===SELECT_ACTION_TYPE||t===UNSELECT_ACTION_TYPE||t===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(a){var t=a.type;return t===HIGHLIGHT_ACTION_TYPE||t===DOWNPLAY_ACTION_TYPE}function savePathStates(a){var t=getSavedStates(a);t.normalFill=a.style.fill,t.normalStroke=a.style.stroke;var r=a.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(a,t){if(t){var r=a.data,n=a.len(),o,s,l,u,c,f,h=CMD$2.M,v=CMD$2.C,d=CMD$2.L,p=CMD$2.R,g=CMD$2.A,y=CMD$2.Q;for(l=0,u=0;l<n;){switch(o=r[l++],u=l,s=0,o){case h:s=1;break;case d:s=1;break;case v:s=3;break;case y:s=2;break;case g:var _=t[4],S=t[5],x=mathSqrt$2(t[0]*t[0]+t[1]*t[1]),T=mathSqrt$2(t[2]*t[2]+t[3]*t[3]),b=mathAtan2(-t[1]/T,t[0]/x);r[l]*=x,r[l++]+=_,r[l]*=T,r[l++]+=S,r[l++]*=x,r[l++]*=T,r[l++]+=b,r[l++]+=b,l+=2,u=l;break;case p:f[0]=r[l++],f[1]=r[l++],applyTransform$1(f,f,t),r[u++]=f[0],r[u++]=f[1],f[0]+=r[l++],f[1]+=r[l++],applyTransform$1(f,f,t),r[u++]=f[0],r[u++]=f[1]}for(c=0;c<s;c++){var C=points$2[c];C[0]=r[l++],C[1]=r[l++],applyTransform$1(C,C,t),r[u++]=C[0],r[u++]=C[1]}}a.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function vRatio(a,t){return(a[0]*t[0]+a[1]*t[1])/(vMag(a)*vMag(t))}function vAngle(a,t){return(a[0]*t[1]<a[1]*t[0]?-1:1)*Math.acos(vRatio(a,t))}function processArc(a,t,r,n,o,s,l,u,c,f,h){var v=c*(PI$7/180),d=mathCos$2(v)*(a-r)/2+mathSin$2(v)*(t-n)/2,p=-1*mathSin$2(v)*(a-r)/2+mathCos$2(v)*(t-n)/2,g=d*d/(l*l)+p*p/(u*u);g>1&&(l*=mathSqrt$1(g),u*=mathSqrt$1(g));var y=(o===s?-1:1)*mathSqrt$1((l*l*(u*u)-l*l*(p*p)-u*u*(d*d))/(l*l*(p*p)+u*u*(d*d)))||0,_=y*l*p/u,S=y*-u*d/l,x=(a+r)/2+mathCos$2(v)*_-mathSin$2(v)*S,T=(t+n)/2+mathSin$2(v)*_+mathCos$2(v)*S,b=vAngle([1,0],[(d-_)/l,(p-S)/u]),C=[(d-_)/l,(p-S)/u],w=[(-1*d-_)/l,(-1*p-S)/u],M=vAngle(C,w);if(vRatio(C,w)<=-1&&(M=PI$7),vRatio(C,w)>=1&&(M=0),M<0){var P=Math.round(M/PI$7*1e6)/1e6;M=PI$7*2+P%2*PI$7}h.addData(f,x,T,l,u,b,M,v,s)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(a){var t=new PathProxy;if(!a)return t;var r=0,n=0,o=r,s=n,l,u=PathProxy.CMD,c=a.match(commandReg);if(!c)return t;for(var f=0;f<c.length;f++){for(var h=c[f],v=h.charAt(0),d=void 0,p=h.match(numberReg$1)||[],g=p.length,y=0;y<g;y++)p[y]=parseFloat(p[y]);for(var _=0;_<g;){var S=void 0,x=void 0,T=void 0,b=void 0,C=void 0,w=void 0,M=void 0,P=r,L=n,E=void 0,I=void 0;switch(v){case"l":r+=p[_++],n+=p[_++],d=u.L,t.addData(d,r,n);break;case"L":r=p[_++],n=p[_++],d=u.L,t.addData(d,r,n);break;case"m":r+=p[_++],n+=p[_++],d=u.M,t.addData(d,r,n),o=r,s=n,v="l";break;case"M":r=p[_++],n=p[_++],d=u.M,t.addData(d,r,n),o=r,s=n,v="L";break;case"h":r+=p[_++],d=u.L,t.addData(d,r,n);break;case"H":r=p[_++],d=u.L,t.addData(d,r,n);break;case"v":n+=p[_++],d=u.L,t.addData(d,r,n);break;case"V":n=p[_++],d=u.L,t.addData(d,r,n);break;case"C":d=u.C,t.addData(d,p[_++],p[_++],p[_++],p[_++],p[_++],p[_++]),r=p[_-2],n=p[_-1];break;case"c":d=u.C,t.addData(d,p[_++]+r,p[_++]+n,p[_++]+r,p[_++]+n,p[_++]+r,p[_++]+n),r+=p[_-2],n+=p[_-1];break;case"S":S=r,x=n,E=t.len(),I=t.data,l===u.C&&(S+=r-I[E-4],x+=n-I[E-3]),d=u.C,P=p[_++],L=p[_++],r=p[_++],n=p[_++],t.addData(d,S,x,P,L,r,n);break;case"s":S=r,x=n,E=t.len(),I=t.data,l===u.C&&(S+=r-I[E-4],x+=n-I[E-3]),d=u.C,P=r+p[_++],L=n+p[_++],r+=p[_++],n+=p[_++],t.addData(d,S,x,P,L,r,n);break;case"Q":P=p[_++],L=p[_++],r=p[_++],n=p[_++],d=u.Q,t.addData(d,P,L,r,n);break;case"q":P=p[_++]+r,L=p[_++]+n,r+=p[_++],n+=p[_++],d=u.Q,t.addData(d,P,L,r,n);break;case"T":S=r,x=n,E=t.len(),I=t.data,l===u.Q&&(S+=r-I[E-4],x+=n-I[E-3]),r=p[_++],n=p[_++],d=u.Q,t.addData(d,S,x,r,n);break;case"t":S=r,x=n,E=t.len(),I=t.data,l===u.Q&&(S+=r-I[E-4],x+=n-I[E-3]),r+=p[_++],n+=p[_++],d=u.Q,t.addData(d,S,x,r,n);break;case"A":T=p[_++],b=p[_++],C=p[_++],w=p[_++],M=p[_++],P=r,L=n,r=p[_++],n=p[_++],d=u.A,processArc(P,L,r,n,w,M,T,b,C,d,t);break;case"a":T=p[_++],b=p[_++],C=p[_++],w=p[_++],M=p[_++],P=r,L=n,r+=p[_++],n+=p[_++],d=u.A,processArc(P,L,r,n,w,M,T,b,C,d,t);break}}(v==="z"||v==="Z")&&(d=u.Z,t.addData(d),r=o,n=s),l=d}return t.toStatic(),t}var SVGPath=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(Path);function isPathProxy(a){return a.setData!=null}function createPathOptions(a,t){var r=createPathProxyFromString(a),n=extend({},t);return n.buildPath=function(o){var s=isPathProxy(o);if(s&&o.canSave()){o.appendPath(r);var l=o.getContext();l&&o.rebuildPath(l,1)}else{var l=s?o.getContext():o;l&&r.rebuildPath(l,1)}},n.applyTransform=function(o){transformPath(r,o),this.dirtyShape()},n}function createFromString(a,t){return new SVGPath(createPathOptions(a,t))}function extendFromString(a,t){var r=createPathOptions(a,t),n=function(o){__extends(s,o);function s(l){var u=o.call(this,l)||this;return u.applyTransform=r.applyTransform,u.buildPath=r.buildPath,u}return s}(SVGPath);return n}function mergePath$1(a,t){for(var r=[],n=a.length,o=0;o<n;o++){var s=a[o];r.push(s.getUpdatedPathProxy(!0))}var l=new Path(t);return l.createPathProxy(),l.buildPath=function(u){if(isPathProxy(u)){u.appendPath(r);var c=u.getContext();c&&u.rebuildPath(c,1)}},l}function clonePath(a,t){t=t||{};var r=new Path;return a.shape&&r.setShape(a.shape),r.setStyle(a.style),t.bakeTransform?transformPath(r.path,a.getComputedTransform()):t.toLocal?r.setLocalTransform(a.getComputedTransform()):r.copyTransform(a),r.buildPath=a.buildPath,r.applyTransform=r.applyTransform,r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel,r}var CircleShape=function(){function a(){this.cx=0,this.cy=0,this.r=0}return a}(),Circle=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new CircleShape},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(Path);Circle.prototype.type="circle";var EllipseShape=function(){function a(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return a}(),Ellipse=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new EllipseShape},t.prototype.buildPath=function(r,n){var o=.5522848,s=n.cx,l=n.cy,u=n.rx,c=n.ry,f=u*o,h=c*o;r.moveTo(s-u,l),r.bezierCurveTo(s-u,l-h,s-f,l-c,s,l-c),r.bezierCurveTo(s+f,l-c,s+u,l-h,s+u,l),r.bezierCurveTo(s+u,l+h,s+f,l+c,s,l+c),r.bezierCurveTo(s-f,l+c,s-u,l+h,s-u,l),r.closePath()},t}(Path);Ellipse.prototype.type="ellipse";var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$2=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(a,t,r,n,o,s,l,u){var c=r-a,f=n-t,h=l-o,v=u-s,d=v*c-h*f;if(!(d*d<e))return d=(h*(t-s)-v*(a-o))/d,[a+d*c,t+d*f]}function computeCornerTangents(a,t,r,n,o,s,l){var u=a-r,c=t-n,f=(l?s:-s)/mathSqrt(u*u+c*c),h=f*c,v=-f*u,d=a+h,p=t+v,g=r+h,y=n+v,_=(d+g)/2,S=(p+y)/2,x=g-d,T=y-p,b=x*x+T*T,C=o-s,w=d*y-g*p,M=(T<0?-1:1)*mathSqrt(mathMax$7(0,C*C*b-w*w)),P=(w*T-x*M)/b,L=(-w*x-T*M)/b,E=(w*T+x*M)/b,I=(-w*x+T*M)/b,R=P-_,D=L-S,O=E-_,$=I-S;return R*R+D*D>O*O+$*$&&(P=E,L=I),{cx:P,cy:L,x0:-h,y0:-v,x1:P*(o/C-1),y1:L*(o/C-1)}}function normalizeCornerRadius(a){var t;if(isArray$1(a)){var r=a.length;if(!r)return a;r===1?t=[a[0],a[0],0,0]:r===2?t=[a[0],a[0],a[1],a[1]]:r===3?t=a.concat(a[2]):t=a}else t=[a,a,a,a];return t}function buildPath$1(a,t){var r,n=mathMax$7(t.r,0),o=mathMax$7(t.r0||0,0),s=n>0,l=o>0;if(!(!s&&!l)){if(s||(n=o,o=0),o>n){var u=n;n=o,o=u}var c=t.startAngle,f=t.endAngle;if(!(isNaN(c)||isNaN(f))){var h=t.cx,v=t.cy,d=!!t.clockwise,p=mathAbs$2(f-c),g=p>PI2$3&&p%PI2$3;if(g>e&&(p=g),!(n>e))a.moveTo(h,v);else if(p>PI2$3-e)a.moveTo(h+n*mathCos$1(c),v+n*mathSin$1(c)),a.arc(h,v,n,c,f,!d),o>e&&(a.moveTo(h+o*mathCos$1(f),v+o*mathSin$1(f)),a.arc(h,v,o,f,c,d));else{var y=void 0,_=void 0,S=void 0,x=void 0,T=void 0,b=void 0,C=void 0,w=void 0,M=void 0,P=void 0,L=void 0,E=void 0,I=void 0,R=void 0,D=void 0,O=void 0,$=n*mathCos$1(c),N=n*mathSin$1(c),V=o*mathCos$1(f),B=o*mathSin$1(f),F=p>e;if(F){var G=t.cornerRadius;G&&(r=normalizeCornerRadius(G),y=r[0],_=r[1],S=r[2],x=r[3]);var z=mathAbs$2(n-o)/2;if(T=mathMin$7(z,S),b=mathMin$7(z,x),C=mathMin$7(z,y),w=mathMin$7(z,_),L=M=mathMax$7(T,b),E=P=mathMax$7(C,w),(M>e||P>e)&&(I=n*mathCos$1(f),R=n*mathSin$1(f),D=o*mathCos$1(c),O=o*mathSin$1(c),p<PI$6)){var H=intersect($,N,D,O,I,R,V,B);if(H){var U=$-H[0],Y=N-H[1],Z=I-H[0],J=R-H[1],ee=1/mathSin$1(mathACos((U*Z+Y*J)/(mathSqrt(U*U+Y*Y)*mathSqrt(Z*Z+J*J)))/2),K=mathSqrt(H[0]*H[0]+H[1]*H[1]);L=mathMin$7(M,(n-K)/(ee+1)),E=mathMin$7(P,(o-K)/(ee-1))}}}if(!F)a.moveTo(h+$,v+N);else if(L>e){var X=mathMin$7(S,L),q=mathMin$7(x,L),W=computeCornerTangents(D,O,$,N,n,X,d),j=computeCornerTangents(I,R,V,B,n,q,d);a.moveTo(h+W.cx+W.x0,v+W.cy+W.y0),L<M&&X===q?a.arc(h+W.cx,v+W.cy,L,mathATan2(W.y0,W.x0),mathATan2(j.y0,j.x0),!d):(X>0&&a.arc(h+W.cx,v+W.cy,X,mathATan2(W.y0,W.x0),mathATan2(W.y1,W.x1),!d),a.arc(h,v,n,mathATan2(W.cy+W.y1,W.cx+W.x1),mathATan2(j.cy+j.y1,j.cx+j.x1),!d),q>0&&a.arc(h+j.cx,v+j.cy,q,mathATan2(j.y1,j.x1),mathATan2(j.y0,j.x0),!d))}else a.moveTo(h+$,v+N),a.arc(h,v,n,c,f,!d);if(!(o>e)||!F)a.lineTo(h+V,v+B);else if(E>e){var X=mathMin$7(y,E),q=mathMin$7(_,E),W=computeCornerTangents(V,B,I,R,o,-q,d),j=computeCornerTangents($,N,D,O,o,-X,d);a.lineTo(h+W.cx+W.x0,v+W.cy+W.y0),E<P&&X===q?a.arc(h+W.cx,v+W.cy,E,mathATan2(W.y0,W.x0),mathATan2(j.y0,j.x0),!d):(q>0&&a.arc(h+W.cx,v+W.cy,q,mathATan2(W.y0,W.x0),mathATan2(W.y1,W.x1),!d),a.arc(h,v,o,mathATan2(W.cy+W.y1,W.cx+W.x1),mathATan2(j.cy+j.y1,j.cx+j.x1),d),X>0&&a.arc(h+j.cx,v+j.cy,X,mathATan2(j.y1,j.x1),mathATan2(j.y0,j.x0),!d))}else a.lineTo(h+V,v+B),a.arc(h,v,o,f,c,d)}a.closePath()}}}var SectorShape=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return a}(),Sector=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new SectorShape},t.prototype.buildPath=function(r,n){buildPath$1(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Path);Sector.prototype.type="sector";var RingShape=function(){function a(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return a}(),Ring=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new RingShape},t.prototype.buildPath=function(r,n){var o=n.cx,s=n.cy,l=Math.PI*2;r.moveTo(o+n.r,s),r.arc(o,s,n.r,0,l,!1),r.moveTo(o+n.r0,s),r.arc(o,s,n.r0,0,l,!0)},t}(Path);Ring.prototype.type="ring";function smoothBezier(a,t,r,n){var o=[],s=[],l=[],u=[],c,f,h,v;if(n){h=[1/0,1/0],v=[-1/0,-1/0];for(var d=0,p=a.length;d<p;d++)min$1(h,h,a[d]),max$1(v,v,a[d]);min$1(h,h,n[0]),max$1(v,v,n[1])}for(var d=0,p=a.length;d<p;d++){var g=a[d];if(r)c=a[d?d-1:p-1],f=a[(d+1)%p];else if(d===0||d===p-1){o.push(clone$3(a[d]));continue}else c=a[d-1],f=a[d+1];sub(s,f,c),scale$2(s,s,t);var y=distance(g,c),_=distance(g,f),S=y+_;S!==0&&(y/=S,_/=S),scale$2(l,s,-y),scale$2(u,s,_);var x=add([],g,l),T=add([],g,u);n&&(max$1(x,x,h),min$1(x,x,v),max$1(T,T,h),min$1(T,T,v)),o.push(x),o.push(T)}return r&&o.push(o.shift()),o}function buildPath(a,t,r){var n=t.smooth,o=t.points;if(o&&o.length>=2){if(n){var s=smoothBezier(o,n,r,t.smoothConstraint);a.moveTo(o[0][0],o[0][1]);for(var l=o.length,u=0;u<(r?l:l-1);u++){var c=s[u*2],f=s[u*2+1],h=o[(u+1)%l];a.bezierCurveTo(c[0],c[1],f[0],f[1],h[0],h[1])}}else{a.moveTo(o[0][0],o[0][1]);for(var u=1,v=o.length;u<v;u++)a.lineTo(o[u][0],o[u][1])}r&&a.closePath()}}var PolygonShape=function(){function a(){this.points=null,this.smooth=0,this.smoothConstraint=null}return a}(),Polygon=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new PolygonShape},t.prototype.buildPath=function(r,n){buildPath(r,n,!0)},t}(Path);Polygon.prototype.type="polygon";var PolylineShape=function(){function a(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return a}(),Polyline$1=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new PolylineShape},t.prototype.buildPath=function(r,n){buildPath(r,n,!1)},t}(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}(),Line$1=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new LineShape},t.prototype.buildPath=function(r,n){var o,s,l,u;if(this.subPixelOptimize){var c=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,n,this.style);o=c.x1,s=c.y1,l=c.x2,u=c.y2}else o=n.x1,s=n.y1,l=n.x2,u=n.y2;var f=n.percent;f!==0&&(r.moveTo(o,s),f<1&&(l=o*(1-f)+l*f,u=s*(1-f)+u*f),r.lineTo(l,u))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(Path);Line$1.prototype.type="line";var out=[],BezierCurveShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return a}();function someVectorAt(a,t,r){var n=a.cpx2,o=a.cpy2;return n!=null||o!=null?[(r?cubicDerivativeAt:cubicAt)(a.x1,a.cpx1,a.cpx2,a.x2,t),(r?cubicDerivativeAt:cubicAt)(a.y1,a.cpy1,a.cpy2,a.y2,t)]:[(r?quadraticDerivativeAt:quadraticAt$1)(a.x1,a.cpx1,a.x2,t),(r?quadraticDerivativeAt:quadraticAt$1)(a.y1,a.cpy1,a.y2,t)]}var BezierCurve=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new BezierCurveShape},t.prototype.buildPath=function(r,n){var o=n.x1,s=n.y1,l=n.x2,u=n.y2,c=n.cpx1,f=n.cpy1,h=n.cpx2,v=n.cpy2,d=n.percent;d!==0&&(r.moveTo(o,s),h==null||v==null?(d<1&&(quadraticSubdivide(o,c,l,d,out),c=out[1],l=out[2],quadraticSubdivide(s,f,u,d,out),f=out[1],u=out[2]),r.quadraticCurveTo(c,f,l,u)):(d<1&&(cubicSubdivide(o,c,h,l,d,out),c=out[1],h=out[2],l=out[3],cubicSubdivide(s,f,v,u,d,out),f=out[1],v=out[2],u=out[3]),r.bezierCurveTo(c,f,h,v,l,u)))},t.prototype.pointAt=function(r){return someVectorAt(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=someVectorAt(this.shape,r,!0);return normalize$3(n,n)},t}(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=function(){function a(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),Arc=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ArcShape},t.prototype.buildPath=function(r,n){var o=n.cx,s=n.cy,l=Math.max(n.r,0),u=n.startAngle,c=n.endAngle,f=n.clockwise,h=Math.cos(u),v=Math.sin(u);r.moveTo(h*l+o,v*l+s),r.arc(o,s,l,u,c,!f)},t}(Path);Arc.prototype.type="arc";var CompoundPath=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),o=0;o<r.length;o++)n=n||r[o].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),o=0;o<r.length;o++)r[o].path||r[o].createPathProxy(),r[o].path.setScale(n[0],n[1],r[o].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var o=n.paths||[],s=0;s<o.length;s++)o[s].buildPath(r,o[s].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},t}(Path),Gradient=function(){function a(t){this.colorStops=t||[]}return a.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},a}(),LinearGradient=function(a){__extends(t,a);function t(r,n,o,s,l,u){var c=a.call(this,l)||this;return c.x=r??0,c.y=n??0,c.x2=o??1,c.y2=s??0,c.type="linear",c.global=u||!1,c}return t}(Gradient),RadialGradient=function(a){__extends(t,a);function t(r,n,o,s,l){var u=a.call(this,s)||this;return u.x=r??.5,u.y=n??.5,u.r=o??.5,u.type="radial",u.global=l||!1,u}return t}(Gradient),mathMin$6=Math.min,mathMax$6=Math.max,mathAbs$1=Math.abs,_extent=[0,0],_extent2=[0,0],_intersectCtx=createIntersectContext(),_minTv=_intersectCtx.minTv,_maxTv=_intersectCtx.maxTv,OrientedBoundingRect=function(){function a(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new Point;for(var n=0;n<2;n++)this._axes[n]=new Point;t&&this.fromBoundingRect(t,r)}return a.prototype.fromBoundingRect=function(t,r){var n=this._corners,o=this._axes,s=t.x,l=t.y,u=s+t.width,c=l+t.height;if(n[0].set(s,l),n[1].set(u,l),n[2].set(u,c),n[3].set(s,c),r)for(var f=0;f<4;f++)n[f].transform(r);Point.sub(o[0],n[1],n[0]),Point.sub(o[1],n[3],n[0]),o[0].normalize(),o[1].normalize();for(var f=0;f<2;f++)this._origin[f]=o[f].dot(n[0])},a.prototype.intersect=function(t,r,n){var o=!0,s=!r;return r&&Point.set(r,0,0),_intersectCtx.reset(n,!s),!this._intersectCheckOneSide(this,t,s,1)&&(o=!1,s)||!this._intersectCheckOneSide(t,this,s,-1)&&(o=!1,s)||!s&&!_intersectCtx.negativeSize&&Point.copy(r,o?_intersectCtx.useDir?_intersectCtx.dirMinTv:_minTv:_maxTv),o},a.prototype._intersectCheckOneSide=function(t,r,n,o){for(var s=!0,l=0;l<2;l++){var u=t._axes[l];if(t._getProjMinMaxOnAxis(l,t._corners,_extent),t._getProjMinMaxOnAxis(l,r._corners,_extent2),_intersectCtx.negativeSize||_extent[1]<_extent2[0]||_extent[0]>_extent2[1]){if(s=!1,_intersectCtx.negativeSize||n)return s;var c=mathAbs$1(_extent2[0]-_extent[1]),f=mathAbs$1(_extent[0]-_extent2[1]);mathMin$6(c,f)>_maxTv.len()&&(c<f?Point.scale(_maxTv,u,-c*o):Point.scale(_maxTv,u,f*o))}else if(!n){var c=mathAbs$1(_extent2[0]-_extent[1]),f=mathAbs$1(_extent[0]-_extent2[1]);(_intersectCtx.useDir||mathMin$6(c,f)<_minTv.len())&&((c<f||!_intersectCtx.bidirectional)&&(Point.scale(_minTv,u,c*o),_intersectCtx.useDir&&_intersectCtx.calcDirMTV()),(c>=f||!_intersectCtx.bidirectional)&&(Point.scale(_minTv,u,-f*o),_intersectCtx.useDir&&_intersectCtx.calcDirMTV()))}}return s},a.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var o=this._axes[t],s=this._origin,l=r[0].dot(o)+s[t],u=l,c=l,f=1;f<r.length;f++){var h=r[f].dot(o)+s[t];u=mathMin$6(h,u),c=mathMax$6(h,c)}n[0]=u+_intersectCtx.touchThreshold,n[1]=c-_intersectCtx.touchThreshold,_intersectCtx.negativeSize=n[1]<n[0]},a}(),m=[],IncrementalDisplayable=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var o=0;o<r.length;o++)this.addDisplayable(r[o],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new BoundingRect(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var o=this._displayables[n],s=o.getBoundingRect().clone();o.needLocalTransform()&&s.applyTransform(o.getLocalTransform(m)),r.union(s)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var o=this.transformCoordToLocal(r,n),s=this.getBoundingRect();if(s.contain(o[0],o[1]))for(var l=0;l<this._displayables.length;l++){var u=this._displayables[l];if(u.contain(r,n))return!0}return!1},t}(Displayable),transitionStore=makeInner();function getAnimationConfig(a,t,r,n,o){var s;if(t&&t.ecModel){var l=t.ecModel.getUpdatePayload();s=l&&l.animation}var u=t&&t.isAnimationEnabled(),c=a==="update";if(u){var f=void 0,h=void 0,v=void 0;n?(f=retrieve2(n.duration,200),h=retrieve2(n.easing,"cubicOut"),v=0):(f=t.getShallow(c?"animationDurationUpdate":"animationDuration"),h=t.getShallow(c?"animationEasingUpdate":"animationEasing"),v=t.getShallow(c?"animationDelayUpdate":"animationDelay")),s&&(s.duration!=null&&(f=s.duration),s.easing!=null&&(h=s.easing),s.delay!=null&&(v=s.delay)),isFunction(v)&&(v=v(r,o)),isFunction(f)&&(f=f(r));var d={duration:f||0,delay:v,easing:h};return d}else return null}function animateOrSetProps(a,t,r,n,o,s,l){var u=!1,c;isFunction(o)?(l=s,s=o,o=null):isObject$3(o)&&(s=o.cb,l=o.during,u=o.isFrom,c=o.removeOpt,o=o.dataIndex);var f=a==="leave";f||t.stopAnimation("leave");var h=getAnimationConfig(a,n,o,f?c||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,o):null);if(h&&h.duration>0){var v=h.duration,d=h.delay,p=h.easing,g={duration:v,delay:d||0,easing:p,done:s,force:!!s||!!l,setToFinal:!f,scope:a,during:l};u?t.animateFrom(r,g):t.animateTo(r,g)}else t.stopAnimation(),!u&&t.attr(r),l&&l(1),s&&s()}function updateProps$1(a,t,r,n,o,s){animateOrSetProps("update",a,t,r,n,o,s)}function initProps(a,t,r,n,o,s){animateOrSetProps("enter",a,t,r,n,o,s)}function isElementRemoved(a){if(!a.__zr)return!0;for(var t=0;t<a.animators.length;t++){var r=a.animators[t];if(r.scope==="leave")return!0}return!1}function removeElement(a,t,r,n,o,s){isElementRemoved(a)||animateOrSetProps("leave",a,t,r,n,o,s)}function fadeOutDisplayable(a,t,r,n){a.removeTextContent(),a.removeTextGuideLine(),removeElement(a,{style:{opacity:0}},t,r,n)}function removeElementWithFadeOut(a,t,r){function n(){a.parent&&a.parent.remove(a)}a.isGroup?a.traverse(function(o){o.isGroup||fadeOutDisplayable(o,t,r,n)}):fadeOutDisplayable(a,t,r,n)}function saveOldStyle(a){transitionStore(a).oldStyle=a.style}function getOldStyle(a){return transitionStore(a).oldStyle}var _customShapeMap={},XY$2=["x","y"],WH$2=["width","height"];function extendShape(a){return Path.extend(a)}var extendPathFromString=extendFromString;function extendPath(a,t){return extendPathFromString(a,t)}function registerShape(a,t){_customShapeMap[a]=t}function getShapeClass(a){if(_customShapeMap.hasOwnProperty(a))return _customShapeMap[a]}function makePath(a,t,r,n){var o=createFromString(a,t);return r&&(n==="center"&&(r=centerGraphic(r,o.getBoundingRect())),resizePath(o,r)),o}function makeImage(a,t,r){var n=new ZRImage({style:{image:a,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(o){if(r==="center"){var s={width:o.width,height:o.height};n.setStyle(centerGraphic(t,s))}}});return n}function centerGraphic(a,t){var r=t.width/t.height,n=a.height*r,o;n<=a.width?o=a.height:(n=a.width,o=n/r);var s=a.x+a.width/2,l=a.y+a.height/2;return{x:s-n/2,y:l-o/2,width:n,height:o}}var mergePath=mergePath$1;function resizePath(a,t){if(a.applyTransform){var r=a.getBoundingRect(),n=r.calculateTransform(t);a.applyTransform(n)}}function subPixelOptimizeLine(a,t){return subPixelOptimizeLine$1(a,a,{lineWidth:t}),a}function subPixelOptimizeRect(a,t){return subPixelOptimizeRect$1(a,a,t),a}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(a,t){for(var r=identity([]);a&&a!==t;)mul(r,a.getLocalTransform(),r),a=a.parent;return r}function applyTransform(a,t,r){return t&&!isArrayLike(t)&&(t=Transformable.getLocalTransform(t)),r&&(t=invert([],t)),applyTransform$1([],a,t)}function transformDirection(a,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:mathAbs$4(2*t[4]/t[0]),o=t[4]===0||t[5]===0||t[2]===0?1:mathAbs$4(2*t[4]/t[2]),s=[a==="left"?-n:a==="right"?n:0,a==="top"?-o:a==="bottom"?o:0];return s=applyTransform(s,t,r),mathAbs$4(s[0])>mathAbs$4(s[1])?s[0]>0?"right":"left":s[1]>0?"bottom":"top"}function isNotGroup(a){return!a.isGroup}function isPath$1(a){return a.shape!=null}function groupTransition(a,t,r){if(!a||!t)return;function n(l){var u={};return l.traverse(function(c){isNotGroup(c)&&c.anid&&(u[c.anid]=c)}),u}function o(l){var u={x:l.x,y:l.y,rotation:l.rotation};return isPath$1(l)&&(u.shape=clone$4(l.shape)),u}var s=n(a);t.traverse(function(l){if(isNotGroup(l)&&l.anid){var u=s[l.anid];if(u){var c=o(l);l.attr(o(u)),updateProps$1(l,c,r,getECData(l).dataIndex)}}})}function clipPointsByRect(a,t){return map$1(a,function(r){var n=r[0];n=mathMax$a(n,t.x),n=mathMin$a(n,t.x+t.width);var o=r[1];return o=mathMax$a(o,t.y),o=mathMin$a(o,t.y+t.height),[n,o]})}function clipRectByRect(a,t){var r=mathMax$a(a.x,t.x),n=mathMin$a(a.x+a.width,t.x+t.width),o=mathMax$a(a.y,t.y),s=mathMin$a(a.y+a.height,t.y+t.height);if(n>=r&&s>=o)return{x:r,y:o,width:n-r,height:s-o}}function createIcon(a,t,r){var n=extend({rectHover:!0},t),o=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},a)return a.indexOf("image://")===0?(o.image=a.slice(8),defaults(o,r),new ZRImage(n)):makePath(a.replace("path://",""),n,r,"center")}function linePolygonIntersect(a,t,r,n,o){for(var s=0,l=o[o.length-1];s<o.length;s++){var u=o[s];if(lineLineIntersect$1(a,t,r,n,u[0],u[1],l[0],l[1]))return!0;l=u}}function lineLineIntersect$1(a,t,r,n,o,s,l,u){var c=r-a,f=n-t,h=l-o,v=u-s,d=crossProduct2d$1(h,v,c,f);if(nearZero(d))return!1;var p=a-o,g=t-s,y=crossProduct2d$1(p,g,c,f)/d;if(y<0||y>1)return!1;var _=crossProduct2d$1(p,g,h,v)/d;return!(_<0||_>1)}function crossProduct2d$1(a,t,r,n){return a*n-r*t}function nearZero(a){return a<=1e-6&&a>=-1e-6}function expandOrShrinkRect(a,t,r,n,o){return t==null||(isNumber(t)?_tmpExpandRectDelta[0]=_tmpExpandRectDelta[1]=_tmpExpandRectDelta[2]=_tmpExpandRectDelta[3]=t:(_tmpExpandRectDelta[0]=t[0],_tmpExpandRectDelta[1]=t[1],_tmpExpandRectDelta[2]=t[2],_tmpExpandRectDelta[3]=t[3]),n&&(_tmpExpandRectDelta[0]=mathMax$a(0,_tmpExpandRectDelta[0]),_tmpExpandRectDelta[1]=mathMax$a(0,_tmpExpandRectDelta[1]),_tmpExpandRectDelta[2]=mathMax$a(0,_tmpExpandRectDelta[2]),_tmpExpandRectDelta[3]=mathMax$a(0,_tmpExpandRectDelta[3])),r&&(_tmpExpandRectDelta[0]=-_tmpExpandRectDelta[0],_tmpExpandRectDelta[1]=-_tmpExpandRectDelta[1],_tmpExpandRectDelta[2]=-_tmpExpandRectDelta[2],_tmpExpandRectDelta[3]=-_tmpExpandRectDelta[3]),expandRectOnOneDimension(a,_tmpExpandRectDelta,"x","width",3,1,o&&o[0]||0),expandRectOnOneDimension(a,_tmpExpandRectDelta,"y","height",0,2,o&&o[1]||0)),a}var _tmpExpandRectDelta=[0,0,0,0];function expandRectOnOneDimension(a,t,r,n,o,s,l){var u=t[s]+t[o],c=a[n];a[n]+=u,l=mathMax$a(0,mathMin$a(l,c)),a[n]<l?(a[n]=l,a[r]+=t[o]>=0?-t[o]:t[s]>=0?c+t[s]:mathAbs$4(u)>1e-8?(c-l)*t[o]/u:0):a[r]-=t[o]}function setTooltipConfig(a){var t=a.itemTooltipOption,r=a.componentModel,n=a.itemName,o=isString(t)?{formatter:t}:t,s=r.mainType,l=r.componentIndex,u={componentType:s,name:n,$vars:["name"]};u[s+"Index"]=l;var c=a.formatterParamsExtra;c&&each$f(keys(c),function(h){hasOwn(u,h)||(u[h]=c[h],u.$vars.push(h))});var f=getECData(a.el);f.componentMainType=s,f.componentIndex=l,f.tooltipConfig={name:n,option:defaults({content:n,encodeHTMLContent:!0,formatterParams:u},o)}}function traverseElement(a,t){var r;a.isGroup&&(r=t(a)),r||a.traverse(t)}function traverseElements(a,t){if(a)if(isArray$1(a))for(var r=0;r<a.length;r++)traverseElement(a[r],t);else traverseElement(a,t)}function isBoundingRectAxisAligned(a){return!a||mathAbs$4(a[1])<AXIS_ALIGN_EPSILON&&mathAbs$4(a[2])<AXIS_ALIGN_EPSILON||mathAbs$4(a[0])<AXIS_ALIGN_EPSILON&&mathAbs$4(a[3])<AXIS_ALIGN_EPSILON}var AXIS_ALIGN_EPSILON=1e-5;function ensureCopyRect(a,t){return a?BoundingRect.copy(a,t):t.clone()}function ensureCopyTransform(a,t){return t?copy(a||create$1(),t):void 0}function retrieveZInfo(a){return{z:a.get("z")||0,zlevel:a.get("zlevel")||0}}function calcZ2Range(a){var t=-1/0,r=1/0;traverseElement(a,function(s){n(s),n(s.getTextContent()),n(s.getTextGuideLine())});function n(s){if(!(!s||s.isGroup)){var l=s.currentStates;if(l.length)for(var u=0;u<l.length;u++)o(s.states[l[u]]);o(s)}}function o(s){if(s){var l=s.z2;l>t&&(t=l),l<r&&(r=l)}}return r>t&&(r=t=0),{min:r,max:t}}function traverseUpdateZ(a,t,r){doUpdateZ(a,t,r,-1/0)}function doUpdateZ(a,t,r,n){if(a.ignoreModelZ)return n;var o=a.getTextContent(),s=a.getTextGuideLine(),l=a.isGroup;if(l)for(var u=a.childrenRef(),c=0;c<u.length;c++)n=mathMax$a(doUpdateZ(u[c],t,r,n),n);else a.z=t,a.zlevel=r,n=mathMax$a(a.z2||0,n);if(o&&(o.z=t,o.zlevel=r,isFinite(n)&&(o.z2=n+2)),s){var f=a.textGuideLineConfig;s.z=t,s.zlevel=r,isFinite(n)&&(s.z2=n+(f&&f.showAbove?1:-1))}return n}registerShape("circle",Circle);registerShape("ellipse",Ellipse);registerShape("sector",Sector);registerShape("ring",Ring);registerShape("polygon",Polygon);registerShape("polyline",Polyline$1);registerShape("rect",Rect$2);registerShape("line",Line$1);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,OrientedBoundingRect,Path,Point,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,WH:WH$2,XY:XY$2,applyTransform,calcZ2Range,clipPointsByRect,clipRectByRect,createIcon,ensureCopyRect,ensureCopyTransform,expandOrShrinkRect,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isBoundingRectAxisAligned,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,retrieveZInfo,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,traverseUpdateZ,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(a,t){for(var r=0;r<SPECIAL_STATES.length;r++){var n=SPECIAL_STATES[r],o=t[n],s=a.ensureState(n);s.style=s.style||{},s.style.text=o}var l=a.currentStates.slice();a.clearStates(!0),a.setStyle({text:t.normal}),a.useStates(l,!0)}function getLabelText(a,t,r){var n=a.labelFetcher,o=a.labelDataIndex,s=a.labelDimIndex,l=t.normal,u;n&&(u=n.getFormattedLabel(o,"normal",null,s,l&&l.get("formatter"),r!=null?{interpolatedValue:r}:null)),u==null&&(u=isFunction(a.defaultText)?a.defaultText(o,a,r):a.defaultText);for(var c={normal:u},f=0;f<SPECIAL_STATES.length;f++){var h=SPECIAL_STATES[f],v=t[h];c[h]=retrieve2(n?n.getFormattedLabel(o,h,null,s,v&&v.get("formatter")):null,u)}return c}function setLabelStyle(a,t,r,n){r=r||EMPTY_OBJ;for(var o=a instanceof ZRText,s=!1,l=0;l<DISPLAY_STATES.length;l++){var u=t[DISPLAY_STATES[l]];if(u&&u.getShallow("show")){s=!0;break}}var c=o?a:a.getTextContent();if(s){o||(c||(c=new ZRText,a.setTextContent(c)),a.stateProxy&&(c.stateProxy=a.stateProxy));var f=getLabelText(r,t),h=t.normal,v=!!h.getShallow("show"),d=createTextStyle(h,n&&n.normal,r,!1,!o);d.text=f.normal,o||a.setTextConfig(createTextConfig(h,r,!1));for(var l=0;l<SPECIAL_STATES.length;l++){var p=SPECIAL_STATES[l],u=t[p];if(u){var g=c.ensureState(p),y=!!retrieve2(u.getShallow("show"),v);if(y!==v&&(g.ignore=!y),g.style=createTextStyle(u,n&&n[p],r,!0,!o),g.style.text=f[p],!o){var _=a.ensureState(p);_.textConfig=createTextConfig(u,r,!0)}}}c.silent=!!h.getShallow("silent"),c.style.x!=null&&(d.x=c.style.x),c.style.y!=null&&(d.y=c.style.y),c.ignore=!v,c.useStyle(d),c.dirty(),r.enableTextSetter&&(labelInner(c).setLabelText=function(S){var x=getLabelText(r,t,S);setLabelText(c,x)})}else c&&(c.ignore=!0);a.dirty()}function getLabelStatesModels(a,t){t=t||"label";for(var r={normal:a.getModel(t)},n=0;n<SPECIAL_STATES.length;n++){var o=SPECIAL_STATES[n];r[o]=a.getModel([o,t])}return r}function createTextStyle(a,t,r,n,o){var s={};return setTextStyleCommon(s,a,r,n,o),t&&extend(s,t),s}function createTextConfig(a,t,r){t=t||{};var n={},o,s=a.getShallow("rotate"),l=retrieve2(a.getShallow("distance"),r?null:5),u=a.getShallow("offset");return o=a.getShallow("position")||(r?null:"inside"),o==="outside"&&(o=t.defaultOutsidePosition||"top"),o!=null&&(n.position=o),u!=null&&(n.offset=u),s!=null&&(s*=Math.PI/180,n.rotation=s),l!=null&&(n.distance=l),n.outsideFill=a.get("color")==="inherit"?t.inheritColor||null:"auto",t.autoOverflowArea!=null&&(n.autoOverflowArea=t.autoOverflowArea),t.layoutRect!=null&&(n.layoutRect=t.layoutRect),n}function setTextStyleCommon(a,t,r,n,o){r=r||EMPTY_OBJ;var s=t.ecModel,l=s&&s.option.textStyle,u=getRichItemNames(t),c;if(u){c={};var f="richInheritPlainLabel",h=retrieve2(t.get(f),s?s.get(f):void 0);for(var v in u)if(u.hasOwnProperty(v)){var d=t.getModel(["rich",v]);setTokenTextStyle(c[v]={},d,l,t,h,r,n,o,!1,!0)}}c&&(a.rich=c);var p=t.get("overflow");p&&(a.overflow=p);var g=t.get("lineOverflow");g&&(a.lineOverflow=g);var y=a,_=t.get("minMargin");if(_!=null)_=isNumber(_)?_/2:0,y.margin=[_,_,_,_],y.__marginType=LabelMarginType.minMargin;else{var S=t.get("textMargin");S!=null&&(y.margin=normalizeCssArray$1(S),y.__marginType=LabelMarginType.textMargin)}setTokenTextStyle(a,t,l,null,null,r,n,o,!0,!1)}function getRichItemNames(a){for(var t;a&&a!==a.ecModel;){var r=(a.option||EMPTY_OBJ).rich;if(r){t=t||{};for(var n=keys(r),o=0;o<n.length;o++){var s=n[o];t[s]=1}}a=a.parentModel}return t}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(a,t,r,n,o,s,l,u,c,f){r=!l&&r||EMPTY_OBJ;var h=s&&s.inheritColor,v=t.getShallow("color"),d=t.getShallow("textBorderColor"),p=retrieve2(t.getShallow("opacity"),r.opacity);(v==="inherit"||v==="auto")&&(h?v=h:v=null),(d==="inherit"||d==="auto")&&(h?d=h:d=null),u||(v=v||r.color,d=d||r.textBorderColor),v!=null&&(a.fill=v),d!=null&&(a.stroke=d);var g=retrieve2(t.getShallow("textBorderWidth"),r.textBorderWidth);g!=null&&(a.lineWidth=g);var y=retrieve2(t.getShallow("textBorderType"),r.textBorderType);y!=null&&(a.lineDash=y);var _=retrieve2(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);_!=null&&(a.lineDashOffset=_),!l&&p==null&&!f&&(p=s&&s.defaultOpacity),p!=null&&(a.opacity=p),!l&&!u&&a.fill==null&&s.inheritColor&&(a.fill=s.inheritColor);for(var S=0;S<TEXT_PROPS_WITH_GLOBAL.length;S++){var x=TEXT_PROPS_WITH_GLOBAL[S],T=o!==!1&&n?retrieve3(t.getShallow(x),n.getShallow(x),r[x]):retrieve2(t.getShallow(x),r[x]);T!=null&&(a[x]=T)}for(var S=0;S<TEXT_PROPS_SELF.length;S++){var x=TEXT_PROPS_SELF[S],T=t.getShallow(x);T!=null&&(a[x]=T)}if(a.verticalAlign==null){var b=t.getShallow("baseline");b!=null&&(a.verticalAlign=b)}if(!c||!s.disableBox){for(var S=0;S<TEXT_PROPS_BOX.length;S++){var x=TEXT_PROPS_BOX[S],T=t.getShallow(x);T!=null&&(a[x]=T)}var C=t.getShallow("borderType");C!=null&&(a.borderDash=C),(a.backgroundColor==="auto"||a.backgroundColor==="inherit")&&h&&(a.backgroundColor=h),(a.borderColor==="auto"||a.borderColor==="inherit")&&h&&(a.borderColor=h)}}function getFont(a,t){var r=t&&t.getModel("textStyle");return trim$1([a.fontStyle||r&&r.getShallow("fontStyle")||"",a.fontWeight||r&&r.getShallow("fontWeight")||"",(a.fontSize||r&&r.getShallow("fontSize")||12)+"px",a.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(a,t,r,n){if(a){var o=labelInner(a);o.prevValue=o.value,o.value=r;var s=t.normal;o.valueAnimation=s.get("valueAnimation"),o.valueAnimation&&(o.precision=s.get("precision"),o.defaultInterpolatedText=n,o.statesModels=t)}}function animateLabelValue(a,t,r,n,o){var s=labelInner(a);if(!s.valueAnimation||s.prevValue===s.value)return;var l=s.defaultInterpolatedText,u=retrieve2(s.interpolatedValue,s.prevValue),c=s.value;function f(h){var v=interpolateRawValues(r,s.precision,u,c,h);s.interpolatedValue=h===1?null:v;var d=getLabelText({labelDataIndex:t,labelFetcher:o,defaultText:l?l(v):v+""},s.statesModels,v);setLabelText(a,d)}a.percent=0,(s.prevValue==null?initProps:updateProps$1)(a,{percent:1},n,t,null,f)}var LabelMarginType={minMargin:1,textMargin:2},PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=function(){function a(){}return a.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(PATH_COLOR):null)},a.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},a.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<textStyleParams.length;n++)r[textStyleParams[n]]=this.getShallow(textStyleParams[n]);return tmpText.useStyle(r),tmpText.update(),tmpText.getBoundingRect()},a}(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function a(){}return a.prototype.getLineStyle=function(t){return getLineStyle(this,t)},a}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function a(){}return a.prototype.getItemStyle=function(t,r){return getItemStyle(this,t,r)},a}(),Model=function(){function a(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return a.prototype.init=function(t,r,n){},a.prototype.mergeOption=function(t,r){merge(this.option,t,!0)},a.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},a.prototype.getShallow=function(t,r){var n=this.option,o=n==null?n:n[t];if(o==null&&!r){var s=this.parentModel;s&&(o=s.getShallow(t))}return o},a.prototype.getModel=function(t,r){var n=t!=null,o=n?this.parsePath(t):null,s=n?this._doGet(o):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(o)),new a(s,r,this.ecModel)},a.prototype.isEmpty=function(){return this.option==null},a.prototype.restoreData=function(){},a.prototype.clone=function(){var t=this.constructor;return new t(clone$4(this.option))},a.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},a.prototype.resolveParentPath=function(t){return t},a.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},a.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var o=0;o<t.length&&!(t[o]&&(n=n&&typeof n=="object"?n[t[o]]:null,n==null));o++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},a}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base=Math.round(Math.random()*10);function getUID(a){return[a||"",base++].join("_")}function enableSubTypeDefaulter(a){var t={};a.registerSubTypeDefaulter=function(r,n){var o=parseClassType(r);t[o.main]=n},a.determineSubType=function(r,n){var o=n.type;if(!o){var s=parseClassType(r).main;a.hasSubTypes(r)&&t[s]&&(o=t[s](n))}return o}}function enableTopologicalTravel(a,t){a.topologicalTravel=function(s,l,u,c){if(!s.length)return;var f=r(l),h=f.graph,v=f.noEntryList,d={};for(each$f(s,function(x){d[x]=!0});v.length;){var p=v.pop(),g=h[p],y=!!d[p];y&&(u.call(c,p,g.originalDeps.slice()),delete d[p]),each$f(g.successor,y?S:_)}each$f(d,function(){var x="";throw new Error(x)});function _(x){h[x].entryCount--,h[x].entryCount===0&&v.push(x)}function S(x){d[x]=!0,_(x)}};function r(s){var l={},u=[];return each$f(s,function(c){var f=n(l,c),h=f.originalDeps=t(c),v=o(h,s);f.entryCount=v.length,f.entryCount===0&&u.push(c),each$f(v,function(d){indexOf(f.predecessor,d)<0&&f.predecessor.push(d);var p=n(l,d);indexOf(p.successor,d)<0&&p.successor.push(c)})}),{graph:l,noEntryList:u}}function n(s,l){return s[l]||(s[l]={predecessor:[],successor:[]}),s[l]}function o(s,l){var u=[];return each$f(s,function(c){indexOf(l,c)>=0&&u.push(c)}),u}}function inheritDefaultOption(a,t){return merge(merge({},a,!0),t,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["ä¸€æœˆ","äºŒæœˆ","ä¸‰æœˆ","å››æœˆ","äº”æœˆ","å…­æœˆ","ä¸ƒæœˆ","å…«æœˆ","ä¹æœˆ","åæœˆ","åä¸€æœˆ","åäºŒæœˆ"],monthAbbr:["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"],dayOfWeek:["æ˜ŸæœŸæ—¥","æ˜ŸæœŸä¸€","æ˜ŸæœŸäºŒ","æ˜ŸæœŸä¸‰","æ˜ŸæœŸå››","æ˜ŸæœŸäº”","æ˜ŸæœŸå…­"],dayOfWeekAbbr:["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"]},legend:{selector:{all:"å…¨é€‰",inverse:"åé€‰"}},toolbox:{brush:{title:{rect:"çŸ©å½¢é€‰æ‹©",polygon:"åœˆé€‰",lineX:"æ¨ªå‘é€‰æ‹©",lineY:"çºµå‘é€‰æ‹©",keep:"ä¿æŒé€‰æ‹©",clear:"æ¸…é™¤é€‰æ‹©"}},dataView:{title:"æ•°æ®è§†å›¾",lang:["æ•°æ®è§†å›¾","å…³é—­","åˆ·æ–°"]},dataZoom:{title:{zoom:"åŒºåŸŸç¼©æ”¾",back:"åŒºåŸŸç¼©æ”¾è¿˜åŽŸ"}},magicType:{title:{line:"åˆ‡æ¢ä¸ºæŠ˜çº¿å›¾",bar:"åˆ‡æ¢ä¸ºæŸ±çŠ¶å›¾",stack:"åˆ‡æ¢ä¸ºå †å ",tiled:"åˆ‡æ¢ä¸ºå¹³é“º"}},restore:{title:"è¿˜åŽŸ"},saveAsImage:{title:"ä¿å­˜ä¸ºå›¾ç‰‡",lang:["å³é”®å¦å­˜ä¸ºå›¾ç‰‡"]}},series:{typeNames:{pie:"é¥¼å›¾",bar:"æŸ±çŠ¶å›¾",line:"æŠ˜çº¿å›¾",scatter:"æ•£ç‚¹å›¾",effectScatter:"æ¶Ÿæ¼ªæ•£ç‚¹å›¾",radar:"é›·è¾¾å›¾",tree:"æ ‘å›¾",treemap:"çŸ©å½¢æ ‘å›¾",boxplot:"ç®±åž‹å›¾",candlestick:"Kçº¿å›¾",k:"Kçº¿å›¾",heatmap:"çƒ­åŠ›å›¾",map:"åœ°å›¾",parallel:"å¹³è¡Œåæ ‡å›¾",lines:"çº¿å›¾",graph:"å…³ç³»å›¾",sankey:"æ¡‘åŸºå›¾",funnel:"æ¼æ–—å›¾",gauge:"ä»ªè¡¨ç›˜å›¾",pictorialBar:"è±¡å½¢æŸ±å›¾",themeRiver:"ä¸»é¢˜æ²³æµå›¾",sunburst:"æ—­æ—¥å›¾",custom:"è‡ªå®šä¹‰å›¾è¡¨",chart:"å›¾è¡¨"}},aria:{general:{withTitle:"è¿™æ˜¯ä¸€ä¸ªå…³äºŽâ€œ{title}â€çš„å›¾è¡¨ã€‚",withoutTitle:"è¿™æ˜¯ä¸€ä¸ªå›¾è¡¨ï¼Œ"},series:{single:{prefix:"",withName:"å›¾è¡¨ç±»åž‹æ˜¯{seriesType}ï¼Œè¡¨ç¤º{seriesName}ã€‚",withoutName:"å›¾è¡¨ç±»åž‹æ˜¯{seriesType}ã€‚"},multiple:{prefix:"å®ƒç”±{seriesCount}ä¸ªå›¾è¡¨ç³»åˆ—ç»„æˆã€‚",withName:"ç¬¬{seriesId}ä¸ªç³»åˆ—æ˜¯ä¸€ä¸ªè¡¨ç¤º{seriesName}çš„{seriesType}ï¼Œ",withoutName:"ç¬¬{seriesId}ä¸ªç³»åˆ—æ˜¯ä¸€ä¸ª{seriesType}ï¼Œ",separator:{middle:"ï¼›",end:"ã€‚"}}},data:{allData:"å…¶æ•°æ®æ˜¯â€”â€”",partialData:"å…¶ä¸­ï¼Œå‰{displayCnt}é¡¹æ˜¯â€”â€”",withName:"{name}çš„æ•°æ®æ˜¯{value}",withoutName:"{value}",separator:{middle:"ï¼Œ",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?function(){var a=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return a.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(a,t){a=a.toUpperCase(),localeModels[a]=new Model(t),localeStorage[a]=t}function createLocaleObject(a){if(isString(a)){var t=localeStorage[a.toUpperCase()]||{};return a===LOCALE_ZH||a===LOCALE_EN?clone$4(t):merge(clone$4(t),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(a),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(a){return localeModels[a]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var _impl$1=null;function registerScaleBreakHelperImpl(a){_impl$1||(_impl$1=a)}function getScaleBreakHelper(){return _impl$1}var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,primaryTimeUnitFormatterMatchers={year:/({yyyy}|{yy})/,month:/({MMMM}|{MMM}|{MM}|{M})/,day:/({dd}|{d})/,hour:/({HH}|{H}|{hh}|{h})/,minute:/({mm}|{m})/,second:/({ss}|{s})/,millisecond:/({SSS}|{S})/},defaultFormatterSeed={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}"},defaultFullFormatter="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}",fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultFormatterSeed.hour,minute:fullDayFormatter+" "+defaultFormatterSeed.minute,second:fullDayFormatter+" "+defaultFormatterSeed.second,millisecond:defaultFullFormatter},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function parseTimeAxisLabelFormatter(a){return!isString(a)&&!isFunction(a)?parseTimeAxisLabelFormatterDictionary(a):a}function parseTimeAxisLabelFormatterDictionary(a){a=a||{};var t={},r=!0;return each$f(primaryTimeUnits,function(n){r&&(r=a[n]==null)}),each$f(primaryTimeUnits,function(n,o){var s=a[n];t[n]={};for(var l=null,u=o;u>=0;u--){var c=primaryTimeUnits[u],f=isObject$3(s)&&!isArray$1(s)?s[c]:s,h=void 0;isArray$1(f)?(h=f.slice(),l=h[0]||""):isString(f)?(l=f,h=[l]):(l==null?l=defaultFormatterSeed[n]:primaryTimeUnitFormatterMatchers[c].test(l)||(l=t[c][c][0]+" "+l),h=[l],r&&(h[1]="{primary|"+l+"}")),t[n][c]=h}}),t}function pad(a,t){return a+="","0000".substr(0,t-a.length)+a}function getPrimaryTimeUnit(a){switch(a){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return a}}function isPrimaryTimeUnit(a){return a===getPrimaryTimeUnit(a)}function getDefaultFormatPrecisionOfInterval(a){switch(a){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format(a,t,r,n){var o=parseDate(a),s=o[fullYearGetterName(r)](),l=o[monthGetterName(r)]()+1,u=Math.floor((l-1)/3)+1,c=o[dateGetterName(r)](),f=o["get"+(r?"UTC":"")+"Day"](),h=o[hoursGetterName(r)](),v=(h-1)%12+1,d=o[minutesGetterName(r)](),p=o[secondsGetterName(r)](),g=o[millisecondsGetterName(r)](),y=h>=12?"pm":"am",_=y.toUpperCase(),S=n instanceof Model?n:getLocaleModel(n||SYSTEM_LANG)||getDefaultLocaleModel(),x=S.getModel("time"),T=x.get("month"),b=x.get("monthAbbr"),C=x.get("dayOfWeek"),w=x.get("dayOfWeekAbbr");return(t||"").replace(/{a}/g,y+"").replace(/{A}/g,_+"").replace(/{yyyy}/g,s+"").replace(/{yy}/g,pad(s%100+"",2)).replace(/{Q}/g,u+"").replace(/{MMMM}/g,T[l-1]).replace(/{MMM}/g,b[l-1]).replace(/{MM}/g,pad(l,2)).replace(/{M}/g,l+"").replace(/{dd}/g,pad(c,2)).replace(/{d}/g,c+"").replace(/{eeee}/g,C[f]).replace(/{ee}/g,w[f]).replace(/{e}/g,f+"").replace(/{HH}/g,pad(h,2)).replace(/{H}/g,h+"").replace(/{hh}/g,pad(v+"",2)).replace(/{h}/g,v+"").replace(/{mm}/g,pad(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,pad(p,2)).replace(/{s}/g,p+"").replace(/{SSS}/g,pad(g,3)).replace(/{S}/g,g+"")}function leveledFormat(a,t,r,n,o){var s=null;if(isString(r))s=r;else if(isFunction(r)){var l={time:a.time,level:a.time.level},u=getScaleBreakHelper();u&&u.makeAxisLabelFormatterParamBreak(l,a.break),s=r(a.value,t,l)}else{var c=a.time;if(c){var f=r[c.lowerTimeUnit][c.upperTimeUnit];s=f[Math.min(c.level,f.length-1)]||""}else{var h=getUnitFromValue(a.value,o);s=r[h][h][0]}}return format(new Date(a.value),s,o,n)}function getUnitFromValue(a,t){var r=parseDate(a),n=r[monthGetterName(t)]()+1,o=r[dateGetterName(t)](),s=r[hoursGetterName(t)](),l=r[minutesGetterName(t)](),u=r[secondsGetterName(t)](),c=r[millisecondsGetterName(t)](),f=c===0,h=f&&u===0,v=h&&l===0,d=v&&s===0,p=d&&o===1,g=p&&n===1;return g?"year":p?"month":d?"day":v?"hour":h?"minute":f?"second":"millisecond"}function roundTime(a,t,r){switch(t){case"year":a[monthSetterName(r)](0);case"month":a[dateSetterName(r)](1);case"day":a[hoursSetterName(r)](0);case"hour":a[minutesSetterName(r)](0);case"minute":a[secondsSetterName(r)](0);case"second":a[millisecondsSetterName(r)](0)}return a}function fullYearGetterName(a){return a?"getUTCFullYear":"getFullYear"}function monthGetterName(a){return a?"getUTCMonth":"getMonth"}function dateGetterName(a){return a?"getUTCDate":"getDate"}function hoursGetterName(a){return a?"getUTCHours":"getHours"}function minutesGetterName(a){return a?"getUTCMinutes":"getMinutes"}function secondsGetterName(a){return a?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(a){return a?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(a){return a?"setUTCFullYear":"setFullYear"}function monthSetterName(a){return a?"setUTCMonth":"setMonth"}function dateSetterName(a){return a?"setUTCDate":"setDate"}function hoursSetterName(a){return a?"setUTCHours":"setHours"}function minutesSetterName(a){return a?"setUTCMinutes":"setMinutes"}function secondsSetterName(a){return a?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(a){return a?"setUTCMilliseconds":"setMilliseconds"}function addCommas(a){if(!isNumeric(a))return isString(a)?a:"-";var t=(a+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function toCamelCase(a,t){return a=(a||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&a&&(a=a.charAt(0).toUpperCase()+a.slice(1)),a}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(a,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function o(h){return h&&trim$1(h)?h:"-"}function s(h){return!!(h!=null&&!isNaN(h)&&isFinite(h))}var l=t==="time",u=a instanceof Date;if(l||u){var c=l?parseDate(a):a;if(isNaN(+c)){if(u)return"-"}else return format(c,n,r)}if(t==="ordinal")return isStringSafe(a)?o(a):isNumber(a)&&s(a)?a+"":"-";var f=numericToNumber(a);return s(f)?addCommas(f):isStringSafe(a)?o(a):typeof a=="boolean"?a+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(a,t){return"{"+a+(t??"")+"}"};function formatTpl(a,t,r){isArray$1(t)||(t=[t]);var n=t.length;if(!n)return"";for(var o=t[0].$vars||[],s=0;s<o.length;s++){var l=TPL_VAR_ALIAS[s];a=a.replace(wrapVar(l),wrapVar(l,0))}for(var u=0;u<n;u++)for(var c=0;c<o.length;c++){var f=t[u][o[c]];a=a.replace(wrapVar(TPL_VAR_ALIAS[c],u),r?encodeHTML(f):f)}return a}function formatTplSimple(a,t,r){return each$f(t,function(n,o){a=a.replace("{"+o+"}",n)}),a}function getTooltipMarker(a,t){var r=isString(a)?{color:a,extraCssText:t}:a||{},n=r.color,o=r.type;t=r.extraCssText;var s=r.renderMode||"html";if(!n)return"";if(s==="html")return o==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(n)+";"+(t||"")+'"></span>';var l=r.markerId||"markerX";return{renderMode:s,content:"{"+l+"|}  ",style:o==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function convertToColorString(a,t){return t=t||"transparent",isString(a)?a:isObject$3(a)&&a.colorStops&&(a.colorStops[0]||{}).color||t}function windowOpen(a,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=a}else window.open(a,t)}var nonSeriesBoxCoordSysCreators={},normalCoordSysCreators={},CoordinateSystemManager=function(){function a(){this._normalMasterList=[],this._nonSeriesBoxMasterList=[]}return a.prototype.create=function(t,r){this._nonSeriesBoxMasterList=n(nonSeriesBoxCoordSysCreators),this._normalMasterList=n(normalCoordSysCreators);function n(o,s){var l=[];return each$f(o,function(u,c){var f=u.create(t,r);l=l.concat(f||[])}),l}},a.prototype.update=function(t,r){each$f(this._normalMasterList,function(n){n.update&&n.update(t,r)})},a.prototype.getCoordinateSystems=function(){return this._normalMasterList.concat(this._nonSeriesBoxMasterList)},a.register=function(t,r){if(t==="matrix"||t==="calendar"){nonSeriesBoxCoordSysCreators[t]=r;return}normalCoordSysCreators[t]=r},a.get=function(t){return normalCoordSysCreators[t]||nonSeriesBoxCoordSysCreators[t]},a}();function canBeNonSeriesBoxCoordSys(a){return!!nonSeriesBoxCoordSysCreators[a]}var BoxCoordinateSystemCoordFrom={coord:1,coord2:2};function registerLayOutOnCoordSysUsage(a){coordSysUseMap.set(a.fullType,{getCoord2:void 0}).getCoord2=a.getCoord2}var coordSysUseMap=createHashMap();function getCoordForBoxCoordSys(a){var t=a.getShallow("coord",!0),r=BoxCoordinateSystemCoordFrom.coord;if(t==null){var n=coordSysUseMap.get(a.type);n&&n.getCoord2&&(r=BoxCoordinateSystemCoordFrom.coord2,t=n.getCoord2(a))}return{coord:t,from:r}}var CoordinateSystemUsageKind={none:0,dataCoordSys:1,boxCoordSys:2};function decideCoordSysUsageKind(a,t){var r=a.getShallow("coordinateSystem"),n=a.getShallow("coordinateSystemUsage",!0),o=CoordinateSystemUsageKind.none;if(r){var s=a.mainType==="series";n==null&&(n=s?"data":"box"),n==="data"?(o=CoordinateSystemUsageKind.dataCoordSys,s||(o=CoordinateSystemUsageKind.none)):n==="box"&&(o=CoordinateSystemUsageKind.boxCoordSys,!s&&!canBeNonSeriesBoxCoordSys(r)&&(o=CoordinateSystemUsageKind.none))}return{coordSysType:r,kind:o}}function injectCoordSysByOption(a){var t=a.targetModel,r=a.coordSysType,n=a.coordSysProvider,o=a.isDefaultDataCoordSys;a.allowNotFound;var s=decideCoordSysUsageKind(t),l=s.kind,u=s.coordSysType;if(o&&l!==CoordinateSystemUsageKind.dataCoordSys&&(l=CoordinateSystemUsageKind.dataCoordSys,u=r),l===CoordinateSystemUsageKind.none||u!==r)return!1;var c=n(r,t);return c?(l===CoordinateSystemUsageKind.dataCoordSys?t.coordinateSystem=c:t.boxCoordinateSystem=c,!0):!1}var simpleCoordSysInjectionProvider=function(a,t){var r=t.getReferringComponents(a,SINGLE_REFERRING).models[0];return r&&r.coordinateSystem},each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(a,t,r,n,o){var s=0,l=0;n==null&&(n=1/0),o==null&&(o=1/0);var u=0;t.eachChild(function(c,f){var h=c.getBoundingRect(),v=t.childAt(f+1),d=v&&v.getBoundingRect(),p,g;if(a==="horizontal"){var y=h.width+(d?-d.x+h.x:0);p=s+y,p>n||c.newline?(s=0,p=y,l+=u+r,u=h.height):u=Math.max(u,h.height)}else{var _=h.height+(d?-d.y+h.y:0);g=l+_,g>o||c.newline?(s+=u+r,l=0,g=_,u=h.width):u=Math.max(u,h.width)}c.newline||(c.x=s,c.y=l,c.markRedraw(),a==="horizontal"?s=p+r:l=g+r)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getBoxLayoutParams(a,t){return{left:a.getShallow("left",t),top:a.getShallow("top",t),right:a.getShallow("right",t),bottom:a.getShallow("bottom",t),width:a.getShallow("width",t),height:a.getShallow("height",t)}}function getViewRectAndCenterForCircleLayout(a,t){var r=createBoxLayoutReference(a,t,{enableLayoutOnlyByCenter:!0}),n=a.getBoxLayoutParams(),o,s;if(r.type===BoxLayoutReferenceType.point)s=r.refPoint,o=getLayoutRect(n,{width:t.getWidth(),height:t.getHeight()});else{var l=a.get("center"),u=isArray$1(l)?l:[l,l];o=getLayoutRect(n,r.refContainer),s=r.boxCoordFrom===BoxCoordinateSystemCoordFrom.coord2?r.refPoint:[parsePercent(u[0],o.width)+o.x,parsePercent(u[1],o.height)+o.y]}return{viewRect:o,center:s}}function getCircleLayout(a,t){var r=getViewRectAndCenterForCircleLayout(a,t),n=r.viewRect,o=r.center,s=a.get("radius");isArray$1(s)||(s=[0,s]);var l=parsePercent(n.width,t.getWidth()),u=parsePercent(n.height,t.getHeight()),c=Math.min(l,u),f=parsePercent(s[0],c/2),h=parsePercent(s[1],c/2);return{cx:o[0],cy:o[1],r0:f,r:h,viewRect:n}}function getLayoutRect(a,t,r){r=normalizeCssArray(r||0);var n=t.width,o=t.height,s=parsePercent(a.left,n),l=parsePercent(a.top,o),u=parsePercent(a.right,n),c=parsePercent(a.bottom,o),f=parsePercent(a.width,n),h=parsePercent(a.height,o),v=r[2]+r[0],d=r[1]+r[3],p=a.aspect;switch(isNaN(f)&&(f=n-u-d-s),isNaN(h)&&(h=o-c-v-l),p!=null&&(isNaN(f)&&isNaN(h)&&(p>n/o?f=n*.8:h=o*.8),isNaN(f)&&(f=p*h),isNaN(h)&&(h=f/p)),isNaN(s)&&(s=n-u-f-d),isNaN(l)&&(l=o-c-h-v),a.left||a.right){case"center":s=n/2-f/2-r[3];break;case"right":s=n-f-d;break}switch(a.top||a.bottom){case"middle":case"center":l=o/2-h/2-r[0];break;case"bottom":l=o-h-v;break}s=s||0,l=l||0,isNaN(f)&&(f=n-d-s-(u||0)),isNaN(h)&&(h=o-v-l-(c||0));var g=new BoundingRect((t.x||0)+s+r[3],(t.y||0)+l+r[0],f,h);return g.margin=r,g}function applyPreserveAspect(a,t,r){var n=a.getShallow("preserveAspect",!0);if(!n)return t;var o=t.width/t.height;if(Math.abs(Math.atan(r)-Math.atan(o))<1e-9)return t;var s=a.getShallow("preserveAspectAlign",!0),l=a.getShallow("preserveAspectVerticalAlign",!0),u={width:t.width,height:t.height},c=n==="cover";return o>r&&!c||o<r&&c?(u.width=t.height*r,s==="left"?u.left=0:s==="right"?u.right=0:u.left="center"):(u.height=t.width/r,l==="top"?u.top=0:l==="bottom"?u.bottom=0:u.top="middle"),getLayoutRect(u,t)}var BoxLayoutReferenceType={rect:1,point:2};function createBoxLayoutReference(a,t,r){var n,o,s,l=a.boxCoordinateSystem,u;if(l){var c=getCoordForBoxCoordSys(a),f=c.coord,h=c.from;if(l.dataToLayout){s=BoxLayoutReferenceType.rect,u=h;var v=l.dataToLayout(f);n=v.contentRect||v.rect}else r&&r.enableLayoutOnlyByCenter&&l.dataToPoint&&(s=BoxLayoutReferenceType.point,u=h,o=l.dataToPoint(f))}return s==null&&(s=BoxLayoutReferenceType.rect),s===BoxLayoutReferenceType.rect&&(n||(n={x:0,y:0,width:t.getWidth(),height:t.getHeight()}),o=[n.x+n.width/2,n.y+n.height/2]),{type:s,refContainer:n,refPoint:o,boxCoordFrom:u}}function positionElement(a,t,r,n,o,s){var l=!o||!o.hv||o.hv[0],u=!o||!o.hv||o.hv[1],c=o&&o.boundingMode||"all";if(s=s||a,s.x=a.x,s.y=a.y,!l&&!u)return!1;var f;if(c==="raw")f=a.type==="group"?new BoundingRect(0,0,+t.width||0,+t.height||0):a.getBoundingRect();else if(f=a.getBoundingRect(),a.needLocalTransform()){var h=a.getLocalTransform();f=f.clone(),f.applyTransform(h)}var v=getLayoutRect(defaults({width:f.width,height:f.height},t),r,n),d=l?v.x-f.x:0,p=u?v.y-f.y:0;return c==="raw"?(s.x=d,s.y=p):(s.x+=d,s.y+=p),s===a&&a.markRedraw(),!0}function sizeCalculable(a,t){return a[HV_NAMES[t][0]]!=null||a[HV_NAMES[t][1]]!=null&&a[HV_NAMES[t][2]]!=null}function fetchLayoutMode(a){var t=a.layoutMode||a.constructor.layoutMode;return isObject$3(t)?t:t?{type:t}:null}function mergeLayoutParam(a,t,r){var n=r&&r.ignoreSize;!isArray$1(n)&&(n=[n,n]);var o=l(HV_NAMES[0],0),s=l(HV_NAMES[1],1);c(HV_NAMES[0],a,o),c(HV_NAMES[1],a,s);function l(f,h){var v={},d=0,p={},g=0,y=2;if(each$e(f,function(x){p[x]=a[x]}),each$e(f,function(x){hasOwn(t,x)&&(v[x]=p[x]=t[x]),u(v,x)&&d++,u(p,x)&&g++}),n[h])return u(t,f[1])?p[f[2]]=null:u(t,f[2])&&(p[f[1]]=null),p;if(g===y||!d)return p;if(d>=y)return v;for(var _=0;_<f.length;_++){var S=f[_];if(!hasOwn(v,S)&&hasOwn(a,S)){v[S]=a[S];break}}return v}function u(f,h){return f[h]!=null&&f[h]!=="auto"}function c(f,h,v){each$e(f,function(d){h[d]=v[d]})}}function getLayoutParams(a){return copyLayoutParams({},a)}function copyLayoutParams(a,t){return t&&a&&each$e(LOCATION_PARAMS,function(r){hasOwn(t,r)&&(a[r]=t[r])}),a}var inner$n=makeInner(),ComponentModel=function(a){__extends(t,a);function t(r,n,o){var s=a.call(this,r,n,o)||this;return s.uid=getUID("ec_cpt_model"),s}return t.prototype.init=function(r,n,o){this.mergeDefaultAndTheme(r,o)},t.prototype.mergeDefaultAndTheme=function(r,n){var o=fetchLayoutMode(this),s=o?getLayoutParams(r):{},l=n.getTheme();merge(r,l.get(this.mainType)),merge(r,this.getDefaultOption()),o&&mergeLayoutParam(r,s,o)},t.prototype.mergeOption=function(r,n){merge(this.option,r,!0);var o=fetchLayoutMode(this);o&&mergeLayoutParam(this.option,r,o)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!isExtendedClass(r))return r.defaultOption;var n=inner$n(this);if(!n.defaultOption){for(var o=[],s=r;s;){var l=s.prototype.defaultOption;l&&o.push(l),s=s.superClass}for(var u={},c=o.length-1;c>=0;c--)u=merge(u,o[c],!0);n.defaultOption=u}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var o=r+"Index",s=r+"Id";return queryReferringComponents(this.ecModel,r,{index:this.get(o,!0),id:this.get(s,!0)},n)},t.prototype.getBoxLayoutParams=function(){return getBoxLayoutParams(this,!1)},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(a){var t=[];return each$f(ComponentModel.getClassesByMainType(a),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=map$1(t,function(r){return parseClassType(r).main}),a!=="dataset"&&indexOf(t,"dataset")<=0&&t.unshift("dataset"),t}var tokens={color:{},darkColor:{},size:{}},color$1=tokens.color={theme:["#5070dd","#b6d634","#505372","#ff994d","#0ca8df","#ffd10a","#fb628b","#785db0","#3fbe95"],neutral00:"#fff",neutral05:"#f4f7fd",neutral10:"#e8ebf0",neutral15:"#dbdee4",neutral20:"#cfd2d7",neutral25:"#c3c5cb",neutral30:"#b7b9be",neutral35:"#aaacb2",neutral40:"#9ea0a5",neutral45:"#929399",neutral50:"#86878c",neutral55:"#797b7f",neutral60:"#6d6e73",neutral65:"#616266",neutral70:"#54555a",neutral75:"#48494d",neutral80:"#3c3c41",neutral85:"#303034",neutral90:"#232328",neutral95:"#17171b",neutral99:"#000",accent05:"#eff1f9",accent10:"#e0e4f2",accent15:"#d0d6ec",accent20:"#c0c9e6",accent25:"#b1bbdf",accent30:"#a1aed9",accent35:"#91a0d3",accent40:"#8292cc",accent45:"#7285c6",accent50:"#6578ba",accent55:"#5c6da9",accent60:"#536298",accent65:"#4a5787",accent70:"#404c76",accent75:"#374165",accent80:"#2e3654",accent85:"#252b43",accent90:"#1b2032",accent95:"#121521",transparent:"rgba(0,0,0,0)",highlight:"rgba(255,231,130,0.8)"};extend(color$1,{primary:color$1.neutral80,secondary:color$1.neutral70,tertiary:color$1.neutral60,quaternary:color$1.neutral50,disabled:color$1.neutral20,border:color$1.neutral30,borderTint:color$1.neutral20,borderShade:color$1.neutral40,background:color$1.neutral05,backgroundTint:"rgba(234,237,245,0.5)",backgroundTransparent:"rgba(255,255,255,0)",backgroundShade:color$1.neutral10,shadow:"rgba(0,0,0,0.2)",shadowTint:"rgba(129,130,136,0.2)",axisLine:color$1.neutral70,axisLineTint:color$1.neutral40,axisTick:color$1.neutral70,axisTickMinor:color$1.neutral60,axisLabel:color$1.neutral70,axisSplitLine:color$1.neutral15,axisMinorSplitLine:color$1.neutral05});for(var key in color$1)if(color$1.hasOwnProperty(key)){var hex=color$1[key];key==="theme"?tokens.darkColor.theme=color$1.theme.slice():key==="highlight"?tokens.darkColor.highlight="rgba(255,231,130,0.4)":key.indexOf("accent")===0?tokens.darkColor[key]=modifyHSL(hex,null,function(a){return a*.5},function(a){return Math.min(1,1.3-a)}):tokens.darkColor[key]=modifyHSL(hex,null,function(a){return a*.9},function(a){return 1-Math.pow(a,1.5)})}tokens.size={xxs:2,xs:5,s:10,m:15,l:20,xl:30,xxl:40,xxxl:50};var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)",themeColor=tokens.color.theme[0],lightThemeColor=modifyHSL(themeColor,null,null,.9);const globalDefault={darkMode:"auto",colorBy:"series",color:tokens.color.theme,gradientColor:[lightThemeColor,themeColor],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(a){innerGlobalModel(a).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(a,t,r){var n={},o=querySeriesUpstreamDatasetModel(t);if(!o||!a)return n;var s=[],l=[],u=t.ecModel,c=innerGlobalModel(u).datasetMap,f=o.uid+"_"+r.seriesLayoutBy,h,v;a=a.slice(),each$f(a,function(y,_){var S=isObject$3(y)?y:a[_]={name:y};S.type==="ordinal"&&h==null&&(h=_,v=g(S)),n[S.name]=[]});var d=c.get(f)||c.set(f,{categoryWayDim:v,valueWayDim:0});each$f(a,function(y,_){var S=y.name,x=g(y);if(h==null){var T=d.valueWayDim;p(n[S],T,x),p(l,T,x),d.valueWayDim+=x}else if(h===_)p(n[S],0,x),p(s,0,x);else{var T=d.categoryWayDim;p(n[S],T,x),p(l,T,x),d.categoryWayDim+=x}});function p(y,_,S){for(var x=0;x<S;x++)y.push(_+x)}function g(y){var _=y.dimsDef;return _?_.length:1}return s.length&&(n.itemName=s),l.length&&(n.seriesName=l),n}function makeSeriesEncodeForNameBased(a,t,r){var n={},o=querySeriesUpstreamDatasetModel(a);if(!o)return n;var s=t.sourceFormat,l=t.dimensionsDefine,u;(s===SOURCE_FORMAT_OBJECT_ROWS||s===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(l,function(h,v){(isObject$3(h)?h.name:h)==="name"&&(u=v)});var c=function(){for(var h={},v={},d=[],p=0,g=Math.min(5,r);p<g;p++){var y=doGuessOrdinal(t.data,s,t.seriesLayoutBy,l,t.startIndex,p);d.push(y);var _=y===BE_ORDINAL.Not;if(_&&h.v==null&&p!==u&&(h.v=p),(h.n==null||h.n===h.v||!_&&d[h.n]===BE_ORDINAL.Not)&&(h.n=p),S(h)&&d[h.n]!==BE_ORDINAL.Not)return h;_||(y===BE_ORDINAL.Might&&v.v==null&&p!==u&&(v.v=p),(v.n==null||v.n===v.v)&&(v.n=p))}function S(x){return x.v!=null&&x.n!=null}return S(h)?h:S(v)?v:null}();if(c){n.value=[c.v];var f=u??c.n;n.itemName=[f],n.seriesName=[f]}return n}function querySeriesUpstreamDatasetModel(a){var t=a.get("data",!0);if(!t)return queryReferringComponents(a.ecModel,"dataset",{index:a.get("datasetIndex",!0),id:a.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(a){return!a.get("transform",!0)&&!a.get("fromTransformResult",!0)?[]:queryReferringComponents(a.ecModel,"dataset",{index:a.get("fromDatasetIndex",!0),id:a.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(a,t){return doGuessOrdinal(a.data,a.sourceFormat,a.seriesLayoutBy,a.dimensionsDefine,a.startIndex,t)}function doGuessOrdinal(a,t,r,n,o,s){var l,u=5;if(isTypedArray(a))return BE_ORDINAL.Not;var c,f;if(n){var h=n[s];isObject$3(h)?(c=h.name,f=h.type):isString(h)&&(c=h)}if(f!=null)return f==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(t===SOURCE_FORMAT_ARRAY_ROWS){var v=a;if(r===SERIES_LAYOUT_BY_ROW){for(var d=v[s],p=0;p<(d||[]).length&&p<u;p++)if((l=b(d[o+p]))!=null)return l}else for(var p=0;p<v.length&&p<u;p++){var g=v[o+p];if(g&&(l=b(g[s]))!=null)return l}}else if(t===SOURCE_FORMAT_OBJECT_ROWS){var y=a;if(!c)return BE_ORDINAL.Not;for(var p=0;p<y.length&&p<u;p++){var _=y[p];if(_&&(l=b(_[c]))!=null)return l}}else if(t===SOURCE_FORMAT_KEYED_COLUMNS){var S=a;if(!c)return BE_ORDINAL.Not;var d=S[c];if(!d||isTypedArray(d))return BE_ORDINAL.Not;for(var p=0;p<d.length&&p<u;p++)if((l=b(d[p]))!=null)return l}else if(t===SOURCE_FORMAT_ORIGINAL)for(var x=a,p=0;p<x.length&&p<u;p++){var _=x[p],T=getDataItemValue(_);if(!isArray$1(T))return BE_ORDINAL.Not;if((l=b(T[s]))!=null)return l}function b(C){var w=isString(C);if(C!=null&&Number.isFinite(Number(C))&&C!=="")return w?BE_ORDINAL.Might:BE_ORDINAL.Not;if(w&&C!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(a,t){assert(internalOptionCreatorMap.get(a)==null&&t),internalOptionCreatorMap.set(a,t)}function concatInternalOptions(a,t,r){var n=internalOptionCreatorMap.get(t);if(!n)return r;var o=n(a);return o?r.concat(o):r}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function a(){}return a.prototype.getColorFromPalette=function(t,r,n){var o=normalizeToArray(this.get("color",!0)),s=this.get("colorLayer",!0);return getFromPalette(this,innerColor,o,s,t,r,n)},a.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},a}();function getDecalFromPalette(a,t,r,n){var o=normalizeToArray(a.get(["aria","decal","decals"]));return getFromPalette(a,innerDecal,o,null,t,r,n)}function getNearestPalette(a,t){for(var r=a.length,n=0;n<r;n++)if(a[n].length>t)return a[n];return a[r-1]}function getFromPalette(a,t,r,n,o,s,l){s=s||a;var u=t(s),c=u.paletteIdx||0,f=u.paletteNameMap=u.paletteNameMap||{};if(f.hasOwnProperty(o))return f[o];var h=l==null||!n?r:getNearestPalette(n,l);if(h=h||r,!(!h||!h.length)){var v=h[c];return o&&(f[o]=v),u.paletteIdx=(c+1)%h.length,v}}function clearPalette(a,t){t(a).paletteIdx=0,t(a).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.init=function(r,n,o,s,l,u){s=s||{},this.option=null,this._theme=new Model(s),this._locale=new Model(l),this._optionManager=u},t.prototype.setOption=function(r,n,o){var s=normalizeSetOptionInput(n);this._optionManager.setOption(r,o,s),this._resetOption(null,s)},t.prototype.resetOption=function(r,n){return this._resetOption(r,normalizeSetOptionInput(n))},t.prototype._resetOption=function(r,n){var o=!1,s=this._optionManager;if(!r||r==="recreate"){var l=s.mountOption(r==="recreate");!this.option||r==="recreate"?initBase(this,l):(this.restoreData(),this._mergeOption(l,n)),o=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var u=s.getTimelineOption(this);u&&(o=!0,this._mergeOption(u,n))}if(!r||r==="recreate"||r==="media"){var c=s.getMediaOption(this);c.length&&each$f(c,function(f){o=!0,this._mergeOption(f,n)},this)}return o},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var o=this.option,s=this._componentsMap,l=this._componentsCount,u=[],c=createHashMap(),f=n&&n.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(r,function(v,d){v!=null&&(ComponentModel.hasClass(d)?d&&(u.push(d),c.set(d,!0)):o[d]=o[d]==null?clone$4(v):merge(o[d],v,!0))}),f&&f.each(function(v,d){ComponentModel.hasClass(d)&&!c.get(d)&&(u.push(d),c.set(d,!0))}),ComponentModel.topologicalTravel(u,ComponentModel.getAllClassMainTypes(),h,this);function h(v){var d=concatInternalOptions(this,v,normalizeToArray(r[v])),p=s.get(v),g=p?f&&f.get(v)?"replaceMerge":"normalMerge":"replaceAll",y=mappingToExists(p,d,g);setComponentTypeToKeyInfo(y,v,ComponentModel),o[v]=null,s.set(v,null),l.set(v,0);var _=[],S=[],x=0,T;each$f(y,function(b,C){var w=b.existing,M=b.newOption;if(!M)w&&(w.mergeOption({},this),w.optionUpdated({},!1));else{var P=v==="series",L=ComponentModel.getClass(v,b.keyInfo.subType,!P);if(!L)return;if(v==="tooltip"){if(T)return;T=!0}if(w&&w.constructor===L)w.name=b.keyInfo.name,w.mergeOption(M,this),w.optionUpdated(M,!1);else{var E=extend({componentIndex:C},b.keyInfo);w=new L(M,this,this,E),extend(w,E),b.brandNew&&(w.__requireNewView=!0),w.init(M,this,this),w.optionUpdated(null,!0)}}w?(_.push(w.option),S.push(w),x++):(_.push(void 0),S.push(void 0))},this),o[v]=_,s.set(v,S),l.set(v,x),v==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},t.prototype.getOption=function(){var r=clone$4(this.option);return each$f(r,function(n,o){if(ComponentModel.hasClass(o)){for(var s=normalizeToArray(n),l=s.length,u=!1,c=l-1;c>=0;c--)s[c]&&!isComponentIdInternal(s[c])?u=!0:(s[c]=null,!u&&l--);s.length=l,r[o]=s}}),delete r[OPTION_INNER_KEY],r},t.prototype.setTheme=function(r){this._theme=new Model(r),this._resetOption("recreate",null)},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var o=this._componentsMap.get(r);if(o){var s=o[n||0];if(s)return s;if(n==null){for(var l=0;l<o.length;l++)if(o[l])return o[l]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var o=r.index,s=r.id,l=r.name,u=this._componentsMap.get(n);if(!u||!u.length)return[];var c;return o!=null?(c=[],each$f(normalizeToArray(o),function(f){u[f]&&c.push(u[f])})):s!=null?c=queryByIdOrName("id",s,u):l!=null?c=queryByIdOrName("name",l,u):c=filter(u,function(f){return!!f}),filterBySubType(c,r)},t.prototype.findComponents=function(r){var n=r.query,o=r.mainType,s=u(n),l=s?this.queryComponents(s):filter(this._componentsMap.get(o),function(f){return!!f});return c(filterBySubType(l,r));function u(f){var h=o+"Index",v=o+"Id",d=o+"Name";return f&&(f[h]!=null||f[v]!=null||f[d]!=null)?{mainType:o,index:f[h],id:f[v],name:f[d]}:null}function c(f){return r.filter?filter(f,r.filter):f}},t.prototype.eachComponent=function(r,n,o){var s=this._componentsMap;if(isFunction(r)){var l=n,u=r;s.each(function(v,d){for(var p=0;v&&p<v.length;p++){var g=v[p];g&&u.call(l,d,g,g.componentIndex)}})}else for(var c=isString(r)?s.get(r):isObject$3(r)?this.findComponents(r):null,f=0;c&&f<c.length;f++){var h=c[f];h&&n.call(o,h,h.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=convertOptionIdName(r,null);return filter(this._componentsMap.get("series"),function(o){return!!o&&n!=null&&o.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return filter(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){assertSeriesInitialized(this),each$f(this._seriesIndices,function(o){var s=this._componentsMap.get("series")[o];r.call(n,s,o)},this)},t.prototype.eachRawSeries=function(r,n){each$f(this._componentsMap.get("series"),function(o){o&&r.call(n,o,o.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,o){assertSeriesInitialized(this),each$f(this._seriesIndices,function(s){var l=this._componentsMap.get("series")[s];l.subType===r&&n.call(o,l,s)},this)},t.prototype.eachRawSeriesByType=function(r,n,o){return each$f(this.getSeriesByType(r),n,o)},t.prototype.isSeriesFiltered=function(r){return assertSeriesInitialized(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){assertSeriesInitialized(this);var o=[];each$f(this._seriesIndices,function(s){var l=this._componentsMap.get("series")[s];r.call(n,l,s)&&o.push(s)},this),this._seriesIndices=o,this._seriesIndicesMap=createHashMap(o)},t.prototype.restoreData=function(r){reCreateSeriesIndices(this);var n=this._componentsMap,o=[];n.each(function(s,l){ComponentModel.hasClass(l)&&o.push(l)}),ComponentModel.topologicalTravel(o,ComponentModel.getAllClassMainTypes(),function(s){each$f(n.get(s),function(l){l&&(s!=="series"||!isNotTargetSeries(l,r))&&l.restoreData()})})},t.internalField=function(){reCreateSeriesIndices=function(r){var n=r._seriesIndices=[];each$f(r._componentsMap.get("series"),function(o){o&&n.push(o.componentIndex)}),r._seriesIndicesMap=createHashMap(n)},assertSeriesInitialized=function(r){},initBase=function(r,n){r.option={},r.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,r._componentsMap=createHashMap({series:[]}),r._componentsCount=createHashMap();var o=n.aria;isObject$3(o)&&o.enabled==null&&(o.enabled=!0),mergeTheme(n,r._theme.option),merge(n,globalDefault,!1),r._mergeOption(n,null)}}(),t}(Model);function isNotTargetSeries(a,t){if(t){var r=t.seriesIndex,n=t.seriesId,o=t.seriesName;return r!=null&&a.componentIndex!==r||n!=null&&a.id!==n||o!=null&&a.name!==o}}function mergeTheme(a,t){var r=a.color&&!a.colorLayer;each$f(t,function(n,o){o==="colorLayer"&&r||o==="color"&&a.color||ComponentModel.hasClass(o)||(typeof n=="object"?a[o]=a[o]?merge(a[o],n,!1):clone$4(n):a[o]==null&&(a[o]=n))})}function queryByIdOrName(a,t,r){if(isArray$1(t)){var n=createHashMap();return each$f(t,function(s){if(s!=null){var l=convertOptionIdName(s,null);l!=null&&n.set(s,!0)}}),filter(r,function(s){return s&&n.get(s[a])})}else{var o=convertOptionIdName(t,null);return filter(r,function(s){return s&&o!=null&&s[a]===o})}}function filterBySubType(a,t){return t.hasOwnProperty("subType")?filter(a,function(r){return r&&r.subType===t.subType}):a}function normalizeSetOptionInput(a){var t=createHashMap();return a&&each$f(normalizeToArray(a.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function a(t){each$f(availableMethods,function(r){this[r]=bind$1(t[r],t)},this)}return a}(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function a(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return a.prototype.setOption=function(t,r,n){t&&(each$f(normalizeToArray(t.series),function(l){l&&l.data&&isTypedArray(l.data)&&setAsPrimitive(l.data)}),each$f(normalizeToArray(t.dataset),function(l){l&&l.source&&isTypedArray(l.source)&&setAsPrimitive(l.source)})),t=clone$4(t);var o=this._optionBackup,s=parseRawOption(t,r,!o);this._newBaseOption=s.baseOption,o?(s.timelineOptions.length&&(o.timelineOptions=s.timelineOptions),s.mediaList.length&&(o.mediaList=s.mediaList),s.mediaDefault&&(o.mediaDefault=s.mediaDefault)):this._optionBackup=s},a.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],clone$4(t?r.baseOption:this._newBaseOption)},a.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var o=t.getComponent("timeline");o&&(r=clone$4(n[o.getCurrentIndex()]))}return r},a.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),o=this._mediaList,s=this._mediaDefault,l=[],u=[];if(!o.length&&!s)return u;for(var c=0,f=o.length;c<f;c++)applyMediaQuery(o[c].query,r,n)&&l.push(c);return!l.length&&s&&(l=[-1]),l.length&&!indicesEquals(l,this._currentMediaIndices)&&(u=map$1(l,function(h){return clone$4(h===-1?s.option:o[h].option)})),this._currentMediaIndices=l,u},a}();function parseRawOption(a,t,r){var n=[],o,s,l=a.baseOption,u=a.timeline,c=a.options,f=a.media,h=!!a.media,v=!!(c||u||l&&l.timeline);l?(s=l,s.timeline||(s.timeline=u)):((v||h)&&(a.options=a.media=null),s=a),h&&isArray$1(f)&&each$f(f,function(p){p&&p.option&&(p.query?n.push(p):o||(o=p))}),d(s),each$f(c,function(p){return d(p)}),each$f(n,function(p){return d(p.option)});function d(p){each$f(t,function(g){g(p,r)})}return{baseOption:s,timelineOptions:c||[],mediaDefault:o,mediaList:n}}function applyMediaQuery(a,t,r){var n={width:t,height:r,aspectratio:t/r},o=!0;return each$f(a,function(s,l){var u=l.match(QUERY_REG);if(!(!u||!u[1]||!u[2])){var c=u[1],f=u[2].toLowerCase();compare(n[f],s,c)||(o=!1)}}),o}function compare(a,t,r){return r==="min"?a>=t:r==="max"?a<=t:a===t}function indicesEquals(a,t){return a.join(",")===t.join(",")}var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(a){var t=a&&a.itemStyle;if(t)for(var r=0,n=POSSIBLE_STYLES.length;r<n;r++){var o=POSSIBLE_STYLES[r],s=t.normal,l=t.emphasis;s&&s[o]&&(a[o]=a[o]||{},a[o].normal?merge(a[o].normal,s[o]):a[o].normal=s[o],s[o]=null),l&&l[o]&&(a[o]=a[o]||{},a[o].emphasis?merge(a[o].emphasis,l[o]):a[o].emphasis=l[o],l[o]=null)}}function convertNormalEmphasis(a,t,r){if(a&&a[t]&&(a[t].normal||a[t].emphasis)){var n=a[t].normal,o=a[t].emphasis;n&&(r?(a[t].normal=a[t].emphasis=null,defaults(a[t],n)):a[t]=n),o&&(a.emphasis=a.emphasis||{},a.emphasis[t]=o,o.focus&&(a.emphasis.focus=o.focus),o.blurScope&&(a.emphasis.blurScope=o.blurScope))}}function removeEC3NormalStatus(a){convertNormalEmphasis(a,"itemStyle"),convertNormalEmphasis(a,"lineStyle"),convertNormalEmphasis(a,"areaStyle"),convertNormalEmphasis(a,"label"),convertNormalEmphasis(a,"labelLine"),convertNormalEmphasis(a,"upperLabel"),convertNormalEmphasis(a,"edgeLabel")}function compatTextStyle(a,t){var r=isObject$2(a)&&a[t],n=isObject$2(r)&&r.textStyle;if(n)for(var o=0,s=TEXT_STYLE_OPTIONS.length;o<s;o++){var l=TEXT_STYLE_OPTIONS[o];n.hasOwnProperty(l)&&(r[l]=n[l])}}function compatEC3CommonStyles(a){a&&(removeEC3NormalStatus(a),compatTextStyle(a,"label"),a.emphasis&&compatTextStyle(a.emphasis,"label"))}function processSeries(a){if(isObject$2(a)){compatEC2ItemStyle(a),removeEC3NormalStatus(a),compatTextStyle(a,"label"),compatTextStyle(a,"upperLabel"),compatTextStyle(a,"edgeLabel"),a.emphasis&&(compatTextStyle(a.emphasis,"label"),compatTextStyle(a.emphasis,"upperLabel"),compatTextStyle(a.emphasis,"edgeLabel"));var t=a.markPoint;t&&(compatEC2ItemStyle(t),compatEC3CommonStyles(t));var r=a.markLine;r&&(compatEC2ItemStyle(r),compatEC3CommonStyles(r));var n=a.markArea;n&&compatEC3CommonStyles(n);var o=a.data;if(a.type==="graph"){o=o||a.nodes;var s=a.links||a.edges;if(s&&!isTypedArray(s))for(var l=0;l<s.length;l++)compatEC3CommonStyles(s[l]);each$f(a.categories,function(f){removeEC3NormalStatus(f)})}if(o&&!isTypedArray(o))for(var l=0;l<o.length;l++)compatEC3CommonStyles(o[l]);if(t=a.markPoint,t&&t.data)for(var u=t.data,l=0;l<u.length;l++)compatEC3CommonStyles(u[l]);if(r=a.markLine,r&&r.data)for(var c=r.data,l=0;l<c.length;l++)isArray$1(c[l])?(compatEC3CommonStyles(c[l][0]),compatEC3CommonStyles(c[l][1])):compatEC3CommonStyles(c[l]);a.type==="gauge"?(compatTextStyle(a,"axisLabel"),compatTextStyle(a,"title"),compatTextStyle(a,"detail")):a.type==="treemap"?(convertNormalEmphasis(a.breadcrumb,"itemStyle"),each$f(a.levels,function(f){removeEC3NormalStatus(f)})):a.type==="tree"&&removeEC3NormalStatus(a.leaves)}}function toArr(a){return isArray$1(a)?a:a?[a]:[]}function toObj(a){return(isArray$1(a)?a[0]:a)||{}}function globalCompatStyle(a,t){each$d(toArr(a.series),function(n){isObject$2(n)&&processSeries(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(r,function(n){each$d(toArr(a[n]),function(o){o&&(compatTextStyle(o,"axisLabel"),compatTextStyle(o.axisPointer,"label"))})}),each$d(toArr(a.parallel),function(n){var o=n&&n.parallelAxisDefault;compatTextStyle(o,"axisLabel"),compatTextStyle(o&&o.axisPointer,"label")}),each$d(toArr(a.calendar),function(n){convertNormalEmphasis(n,"itemStyle"),compatTextStyle(n,"dayLabel"),compatTextStyle(n,"monthLabel"),compatTextStyle(n,"yearLabel")}),each$d(toArr(a.radar),function(n){compatTextStyle(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),each$d(toArr(a.geo),function(n){isObject$2(n)&&(compatEC3CommonStyles(n),each$d(toArr(n.regions),function(o){compatEC3CommonStyles(o)}))}),each$d(toArr(a.timeline),function(n){compatEC3CommonStyles(n),convertNormalEmphasis(n,"label"),convertNormalEmphasis(n,"itemStyle"),convertNormalEmphasis(n,"controlStyle",!0);var o=n.data;isArray$1(o)&&each$f(o,function(s){isObject$3(s)&&(convertNormalEmphasis(s,"label"),convertNormalEmphasis(s,"itemStyle"))})}),each$d(toArr(a.toolbox),function(n){convertNormalEmphasis(n,"iconStyle"),each$d(n.feature,function(o){convertNormalEmphasis(o,"iconStyle")})}),compatTextStyle(toObj(a.axisPointer),"label"),compatTextStyle(toObj(a.tooltip).axisPointer,"label")}function get(a,t){for(var r=t.split(","),n=a,o=0;o<r.length&&(n=n&&n[r[o]],n!=null);o++);return n}function set(a,t,r,n){for(var o=t.split(","),s=a,l,u=0;u<o.length-1;u++)l=o[u],s[l]==null&&(s[l]={}),s=s[l];s[o[u]]==null&&(s[o[u]]=r)}function compatLayoutProperties(a){a&&each$f(LAYOUT_PROPERTIES,function(t){t[0]in a&&!(t[1]in a)&&(a[t[1]]=a[t[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(a){var t=a&&a.itemStyle;if(t)for(var r=0;r<BAR_ITEM_STYLE_MAP.length;r++){var n=BAR_ITEM_STYLE_MAP[r][1],o=BAR_ITEM_STYLE_MAP[r][0];t[n]!=null&&(t[o]=t[n])}}function compatPieLabel(a){a&&a.alignTo==="edge"&&a.margin!=null&&a.edgeDistance==null&&(a.edgeDistance=a.margin)}function compatSunburstState(a){a&&a.downplay&&!a.blur&&(a.blur=a.downplay)}function compatGraphFocus(a){a&&a.focusNodeAdjacency!=null&&(a.emphasis=a.emphasis||{},a.emphasis.focus==null&&(a.emphasis.focus="adjacency"))}function traverseTree(a,t){if(a)for(var r=0;r<a.length;r++)t(a[r]),a[r]&&traverseTree(a[r].children,t)}function globalBackwardCompat(a,t){globalCompatStyle(a,t),a.series=normalizeToArray(a.series),each$f(a.series,function(r){if(isObject$3(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),compatPieLabel(r.label);var o=r.data;if(o&&!isTypedArray(o))for(var s=0;s<o.length;s++)compatPieLabel(o[s]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var l=get(r,"pointer.color");l!=null&&set(r,"itemStyle.color",l)}else if(n==="bar"){compatBarItemStyle(r),compatBarItemStyle(r.backgroundStyle),compatBarItemStyle(r.emphasis);var o=r.data;if(o&&!isTypedArray(o))for(var s=0;s<o.length;s++)typeof o[s]=="object"&&(compatBarItemStyle(o[s]),compatBarItemStyle(o[s]&&o[s].emphasis))}else if(n==="sunburst"){var u=r.highlightPolicy;u&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=u)),compatSunburstState(r),traverseTree(r.data,compatSunburstState)}else n==="graph"||n==="sankey"?compatGraphFocus(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&defaults(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),compatLayoutProperties(r)}}),a.dataRange&&(a.visualMap=a.dataRange),each$f(COMPATITABLE_COMPONENTS,function(r){var n=a[r];n&&(isArray$1(n)||(n=[n]),each$f(n,function(o){compatLayoutProperties(o)}))})}function dataStack(a){var t=createHashMap();a.eachSeries(function(r){var n=r.get("stack");if(n){var o=t.get(n)||t.set(n,[]),s=r.getData(),l={stackResultDimension:s.getCalculationInfo("stackResultDimension"),stackedOverDimension:s.getCalculationInfo("stackedOverDimension"),stackedDimension:s.getCalculationInfo("stackedDimension"),stackedByDimension:s.getCalculationInfo("stackedByDimension"),isStackedByIndex:s.getCalculationInfo("isStackedByIndex"),data:s,seriesModel:r};if(!l.stackedDimension||!(l.isStackedByIndex||l.stackedByDimension))return;o.push(l)}}),t.each(function(r){if(r.length!==0){var n=r[0].seriesModel,o=n.get("stackOrder")||"seriesAsc";o==="seriesDesc"&&r.reverse(),each$f(r,function(s,l){s.data.setCalculationInfo("stackedOnSeries",l>0?r[l-1].seriesModel:null)}),calculateStack(r)}})}function calculateStack(a){each$f(a,function(t,r){var n=[],o=[NaN,NaN],s=[t.stackResultDimension,t.stackedOverDimension],l=t.data,u=t.isStackedByIndex,c=t.seriesModel.get("stackStrategy")||"samesign";l.modify(s,function(f,h,v){var d=l.get(t.stackedDimension,v);if(isNaN(d))return o;var p,g;u?g=l.getRawIndex(v):p=l.get(t.stackedByDimension,v);for(var y=NaN,_=r-1;_>=0;_--){var S=a[_];if(u||(g=S.data.rawIndexOf(S.stackedByDimension,p)),g>=0){var x=S.data.getByRawIndex(S.stackResultDimension,g);if(c==="all"||c==="positive"&&x>0||c==="negative"&&x<0||c==="samesign"&&d>=0&&x>0||c==="samesign"&&d<=0&&x<0){d=addSafe(d,x),y=x;break}}}return n[0]=d,n[1]=y,n})})}var SourceImpl=function(){function a(t){this.data=t.data||(t.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=t.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=t.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var o=r[n];o.type==null&&guessOrdinal(this,n)===BE_ORDINAL.Must&&(o.type="ordinal")}}return a}();function isSourceInstance(a){return a instanceof SourceImpl}function createSource(a,t,r){r=r||detectSourceFormat(a);var n=t.seriesLayoutBy,o=determineSourceDimensions(a,r,n,t.sourceHeader,t.dimensions),s=new SourceImpl({data:a,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:o.dimensionsDefine,startIndex:o.startIndex,dimensionsDetectedCount:o.dimensionsDetectedCount,metaRawOption:clone$4(t)});return s}function createSourceFromSeriesDataOption(a){return new SourceImpl({data:a,sourceFormat:isTypedArray(a)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(a){return new SourceImpl({data:a.data,sourceFormat:a.sourceFormat,seriesLayoutBy:a.seriesLayoutBy,dimensionsDefine:clone$4(a.dimensionsDefine),startIndex:a.startIndex,dimensionsDetectedCount:a.dimensionsDetectedCount})}function detectSourceFormat(a){var t=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(a))t=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(a)){a.length===0&&(t=SOURCE_FORMAT_ARRAY_ROWS);for(var r=0,n=a.length;r<n;r++){var o=a[r];if(o!=null){if(isArray$1(o)||isTypedArray(o)){t=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(o)){t=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(a)){for(var s in a)if(hasOwn(a,s)&&isArrayLike(a[s])){t=SOURCE_FORMAT_KEYED_COLUMNS;break}}return t}function determineSourceDimensions(a,t,r,n,o){var s,l;if(!a)return{dimensionsDefine:normalizeDimensionsOption(o),startIndex:l,dimensionsDetectedCount:s};if(t===SOURCE_FORMAT_ARRAY_ROWS){var u=a;n==="auto"||n==null?arrayRowsTravelFirst(function(f){f!=null&&f!=="-"&&(isString(f)?l==null&&(l=1):l=0)},r,u,10):l=isNumber(n)?n:n?1:0,!o&&l===1&&(o=[],arrayRowsTravelFirst(function(f,h){o[h]=f!=null?f+"":""},r,u,1/0)),s=o?o.length:r===SERIES_LAYOUT_BY_ROW?u.length:u[0]?u[0].length:null}else if(t===SOURCE_FORMAT_OBJECT_ROWS)o||(o=objectRowsCollectDimensions(a));else if(t===SOURCE_FORMAT_KEYED_COLUMNS)o||(o=[],each$f(a,function(f,h){o.push(h)}));else if(t===SOURCE_FORMAT_ORIGINAL){var c=getDataItemValue(a[0]);s=isArray$1(c)&&c.length||1}return{startIndex:l,dimensionsDefine:normalizeDimensionsOption(o),dimensionsDetectedCount:s}}function objectRowsCollectDimensions(a){for(var t=0,r;t<a.length&&!(r=a[t++]););if(r)return keys(r)}function normalizeDimensionsOption(a){if(a){var t=createHashMap();return map$1(a,function(r,n){r=isObject$3(r)?r:{name:r};var o={name:r.name,displayName:r.displayName,type:r.type};if(o.name==null)return o;o.name+="",o.displayName==null&&(o.displayName=o.name);var s=t.get(o.name);return s?o.name+="-"+s.count++:t.set(o.name,{count:1}),o})}}function arrayRowsTravelFirst(a,t,r,n){if(t===SERIES_LAYOUT_BY_ROW)for(var o=0;o<r.length&&o<n;o++)a(r[o]?r[o][0]:null,o);else for(var s=r[0]||[],o=0;o<s.length&&o<n;o++)a(s[o],o)}function shouldRetrieveDataByName(a){var t=a.sourceFormat;return t===SOURCE_FORMAT_OBJECT_ROWS||t===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,_d,providerMethods,mountMethods,DefaultDataProvider=function(){function a(t,r){var n=isSourceInstance(t)?t:createSourceFromSeriesDataOption(t);this._source=n;var o=this._data=n.data,s=n.sourceFormat;n.seriesLayoutBy,s===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=r,this._data=o),mountMethods(this,o,n)}return a.prototype.getSource=function(){return this._source},a.prototype.count=function(){return 0},a.prototype.getItem=function(t,r){},a.prototype.appendData=function(t){},a.prototype.clean=function(){},a.protoInitialize=function(){var t=a.prototype;t.pure=!1,t.persistent=!0}(),a.internalField=function(){var t;mountMethods=function(l,u,c){var f=c.sourceFormat,h=c.seriesLayoutBy,v=c.startIndex,d=c.dimensionsDefine,p=providerMethods[getMethodMapKey(f,h)];if(extend(l,p),f===SOURCE_FORMAT_TYPED_ARRAY)l.getItem=r,l.count=o,l.fillStorage=n;else{var g=getRawSourceItemGetter(f,h);l.getItem=bind$1(g,null,u,v,d);var y=getRawSourceDataCounter(f,h);l.count=bind$1(y,null,u,v,d)}};var r=function(l,u){l=l-this._offset,u=u||[];for(var c=this._data,f=this._dimSize,h=f*l,v=0;v<f;v++)u[v]=c[h+v];return u},n=function(l,u,c,f){for(var h=this._data,v=this._dimSize,d=0;d<v;d++){for(var p=f[d],g=p[0]==null?1/0:p[0],y=p[1]==null?-1/0:p[1],_=u-l,S=c[d],x=0;x<_;x++){var T=h[x*v+d];S[l+x]=T,T<g&&(g=T),T>y&&(y=T)}p[0]=g,p[1]=y}},o=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(t={},t[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:s},t[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:s},t[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(l){var u=this._data;each$f(l,function(c,f){for(var h=u[f]||(u[f]=[]),v=0;v<(c||[]).length;v++)h.push(c[v])})}},t[SOURCE_FORMAT_ORIGINAL]={appendData:s},t[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(l){this._data=l},clean:function(){this._offset+=this.count(),this._data=null}},t);function s(l){for(var u=0;u<l.length;u++)this._data.push(l[u])}}(),a}(),validateSimply=function(a){isArray$1(a)||error("series.data or dataset.source must be an array.")};_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=validateSimply,_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=validateSimply,_a[SOURCE_FORMAT_OBJECT_ROWS]=validateSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(a,t){for(var r=0;r<t.length;r++){var n=t[r].name;n==null&&error("dimension name must not be null/undefined.")}},_a[SOURCE_FORMAT_ORIGINAL]=validateSimply;var getItemSimply=function(a,t,r,n){return a[n]},rawSourceItemGetterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(a,t,r,n){return a[n+t]},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(a,t,r,n,o){n+=t;for(var s=o||[],l=a,u=0;u<l.length;u++){var c=l[u];s[u]=c?c[n]:null}return s},_b[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(a,t,r,n,o){for(var s=o||[],l=0;l<r.length;l++){var u=r[l].name,c=u!=null?a[u]:null;s[l]=c?c[n]:null}return s},_b[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_b);function getRawSourceItemGetter(a,t){var r=rawSourceItemGetterMap[getMethodMapKey(a,t)];return r}var countSimply=function(a,t,r){return a.length},rawSourceDataCounterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(a,t,r){return Math.max(0,a.length-t)},_c[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(a,t,r){var n=a[0];return n?Math.max(0,n.length-t):0},_c[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_c[SOURCE_FORMAT_KEYED_COLUMNS]=function(a,t,r){var n=r[0].name,o=n!=null?a[n]:null;return o?o.length:0},_c[SOURCE_FORMAT_ORIGINAL]=countSimply,_c);function getRawSourceDataCounter(a,t){var r=rawSourceDataCounterMap[getMethodMapKey(a,t)];return r}var getRawValueSimply=function(a,t,r){return a[t]},rawSourceValueGetterMap=(_d={},_d[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_d[SOURCE_FORMAT_OBJECT_ROWS]=function(a,t,r){return a[r]},_d[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_d[SOURCE_FORMAT_ORIGINAL]=function(a,t,r){var n=getDataItemValue(a);return n instanceof Array?n[t]:n},_d[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_d);function getRawSourceValueGetter(a){var t=rawSourceValueGetterMap[a];return t}function getMethodMapKey(a,t){return a===SOURCE_FORMAT_ARRAY_ROWS?a+"_"+t:a}function retrieveRawValue(a,t,r){if(a){var n=a.getRawDataItem(t);if(n!=null){var o=a.getStore(),s=o.getSource().sourceFormat;if(r!=null){var l=a.getDimensionIndex(r),u=o.getDimensionProperty(l);return getRawSourceValueGetter(s)(n,l,u)}else{var c=n;return s===SOURCE_FORMAT_ORIGINAL&&(c=getDataItemValue(n)),c}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function a(){}return a.prototype.getDataParams=function(t,r){var n=this.getData(r),o=this.getRawValue(t,r),s=n.getRawIndex(t),l=n.getName(t),u=n.getRawDataItem(t),c=n.getItemVisual(t,"style"),f=c&&c[n.getItemVisual(t,"drawType")||"fill"],h=c&&c.stroke,v=this.mainType,d=v==="series",p=n.userOutput&&n.userOutput.get();return{componentType:v,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:l,dataIndex:s,data:u,dataType:r,value:o,color:f,borderColor:h,dimensionNames:p?p.fullDimensions:null,encode:p?p.encode:null,$vars:["seriesName","name","value"]}},a.prototype.getFormattedLabel=function(t,r,n,o,s,l){r=r||"normal";var u=this.getData(n),c=this.getDataParams(t,n);if(l&&(c.value=l.interpolatedValue),o!=null&&isArray$1(c.value)&&(c.value=c.value[o]),!s){var f=u.getItemModel(t);s=f.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(isFunction(s))return c.status=r,c.dimensionIndex=o,s(c);if(isString(s)){var h=formatTpl(s,c);return h.replace(DIMENSION_LABEL_REG,function(v,d){var p=d.length,g=d;g.charAt(0)==="["&&g.charAt(p-1)==="]"&&(g=+g.slice(1,p-1));var y=retrieveRawValue(u,t,g);if(l&&isArray$1(l.interpolatedValue)){var _=u.getDimensionIndex(g);_>=0&&(y=l.interpolatedValue[_])}return y!=null?y+"":""})}},a.prototype.getRawValue=function(t,r){return retrieveRawValue(this.getData(r),t)},a.prototype.formatTooltip=function(t,r,n){},a}();function normalizeTooltipFormatResult(a){var t,r;return isObject$3(a)?a.type&&(r=a):t=a,{text:t,frag:r}}function createTask(a){return new Task(a)}var Task=function(){function a(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return a.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var o=this.context;o.data=o.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!n&&(s=this._plan(this.context));var l=h(this._modBy),u=this._modDataCount||0,c=h(t&&t.modBy),f=t&&t.modDataCount||0;(l!==c||u!==f)&&(s="reset");function h(x){return!(x>=1)&&(x=1),x}var v;(this._dirty||s==="reset")&&(this._dirty=!1,v=this._doReset(n)),this._modBy=c,this._modDataCount=f;var d=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var p=this._dueIndex,g=Math.min(d!=null?this._dueIndex+d:1/0,this._dueEnd);if(!n&&(v||p<g)){var y=this._progress;if(isArray$1(y))for(var _=0;_<y.length;_++)this._doProgress(y[_],p,g,c,f);else this._doProgress(y,p,g,c,f)}this._dueIndex=g;var S=this._settedOutputEnd!=null?this._settedOutputEnd:g;this._outputDueEnd=S}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},a.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},a.prototype._doProgress=function(t,r,n,o,s){iterator.reset(r,n,o,s),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:iterator.next},this.context)},a.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),isArray$1(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var o=this._downstream;return o&&o.dirty(),n},a.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},a.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},a.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},a.prototype.getUpstream=function(){return this._upstream},a.prototype.getDownstream=function(){return this._downstream},a.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},a}(),iterator=function(){var a,t,r,n,o,s={reset:function(c,f,h,v){t=c,a=f,r=h,n=v,o=Math.ceil(n/r),s.next=r>1&&n>0?u:l}};return s;function l(){return t<a?t++:null}function u(){var c=t%o*r+Math.ceil(t/o),f=t>=a?null:c<n?c:t;return t++,f}}();function parseDataValue(a,t){var r=t&&t.type;return r==="ordinal"?a:(r==="time"&&!isNumber(a)&&a!=null&&a!=="-"&&(a=+parseDate(a)),a==null||a===""?NaN:Number(a))}var valueParserMap=createHashMap({number:function(a){return parseFloat(a)},time:function(a){return+parseDate(a)},trim:function(a){return isString(a)?trim$1(a):a}});function getRawValueParser(a){return valueParserMap.get(a)}var ORDER_COMPARISON_OP_MAP={lt:function(a,t){return a<t},lte:function(a,t){return a<=t},gt:function(a,t){return a>t},gte:function(a,t){return a>=t}},FilterOrderComparator=function(){function a(t,r){if(!isNumber(r)){var n="";throwError(n)}this._opFn=ORDER_COMPARISON_OP_MAP[t],this._rvalFloat=numericToNumber(r)}return a.prototype.evaluate=function(t){return isNumber(t)?this._opFn(t,this._rvalFloat):this._opFn(numericToNumber(t),this._rvalFloat)},a}(),SortOrderComparator=function(){function a(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return a.prototype.evaluate=function(t,r){var n=isNumber(t)?t:numericToNumber(t),o=isNumber(r)?r:numericToNumber(r),s=isNaN(n),l=isNaN(o);if(s&&(n=this._incomparable),l&&(o=this._incomparable),s&&l){var u=isString(t),c=isString(r);u&&(n=c?t:0),c&&(o=u?r:0)}return n<o?this._resultLT:n>o?-this._resultLT:0},a}(),FilterEqualityComparator=function(){function a(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=numericToNumber(r)}return a.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var n=typeof t;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(r=numericToNumber(t)===this._rvalFloat)}return this._isEQ?r:!r},a}();function createFilterComparator(a,t){return a==="eq"||a==="ne"?new FilterEqualityComparator(a==="eq",t):hasOwn(ORDER_COMPARISON_OP_MAP,a)?new FilterOrderComparator(a,t):null}var ExternalSource=function(){function a(){}return a.prototype.getRawData=function(){throw new Error("not supported")},a.prototype.getRawDataItem=function(t){throw new Error("not supported")},a.prototype.cloneRawData=function(){},a.prototype.getDimensionInfo=function(t){},a.prototype.cloneAllDimensionInfo=function(){},a.prototype.count=function(){},a.prototype.retrieveValue=function(t,r){},a.prototype.retrieveValueFromItem=function(t,r){},a.prototype.convertValue=function(t,r){return parseDataValue(t,r)},a}();function createExternalSource(a,t){var r=new ExternalSource,n=a.data,o=r.sourceFormat=a.sourceFormat,s=a.startIndex,l="";a.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(l);var u=[],c={},f=a.dimensionsDefine;if(f)each$f(f,function(y,_){var S=y.name,x={index:_,name:S,displayName:y.displayName};if(u.push(x),S!=null){var T="";hasOwn(c,S)&&throwError(T),c[S]=x}});else for(var h=0;h<a.dimensionsDetectedCount;h++)u.push({index:h});var v=getRawSourceItemGetter(o,SERIES_LAYOUT_BY_COLUMN);t.__isBuiltIn&&(r.getRawDataItem=function(y){return v(n,s,u,y)},r.getRawData=bind$1(getRawData,null,a)),r.cloneRawData=bind$1(cloneRawData,null,a);var d=getRawSourceDataCounter(o,SERIES_LAYOUT_BY_COLUMN);r.count=bind$1(d,null,n,s,u);var p=getRawSourceValueGetter(o);r.retrieveValue=function(y,_){var S=v(n,s,u,y);return g(S,_)};var g=r.retrieveValueFromItem=function(y,_){if(y!=null){var S=u[_];if(S)return p(y,_,S.name)}};return r.getDimensionInfo=bind$1(getDimensionInfo,null,u,c),r.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,u),r}function getRawData(a){var t=a.sourceFormat;if(!isSupportedSourceFormat(t)){var r="";throwError(r)}return a.data}function cloneRawData(a){var t=a.sourceFormat,r=a.data;if(!isSupportedSourceFormat(t)){var n="";throwError(n)}if(t===SOURCE_FORMAT_ARRAY_ROWS){for(var o=[],s=0,l=r.length;s<l;s++)o.push(r[s].slice());return o}else if(t===SOURCE_FORMAT_OBJECT_ROWS){for(var o=[],s=0,l=r.length;s<l;s++)o.push(extend({},r[s]));return o}}function getDimensionInfo(a,t,r){if(r!=null){if(isNumber(r)||!isNaN(r)&&!hasOwn(t,r))return a[r];if(hasOwn(t,r))return t[r]}}function cloneAllDimensionInfo(a){return clone$4(a)}var externalTransformMap=createHashMap();function registerExternalTransform(a){a=clone$4(a);var t=a.type,r="";t||throwError(r);var n=t.split(":");n.length!==2&&throwError(r);var o=!1;n[0]==="echarts"&&(t=n[1],o=!0),a.__isBuiltIn=o,externalTransformMap.set(t,a)}function applyDataTransform(a,t,r){var n=normalizeToArray(a),o=n.length,s="";o||throwError(s);for(var l=0,u=o;l<u;l++){var c=n[l];t=applySingleDataTransform(c,t),l!==u-1&&(t.length=Math.max(t.length,1))}return t}function applySingleDataTransform(a,t,r,n){var o="";t.length||throwError(o),isObject$3(a)||throwError(o);var s=a.type,l=externalTransformMap.get(s);l||throwError(o);var u=map$1(t,function(f){return createExternalSource(f,l)}),c=normalizeToArray(l.transform({upstream:u[0],upstreamList:u,config:clone$4(a.config)}));return map$1(c,function(f,h){var v="";isObject$3(f)||throwError(v),f.data||throwError(v);var d=detectSourceFormat(f.data);isSupportedSourceFormat(d)||throwError(v);var p,g=t[0];if(g&&h===0&&!f.dimensions){var y=g.startIndex;y&&(f.data=g.data.slice(0,y).concat(f.data)),p={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:y,dimensions:g.metaRawOption.dimensions}}else p={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:f.dimensions};return createSource(f.data,p,null)})}function isSupportedSourceFormat(a){return a===SOURCE_FORMAT_ARRAY_ROWS||a===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(a){return a>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(a){var t=a.constructor;return t===Array?a.slice():new t(a)}function prepareStore(a,t,r,n,o){var s=dataCtors[r||"float"];if(o){var l=a[t],u=l&&l.length;if(u!==n){for(var c=new s(n),f=0;f<u;f++)c[f]=l[f];a[t]=c}}else a[t]=new s(n)}var DataStore=function(){function a(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return a.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var o=t.getSource(),s=this.defaultDimValueGetter=defaultDimValueGetters[o.sourceFormat];this._dimValueGetter=n||s,this._rawExtent=[],shouldRetrieveDataByName(o),this._dimensions=map$1(r,function(l){return{type:l.type,property:l.property}}),this._initDataFromProvider(0,t.count())},a.prototype.getProvider=function(){return this._provider},a.prototype.getSource=function(){return this._provider.getSource()},a.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,o=this._dimensions,s=n.get(t);if(s!=null){if(o[s].type===r)return s}else s=o.length;return o[s]={type:r},n.set(t,s),this._chunks[s]=new dataCtors[r||"float"](this._rawCount),this._rawExtent[s]=getInitialExtent(),s},a.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],o=this._dimensions[t],s=this._rawExtent,l=o.ordinalOffset||0,u=n.length;l===0&&(s[t]=getInitialExtent());for(var c=s[t],f=l;f<u;f++){var h=n[f]=r.parseAndCollect(n[f]);isNaN(h)||(c[0]=Math.min(h,c[0]),c[1]=Math.max(h,c[1]))}o.ordinalMeta=r,o.ordinalOffset=u,o.type="ordinal"},a.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},a.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},a.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var o=r.count();return r.persistent||(o+=n),n<o&&this._initDataFromProvider(n,o,!0),[n,o]},a.prototype.appendValues=function(t,r){for(var n=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,u=this.count(),c=u+Math.max(t.length,r||0),f=0;f<s;f++){var h=o[f];prepareStore(n,f,h.type,c,!0)}for(var v=[],d=u;d<c;d++)for(var p=d-u,g=0;g<s;g++){var h=o[g],y=defaultDimValueGetters.arrayRows.call(this,t[p]||v,h.property,p,g);n[g][d]=y;var _=l[g];y<_[0]&&(_[0]=y),y>_[1]&&(_[1]=y)}return this._rawCount=this._count=c,{start:u,end:c}},a.prototype._initDataFromProvider=function(t,r,n){for(var o=this._provider,s=this._chunks,l=this._dimensions,u=l.length,c=this._rawExtent,f=map$1(l,function(x){return x.property}),h=0;h<u;h++){var v=l[h];c[h]||(c[h]=getInitialExtent()),prepareStore(s,h,v.type,r,n)}if(o.fillStorage)o.fillStorage(t,r,s,c);else for(var d=[],p=t;p<r;p++){d=o.getItem(p,d);for(var g=0;g<u;g++){var y=s[g],_=this._dimValueGetter(d,f[g],p,g);y[p]=_;var S=c[g];_<S[0]&&(S[0]=_),_>S[1]&&(S[1]=_)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=r,this._extent=[]},a.prototype.count=function(){return this._count},a.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},a.prototype.getValues=function(t,r){var n=[],o=[];if(r==null){r=t,t=[];for(var s=0;s<this._dimensions.length;s++)o.push(s)}else o=t;for(var s=0,l=o.length;s<l;s++)n.push(this.get(o[s],r));return n},a.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},a.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var o=0,s=this.count();o<s;o++){var l=this.get(t,o);isNaN(l)||(n+=l)}return n},a.prototype.getMedian=function(t){var r=[];this.each([t],function(s){isNaN(s)||r.push(s)});var n=r.sort(function(s,l){return s-l}),o=this.count();return o===0?0:o%2===1?n[(o-1)/2]:(n[o/2]+n[o/2-1])/2},a.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var o=0,s=this._count-1;o<=s;){var l=(o+s)/2|0;if(r[l]<t)o=l+1;else if(r[l]>t)s=l-1;else return l}return-1},a.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,o=this._count;if(n===Array){t=new n(o);for(var s=0;s<o;s++)t[s]=r[s]}else t=new n(r.buffer,0,o)}else{var n=getIndicesCtor(this._rawCount);t=new n(this.count());for(var s=0;s<t.length;s++)t[s]=s}return t},a.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),o=n.count(),s=getIndicesCtor(n._rawCount),l=new s(o),u=[],c=t.length,f=0,h=t[0],v=n._chunks,d=0;d<o;d++){var p=void 0,g=n.getRawIndex(d);if(c===0)p=r(d);else if(c===1){var y=v[h][g];p=r(y,d)}else{for(var _=0;_<c;_++)u[_]=v[t[_]][g];u[_]=d,p=r.apply(null,u)}p&&(l[f++]=g)}return f<o&&(n._indices=l),n._count=f,n._extent=[],n._updateGetRawIdx(),n},a.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var o=keys(t),s=o.length;if(!s)return this;var l=r.count(),u=getIndicesCtor(r._rawCount),c=new u(l),f=0,h=o[0],v=t[h][0],d=t[h][1],p=r._chunks,g=!1;if(!r._indices){var y=0;if(s===1){for(var _=p[o[0]],S=0;S<n;S++){var x=_[S];(x>=v&&x<=d||isNaN(x))&&(c[f++]=y),y++}g=!0}else if(s===2){for(var _=p[o[0]],T=p[o[1]],b=t[o[1]][0],C=t[o[1]][1],S=0;S<n;S++){var x=_[S],w=T[S];(x>=v&&x<=d||isNaN(x))&&(w>=b&&w<=C||isNaN(w))&&(c[f++]=y),y++}g=!0}}if(!g)if(s===1)for(var S=0;S<l;S++){var M=r.getRawIndex(S),x=p[o[0]][M];(x>=v&&x<=d||isNaN(x))&&(c[f++]=M)}else for(var S=0;S<l;S++){for(var P=!0,M=r.getRawIndex(S),L=0;L<s;L++){var E=o[L],x=p[E][M];(x<t[E][0]||x>t[E][1])&&(P=!1)}P&&(c[f++]=r.getRawIndex(S))}return f<l&&(r._indices=c),r._count=f,r._extent=[],r._updateGetRawIdx(),r},a.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},a.prototype.modify=function(t,r){this._updateDims(this,t,r)},a.prototype._updateDims=function(t,r,n){for(var o=t._chunks,s=[],l=r.length,u=t.count(),c=[],f=t._rawExtent,h=0;h<r.length;h++)f[r[h]]=getInitialExtent();for(var v=0;v<u;v++){for(var d=t.getRawIndex(v),p=0;p<l;p++)c[p]=o[r[p]][d];c[l]=v;var g=n&&n.apply(null,c);if(g!=null){typeof g!="object"&&(s[0]=g,g=s);for(var h=0;h<g.length;h++){var y=r[h],_=g[h],S=f[y],x=o[y];x&&(x[d]=_),_<S[0]&&(S[0]=_),_>S[1]&&(S[1]=_)}}}},a.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),o=n._chunks,s=o[t],l=this.count(),u=0,c=Math.floor(1/r),f=this.getRawIndex(0),h,v,d,p=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(l/c)+2)*2,l));p[u++]=f;for(var g=1;g<l-1;g+=c){for(var y=Math.min(g+c,l-1),_=Math.min(g+c*2,l),S=(_+y)/2,x=0,T=y;T<_;T++){var b=this.getRawIndex(T),C=s[b];isNaN(C)||(x+=C)}x/=_-y;var w=g,M=Math.min(g+c,l),P=g-1,L=s[f];h=-1,d=w;for(var E=-1,I=0,T=w;T<M;T++){var b=this.getRawIndex(T),C=s[b];if(isNaN(C)){I++,E<0&&(E=b);continue}v=Math.abs((P-S)*(C-L)-(P-T)*(x-L)),v>h&&(h=v,d=b)}I>0&&I<M-w&&(p[u++]=Math.min(E,d),d=Math.max(E,d)),p[u++]=d,f=d}return p[u++]=this.getRawIndex(l-1),n._count=u,n._indices=p,n.getRawIndex=this._getRawIdx,n},a.prototype.minmaxDownSample=function(t,r){for(var n=this.clone([t],!0),o=n._chunks,s=Math.floor(1/r),l=o[t],u=this.count(),c=new(getIndicesCtor(this._rawCount))(Math.ceil(u/s)*2),f=0,h=0;h<u;h+=s){var v=h,d=l[this.getRawIndex(v)],p=h,g=l[this.getRawIndex(p)],y=s;h+s>u&&(y=u-h);for(var _=0;_<y;_++){var S=this.getRawIndex(h+_),x=l[S];x<d&&(d=x,v=h+_),x>g&&(g=x,p=h+_)}var T=this.getRawIndex(v),b=this.getRawIndex(p);v<p?(c[f++]=T,c[f++]=b):(c[f++]=b,c[f++]=T)}return n._count=f,n._indices=c,n._updateGetRawIdx(),n},a.prototype.downSample=function(t,r,n,o){for(var s=this.clone([t],!0),l=s._chunks,u=[],c=Math.floor(1/r),f=l[t],h=this.count(),v=s._rawExtent[t]=getInitialExtent(),d=new(getIndicesCtor(this._rawCount))(Math.ceil(h/c)),p=0,g=0;g<h;g+=c){c>h-g&&(c=h-g,u.length=c);for(var y=0;y<c;y++){var _=this.getRawIndex(g+y);u[y]=f[_]}var S=n(u),x=this.getRawIndex(Math.min(g+o(u,S)||0,h-1));f[x]=S,S<v[0]&&(v[0]=S),S>v[1]&&(v[1]=S),d[p++]=x}return s._count=p,s._indices=d,s._updateGetRawIdx(),s},a.prototype.each=function(t,r){if(this._count)for(var n=t.length,o=this._chunks,s=0,l=this.count();s<l;s++){var u=this.getRawIndex(s);switch(n){case 0:r(s);break;case 1:r(o[t[0]][u],s);break;case 2:r(o[t[0]][u],o[t[1]][u],s);break;default:for(var c=0,f=[];c<n;c++)f[c]=o[t[c]][u];f[c]=s,r.apply(null,f)}}},a.prototype.getDataExtent=function(t){var r=this._chunks[t],n=getInitialExtent();if(!r)return n;var o=this.count(),s=!this._indices,l;if(s)return this._rawExtent[t].slice();if(l=this._extent[t],l)return l.slice();l=n;for(var u=l[0],c=l[1],f=0;f<o;f++){var h=this.getRawIndex(f),v=r[h];v<u&&(u=v),v>c&&(c=v)}return l=[u,c],this._extent[t]=l,l},a.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],o=this._chunks,s=0;s<o.length;s++)n.push(o[s][r]);return n},a.prototype.clone=function(t,r){var n=new a,o=this._chunks,s=t&&reduce(t,function(u,c){return u[c]=!0,u},{});if(s)for(var l=0;l<o.length;l++)n._chunks[l]=s[l]?cloneChunk(o[l]):o[l];else n._chunks=o;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},a.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=clone$4(this._extent),t._rawExtent=clone$4(this._rawExtent)},a.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var o=0;o<n;o++)r[o]=this._indices[o]}else r=new t(this._indices);return r}return null},a.prototype._getRawIdxIdentity=function(t){return t},a.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},a.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},a.internalField=function(){function t(r,n,o,s){return parseDataValue(r[s],this._dimensions[s])}defaultDimValueGetters={arrayRows:t,objectRows:function(r,n,o,s){return parseDataValue(r[n],this._dimensions[s])},keyedColumns:t,original:function(r,n,o,s){var l=r&&(r.value==null?r:r.value);return parseDataValue(l instanceof Array?l[s]:l,this._dimensions[s])},typedArray:function(r,n,o,s){return r[s]}}}(),a}(),SourceManager=function(){function a(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return a.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},a.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},a.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},a.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},a.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,o,s;if(isSeries(t)){var l=t,u=void 0,c=void 0,f=void 0;if(n){var h=r[0];h.prepareSource(),f=h.getSource(),u=f.data,c=f.sourceFormat,s=[h._getVersionSign()]}else u=l.get("data",!0),c=isTypedArray(u)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,s=[];var v=this._getSourceMetaRawOption()||{},d=f&&f.metaRawOption||{},p=retrieve2(v.seriesLayoutBy,d.seriesLayoutBy)||null,g=retrieve2(v.sourceHeader,d.sourceHeader),y=retrieve2(v.dimensions,d.dimensions),_=p!==d.seriesLayoutBy||!!g!=!!d.sourceHeader||y;o=_?[createSource(u,{seriesLayoutBy:p,sourceHeader:g,dimensions:y},c)]:[]}else{var S=t;if(n){var x=this._applyTransform(r);o=x.sourceList,s=x.upstreamSignList}else{var T=S.get("source",!0);o=[createSource(T,this._getSourceMetaRawOption(),null)],s=[]}}this._setLocalSource(o,s)},a.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),o=r.get("fromTransformResult",!0);if(o!=null){var s="";t.length!==1&&doThrow(s)}var l,u=[],c=[];return each$f(t,function(f){f.prepareSource();var h=f.getSource(o||0),v="";o!=null&&!h&&doThrow(v),u.push(h),c.push(f._getVersionSign())}),n?l=applyDataTransform(n,u,{datasetIndex:r.componentIndex}):o!=null&&(l=[cloneSourceShallow(u[0])]),{sourceList:l,upstreamSignList:c}},a.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},a.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},a.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},a.prototype._innerGetDataStore=function(t,r,n){var o=0,s=this._storeList,l=s[o];l||(l=s[o]={});var u=l[n];if(!u){var c=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&c?u=c._innerGetDataStore(t,r,n):(u=new DataStore,u.initData(new DefaultDataProvider(r,t.length),t)),l[n]=u}return u},a.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(isSeries(t)){var r=querySeriesUpstreamDatasetModel(t);return r?[r.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(t),function(n){return n.getSourceManager()})},a.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,o;if(isSeries(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),o=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var s=t;r=s.get("seriesLayoutBy",!0),n=s.get("sourceHeader",!0),o=s.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:o}},a}();function disableTransformOptionMerge(a){var t=a.option.transform;t&&setAsPrimitive(a.option.transform)}function isSeries(a){return a.mainType==="series"}function doThrow(a){throw new Error(a)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipLineHeight(a){var t=a.lineHeight;return t==null?TOOLTIP_LINE_HEIGHT_CSS:"line-height:"+encodeHTML(t+"")+"px"}function getTooltipTextStyle(a,t){var r=a.color||tokens.color.tertiary,n=a.fontSize||12,o=a.fontWeight||"400",s=a.color||tokens.color.secondary,l=a.fontSize||14,u=a.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+encodeHTML(n+"")+"px;color:"+encodeHTML(r)+";font-weight:"+encodeHTML(o+""),valueStyle:"font-size:"+encodeHTML(l+"")+"px;color:"+encodeHTML(s)+";font-weight:"+encodeHTML(u+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:o},valueStyle:{fontSize:l,fill:s,fontWeight:u}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(a,t){return t.type=a,t}function isSectionFragment(a){return a.type==="section"}function getBuilder(a){return isSectionFragment(a)?buildSection:buildNameValue}function getBlockGapLevel(a){if(isSectionFragment(a)){var t=0,r=a.blocks.length,n=r>1||r>0&&!a.noHeader;return each$f(a.blocks,function(o){var s=getBlockGapLevel(o);s>=t&&(t=s+ +(n&&(!s||isSectionFragment(o)&&!o.noHeader)))}),t}return 0}function buildSection(a,t,r,n){var o=t.noHeader,s=getGap(getBlockGapLevel(t)),l=[],u=t.blocks||[];assert(!u||isArray$1(u)),u=u||[];var c=a.orderMode;if(t.sortBlocks&&c){u=u.slice();var f={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(f,c)){var h=new SortOrderComparator(f[c],null);u.sort(function(y,_){return h.evaluate(y.sortParam,_.sortParam)})}else c==="seriesDesc"&&u.reverse()}each$f(u,function(y,_){var S=t.valueFormatter,x=getBuilder(y)(S?extend(extend({},a),{valueFormatter:S}):a,y,_>0?s.html:0,n);x!=null&&l.push(x)});var v=a.renderMode==="richText"?l.join(s.richText):wrapBlockHTML(n,l.join(""),o?r:s.html);if(o)return v;var d=makeValueReadable(t.header,"ordinal",a.useUTC),p=getTooltipTextStyle(n,a.renderMode).nameStyle,g=getTooltipLineHeight(n);return a.renderMode==="richText"?wrapInlineNameRichText(a,d,p)+s.richText+v:wrapBlockHTML(n,'<div style="'+p+";"+g+';">'+encodeHTML(d)+"</div>"+v,r)}function buildNameValue(a,t,r,n){var o=a.renderMode,s=t.noName,l=t.noValue,u=!t.markerType,c=t.name,f=a.useUTC,h=t.valueFormatter||a.valueFormatter||function(b){return b=isArray$1(b)?b:[b],map$1(b,function(C,w){return makeValueReadable(C,isArray$1(p)?p[w]:p,f)})};if(!(s&&l)){var v=u?"":a.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||tokens.color.secondary,o),d=s?"":makeValueReadable(c,"ordinal",f),p=t.valueType,g=l?[]:h(t.value,t.dataIndex),y=!u||!s,_=!u&&s,S=getTooltipTextStyle(n,o),x=S.nameStyle,T=S.valueStyle;return o==="richText"?(u?"":v)+(s?"":wrapInlineNameRichText(a,d,x))+(l?"":wrapInlineValueRichText(a,g,y,_,T)):wrapBlockHTML(n,(u?"":v)+(s?"":wrapInlineNameHTML(d,!u,x))+(l?"":wrapInlineValueHTML(g,y,_,T)),r)}}function buildTooltipMarkup(a,t,r,n,o,s){if(a){var l=getBuilder(a),u={useUTC:o,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:a.valueFormatter};return l(u,a,0,s)}}function getGap(a){return{html:HTML_GAPS[a],richText:RICH_TEXT_GAPS[a]}}function wrapBlockHTML(a,t,r){var n='<div style="clear:both"></div>',o="margin: "+r+"px 0 0",s=getTooltipLineHeight(a);return'<div style="'+o+";"+s+';">'+t+n+"</div>"}function wrapInlineNameHTML(a,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+encodeHTML(a)+"</span>"}function wrapInlineValueHTML(a,t,r,n){var o=r?"10px":"20px",s=t?"float:right;margin-left:"+o:"";return a=isArray$1(a)?a:[a],'<span style="'+s+";"+n+'">'+map$1(a,function(l){return encodeHTML(l)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(a,t,r){return a.markupStyleCreator.wrapRichTextStyle(t,r)}function wrapInlineValueRichText(a,t,r,n,o){var s=[o],l=n?10:20;return r&&s.push({padding:[0,0,0,l],align:"right"}),a.markupStyleCreator.wrapRichTextStyle(isArray$1(t)?t.join("  "):t,s)}function retrieveVisualColorForTooltipMarker(a,t){var r=a.getData().getItemVisual(t,"style"),n=r[a.visualDrawType];return convertToColorString(n)}function getPaddingFromTooltipModel(a,t){var r=a.get("padding");return r??(t==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function a(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return a.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},a.prototype.makeTooltipMarker=function(t,r,n){var o=n==="richText"?this._generateStyleName():null,s=getTooltipMarker({color:r,type:t,renderMode:n,markerId:o});return isString(s)?s:(this.richTextStyles[o]=s.style,s.content)},a.prototype.wrapRichTextStyle=function(t,r){var n={};isArray$1(r)?each$f(r,function(s){return extend(n,s)}):extend(n,r);var o=this._generateStyleName();return this.richTextStyles[o]=n,"{"+o+"|"+t+"}"},a}();function defaultSeriesFormatTooltip(a){var t=a.series,r=a.dataIndex,n=a.multipleSeries,o=t.getData(),s=o.mapDimensionsAll("defaultedTooltip"),l=s.length,u=t.getRawValue(r),c=isArray$1(u),f=retrieveVisualColorForTooltipMarker(t,r),h,v,d,p;if(l>1||c&&!l){var g=formatTooltipArrayValue(u,t,r,s,f);h=g.inlineValues,v=g.inlineValueTypes,d=g.blocks,p=g.inlineValues[0]}else if(l){var y=o.getDimensionInfo(s[0]);p=h=retrieveRawValue(o,r,s[0]),v=y.type}else p=h=c?u[0]:u;var _=isNameSpecified(t),S=_&&t.name||"",x=o.getName(r),T=n?S:x;return createTooltipMarkup("section",{header:S,noHeader:n||!_,sortParam:p,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:f,name:T,noName:!trim$1(T),value:h,valueType:v,dataIndex:r})].concat(d||[])})}function formatTooltipArrayValue(a,t,r,n,o){var s=t.getData(),l=reduce(a,function(v,d,p){var g=s.getDimensionInfo(p);return v=v||g&&g.tooltip!==!1&&g.displayName!=null},!1),u=[],c=[],f=[];n.length?each$f(n,function(v){h(retrieveRawValue(s,r,v),v)}):each$f(a,h);function h(v,d){var p=s.getDimensionInfo(d);!p||p.otherDims.tooltip===!1||(l?f.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:o,name:p.displayName,value:v,valueType:p.type})):(u.push(v),c.push(p.type)))}return{inlineValues:u,inlineValueTypes:c,blocks:f}}var inner$m=makeInner();function getSelectionKey(a,t){return a.getName(t)||a.getId(t)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,o){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,o);var s=inner$m(this).sourceManager=new SourceManager(this);s.prepareSource();var l=this.getInitialData(r,o);wrapData(l,this),this.dataTask.context.data=l,inner$m(this).dataBeforeProcessed=l,autoSeriesName(this),this._initSelectedMapFromData(l)},t.prototype.mergeDefaultAndTheme=function(r,n){var o=fetchLayoutMode(this),s=o?getLayoutParams(r):{},l=this.subType;ComponentModel.hasClass(l)&&(l+="Series"),merge(r,n.getTheme().get(this.subType)),merge(r,this.getDefaultOption()),defaultEmphasis(r,"label",["show"]),this.fillDataTextStyle(r.data),o&&mergeLayoutParam(r,s,o)},t.prototype.mergeOption=function(r,n){r=merge(this.option,r,!0),this.fillDataTextStyle(r.data);var o=fetchLayoutMode(this);o&&mergeLayoutParam(this.option,r,o);var s=inner$m(this).sourceManager;s.dirty(),s.prepareSource();var l=this.getInitialData(r,n);wrapData(l,this),this.dataTask.dirty(),this.dataTask.context.data=l,inner$m(this).dataBeforeProcessed=l,autoSeriesName(this),this._initSelectedMapFromData(l)},t.prototype.fillDataTextStyle=function(r){if(r&&!isTypedArray(r))for(var n=["show"],o=0;o<r.length;o++)r[o]&&r[o].label&&defaultEmphasis(r[o],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=getCurrentTask(this);if(n){var o=n.context.data;return r==null||!o.getLinkedData?o:o.getLinkedData(r)}else return inner$m(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=getCurrentTask(this);if(n){var o=n.context;o.outputData=r,n!==this.dataTask&&(o.data=r)}inner$m(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return createHashMap(r)},t.prototype.getSourceManager=function(){return inner$m(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return inner$m(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.indicesOfNearest=function(r,n,o,s){var l=this.getData(),u=this.coordinateSystem,c=u&&u.getAxis(r);if(!u||!c)return[];var f=c.dataToCoord(o);s==null&&(s=1/0);var h=[],v=1/0,d=-1,p=0;return l.each(n,function(g,y){var _=c.dataToCoord(g),S=f-_,x=Math.abs(S);x<=s&&((x<v||x===v&&S>=0&&d<0)&&(v=x,d=S,p=0),S===d&&(h[p++]=y))}),h.length=p,h},t.prototype.formatTooltip=function(r,n,o){return defaultSeriesFormatTooltip({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(env.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,o){var s=this.ecModel,l=PaletteMixin.prototype.getColorFromPalette.call(this,r,n,o);return l||(l=s.getColorFromPalette(r,n,o)),l},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var o=this.option.selectedMap;if(o){var s=this.option.selectedMode,l=this.getData(n);if(s==="series"||o==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var u=0;u<r.length;u++){var c=r[u],f=getSelectionKey(l,c);o[f]=!1,this._selectedDataIndicesMap[f]=-1}}},t.prototype.toggleSelect=function(r,n){for(var o=[],s=0;s<r.length;s++)o[0]=r[s],this.isSelected(r[s],n)?this.unselect(o,n):this.select(o,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=keys(r),o=[],s=0;s<n.length;s++){var l=r[n[s]];l>=0&&o.push(l)}return o},t.prototype.isSelected=function(r,n){var o=this.option.selectedMap;if(!o)return!1;var s=this.getData(n);return(o==="all"||o[getSelectionKey(s,r)])&&!s.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var o,s,l=this.option,u=l.selectedMode,c=n.length;if(!(!u||!c)){if(u==="series")l.selectedMap="all";else if(u==="multiple"){isObject$3(l.selectedMap)||(l.selectedMap={});for(var f=l.selectedMap,h=0;h<c;h++){var v=n[h],d=getSelectionKey(r,v);f[d]=!0,this._selectedDataIndicesMap[d]=r.getRawIndex(v)}}else if(u==="single"||u===!0){var p=n[c-1],d=getSelectionKey(r,p);l.selectedMap=(o={},o[d]=!0,o),this._selectedDataIndicesMap=(s={},s[d]=r.getRawIndex(p),s)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(o){var s=r.getRawDataItem(o);s&&s.selected&&n.push(o)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return ComponentModel.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(a){var t=a.name;isNameSpecified(a)||(a.name=getSeriesAutoName(a)||t)}function getSeriesAutoName(a){var t=a.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return each$f(r,function(o){var s=t.getDimensionInfo(o);s.displayName&&n.push(s.displayName)}),n.join(" ")}function dataTaskCount(a){return a.model.getRawData().count()}function dataTaskReset(a){var t=a.model;return t.setData(t.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(a,t){t.outputData&&a.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function wrapData(a,t){each$f(concatArray(a.CHANGABLE_METHODS,a.DOWNSAMPLE_METHODS),function(r){a.wrapMethod(r,curry$1(onDataChange,t))})}function onDataChange(a,t){var r=getCurrentTask(a);return r&&r.setOutputEnd((t||this).count()),t}function getCurrentTask(a){var t=(a.ecModel||{}).scheduler,r=t&&t.getPipeline(a.uid);if(r){var n=r.currentTask;if(n){var o=n.agentStubMap;o&&(n=o.get(a.uid))}return n}}var ComponentView=function(){function a(){this.group=new Group$3,this.uid=getUID("viewComponent")}return a.prototype.init=function(t,r){},a.prototype.render=function(t,r,n,o){},a.prototype.dispose=function(t,r){},a.prototype.updateView=function(t,r,n,o){},a.prototype.updateLayout=function(t,r,n,o){},a.prototype.updateVisual=function(t,r,n,o){},a.prototype.toggleBlurSeries=function(t,r,n){},a.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},a}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var a=makeInner();return function(t){var r=a(t),n=t.pipelineContext,o=!!r.large,s=!!r.progressiveRender,l=r.large=!!(n&&n.large),u=r.progressiveRender=!!(n&&n.progressiveRender);return(o!==l||s!==u)&&"reset"}}var inner$l=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function a(){this.group=new Group$3,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return a.prototype.init=function(t,r){},a.prototype.render=function(t,r,n,o){},a.prototype.highlight=function(t,r,n,o){var s=t.getData(o&&o.dataType);s&&toggleHighlight(s,o,"emphasis")},a.prototype.downplay=function(t,r,n,o){var s=t.getData(o&&o.dataType);s&&toggleHighlight(s,o,"normal")},a.prototype.remove=function(t,r){this.group.removeAll()},a.prototype.dispose=function(t,r){},a.prototype.updateView=function(t,r,n,o){this.render(t,r,n,o)},a.prototype.updateLayout=function(t,r,n,o){this.render(t,r,n,o)},a.prototype.updateVisual=function(t,r,n,o){this.render(t,r,n,o)},a.prototype.eachRendered=function(t){traverseElements(this.group,t)},a.markUpdateMethod=function(t,r){inner$l(t).updateMethod=r},a.protoInitialize=function(){var t=a.prototype;t.type="chart"}(),a}();function elSetState(a,t,r){a&&isHighDownDispatcher(a)&&(t==="emphasis"?enterEmphasis:leaveEmphasis)(a,r)}function toggleHighlight(a,t,r){var n=queryDataIndex(a,t),o=t&&t.highlightKey!=null?getHighlightDigit(t.highlightKey):null;n!=null?each$f(normalizeToArray(n),function(s){elSetState(a.getItemGraphicEl(s),r,o)}):a.eachItemGraphicEl(function(s){elSetState(s,r,o)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(a){return renderPlanner(a.model)}function renderTaskReset(a){var t=a.model,r=a.ecModel,n=a.api,o=a.payload,s=t.pipelineContext.progressiveRender,l=a.view,u=o&&inner$l(o).updateMethod,c=s?"incrementalPrepareRender":u&&l[u]?u:"render";return c!=="render"&&l[c](t,r,n,o),progressMethodMap[c]}var progressMethodMap={incrementalPrepareRender:{progress:function(a,t){t.view.incrementalRender(a,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(a,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(a,t,r){var n,o=0,s=0,l=null,u,c,f,h;t=t||0;function v(){s=new Date().getTime(),l=null,a.apply(c,f||[])}var d=function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];n=new Date().getTime(),c=this,f=p;var y=h||t,_=h||r;h=null,u=n-(_?o:s)-y,clearTimeout(l),_?l=setTimeout(v,y):u>=0?v():l=setTimeout(v,-u),o=n};return d.clear=function(){l&&(clearTimeout(l),l=null)},d.debounceNextCall=function(p){h=p},d}function createOrUpdate(a,t,r,n){var o=a[t];if(o){var s=o[ORIGIN_METHOD]||o,l=o[THROTTLE_TYPE],u=o[RATE];if(u!==r||l!==n){if(r==null||!n)return a[t]=s;o=a[t]=throttle(s,r,n==="debounce"),o[ORIGIN_METHOD]=s,o[THROTTLE_TYPE]=n,o[RATE]=r}return o}}function clear$1(a,t){var r=a[t];r&&r[ORIGIN_METHOD]&&(r.clear&&r.clear(),a[t]=r[ORIGIN_METHOD])}var inner$k=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(a,t){var r=a.visualStyleMapper||defaultStyleMappers[t];return r||(console.warn("Unknown style type '"+t+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(a,t){var r=a.visualDrawType||defaultColorKey[t];return r||(console.warn("Unknown style type '"+t+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,t){var r=a.getData(),n=a.visualStyleAccessPath||"itemStyle",o=a.getModel(n),s=getStyleMapper(a,n),l=s(o),u=o.getShallow("decal");u&&(r.setVisual("decal",u),u.dirty=!0);var c=getDefaultColorKey(a,n),f=l[c],h=isFunction(f)?f:null,v=l.fill==="auto"||l.stroke==="auto";if(!l[c]||h||v){var d=a.getColorFromPalette(a.name,null,t.getSeriesCount());l[c]||(l[c]=d,r.setVisual("colorFromPalette",!0)),l.fill=l.fill==="auto"||isFunction(l.fill)?d:l.fill,l.stroke=l.stroke==="auto"||isFunction(l.stroke)?d:l.stroke}if(r.setVisual("style",l),r.setVisual("drawType",c),!t.isSeriesFiltered(a)&&h)return r.setVisual("colorFromPalette",!1),{dataEach:function(p,g){var y=a.getDataParams(g),_=extend({},l);_[c]=h(y),p.setItemVisual(g,"style",_)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,t){if(!(a.ignoreStyleOnData||t.isSeriesFiltered(a))){var r=a.getData(),n=a.visualStyleAccessPath||"itemStyle",o=getStyleMapper(a,n),s=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(l,u){var c=l.getRawDataItem(u);if(c&&c[n]){sharedModel.option=c[n];var f=o(sharedModel),h=l.ensureUniqueItemVisual(u,"style");extend(h,f),sharedModel.option.decal&&(l.setItemVisual(u,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),s in f&&l.setItemVisual(u,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(a){var t=createHashMap();a.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var o=r.type+"-"+n,s=t.get(o);s||(s={},t.set(o,s)),inner$k(r).scope=s}}),a.eachSeries(function(r){if(!(r.isColorBySeries()||a.isSeriesFiltered(r))){var n=r.getRawData(),o={},s=r.getData(),l=inner$k(r).scope,u=r.visualStyleAccessPath||"itemStyle",c=getDefaultColorKey(r,u);s.each(function(f){var h=s.getRawIndex(f);o[h]=f}),n.each(function(f){var h=o[f],v=s.getItemVisual(h,"colorFromPalette");if(v){var d=s.ensureUniqueItemVisual(h,"style"),p=n.getName(f)||f+"",g=n.count();d[c]=r.getColorFromPalette(p,l,g)}})}})}},PI$5=Math.PI;function defaultLoading(a,t){t=t||{},defaults(t,{text:"loading",textColor:tokens.color.primary,fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255,255,255,0.8)",showSpinner:!0,color:tokens.color.theme[0],spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Group$3,n=new Rect$2({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var o=new ZRText({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),s=new Rect$2({style:{fill:"none"},textContent:o,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(s);var l;return t.showSpinner&&(l=new Arc({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),l.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),l.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),r.add(l)),r.resize=function(){var u=o.getBoundingRect().width,c=t.showSpinner?t.spinnerRadius:0,f=(a.getWidth()-c*2-(t.showSpinner&&u?10:0)-u)/2-(t.showSpinner&&u?0:5+u/2)+(t.showSpinner?0:u/2)+(u?0:c),h=a.getHeight()/2;t.showSpinner&&l.setShape({cx:f,cy:h}),s.setShape({x:f-c,y:h-c,width:c*2,height:c*2}),n.setShape({x:0,y:0,width:a.getWidth(),height:a.getHeight()})},r.resize(),r}var Scheduler=function(){function a(t,r,n,o){this._stageTaskMap=createHashMap(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),o=this._visualHandlers=o.slice(),this._allHandlers=n.concat(o)}return a.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var o=n.overallTask;o&&o.dirty()})},a.prototype.getPerformArgs=function(t,r){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),o=n.context,s=!r&&n.progressiveEnabled&&(!o||o.progressiveRender)&&t.__idxInPipeline>n.blockIndex,l=s?n.step:null,u=o&&o.modDataCount,c=u!=null?Math.ceil(u/l):null;return{step:l,modBy:c,modDataCount:u}}},a.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},a.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),o=t.getData(),s=o.count(),l=n.progressiveEnabled&&r.incrementalPrepareRender&&s>=n.threshold,u=t.get("large")&&s>=t.get("largeThreshold"),c=t.get("progressiveChunkMode")==="mod"?s:null;t.pipelineContext=n.context={progressiveRender:l,modDataCount:c,large:u}},a.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=createHashMap();t.eachSeries(function(o){var s=o.getProgressive(),l=o.uid;n.set(l,{id:l,head:null,tail:null,threshold:o.getProgressiveThreshold(),progressiveEnabled:s&&!(o.preventIncremental&&o.preventIncremental()),blockIndex:-1,step:Math.round(s||700),count:0}),r._pipe(o,o.dataTask)})},a.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;each$f(this._allHandlers,function(o){var s=t.get(o.uid)||t.set(o.uid,{}),l="";assert(!(o.reset&&o.overallReset),l),o.reset&&this._createSeriesStageTask(o,s,r,n),o.overallReset&&this._createOverallStageTask(o,s,r,n)},this)},a.prototype.prepareView=function(t,r,n,o){var s=t.renderTask,l=s.context;l.model=r,l.ecModel=n,l.api=o,s.__block=!t.incrementalPrepareRender,this._pipe(r,s)},a.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},a.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},a.prototype._performStageTasks=function(t,r,n,o){o=o||{};var s=!1,l=this;each$f(t,function(c,f){if(!(o.visualType&&o.visualType!==c.visualType)){var h=l._stageTaskMap.get(c.uid),v=h.seriesTaskMap,d=h.overallTask;if(d){var p,g=d.agentStubMap;g.each(function(_){u(o,_)&&(_.dirty(),p=!0)}),p&&d.dirty(),l.updatePayload(d,n);var y=l.getPerformArgs(d,o.block);g.each(function(_){_.perform(y)}),d.perform(y)&&(s=!0)}else v&&v.each(function(_,S){u(o,_)&&_.dirty();var x=l.getPerformArgs(_,o.block);x.skip=!c.performRawSeries&&r.isSeriesFiltered(_.context.model),l.updatePayload(_,n),_.perform(x)&&(s=!0)})}});function u(c,f){return c.setDirty&&(!c.dirtyMap||c.dirtyMap.get(f.__pipeline.id))}this.unfinished=s||this.unfinished},a.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},a.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},a.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},a.prototype._createSeriesStageTask=function(t,r,n,o){var s=this,l=r.seriesTaskMap,u=r.seriesTaskMap=createHashMap(),c=t.seriesType,f=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(h):c?n.eachRawSeriesByType(c,h):f&&f(n,o).each(h);function h(v){var d=v.uid,p=u.set(d,l&&l.get(d)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));p.context={model:v,ecModel:n,api:o,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:s},s._pipe(v,p)}},a.prototype._createOverallStageTask=function(t,r,n,o){var s=this,l=r.overallTask=r.overallTask||createTask({reset:overallTaskReset});l.context={ecModel:n,api:o,overallReset:t.overallReset,scheduler:s};var u=l.agentStubMap,c=l.agentStubMap=createHashMap(),f=t.seriesType,h=t.getTargetSeries,v=!0,d=!1,p="";assert(!t.createOnAllSeries,p),f?n.eachRawSeriesByType(f,g):h?h(n,o).each(g):(v=!1,each$f(n.getSeries(),g));function g(y){var _=y.uid,S=c.set(_,u&&u.get(_)||(d=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));S.context={model:y,overallProgress:v},S.agent=l,S.__block=v,s._pipe(y,S)}d&&l.dirty()},a.prototype._pipe=function(t,r){var n=t.uid,o=this._pipelineMap.get(n);!o.head&&(o.head=r),o.tail&&o.tail.pipe(r),o.tail=r,r.__idxInPipeline=o.count++,r.__pipeline=o},a.wrapStageHandler=function(t,r){return isFunction(t)&&(t={overallReset:t,seriesType:detectSeriseType(t)}),t.uid=getUID("stageHandler"),r&&(t.visualType=r),t},a}();function overallTaskReset(a){a.overallReset(a.ecModel,a.api,a.payload)}function stubReset(a){return a.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(a){return a.plan?a.plan(a.model,a.ecModel,a.api,a.payload):null}function seriesTaskReset(a){a.useClearVisual&&a.data.clearAllVisual();var t=a.resetDefines=normalizeToArray(a.reset(a.model,a.ecModel,a.api,a.payload));return t.length>1?map$1(t,function(r,n){return makeSeriesTaskProgress(n)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(a){return function(t,r){var n=r.data,o=r.resetDefines[a];if(o&&o.dataEach)for(var s=t.start;s<t.end;s++)o.dataEach(n,s);else o&&o.progress&&o.progress(t,n)}}function seriesTaskCount(a){return a.data.count()}function detectSeriseType(a){seriesType=null;try{a(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(a){seriesType=a};ecModelMock.eachComponent=function(a){a.mainType==="series"&&a.subType&&(seriesType=a.subType)};function mockMethods(a,t){for(var r in t.prototype)a[r]=noop}var color=tokens.darkColor,backgroundColor=color.background,axisCommon=function(){return{axisLine:{lineStyle:{color:color.axisLine}},splitLine:{lineStyle:{color:color.axisSplitLine}},splitArea:{areaStyle:{color:[color.backgroundTint,color.backgroundTransparent]}},minorSplitLine:{lineStyle:{color:color.axisMinorSplitLine}},axisLabel:{color:color.axisLabel},axisName:{}}},matrixAxis={label:{color:color.secondary},itemStyle:{borderColor:color.borderTint},dividerLineStyle:{color:color.border}},theme={darkMode:!0,color:color.theme,backgroundColor,axisPointer:{lineStyle:{color:color.border},crossStyle:{color:color.borderShade},label:{color:color.tertiary}},legend:{textStyle:{color:color.secondary},pageTextStyle:{color:color.tertiary}},textStyle:{color:color.secondary},title:{textStyle:{color:color.primary},subtextStyle:{color:color.quaternary}},toolbox:{iconStyle:{borderColor:color.accent50}},tooltip:{backgroundColor:color.neutral20,defaultBorderColor:color.border,textStyle:{color:color.tertiary}},dataZoom:{borderColor:color.accent10,textStyle:{color:color.tertiary},brushStyle:{color:color.backgroundTint},handleStyle:{color:color.neutral00,borderColor:color.accent20},moveHandleStyle:{color:color.accent40},emphasis:{handleStyle:{borderColor:color.accent50}},dataBackground:{lineStyle:{color:color.accent30},areaStyle:{color:color.accent20}},selectedDataBackground:{lineStyle:{color:color.accent50},areaStyle:{color:color.accent30}}},visualMap:{textStyle:{color:color.secondary},handleStyle:{borderColor:color.neutral30}},timeline:{lineStyle:{color:color.accent10},label:{color:color.tertiary},controlStyle:{color:color.accent30,borderColor:color.accent30}},calendar:{itemStyle:{color:color.neutral00,borderColor:color.neutral20},dayLabel:{color:color.tertiary},monthLabel:{color:color.secondary},yearLabel:{color:color.secondary}},matrix:{x:matrixAxis,y:matrixAxis,backgroundColor:{borderColor:color.axisLine},body:{itemStyle:{borderColor:color.borderTint}}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:color.theme},gauge:{title:{color:color.secondary},axisLine:{lineStyle:{color:[[1,color.neutral05]]}},axisLabel:{color:color.axisLabel},detail:{color:color.primary}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}},funnel:{itemStyle:{borderColor:color.background}},radar:function(){var a=axisCommon();return a.axisName={color:color.axisLabel},a.axisLine.lineStyle.color=color.neutral20,a}(),treemap:{breadcrumb:{itemStyle:{color:color.neutral20,textStyle:{color:color.secondary}},emphasis:{itemStyle:{color:color.neutral30}}}},sunburst:{itemStyle:{borderColor:color.background}},map:{itemStyle:{borderColor:color.border,areaColor:color.neutral10},label:{color:color.tertiary},emphasis:{label:{color:color.primary},itemStyle:{areaColor:color.highlight}},select:{label:{color:color.primary},itemStyle:{areaColor:color.highlight}}},geo:{itemStyle:{borderColor:color.border,areaColor:color.neutral10},emphasis:{label:{color:color.primary},itemStyle:{areaColor:color.highlight}},select:{label:{color:color.primary},itemStyle:{color:color.highlight}}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=function(){function a(){}return a.prototype.normalizeQuery=function(t){var r={},n={},o={};if(isString(t)){var s=parseClassType(t);r.mainType=s.main||null,r.subType=s.sub||null}else{var l=["Index","Name","Id"],u={name:1,dataIndex:1,dataType:1};each$f(t,function(c,f){for(var h=!1,v=0;v<l.length;v++){var d=l[v],p=f.lastIndexOf(d);if(p>0&&p===f.length-d.length){var g=f.slice(0,p);g!=="data"&&(r.mainType=g,r[d.toLowerCase()]=c,h=!0)}}u.hasOwnProperty(f)&&(n[f]=c,h=!0),h||(o[f]=c)})}return{cptQuery:r,dataQuery:n,otherQuery:o}},a.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var o=n.targetEl,s=n.packedEvent,l=n.model,u=n.view;if(!l||!u)return!0;var c=r.cptQuery,f=r.dataQuery;return h(c,l,"mainType")&&h(c,l,"subType")&&h(c,l,"index","componentIndex")&&h(c,l,"name")&&h(c,l,"id")&&h(f,s,"name")&&h(f,s,"dataIndex")&&h(f,s,"dataType")&&(!u.filterForExposedEvent||u.filterForExposedEvent(t,r.otherQuery,o,s));function h(v,d,p,g){return v[p]==null||d[g||p]===v[p]}},a.prototype.afterTrigger=function(){this.eventInfo=null},a}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,t){var r=a.getData();if(a.legendIcon&&r.setVisual("legendIcon",a.legendIcon),!a.hasSymbolVisual)return;for(var n={},o={},s=!1,l=0;l<SYMBOL_PROPS_WITH_CB.length;l++){var u=SYMBOL_PROPS_WITH_CB[l],c=a.get(u);isFunction(c)?(s=!0,o[u]=c):n[u]=c}if(n.symbol=n.symbol||a.defaultSymbol,r.setVisual(extend({legendIcon:a.legendIcon||n.symbol,symbolKeepAspect:a.get("symbolKeepAspect")},n)),t.isSeriesFiltered(a))return;var f=keys(o);function h(v,d){for(var p=a.getRawValue(d),g=a.getDataParams(d),y=0;y<f.length;y++){var _=f[y];v.setItemVisual(d,_,o[_](p,g))}}return{dataEach:s?h:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,t){if(!a.hasSymbolVisual||t.isSeriesFiltered(a))return;var r=a.getData();function n(o,s){for(var l=o.getItemModel(s),u=0;u<SYMBOL_PROPS.length;u++){var c=SYMBOL_PROPS[u],f=l.getShallow(c,!0);f!=null&&o.setItemVisual(s,c,f)}}return{dataEach:r.hasItemOption?n:null}}};function getItemVisualFromData(a,t,r){switch(r){case"color":var n=a.getItemVisual(t,"style");return n[a.getVisual("drawType")];case"opacity":return a.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getItemVisual(t,r)}}function getVisualFromData(a,t){switch(t){case"color":var r=a.getVisual("style");return r[a.getVisual("drawType")];case"opacity":return a.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getVisual(t)}}function setItemVisualFromData(a,t,r,n){switch(r){case"color":var o=a.ensureUniqueItemVisual(t,"style");o[a.getVisual("drawType")]=n,a.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":a.ensureUniqueItemVisual(t,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":a.setItemVisual(t,r,n);break}}function createLegacyDataSelectAction(a,t){function r(n,o){var s=[];return n.eachComponent({mainType:"series",subType:a,query:o},function(l){s.push(l.seriesIndex)}),s}each$f([[a+"ToggleSelect","toggleSelect"],[a+"Select","select"],[a+"UnSelect","unselect"]],function(n){t(n[0],function(o,s,l){o=extend({},o),l.dispatchAction(extend(o,{type:n[1],seriesIndex:r(s,o)}))})})}function handleSeriesLegacySelectEvents(a,t,r,n,o){var s=a+t;r.isSilent(s)||n.eachComponent({mainType:"series",subType:"pie"},function(l){for(var u=l.seriesIndex,c=l.option.selectedMap,f=o.selected,h=0;h<f.length;h++)if(f[h].seriesIndex===u){var v=l.getData(),d=queryDataIndex(v,o.fromActionPayload);r.trigger(s,{type:s,seriesId:l.id,name:isArray$1(d)?v.getName(d[0]):v.getName(d),selected:isString(c)?c:extend({},c)})}})}function handleLegacySelectEvents(a,t,r){a.on("selectchanged",function(n){var o=r.getModel();n.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",t,o,n),handleSeriesLegacySelectEvents("pie","selectchanged",t,o,n)):n.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",t,o,n),handleSeriesLegacySelectEvents("pie","selected",t,o,n)):n.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",t,o,n),handleSeriesLegacySelectEvents("pie","unselected",t,o,n))})}function findEventDispatcher(a,t,r){for(var n;a&&!(t(a)&&(n=a,r));)a=a.__hostTarget||a.parent;return n}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function a(){this._id="__ec_inner_"+wmUniqueIndex++}return a.prototype.get=function(t){return this._guard(t)[this._id]},a.prototype.set=function(t,r){var n=this._guard(t);return supportDefineProperty?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},a.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},a.prototype.has=function(t){return!!this._guard(t)[this._id]},a.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},a}(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,t){var r=t.cx,n=t.cy,o=t.width/2,s=t.height/2;a.moveTo(r,n-s),a.lineTo(r+o,n+s),a.lineTo(r-o,n+s),a.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,t){var r=t.cx,n=t.cy,o=t.width/2,s=t.height/2;a.moveTo(r,n-s),a.lineTo(r+o,n),a.lineTo(r,n+s),a.lineTo(r-o,n),a.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,t){var r=t.x,n=t.y,o=t.width/5*3,s=Math.max(o,t.height),l=o/2,u=l*l/(s-l),c=n-s+l+u,f=Math.asin(u/l),h=Math.cos(f)*l,v=Math.sin(f),d=Math.cos(f),p=l*.6,g=l*.7;a.moveTo(r-h,c+u),a.arc(r,c,l,Math.PI-f,Math.PI*2+f),a.bezierCurveTo(r+h-v*p,c+u+d*p,r,n-g,r,n),a.bezierCurveTo(r,n-g,r-h+v*p,c+u+d*p,r-h,c+u),a.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,t){var r=t.height,n=t.width,o=t.x,s=t.y,l=n/3*2;a.moveTo(o,s),a.lineTo(o+l,s+r),a.lineTo(o,s+r/4*3),a.lineTo(o-l,s+r),a.lineTo(o,s),a.closePath()}}),symbolCtors={line:Line$1,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(a,t,r,n,o){o.x1=a,o.y1=t+n/2,o.x2=a+r,o.y2=t+n/2},rect:function(a,t,r,n,o){o.x=a,o.y=t,o.width=r,o.height=n},roundRect:function(a,t,r,n,o){o.x=a,o.y=t,o.width=r,o.height=n,o.r=Math.min(r,n)/4},square:function(a,t,r,n,o){var s=Math.min(r,n);o.x=a,o.y=t,o.width=s,o.height=s},circle:function(a,t,r,n,o){o.cx=a+r/2,o.cy=t+n/2,o.r=Math.min(r,n)/2},diamond:function(a,t,r,n,o){o.cx=a+r/2,o.cy=t+n/2,o.width=r,o.height=n},pin:function(a,t,r,n,o){o.x=a+r/2,o.y=t+n/2,o.width=r,o.height=n},arrow:function(a,t,r,n,o){o.x=a+r/2,o.y=t+n/2,o.width=r,o.height=n},triangle:function(a,t,r,n,o){o.cx=a+r/2,o.cy=t+n/2,o.width=r,o.height=n}},symbolBuildProxies={};each$f(symbolCtors,function(a,t){symbolBuildProxies[t]=new a});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(a,t,r){var n=calculateTextPosition(a,t,r),o=this.shape;return o&&o.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(a,t,r){var n=t.symbolType;if(n!=="none"){var o=symbolBuildProxies[n];o||(n="rect",o=symbolBuildProxies[n]),symbolShapeMakers[n](t.x,t.y,t.width,t.height,o.shape),o.buildPath(a,o.shape,r)}}});function symbolPathSetColor(a,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=a,r.fill=t||tokens.color.neutral00,r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=a:r.fill=a,this.markRedraw()}}function createSymbol$1(a,t,r,n,o,s,l){var u=a.indexOf("empty")===0;u&&(a=a.substr(5,1).toLowerCase()+a.substr(6));var c;return a.indexOf("image://")===0?c=makeImage(a.slice(8),new BoundingRect(t,r,n,o),l?"center":"cover"):a.indexOf("path://")===0?c=makePath(a.slice(7),{},new BoundingRect(t,r,n,o),l?"center":"cover"):c=new SymbolClz({shape:{symbolType:a,x:t,y:r,width:n,height:o}}),c.__isEmptyBrush=u,c.setColor=symbolPathSetColor,s&&c.setColor(s),c}function normalizeSymbolSize(a){return isArray$1(a)||(a=[+a,+a]),[a[0]||0,a[1]||0]}function normalizeSymbolOffset(a,t){if(a!=null)return isArray$1(a)||(a=[a,a]),[parsePercent(a[0],t[0])||0,parsePercent(retrieve2(a[1],a[0]),t[1])||0]}function isSafeNum(a){return isFinite(a)}function createLinearGradient(a,t,r){var n=t.x==null?0:t.x,o=t.x2==null?1:t.x2,s=t.y==null?0:t.y,l=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,o=o*r.width+r.x,s=s*r.height+r.y,l=l*r.height+r.y),n=isSafeNum(n)?n:0,o=isSafeNum(o)?o:1,s=isSafeNum(s)?s:0,l=isSafeNum(l)?l:0;var u=a.createLinearGradient(n,s,o,l);return u}function createRadialGradient(a,t,r){var n=r.width,o=r.height,s=Math.min(n,o),l=t.x==null?.5:t.x,u=t.y==null?.5:t.y,c=t.r==null?.5:t.r;t.global||(l=l*n+r.x,u=u*o+r.y,c=c*s),l=isSafeNum(l)?l:.5,u=isSafeNum(u)?u:.5,c=c>=0&&isSafeNum(c)?c:.5;var f=a.createRadialGradient(l,u,0,l,u,c);return f}function getCanvasGradient(a,t,r){for(var n=t.type==="radial"?createRadialGradient(a,t,r):createLinearGradient(a,t,r),o=t.colorStops,s=0;s<o.length;s++)n.addColorStop(o[s].offset,o[s].color);return n}function isClipPathChanged(a,t){if(a===t||!a&&!t)return!1;if(!a||!t||a.length!==t.length)return!0;for(var r=0;r<a.length;r++)if(a[r]!==t[r])return!0;return!1}function parseInt10(a){return parseInt(a,10)}function getSize$1(a,t,r){var n=["width","height"][t],o=["clientWidth","clientHeight"][t],s=["paddingLeft","paddingTop"][t],l=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var u=document.defaultView.getComputedStyle(a);return(a[o]||parseInt10(u[n])||parseInt10(a.style[n]))-(parseInt10(u[s])||0)-(parseInt10(u[l])||0)|0}function normalizeLineDash(a,t){return!a||a==="solid"||!(t>0)?null:a==="dashed"?[4*t,2*t]:a==="dotted"?[t]:isNumber(a)?[a]:isArray$1(a)?a:null}function getLineDash(a){var t=a.style,r=t.lineDash&&t.lineWidth>0&&normalizeLineDash(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var o=t.strokeNoScale&&a.getLineScale?a.getLineScale():1;o&&o!==1&&(r=map$1(r,function(s){return s/o}),n/=o)}return[r,n]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(a){var t=a.stroke;return!(t==null||t==="none"||!(a.lineWidth>0))}function isValidStrokeFillStyle(a){return typeof a=="string"&&a!=="none"}function styleHasFill(a){var t=a.fill;return t!=null&&t!=="none"}function doFillPath(a,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=a.globalAlpha;a.globalAlpha=t.fillOpacity*t.opacity,a.fill(),a.globalAlpha=r}else a.fill()}function doStrokePath(a,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=a.globalAlpha;a.globalAlpha=t.strokeOpacity*t.opacity,a.stroke(),a.globalAlpha=r}else a.stroke()}function createCanvasPattern(a,t,r){var n=createOrUpdateImage(t.image,t.__image,r);if(isImageReady(n)){var o=a.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&o&&o.setTransform){var s=new DOMMatrix;s.translateSelf(t.x||0,t.y||0),s.rotateSelf(0,0,(t.rotation||0)*RADIAN_TO_DEGREE),s.scaleSelf(t.scaleX||1,t.scaleY||1),o.setTransform(s)}return o}}function brushPath(a,t,r,n){var o,s=styleHasStroke(r),l=styleHasFill(r),u=r.strokePercent,c=u<1,f=!t.path;(!t.silent||c)&&f&&t.createPathProxy();var h=t.path||pathProxyForDraw,v=t.__dirty;if(!n){var d=r.fill,p=r.stroke,g=l&&!!d.colorStops,y=s&&!!p.colorStops,_=l&&!!d.image,S=s&&!!p.image,x=void 0,T=void 0,b=void 0,C=void 0,w=void 0;(g||y)&&(w=t.getBoundingRect()),g&&(x=v?getCanvasGradient(a,d,w):t.__canvasFillGradient,t.__canvasFillGradient=x),y&&(T=v?getCanvasGradient(a,p,w):t.__canvasStrokeGradient,t.__canvasStrokeGradient=T),_&&(b=v||!t.__canvasFillPattern?createCanvasPattern(a,d,t):t.__canvasFillPattern,t.__canvasFillPattern=b),S&&(C=v||!t.__canvasStrokePattern?createCanvasPattern(a,p,t):t.__canvasStrokePattern,t.__canvasStrokePattern=C),g?a.fillStyle=x:_&&(b?a.fillStyle=b:l=!1),y?a.strokeStyle=T:S&&(C?a.strokeStyle=C:s=!1)}var M=t.getGlobalScale();h.setScale(M[0],M[1],t.segmentIgnoreThreshold);var P,L;a.setLineDash&&r.lineDash&&(o=getLineDash(t),P=o[0],L=o[1]);var E=!0;(f||v&SHAPE_CHANGED_BIT)&&(h.setDPR(a.dpr),c?h.setContext(null):(h.setContext(a),E=!1),h.reset(),t.buildPath(h,t.shape,n),h.toStatic(),t.pathUpdated()),E&&h.rebuildPath(a,c?u:1),P&&(a.setLineDash(P),a.lineDashOffset=L),n||(r.strokeFirst?(s&&doStrokePath(a,r),l&&doFillPath(a,r)):(l&&doFillPath(a,r),s&&doStrokePath(a,r))),P&&a.setLineDash([])}function brushImage(a,t,r){var n=t.__image=createOrUpdateImage(r.image,t.__image,t,t.onload);if(!(!n||!isImageReady(n))){var o=r.x||0,s=r.y||0,l=t.getWidth(),u=t.getHeight(),c=n.width/n.height;if(l==null&&u!=null?l=u*c:u==null&&l!=null?u=l/c:l==null&&u==null&&(l=n.width,u=n.height),r.sWidth&&r.sHeight){var f=r.sx||0,h=r.sy||0;a.drawImage(n,f,h,r.sWidth,r.sHeight,o,s,l,u)}else if(r.sx&&r.sy){var f=r.sx,h=r.sy,v=l-f,d=u-h;a.drawImage(n,f,h,v,d,o,s,l,u)}else a.drawImage(n,o,s,l,u)}}function brushText(a,t,r){var n,o=r.text;if(o!=null&&(o+=""),o){a.font=r.font||DEFAULT_FONT,a.textAlign=r.textAlign,a.textBaseline=r.textBaseline;var s=void 0,l=void 0;a.setLineDash&&r.lineDash&&(n=getLineDash(t),s=n[0],l=n[1]),s&&(a.setLineDash(s),a.lineDashOffset=l),r.strokeFirst?(styleHasStroke(r)&&a.strokeText(o,r.x,r.y),styleHasFill(r)&&a.fillText(o,r.x,r.y)):(styleHasFill(r)&&a.fillText(o,r.x,r.y),styleHasStroke(r)&&a.strokeText(o,r.x,r.y)),s&&a.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(a,t,r,n,o){var s=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){flushPathDrawn(a,o),s=!0;var l=Math.max(Math.min(t.opacity,1),0);a.globalAlpha=isNaN(l)?DEFAULT_COMMON_STYLE.opacity:l}(n||t.blend!==r.blend)&&(s||(flushPathDrawn(a,o),s=!0),a.globalCompositeOperation=t.blend||DEFAULT_COMMON_STYLE.blend);for(var u=0;u<SHADOW_NUMBER_PROPS.length;u++){var c=SHADOW_NUMBER_PROPS[u];(n||t[c]!==r[c])&&(s||(flushPathDrawn(a,o),s=!0),a[c]=a.dpr*(t[c]||0))}return(n||t.shadowColor!==r.shadowColor)&&(s||(flushPathDrawn(a,o),s=!0),a.shadowColor=t.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),s}function bindPathAndTextCommonStyle(a,t,r,n,o){var s=getStyle(t,o.inHover),l=n?null:r&&getStyle(r,o.inHover)||{};if(s===l)return!1;var u=bindCommonProps(a,s,l,n,o);if((n||s.fill!==l.fill)&&(u||(flushPathDrawn(a,o),u=!0),isValidStrokeFillStyle(s.fill)&&(a.fillStyle=s.fill)),(n||s.stroke!==l.stroke)&&(u||(flushPathDrawn(a,o),u=!0),isValidStrokeFillStyle(s.stroke)&&(a.strokeStyle=s.stroke)),(n||s.opacity!==l.opacity)&&(u||(flushPathDrawn(a,o),u=!0),a.globalAlpha=s.opacity==null?1:s.opacity),t.hasStroke()){var c=s.lineWidth,f=c/(s.strokeNoScale&&t.getLineScale?t.getLineScale():1);a.lineWidth!==f&&(u||(flushPathDrawn(a,o),u=!0),a.lineWidth=f)}for(var h=0;h<STROKE_PROPS.length;h++){var v=STROKE_PROPS[h],d=v[0];(n||s[d]!==l[d])&&(u||(flushPathDrawn(a,o),u=!0),a[d]=s[d]||v[1])}return u}function bindImageStyle(a,t,r,n,o){return bindCommonProps(a,getStyle(t,o.inHover),r&&getStyle(r,o.inHover),n,o)}function setContextTransform(a,t){var r=t.transform,n=a.dpr||1;r?a.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):a.setTransform(n,0,0,n,0,0)}function updateClipStatus(a,t,r){for(var n=!1,o=0;o<a.length;o++){var s=a[o];n=n||s.isZeroArea(),setContextTransform(t,s),t.beginPath(),s.buildPath(t,s.shape),t.clip()}r.allClipped=n}function isTransformChanged(a,t){return a&&t?a[0]!==t[0]||a[1]!==t[1]||a[2]!==t[2]||a[3]!==t[3]||a[4]!==t[4]||a[5]!==t[5]:!(!a&&!t)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(a){var t=styleHasFill(a),r=styleHasStroke(a);return!(a.lineDash||!(+t^+r)||t&&typeof a.fill!="string"||r&&typeof a.stroke!="string"||a.strokePercent<1||a.strokeOpacity<1||a.fillOpacity<1)}function flushPathDrawn(a,t){t.batchFill&&a.fill(),t.batchStroke&&a.stroke(),t.batchFill="",t.batchStroke=""}function getStyle(a,t){return t&&a.__hoverStyle||a.style}function brushSingle(a,t){brush$1(a,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(a,t,r,n){var o=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~REDRAW_BIT,t.__isRendered=!1;return}var s=t.__clipPaths,l=r.prevElClipPaths,u=!1,c=!1;if((!l||isClipPathChanged(s,l))&&(l&&l.length&&(flushPathDrawn(a,r),a.restore(),c=u=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),s&&s.length&&(flushPathDrawn(a,r),a.save(),updateClipStatus(s,a,r),u=!0),r.prevElClipPaths=s),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var f=r.prevEl;f||(c=u=!0);var h=t instanceof Path&&t.autoBatch&&canPathBatch(t.style);u||isTransformChanged(o,f.transform)?(flushPathDrawn(a,r),setContextTransform(a,t)):h||flushPathDrawn(a,r);var v=getStyle(t,r.inHover);t instanceof Path?(r.lastDrawType!==DRAW_TYPE_PATH&&(c=!0,r.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(a,t,f,c,r),(!h||!r.batchFill&&!r.batchStroke)&&a.beginPath(),brushPath(a,t,v,h),h&&(r.batchFill=v.fill||"",r.batchStroke=v.stroke||"")):t instanceof TSpan?(r.lastDrawType!==DRAW_TYPE_TEXT&&(c=!0,r.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(a,t,f,c,r),brushText(a,t,v)):t instanceof ZRImage?(r.lastDrawType!==DRAW_TYPE_IMAGE&&(c=!0,r.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(a,t,f,c,r),brushImage(a,t,v)):t.getTemporalDisplayables&&(r.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(c=!0,r.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(a,t,r)),h&&n&&flushPathDrawn(a,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function brushIncremental(a,t,r){var n=t.getDisplayables(),o=t.getTemporalDisplayables();a.save();var s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},l,u;for(l=t.getCursor(),u=n.length;l<u;l++){var c=n[l];c.beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),brush$1(a,c,s,l===u-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),s.prevEl=c}for(var f=0,h=o.length;f<h;f++){var c=o[f];c.beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),brush$1(a,c,s,f===h-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),s.prevEl=c}t.clearTemporalDisplayables(),t.notClear=!0,a.restore()}var decalMap=new WeakMap$1,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(a,t){if(a==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),o=n.painter.type==="svg";a.dirty&&decalMap.delete(a);var s=decalMap.get(a);if(s)return s;var l=defaults(a,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});l.backgroundColor==="none"&&(l.backgroundColor=null);var u={repeat:"repeat"};return c(u),u.rotation=l.rotation,u.scaleX=u.scaleY=o?1:1/r,decalMap.set(a,u),a.dirty=!1,u;function c(f){for(var h=[r],v=!0,d=0;d<decalKeys.length;++d){var p=l[decalKeys[d]];if(p!=null&&!isArray$1(p)&&!isString(p)&&!isNumber(p)&&typeof p!="boolean"){v=!1;break}h.push(p)}var g;if(v){g=h.join(",")+(o?"-svg":"");var y=decalCache.get(g);y&&(o?f.svgElement=y:f.image=y)}var _=normalizeDashArrayX(l.dashArrayX),S=normalizeDashArrayY(l.dashArrayY),x=normalizeSymbolArray(l.symbol),T=getLineBlockLengthX(_),b=getLineBlockLengthY(S),C=!o&&platformApi.createCanvas(),w=o&&{tag:"g",attrs:{},key:"dcl",children:[]},M=L(),P;C&&(C.width=M.width*r,C.height=M.height*r,P=C.getContext("2d")),E(),v&&decalCache.put(g,C||w),f.image=C,f.svgElement=w,f.svgWidth=M.width,f.svgHeight=M.height;function L(){for(var I=1,R=0,D=T.length;R<D;++R)I=getLeastCommonMultiple(I,T[R]);for(var O=1,R=0,D=x.length;R<D;++R)O=getLeastCommonMultiple(O,x[R].length);I*=O;var $=b*T.length*x.length;return{width:Math.max(1,Math.min(I,l.maxTileWidth)),height:Math.max(1,Math.min($,l.maxTileHeight))}}function E(){P&&(P.clearRect(0,0,C.width,C.height),l.backgroundColor&&(P.fillStyle=l.backgroundColor,P.fillRect(0,0,C.width,C.height)));for(var I=0,R=0;R<S.length;++R)I+=S[R];if(I<=0)return;for(var D=-b,O=0,$=0,N=0;D<M.height;){if(O%2===0){for(var V=$/2%x.length,B=0,F=0,G=0;B<M.width*2;){for(var z=0,R=0;R<_[N].length;++R)z+=_[N][R];if(z<=0)break;if(F%2===0){var H=(1-l.symbolSize)*.5,U=B+_[N][F]*H,Y=D+S[O]*H,Z=_[N][F]*l.symbolSize,J=S[O]*l.symbolSize,ee=G/2%x[V].length;K(U,Y,Z,J,x[V][ee])}B+=_[N][F],++G,++F,F===_[N].length&&(F=0)}++N,N===_.length&&(N=0)}D+=S[O],++$,++O,O===S.length&&(O=0)}function K(X,q,W,j,re){var Q=o?1:r,te=createSymbol$1(re,X*Q,q*Q,W*Q,j*Q,l.color,l.symbolKeepAspect);if(o){var ae=n.painter.renderOneToVNode(te);ae&&w.children.push(ae)}else brushSingle(P,te)}}}}function normalizeSymbolArray(a){if(!a||a.length===0)return[["rect"]];if(isString(a))return[[a]];for(var t=!0,r=0;r<a.length;++r)if(!isString(a[r])){t=!1;break}if(t)return normalizeSymbolArray([a]);for(var n=[],r=0;r<a.length;++r)isString(a[r])?n.push([a[r]]):n.push(a[r]);return n}function normalizeDashArrayX(a){if(!a||a.length===0)return[[0,0]];if(isNumber(a)){var t=Math.ceil(a);return[[t,t]]}for(var r=!0,n=0;n<a.length;++n)if(!isNumber(a[n])){r=!1;break}if(r)return normalizeDashArrayX([a]);for(var o=[],n=0;n<a.length;++n)if(isNumber(a[n])){var t=Math.ceil(a[n]);o.push([t,t])}else{var t=map$1(a[n],function(u){return Math.ceil(u)});t.length%2===1?o.push(t.concat(t)):o.push(t)}return o}function normalizeDashArrayY(a){if(!a||typeof a=="object"&&a.length===0)return[0,0];if(isNumber(a)){var t=Math.ceil(a);return[t,t]}var r=map$1(a,function(n){return Math.ceil(n)});return a.length%2?r.concat(r):r}function getLineBlockLengthX(a){return map$1(a,function(t){return getLineBlockLengthY(t)})}function getLineBlockLengthY(a){for(var t=0,r=0;r<a.length;++r)t+=a[r];return a.length%2===1?t*2:t}function decalVisual(a,t){a.eachRawSeries(function(r){if(!a.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(l){var u=n.getItemVisual(l,"decal");if(u){var c=n.ensureUniqueItemVisual(l,"style");c.decal=createOrUpdatePatternFromDecal(u,t)}});var o=n.getVisual("decal");if(o){var s=n.getVisual("style");s.decal=createOrUpdatePatternFromDecal(o,t)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(a,t){implsStore[a]=t}function getImpl(a){return implsStore[a]}var customRenderers={};function registerCustomSeries(a,t){customRenderers[a]=t}function getCustomSeries(a){return customRenderers[a]}var TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",MAIN_PROCESS_VERSION_KEY="__mainProcessVersion",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(a){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,a,t)}}function createRegisterEventWithLowercaseMessageCenter(a){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return toLowercaseNameAndCallEventful(this,a,t)}}function toLowercaseNameAndCallEventful(a,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Eventful.prototype[t].apply(a,r)}var MessageCenter=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t}(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,updateMainProcessVersion,ECharts=function(a){__extends(t,a);function t(r,n,o){var s=a.call(this,new ECEventProcessor)||this;s._chartsViews=[],s._chartsMap={},s._componentsViews=[],s._componentsMap={},s._pendingActions=[],o=o||{},s._dom=r;var l="canvas",u="auto",c=!1;s[MAIN_PROCESS_VERSION_KEY]=1,o.ssr&&registerSSRDataGetter(function(d){var p=getECData(d),g=p.dataIndex;if(g!=null){var y=createHashMap();return y.set("series_index",p.seriesIndex),y.set("data_index",g),p.ssrType&&y.set("ssr_type",p.ssrType),y}});var f=s._zr=init$2(r,{renderer:o.renderer||l,devicePixelRatio:o.devicePixelRatio,width:o.width,height:o.height,ssr:o.ssr,useDirtyRect:retrieve2(o.useDirtyRect,c),useCoarsePointer:retrieve2(o.useCoarsePointer,u),pointerSize:o.pointerSize});s._ssr=o.ssr,s._throttledZrFlush=throttle(bind$1(f.flush,f),17),s._updateTheme(n),s._locale=createLocaleObject(o.locale||SYSTEM_LANG),s._coordSysMgr=new CoordinateSystemManager;var h=s._api=createExtensionAPI(s);function v(d,p){return d.__prio-p.__prio}return sort$2(visualFuncs,v),sort$2(dataProcessorFuncs,v),s._scheduler=new Scheduler(s,h,dataProcessorFuncs,visualFuncs),s._messageCenter=new MessageCenter,s._initEvents(),s.resize=bind$1(s.resize,s),f.animation.on("frame",s._onframe,s),bindRenderedEvent(f,s),bindMouseEvent(f,s),setAsPrimitive(s),s}return t.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var r=this._scheduler;if(this[PENDING_UPDATE]){var n=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this);try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(c){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,c}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,n),triggerUpdatedEvent.call(this,n)}else if(r.unfinished){var o=TEST_FRAME_REMAIN_TIME,s=this._model,l=this._api;r.unfinished=!1;do{var u=+new Date;r.performSeriesTasks(s),r.performDataProcessorTasks(s),updateStreamModes(this,s),r.performVisualTasks(s),renderSeries(this,this._model,l,"remain",{}),o-=+new Date-u}while(o>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,o){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var s,l,u;if(isObject$3(n)&&(o=n.lazyUpdate,s=n.silent,l=n.replaceMerge,u=n.transition,n=n.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this),!this._model||n){var c=new OptionManager(this._api),f=this._theme,h=this._model=new GlobalModel;h.scheduler=this._scheduler,h.ssr=this._ssr,h.init(null,null,null,f,this._locale,c)}this._model.setOption(r,{replaceMerge:l},optionPreprocessorFuncs);var v={seriesTransition:u,optionChanged:!0};if(o)this[PENDING_UPDATE]={silent:s,updateParams:v},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,v)}catch(d){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,d}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}}},t.prototype.setTheme=function(r,n){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var o=this._model;if(o){var s=n&&n.silent,l=null;this[PENDING_UPDATE]&&(s==null&&(s=this[PENDING_UPDATE].silent),l=this[PENDING_UPDATE].updateParams,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this);try{this._updateTheme(r),o.setTheme(this._theme),prepare(this),updateMethods.update.call(this,{type:"setTheme"},l)}catch(u){throw this[IN_MAIN_PROCESS_KEY]=!1,u}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}}},t.prototype._updateTheme=function(r){isString(r)&&(r=themeStorage[r]),r&&(r=clone$4(r),r&&globalBackwardCompat(r,!0),this._theme=r)},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){var r=this._zr,n=r.storage.getDisplayList();return each$f(n,function(o){o.stopAnimation(null,!0)}),r.painter.toDataURL()},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,o=this._model,s=[],l=this;each$f(n,function(c){o.eachComponent({mainType:c},function(f){var h=l._componentsMap[f.__viewId];h.group.ignore||(s.push(h),h.group.ignore=!0)})});var u=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return each$f(s,function(c){c.group.ignore=!1}),u},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",o=this.group,s=Math.min,l=Math.max,u=1/0;if(connectedGroups[o]){var c=u,f=u,h=-u,v=-u,d=[],p=r&&r.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(T,b){if(T.group===o){var C=n?T.getZr().painter.getSvgDom().innerHTML:T.renderToCanvas(clone$4(r)),w=T.getDom().getBoundingClientRect();c=s(w.left,c),f=s(w.top,f),h=l(w.right,h),v=l(w.bottom,v),d.push({dom:C,left:w.left,top:w.top})}}),c*=p,f*=p,h*=p,v*=p;var g=h-c,y=v-f,_=platformApi.createCanvas(),S=init$2(_,{renderer:n?"svg":"canvas"});if(S.resize({width:g,height:y}),n){var x="";return each$f(d,function(T){var b=T.left-c,C=T.top-f;x+='<g transform="translate('+b+","+C+')">'+T.dom+"</g>"}),S.painter.getSvgRoot().innerHTML=x,r.connectedBackgroundColor&&S.painter.setBackgroundColor(r.connectedBackgroundColor),S.refreshImmediately(),S.painter.toDataURL()}else return r.connectedBackgroundColor&&S.add(new Rect$2({shape:{x:0,y:0,width:g,height:y},style:{fill:r.connectedBackgroundColor}})),each$f(d,function(T){var b=new ZRImage({style:{x:T.left*p-c,y:T.top*p-f,image:T.dom}});S.add(b)}),S.refreshImmediately(),_.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n,o){return doConvertPixel(this,"convertToPixel",r,n,o)},t.prototype.convertToLayout=function(r,n,o){return doConvertPixel(this,"convertToLayout",r,n,o)},t.prototype.convertFromPixel=function(r,n,o){return doConvertPixel(this,"convertFromPixel",r,n,o)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var o=this._model,s,l=parseFinder$1(o,r);return each$f(l,function(u,c){c.indexOf("Models")>=0&&each$f(u,function(f){var h=f.coordinateSystem;if(h&&h.containPoint)s=s||!!h.containPoint(n);else if(c==="seriesModels"){var v=this._chartsMap[f.__viewId];v&&v.containPoint&&(s=s||v.containPoint(n,f))}},this)},this),!!s},t.prototype.getVisual=function(r,n){var o=this._model,s=parseFinder$1(o,r,{defaultMainType:"series"}),l=s.seriesModel,u=l.getData(),c=s.hasOwnProperty("dataIndexInside")?s.dataIndexInside:s.hasOwnProperty("dataIndex")?u.indexOfRawIndex(s.dataIndex):null;return c!=null?getItemVisualFromData(u,c,n):getVisualFromData(u,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;each$f(MOUSE_EVENT_NAMES,function(o){var s=function(l){var u=r.getModel(),c=l.target,f,h=o==="globalout";if(h?f={}:c&&findEventDispatcher(c,function(y){var _=getECData(y);if(_&&_.dataIndex!=null){var S=_.dataModel||u.getSeriesByIndex(_.seriesIndex);return f=S&&S.getDataParams(_.dataIndex,_.dataType,c)||{},!0}else if(_.eventData)return f=extend({},_.eventData),!0},!0),f){var v=f.componentType,d=f.componentIndex;(v==="markLine"||v==="markPoint"||v==="markArea")&&(v="series",d=f.seriesIndex);var p=v&&d!=null&&u.getComponent(v,d),g=p&&r[p.mainType==="series"?"_chartsMap":"_componentsMap"][p.__viewId];f.event=l,f.type=o,r._$eventProcessor.eventInfo={targetEl:c,packedEvent:f,model:p,view:g},r.trigger(o,f)}};s.zrEventfulCallAtLast=!0,r._zr.on(o,s,r)});var n=this._messageCenter;each$f(publicEventTypeMap,function(o,s){n.on(s,function(l){r.trigger(s,l)})}),handleLegacySelectEvents(n,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var n=this,o=n._api,s=n._model;each$f(n._componentsViews,function(l){l.dispose(s,o)}),each$f(n._chartsViews,function(l){l.dispose(s,o)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete instances[n.id]},t.prototype.resize=function(r){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var o=n.resetOption("media"),s=r&&r.silent;this[PENDING_UPDATE]&&(s==null&&(s=this[PENDING_UPDATE].silent),o=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this);try{o&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},r&&r.animation)})}catch(l){throw this[IN_MAIN_PROCESS_KEY]=!1,l}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(isObject$3(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!loadingEffects[r]){var o=loadingEffects[r](this._api,n),s=this._zr;this._loadingFX=o,s.add(o)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=extend({},r);return n.type=connectionEventRevertMap[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(isObject$3(n)||(n={silent:!!n}),!!actions[r.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(r);return}var o=n.silent;doDispatchAction.call(this,r,o);var s=n.flush;s?this._zr.flush():s!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,o),triggerUpdatedEvent.call(this,o)}},t.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,o=this.getModel(),s=o.getSeriesByIndex(n);s.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){prepare=function(v){var d=v._scheduler;d.restorePipelines(v._model),d.prepareStageTasks(),prepareView(v,!0),prepareView(v,!1),d.plan()},prepareView=function(v,d){for(var p=v._model,g=v._scheduler,y=d?v._componentsViews:v._chartsViews,_=d?v._componentsMap:v._chartsMap,S=v._zr,x=v._api,T=0;T<y.length;T++)y[T].__alive=!1;d?p.eachComponent(function(w,M){w!=="series"&&b(M)}):p.eachSeries(b);function b(w){var M=w.__requireNewView;w.__requireNewView=!1;var P="_ec_"+w.id+"_"+w.type,L=!M&&_[P];if(!L){var E=parseClassType(w.type),I=d?ComponentView.getClass(E.main,E.sub):ChartView.getClass(E.sub);L=new I,L.init(p,x),_[P]=L,y.push(L),S.add(L.group)}w.__viewId=L.__id=P,L.__alive=!0,L.__model=w,L.group.__ecComponentInfo={mainType:w.mainType,index:w.componentIndex},!d&&g.prepareView(L,w,p,x)}for(var T=0;T<y.length;){var C=y[T];C.__alive?T++:(!d&&C.renderTask.dispose(),S.remove(C.group),C.dispose(p,x),y.splice(T,1),_[C.__id]===C&&delete _[C.__id],C.__id=C.group.__ecComponentInfo=null)}},updateDirectly=function(v,d,p,g,y){var _=v._model;if(_.setUpdatePayload(p),!g){each$f([].concat(v._componentsViews).concat(v._chartsViews),C);return}var S={};S[g+"Id"]=p[g+"Id"],S[g+"Index"]=p[g+"Index"],S[g+"Name"]=p[g+"Name"];var x={mainType:g,query:S};y&&(x.subType=y);var T=p.excludeSeriesId,b;T!=null&&(b=createHashMap(),each$f(normalizeToArray(T),function(w){var M=convertOptionIdName(w,null);M!=null&&b.set(M,!0)})),_&&_.eachComponent(x,function(w){var M=b&&b.get(w.id)!=null;if(!M)if(isHighDownPayload(p))if(w instanceof SeriesModel)p.type===HIGHLIGHT_ACTION_TYPE&&!p.notBlur&&!w.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(w,p,v._api);else{var P=findComponentHighDownDispatchers(w.mainType,w.componentIndex,p.name,v._api),L=P.focusSelf,E=P.dispatchers;p.type===HIGHLIGHT_ACTION_TYPE&&L&&!p.notBlur&&blurComponent(w.mainType,w.componentIndex,v._api),E&&each$f(E,function(I){p.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(I):leaveEmphasis(I)})}else isSelectChangePayload(p)&&w instanceof SeriesModel&&(toggleSelectionFromPayload(w,p,v._api),updateSeriesElementSelection(w),markStatusToUpdate(v))},v),_&&_.eachComponent(x,function(w){var M=b&&b.get(w.id)!=null;M||C(v[g==="series"?"_chartsMap":"_componentsMap"][w.__viewId])},v);function C(w){w&&w.__alive&&w[d]&&w[d](w.__model,_,v._api,p)}},updateMethods={prepareAndUpdate:function(v){prepare(this),updateMethods.update.call(this,v,v&&{optionChanged:v.newOption!=null})},update:function(v,d){var p=this._model,g=this._api,y=this._zr,_=this._coordSysMgr,S=this._scheduler;if(p){p.setUpdatePayload(v),S.restoreData(p,v),S.performSeriesTasks(p),_.create(p,g),S.performDataProcessorTasks(p,v),updateStreamModes(this,p),_.update(p,g),n(p),S.performVisualTasks(p,v);var x=p.get("backgroundColor")||"transparent";y.setBackgroundColor(x);var T=p.get("darkMode");T!=null&&T!=="auto"&&y.setDarkMode(T),render(this,p,g,v,d),lifecycle.trigger("afterupdate",p,g)}},updateTransform:function(v){var d=this,p=this._model,g=this._api;if(p){p.setUpdatePayload(v);var y=[];p.eachComponent(function(S,x){if(S!=="series"){var T=d.getViewOfComponentModel(x);if(T&&T.__alive)if(T.updateTransform){var b=T.updateTransform(x,p,g,v);b&&b.update&&y.push(T)}else y.push(T)}});var _=createHashMap();p.eachSeries(function(S){var x=d._chartsMap[S.__viewId];if(x.updateTransform){var T=x.updateTransform(S,p,g,v);T&&T.update&&_.set(S.uid,1)}else _.set(S.uid,1)}),n(p),this._scheduler.performVisualTasks(p,v,{setDirty:!0,dirtyMap:_}),renderSeries(this,p,g,v,{},_),lifecycle.trigger("afterupdate",p,g)}},updateView:function(v){var d=this._model;d&&(d.setUpdatePayload(v),ChartView.markUpdateMethod(v,"updateView"),n(d),this._scheduler.performVisualTasks(d,v,{setDirty:!0}),render(this,d,this._api,v,{}),lifecycle.trigger("afterupdate",d,this._api))},updateVisual:function(v){var d=this,p=this._model;p&&(p.setUpdatePayload(v),p.eachSeries(function(g){g.getData().clearAllVisual()}),ChartView.markUpdateMethod(v,"updateVisual"),n(p),this._scheduler.performVisualTasks(p,v,{visualType:"visual",setDirty:!0}),p.eachComponent(function(g,y){if(g!=="series"){var _=d.getViewOfComponentModel(y);_&&_.__alive&&_.updateVisual(y,p,d._api,v)}}),p.eachSeries(function(g){var y=d._chartsMap[g.__viewId];y.updateVisual(g,p,d._api,v)}),lifecycle.trigger("afterupdate",p,this._api))},updateLayout:function(v){updateMethods.update.call(this,v)}};function r(v,d,p,g,y){if(v._disposed){v.id;return}for(var _=v._model,S=v._coordSysMgr.getCoordinateSystems(),x,T=parseFinder$1(_,p),b=0;b<S.length;b++){var C=S[b];if(C[d]&&(x=C[d](_,T,g,y))!=null)return x}}doConvertPixel=r,updateStreamModes=function(v,d){var p=v._chartsMap,g=v._scheduler;d.eachSeries(function(y){g.updateStreamModes(y,p[y.__viewId])})},doDispatchAction=function(v,d){var p=this,g=this.getModel(),y=v.type,_=v.escapeConnect,S=actions[y],x=(S.update||"update").split(":"),T=x.pop(),b=x[0]!=null&&parseClassType(x[0]);this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this);var C=[v],w=!1;v.batch&&(w=!0,C=map$1(v.batch,function(N){return N=defaults(extend({},N),v),N.batch=null,N}));var M=[],P,L=[],E=S.nonRefinedEventType,I=isSelectChangePayload(v),R=isHighDownPayload(v);if(R&&allLeaveBlur(this._api),each$f(C,function(N){var V=S.action(N,g,p._api);if(S.refineEvent?L.push(V):P=V,P=P||extend({},N),P.type=E,M.push(P),R){var B=preParseFinder(v),F=B.queryOptionMap,G=B.mainTypeSpecified,z=G?F.keys()[0]:"series";updateDirectly(p,T,N,z),markStatusToUpdate(p)}else I?(updateDirectly(p,T,N,"series"),markStatusToUpdate(p)):b&&updateDirectly(p,T,N,b.main,b.sub)}),T!=="none"&&!R&&!I&&!b)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,v),this[PENDING_UPDATE]=null):updateMethods[T].call(this,v)}catch(N){throw this[IN_MAIN_PROCESS_KEY]=!1,N}if(w?P={type:E,escapeConnect:_,batch:M}:P=M[0],this[IN_MAIN_PROCESS_KEY]=!1,!d){var D=void 0;if(S.refineEvent){var O=S.refineEvent(L,v,g,this._api).eventContent;assert(isObject$3(O)),D=defaults({type:S.refinedEventType},O),D.fromAction=v.type,D.fromActionPayload=v,D.escapeConnect=!0}var $=this._messageCenter;$.trigger(P.type,P),D&&$.trigger(D.type,D)}},flushPendingActions=function(v){for(var d=this._pendingActions;d.length;){var p=d.shift();doDispatchAction.call(this,p,v)}},triggerUpdatedEvent=function(v){!v&&this.trigger("updated")},bindRenderedEvent=function(v,d){v.on("rendered",function(p){d.trigger("rendered",p),v.animation.isFinished()&&!d[PENDING_UPDATE]&&!d._scheduler.unfinished&&!d._pendingActions.length&&d.trigger("finished")})},bindMouseEvent=function(v,d){v.on("mouseover",function(p){var g=p.target,y=findEventDispatcher(g,isHighDownDispatcher);y&&(handleGlobalMouseOverForHighDown(y,p,d._api),markStatusToUpdate(d))}).on("mouseout",function(p){var g=p.target,y=findEventDispatcher(g,isHighDownDispatcher);y&&(handleGlobalMouseOutForHighDown(y,p,d._api),markStatusToUpdate(d))}).on("click",function(p){var g=p.target,y=findEventDispatcher(g,function(x){return getECData(x).dataIndex!=null},!0);if(y){var _=y.selected?"unselect":"select",S=getECData(y);d._api.dispatchAction({type:_,dataType:S.dataType,dataIndexInside:S.dataIndex,seriesIndex:S.seriesIndex,isFromClick:!0})}})};function n(v){v.clearColorPalette(),v.eachSeries(function(d){d.clearColorPalette()})}function o(v){var d=[],p=[],g=!1;if(v.eachComponent(function(x,T){var b=T.get("zlevel")||0,C=T.get("z")||0,w=T.getZLevelKey();g=g||!!w,(x==="series"?p:d).push({zlevel:b,z:C,idx:T.componentIndex,type:x,key:w})}),g){var y=d.concat(p),_,S;sort$2(y,function(x,T){return x.zlevel===T.zlevel?x.z-T.z:x.zlevel-T.zlevel}),each$f(y,function(x){var T=v.getComponent(x.type,x.idx),b=x.zlevel,C=x.key;_!=null&&(b=Math.max(_,b)),C?(b===_&&C!==S&&b++,S=C):S&&(b===_&&b++,S=""),_=b,T.setZLevel(b)})}}render=function(v,d,p,g,y){o(d),renderComponents(v,d,p,g,y),each$f(v._chartsViews,function(_){_.__alive=!1}),renderSeries(v,d,p,g,y),each$f(v._chartsViews,function(_){_.__alive||_.remove(d,p)})},renderComponents=function(v,d,p,g,y,_){each$f(_||v._componentsViews,function(S){var x=S.__model;f(x,S),S.render(x,d,p,g),c(x,S),h(x,S)})},renderSeries=function(v,d,p,g,y,_){var S=v._scheduler;y=extend(y||{},{updatedSeries:d.getSeries()}),lifecycle.trigger("series:beforeupdate",d,p,y);var x=!1;d.eachSeries(function(T){var b=v._chartsMap[T.__viewId];b.__alive=!0;var C=b.renderTask;S.updatePayload(C,g),f(T,b),_&&_.get(T.uid)&&C.dirty(),C.perform(S.getPerformArgs(C))&&(x=!0),b.group.silent=!!T.get("silent"),u(T,b),updateSeriesElementSelection(T)}),S.unfinished=x||S.unfinished,lifecycle.trigger("series:layoutlabels",d,p,y),lifecycle.trigger("series:transition",d,p,y),d.eachSeries(function(T){var b=v._chartsMap[T.__viewId];c(T,b),h(T,b)}),l(v,d),lifecycle.trigger("series:afterupdate",d,p,y)},markStatusToUpdate=function(v){v[STATUS_NEEDS_UPDATE_KEY]=!0,v.getZr().wakeUp()},updateMainProcessVersion=function(v){v[MAIN_PROCESS_VERSION_KEY]=(v[MAIN_PROCESS_VERSION_KEY]+1)%1e3},applyChangedStates=function(v){v[STATUS_NEEDS_UPDATE_KEY]&&(v.getZr().storage.traverse(function(d){isElementRemoved(d)||s(d)}),v[STATUS_NEEDS_UPDATE_KEY]=!1)};function s(v){for(var d=[],p=v.currentStates,g=0;g<p.length;g++){var y=p[g];y==="emphasis"||y==="blur"||y==="select"||d.push(y)}v.selected&&v.states.select&&d.push("select"),v.hoverState===HOVER_STATE_EMPHASIS&&v.states.emphasis?d.push("emphasis"):v.hoverState===HOVER_STATE_BLUR&&v.states.blur&&d.push("blur"),v.useStates(d)}function l(v,d){var p=v._zr,g=p.storage,y=0;g.traverse(function(_){_.isGroup||y++}),y>d.get("hoverLayerThreshold")&&!env.node&&!env.worker&&d.eachSeries(function(_){if(!_.preventUsingHoverLayer){var S=v._chartsMap[_.__viewId];S.__alive&&S.eachRendered(function(x){x.states.emphasis&&(x.states.emphasis.hoverLayer=!0)})}})}function u(v,d){var p=v.get("blendMode")||null;d.eachRendered(function(g){g.isGroup||(g.style.blend=p)})}function c(v,d){if(!v.preventAutoZ){var p=retrieveZInfo(v);d.eachRendered(function(g){return traverseUpdateZ(g,p.z,p.zlevel),!0})}}function f(v,d){d.eachRendered(function(p){if(!isElementRemoved(p)){var g=p.getTextContent(),y=p.getTextGuideLine();p.stateTransition&&(p.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),y&&y.stateTransition&&(y.stateTransition=null),p.hasState()?(p.prevStates=p.currentStates,p.clearStates()):p.prevStates&&(p.prevStates=null)}})}function h(v,d){var p=v.getModel("stateAnimation"),g=v.isAnimationEnabled(),y=p.get("duration"),_=y>0?{duration:y,delay:p.get("delay"),easing:p.get("easing")}:null;d.eachRendered(function(S){if(S.states&&S.states.emphasis){if(isElementRemoved(S))return;if(S instanceof Path&&savePathStates(S),S.__dirty){var x=S.prevStates;x&&S.useStates(x)}if(g){S.stateTransition=_;var T=S.getTextContent(),b=S.getTextGuideLine();T&&(T.stateTransition=_),b&&(b.stateTransition=_)}S.__dirty&&s(S)}})}createExtensionAPI=function(v){return new(function(d){__extends(p,d);function p(){return d!==null&&d.apply(this,arguments)||this}return p.prototype.getCoordinateSystems=function(){return v._coordSysMgr.getCoordinateSystems()},p.prototype.getComponentByElement=function(g){for(;g;){var y=g.__ecComponentInfo;if(y!=null)return v._model.getComponent(y.mainType,y.index);g=g.parent}},p.prototype.enterEmphasis=function(g,y){enterEmphasis(g,y),markStatusToUpdate(v)},p.prototype.leaveEmphasis=function(g,y){leaveEmphasis(g,y),markStatusToUpdate(v)},p.prototype.enterBlur=function(g){enterBlur(g),markStatusToUpdate(v)},p.prototype.leaveBlur=function(g){leaveBlur(g),markStatusToUpdate(v)},p.prototype.enterSelect=function(g){enterSelect(g),markStatusToUpdate(v)},p.prototype.leaveSelect=function(g){leaveSelect(g),markStatusToUpdate(v)},p.prototype.getModel=function(){return v.getModel()},p.prototype.getViewOfComponentModel=function(g){return v.getViewOfComponentModel(g)},p.prototype.getViewOfSeriesModel=function(g){return v.getViewOfSeriesModel(g)},p.prototype.getMainProcessVersion=function(){return v[MAIN_PROCESS_VERSION_KEY]},p}(ExtensionAPI))(v)},enableConnect=function(v){function d(p,g){for(var y=0;y<p.length;y++){var _=p[y];_[CONNECT_STATUS_KEY]=g}}each$f(connectionEventRevertMap,function(p,g){v._messageCenter.on(g,function(y){if(connectedGroups[v.group]&&v[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(y&&y.escapeConnect)return;var _=v.makeActionFromEvent(y),S=[];each$f(instances,function(x){x!==v&&x.group===v.group&&S.push(x)}),d(S,CONNECT_STATUS_PENDING),each$f(S,function(x){x[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&x.dispatchAction(_)}),d(S,CONNECT_STATUS_UPDATED)}})})}}(),t}(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(a,t,r){var n=this;function o(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];t&&t.apply&&t.apply(this,s),n.off(a,o)}this.on.call(this,a,o,r)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(a){}var actions={},connectionEventRevertMap={},publicEventTypeMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(a,t,r){{var n=getInstanceByDom(a);if(n)return n}var o=new ECharts(a,t,r);return o.id="ec_"+idBase++,instances[o.id]=o,setAttribute(a,DOM_ATTRIBUTE_KEY,o.id),enableConnect(o),lifecycle.trigger("afterinit",o),o}function getInstanceByDom(a){return instances[getAttribute(a,DOM_ATTRIBUTE_KEY)]}function registerTheme(a,t){themeStorage[a]=t}function registerPreprocessor(a){indexOf(optionPreprocessorFuncs,a)<0&&optionPreprocessorFuncs.push(a)}function registerProcessor(a,t){normalizeRegister(dataProcessorFuncs,a,t,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(a){registerUpdateLifecycle("afterinit",a)}function registerPostUpdate(a){registerUpdateLifecycle("afterupdate",a)}function registerUpdateLifecycle(a,t){lifecycle.on(a,t)}function registerAction$1(a,t,r){var n,o,s,l,u;isFunction(t)&&(r=t,t=""),isObject$3(a)?(n=a.type,o=a.event,l=a.update,u=a.publishNonRefinedEvent,r||(r=a.action),s=a.refineEvent):(n=a,o=t);function c(h){return h.toLowerCase()}o=c(o||n);var f=s?c(n):o;actions[n]||(assert(ACTION_REG.test(n)&&ACTION_REG.test(o)),s&&assert(o!==n),actions[n]={actionType:n,refinedEventType:o,nonRefinedEventType:f,update:l,action:r,refineEvent:s},publicEventTypeMap[o]=1,s&&u&&(publicEventTypeMap[f]=1),connectionEventRevertMap[f]=n)}function registerCoordinateSystem(a,t){CoordinateSystemManager.register(a,t)}function registerLayout(a,t){normalizeRegister(visualFuncs,a,t,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(a,t){normalizeRegister(visualFuncs,a,t,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(a,t,r,n,o){if((isFunction(t)||isObject$3(t))&&(r=t,t=n),!(indexOf(registeredTasks,r)>=0)){registeredTasks.push(r);var s=Scheduler.wrapStageHandler(r,o);s.__prio=t,s.__raw=r,a.push(s)}}function registerLoading(a,t){loadingEffects[a]=t}function registerMap$1(a,t,r){var n=getImpl("registerMap");n&&n(a,t,r)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack);registerLoading("default",defaultLoading);registerAction$1({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction$1({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction$1({type:SELECT_ACTION_TYPE,event:SELECT_CHANGED_EVENT_TYPE,update:SELECT_ACTION_TYPE,action:noop,refineEvent:makeSelectChangedEvent,publishNonRefinedEvent:!0});registerAction$1({type:UNSELECT_ACTION_TYPE,event:SELECT_CHANGED_EVENT_TYPE,update:UNSELECT_ACTION_TYPE,action:noop,refineEvent:makeSelectChangedEvent,publishNonRefinedEvent:!0});registerAction$1({type:TOGGLE_SELECT_ACTION_TYPE,event:SELECT_CHANGED_EVENT_TYPE,update:TOGGLE_SELECT_ACTION_TYPE,action:noop,refineEvent:makeSelectChangedEvent,publishNonRefinedEvent:!0});function makeSelectChangedEvent(a,t,r,n){return{eventContent:{selected:getAllSelectedIndices(r),isFromClick:t.isFromClick||!1}}}registerTheme("default",{});registerTheme("dark",theme);var extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction:registerAction$1,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(a){ComponentModel.registerClass(a)},registerComponentView:function(a){ComponentView.registerClass(a)},registerSeriesModel:function(a){SeriesModel.registerClass(a)},registerChartView:function(a){ChartView.registerClass(a)},registerCustomSeries:function(a,t){registerCustomSeries(a,t)},registerSubTypeDefaulter:function(a,t){ComponentModel.registerSubTypeDefaulter(a,t)},registerPainter:function(a,t){registerPainter(a,t)}};function use(a){if(isArray$1(a)){each$f(a,function(t){use(t)});return}indexOf(extensions,a)>=0||(extensions.push(a),isFunction(a)&&(a={install:a}),a.install(extensionRegisters))}function dataIndexMapValueLength(a){return a==null?0:a.length||1}function defaultKeyGetter(a){return a}var DataDiffer=function(){function a(t,r,n,o,s,l){this._old=t,this._new=r,this._oldKeyGetter=n||defaultKeyGetter,this._newKeyGetter=o||defaultKeyGetter,this.context=s,this._diffModeMultiple=l==="multiple"}return a.prototype.add=function(t){return this._add=t,this},a.prototype.update=function(t){return this._update=t,this},a.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},a.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},a.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},a.prototype.remove=function(t){return this._remove=t,this},a.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},a.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},o=new Array(t.length),s=new Array(r.length);this._initIndexMap(t,null,o,"_oldKeyGetter"),this._initIndexMap(r,n,s,"_newKeyGetter");for(var l=0;l<t.length;l++){var u=o[l],c=n[u],f=dataIndexMapValueLength(c);if(f>1){var h=c.shift();c.length===1&&(n[u]=c[0]),this._update&&this._update(h,l)}else f===1?(n[u]=null,this._update&&this._update(c,l)):this._remove&&this._remove(l)}this._performRestAdd(s,n)},a.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},o={},s=[],l=[];this._initIndexMap(t,n,s,"_oldKeyGetter"),this._initIndexMap(r,o,l,"_newKeyGetter");for(var u=0;u<s.length;u++){var c=s[u],f=n[c],h=o[c],v=dataIndexMapValueLength(f),d=dataIndexMapValueLength(h);if(v>1&&d===1)this._updateManyToOne&&this._updateManyToOne(h,f),o[c]=null;else if(v===1&&d>1)this._updateOneToMany&&this._updateOneToMany(h,f),o[c]=null;else if(v===1&&d===1)this._update&&this._update(h,f),o[c]=null;else if(v>1&&d>1)this._updateManyToMany&&this._updateManyToMany(h,f),o[c]=null;else if(v>1)for(var p=0;p<v;p++)this._remove&&this._remove(f[p]);else this._remove&&this._remove(f)}this._performRestAdd(l,o)},a.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var o=t[n],s=r[o],l=dataIndexMapValueLength(s);if(l>1)for(var u=0;u<l;u++)this._add&&this._add(s[u]);else l===1&&this._add&&this._add(s);r[o]=null}},a.prototype._initIndexMap=function(t,r,n,o){for(var s=this._diffModeMultiple,l=0;l<t.length;l++){var u="_ec_"+this[o](t[l],l);if(s||(n[l]=u),!!r){var c=r[u],f=dataIndexMapValueLength(c);f===0?(r[u]=l,s&&n.push(u)):f===1?r[u]=[c,l]:c.push(l)}}},a}(),DimensionUserOuput=function(){function a(t,r){this._encode=t,this._schema=r}return a.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},a.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},a}();function summarizeDimensions(a,t){var r={},n=r.encode={},o=createHashMap(),s=[],l=[],u={};each$f(a.dimensions,function(d){var p=a.getDimensionInfo(d),g=p.coordDim;if(g){var y=p.coordDimIndex;getOrCreateEncodeArr(n,g)[y]=d,p.isExtraCoord||(o.set(g,1),mayLabelDimType(p.type)&&(s[0]=d),getOrCreateEncodeArr(u,g)[y]=a.getDimensionIndex(p.name)),p.defaultTooltip&&l.push(d)}VISUAL_DIMENSIONS.each(function(_,S){var x=getOrCreateEncodeArr(n,S),T=p.otherDims[S];T!=null&&T!==!1&&(x[T]=p.name)})});var c=[],f={};o.each(function(d,p){var g=n[p];f[p]=g[0],c=c.concat(g)}),r.dataDimsOnCoord=c,r.dataDimIndicesOnCoord=map$1(c,function(d){return a.getDimensionInfo(d).storeDimIndex}),r.encodeFirstDimNotExtra=f;var h=n.label;h&&h.length&&(s=h.slice());var v=n.tooltip;return v&&v.length?l=v.slice():l.length||(l=s.slice()),n.defaultedLabel=s,n.defaultedTooltip=l,r.userOutput=new DimensionUserOuput(u,t),r}function getOrCreateEncodeArr(a,t){return a.hasOwnProperty(t)||(a[t]=[]),a[t]}function getDimensionTypeByAxis(a){return a==="category"?"ordinal":a==="time"?"time":"float"}function mayLabelDimType(a){return!(a==="ordinal"||a==="time")}var SeriesDimensionDefine=function(){function a(t){this.otherDims={},t!=null&&extend(this,t)}return a}(),inner$j=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function a(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return a.prototype.isDimensionOmitted=function(){return this._dimOmitted},a.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},a.prototype.getSourceDimensionIndex=function(t){return retrieve2(this._dimNameMap.get(t),-1)},a.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},a.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=shouldRetrieveDataByName(this.source),n=!shouldOmitUnusedDimensions(t),o="",s=[],l=0,u=0;l<t;l++){var c=void 0,f=void 0,h=void 0,v=this.dimensions[u];if(v&&v.storeDimIndex===l)c=r?v.name:null,f=v.type,h=v.ordinalMeta,u++;else{var d=this.getSourceDimension(l);d&&(c=r?d.name:null,f=d.type)}s.push({property:c,type:f,ordinalMeta:h}),r&&c!=null&&(!v||!v.isCalculationCoord)&&(o+=n?c.replace(/\`/g,"`1").replace(/\$/g,"`2"):c),o+="$",o+=dimTypeShort[f]||"f",h&&(o+=h.uid),o+="$"}var p=this.source,g=[p.seriesLayoutBy,p.startIndex,o].join("$$");return{dimensions:s,hash:g}},a.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var o=void 0,s=this.dimensions[n];if(s&&s.storeDimIndex===r)s.isCalculationCoord||(o=s.name),n++;else{var l=this.getSourceDimension(r);l&&(o=l.name)}t.push(o)}return t},a.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},a}();function isSeriesDataSchema(a){return a instanceof SeriesDataSchema}function createDimNameMap(a){for(var t=createHashMap(),r=0;r<(a||[]).length;r++){var n=a[r],o=isObject$3(n)?n.name:n;o!=null&&t.get(o)==null&&t.set(o,r)}return t}function ensureSourceDimNameMap(a){var t=inner$j(a);return t.dimNameMap||(t.dimNameMap=createDimNameMap(a.dimensionsDefine))}function shouldOmitUnusedDimensions(a){return a>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function a(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var n,o=!1;isSeriesDataSchema(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(o=!0,n=t),n=n||["x","y"];for(var s={},l=[],u={},c=!1,f={},h=0;h<n.length;h++){var v=n[h],d=isString(v)?new SeriesDimensionDefine({name:v}):v instanceof SeriesDimensionDefine?v:new SeriesDimensionDefine(v),p=d.name;d.type=d.type||"float",d.coordDim||(d.coordDim=p,d.coordDimIndex=0);var g=d.otherDims=d.otherDims||{};l.push(p),s[p]=d,f[p]!=null&&(c=!0),d.createInvertedIndices&&(u[p]=[]);var y=h;isNumber(d.storeDimIndex)&&(y=d.storeDimIndex),g.itemName===0&&(this._nameDimIdx=y),g.itemId===0&&(this._idDimIdx=y),o&&(d.storeDimIndex=h)}if(this.dimensions=l,this._dimInfos=s,this._initGetDimensionInfo(c),this.hostModel=r,this._invertedIndicesMap=u,this._dimOmitted){var _=this._dimIdxToName=createHashMap();each$f(l,function(S){_.set(s[S].storeDimIndex,S)})}}return a.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var o=this._schema.getSourceDimension(r);if(o)return o.name},a.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},a.prototype._recognizeDimIndex=function(t){if(isNumber(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},a.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},a.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},a.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},a.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},a.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var o=n.encode[t];return o?o[r]:null},a.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},a.prototype.getStore=function(){return this._store},a.prototype.initData=function(t,r,n){var o=this,s;if(t instanceof DataStore&&(s=t),!s){var l=this.dimensions,u=isSourceInstance(t)||isArrayLike(t)?new DefaultDataProvider(t,l.length):t;s=new DataStore;var c=map(l,function(f){return{type:o._dimInfos[f].type,property:f}});s.initData(u,c,n)}this._store=s,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,s.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},a.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},a.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r&&r.length),o=n.start,s=n.end,l=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var u=o;u<s;u++){var c=u-o;this._nameList[u]=r[c],l&&makeIdFromName(this,u)}},a.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var o=this._dimInfos[r[n]];o.ordinalMeta&&t.collectOrdinalMeta(o.storeDimIndex,o.ordinalMeta)}},a.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!t.fillStorage},a.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,o=n.getProvider();this._updateOrdinalMeta();var s=this._nameList,l=this._idList,u=o.getSource().sourceFormat,c=u===SOURCE_FORMAT_ORIGINAL;if(c&&!o.pure)for(var f=[],h=t;h<r;h++){var v=o.getItem(h,f);if(!this.hasItemOption&&isDataItemOption(v)&&(this.hasItemOption=!0),v){var d=v.name;s[h]==null&&d!=null&&(s[h]=convertOptionIdName(d,null));var p=v.id;l[h]==null&&p!=null&&(l[h]=convertOptionIdName(p,null))}}if(this._shouldMakeIdFromName())for(var h=t;h<r;h++)makeIdFromName(this,h);prepareInvertedIndex(this)}},a.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},a.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},a.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},a.prototype.setCalculationInfo=function(t,r){isObject$1(t)?extend(this._calculationInfo,t):this._calculationInfo[t]=r},a.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=getIdNameFromStore(this,this._nameDimIdx,r)),n==null&&(n=""),n},a.prototype._getCategory=function(t,r){var n=this._store.get(t,r),o=this._store.getOrdinalMeta(t);return o?o.categories[n]:n},a.prototype.getId=function(t){return getId(this,this.getRawIndex(t))},a.prototype.count=function(){return this._store.count()},a.prototype.get=function(t,r){var n=this._store,o=this._dimInfos[t];if(o)return n.get(o.storeDimIndex,r)},a.prototype.getByRawIndex=function(t,r){var n=this._store,o=this._dimInfos[t];if(o)return n.getByRawIndex(o.storeDimIndex,r)},a.prototype.getIndices=function(){return this._store.getIndices()},a.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},a.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},a.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},a.prototype.getValues=function(t,r){var n=this,o=this._store;return isArray$1(t)?o.getValues(map(t,function(s){return n._getStoreDimIndex(s)}),r):o.getValues(t)},a.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,o=r.length;n<o;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},a.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},a.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},a.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},a.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],o=n&&n[r];return o==null||isNaN(o)?INDEX_NOT_FOUND:o},a.prototype.each=function(t,r,n){isFunction(t)&&(n=r,r=t,t=[]);var o=n||this,s=map(normalizeDimensions(t),this._getStoreDimIndex,this);this._store.each(s,o?bind$1(r,o):r)},a.prototype.filterSelf=function(t,r,n){isFunction(t)&&(n=r,r=t,t=[]);var o=n||this,s=map(normalizeDimensions(t),this._getStoreDimIndex,this);return this._store=this._store.filter(s,o?bind$1(r,o):r),this},a.prototype.selectRange=function(t){var r=this,n={},o=keys(t);return each$f(o,function(s){var l=r._getStoreDimIndex(s);n[l]=t[s]}),this._store=this._store.selectRange(n),this},a.prototype.mapArray=function(t,r,n){isFunction(t)&&(n=r,r=t,t=[]),n=n||this;var o=[];return this.each(t,function(){o.push(r&&r.apply(this,arguments))},n),o},a.prototype.map=function(t,r,n,o){var s=n||o||this,l=map(normalizeDimensions(t),this._getStoreDimIndex,this),u=cloneListForMapAndSample(this);return u._store=this._store.map(l,s?bind$1(r,s):r),u},a.prototype.modify=function(t,r,n,o){var s=n||o||this,l=map(normalizeDimensions(t),this._getStoreDimIndex,this);this._store.modify(l,s?bind$1(r,s):r)},a.prototype.downSample=function(t,r,n,o){var s=cloneListForMapAndSample(this);return s._store=this._store.downSample(this._getStoreDimIndex(t),r,n,o),s},a.prototype.minmaxDownSample=function(t,r){var n=cloneListForMapAndSample(this);return n._store=this._store.minmaxDownSample(this._getStoreDimIndex(t),r),n},a.prototype.lttbDownSample=function(t,r){var n=cloneListForMapAndSample(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},a.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},a.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new Model(n,r,r&&r.ecModel)},a.prototype.diff=function(t){var r=this;return new DataDiffer(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return getId(t,n)},function(n){return getId(r,n)})},a.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},a.prototype.setVisual=function(t,r){this._visual=this._visual||{},isObject$1(t)?extend(this._visual,t):this._visual[t]=r},a.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],o=n&&n[r];return o??this.getVisual(r)},a.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},a.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,o=n[t];o||(o=n[t]={});var s=o[r];return s==null&&(s=this.getVisual(r),isArray$1(s)?s=s.slice():isObject$1(s)&&(s=extend({},s)),o[r]=s),s},a.prototype.setItemVisual=function(t,r,n){var o=this._itemVisuals[t]||{};this._itemVisuals[t]=o,isObject$1(r)?extend(o,r):o[r]=n},a.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},a.prototype.setLayout=function(t,r){isObject$1(t)?extend(this._layout,t):this._layout[t]=r},a.prototype.getLayout=function(t){return this._layout[t]},a.prototype.getItemLayout=function(t){return this._itemLayouts[t]},a.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?extend(this._itemLayouts[t]||{},r):r},a.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},a.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(n,this.dataType,t,r),this._graphicEls[t]=r},a.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},a.prototype.eachItemGraphicEl=function(t,r){each$f(this._graphicEls,function(n,o){n&&t&&t.call(r,n,o)})},a.prototype.cloneShallow=function(t){return t||(t=new a(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(t,this),t._store=this._store,t},a.prototype.wrapMethod=function(t,r){var n=this[t];isFunction(n)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var o=n.apply(this,arguments);return r.apply(this,[o].concat(slice(arguments)))})},a.internalField=function(){prepareInvertedIndex=function(t){var r=t._invertedIndicesMap;each$f(r,function(n,o){var s=t._dimInfos[o],l=s.ordinalMeta,u=t._store;if(l){n=r[o]=new CtorInt32Array(l.categories.length);for(var c=0;c<n.length;c++)n[c]=INDEX_NOT_FOUND;for(var c=0;c<u.count();c++)n[u.get(s.storeDimIndex,c)]=c}})},getIdNameFromStore=function(t,r,n){return convertOptionIdName(t._getCategory(r,n),null)},getId=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=getIdNameFromStore(t,t._idDimIdx,r)),n==null&&(n=ID_PREFIX+r),n},normalizeDimensions=function(t){return isArray$1(t)||(t=t!=null?[t]:[]),t},cloneListForMapAndSample=function(t){var r=new a(t._schema?t._schema:map(t.dimensions,t._getDimInfo,t),t.hostModel);return transferProperties(r,t),r},transferProperties=function(t,r){each$f(TRANSFERABLE_PROPERTIES.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,each$f(CLONE_PROPERTIES,function(n){t[n]=clone$4(r[n])}),t._calculationInfo=extend({},r._calculationInfo)},makeIdFromName=function(t,r){var n=t._nameList,o=t._idList,s=t._nameDimIdx,l=t._idDimIdx,u=n[r],c=o[r];if(u==null&&s!=null&&(n[r]=u=getIdNameFromStore(t,s,r)),c==null&&l!=null&&(o[r]=c=getIdNameFromStore(t,l,r)),c==null&&u!=null){var f=t._nameRepeatCount,h=f[u]=(f[u]||0)+1;c=u,h>1&&(c+="__ec__"+h),o[r]=c}}}(),a}();function prepareSeriesDataSchema(a,t){isSourceInstance(a)||(a=createSourceFromSeriesDataOption(a)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||a.dimensionsDefine||[],o=createHashMap(),s=[],l=getDimCount(a,r,n,t.dimensionsCount),u=t.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(l),c=n===a.dimensionsDefine,f=c?ensureSourceDimNameMap(a):createDimNameMap(n),h=t.encodeDefine;!h&&t.encodeDefaulter&&(h=t.encodeDefaulter(a,l));for(var v=createHashMap(h),d=new CtorInt32Array$1(l),p=0;p<d.length;p++)d[p]=-1;function g(L){var E=d[L];if(E<0){var I=n[L],R=isObject$3(I)?I:{name:I},D=new SeriesDimensionDefine,O=R.name;O!=null&&f.get(O)!=null&&(D.name=D.displayName=O),R.type!=null&&(D.type=R.type),R.displayName!=null&&(D.displayName=R.displayName);var $=s.length;return d[L]=$,D.storeDimIndex=L,s.push(D),D}return s[E]}if(!u)for(var p=0;p<l;p++)g(p);v.each(function(L,E){var I=normalizeToArray(L).slice();if(I.length===1&&!isString(I[0])&&I[0]<0){v.set(E,!1);return}var R=v.set(E,[]);each$f(I,function(D,O){var $=isString(D)?f.get(D):D;$!=null&&$<l&&(R[O]=$,_(g($),E,O))})});var y=0;each$f(r,function(L){var E,I,R,D;if(isString(L))E=L,D={};else{D=L,E=D.name;var O=D.ordinalMeta;D.ordinalMeta=null,D=extend({},D),D.ordinalMeta=O,I=D.dimsDef,R=D.otherDims,D.name=D.coordDim=D.coordDimIndex=D.dimsDef=D.otherDims=null}var $=v.get(E);if($!==!1){if($=normalizeToArray($),!$.length)for(var N=0;N<(I&&I.length||1);N++){for(;y<l&&g(y).coordDim!=null;)y++;y<l&&$.push(y++)}each$f($,function(V,B){var F=g(V);if(c&&D.type!=null&&(F.type=D.type),_(defaults(F,D),E,B),F.name==null&&I){var G=I[B];!isObject$3(G)&&(G={name:G}),F.name=F.displayName=G.name,F.defaultTooltip=G.defaultTooltip}R&&defaults(F.otherDims,R)})}});function _(L,E,I){VISUAL_DIMENSIONS.get(E)!=null?L.otherDims[E]=I:(L.coordDim=E,L.coordDimIndex=I,o.set(E,!0))}var S=t.generateCoord,x=t.generateCoordCount,T=x!=null;x=S?x||1:0;var b=S||"value";function C(L){L.name==null&&(L.name=L.coordDim)}if(u)each$f(s,function(L){C(L)}),s.sort(function(L,E){return L.storeDimIndex-E.storeDimIndex});else for(var w=0;w<l;w++){var M=g(w),P=M.coordDim;P==null&&(M.coordDim=genCoordDimName(b,o,T),M.coordDimIndex=0,(!S||x<=0)&&(M.isExtraCoord=!0),x--),C(M),M.type==null&&(guessOrdinal(a,w)===BE_ORDINAL.Must||M.isExtraCoord&&(M.otherDims.itemName!=null||M.otherDims.seriesName!=null))&&(M.type="ordinal")}return removeDuplication(s),new SeriesDataSchema({source:a,dimensions:s,fullDimensionCount:l,dimensionOmitted:u})}function removeDuplication(a){for(var t=createHashMap(),r=0;r<a.length;r++){var n=a[r],o=n.name,s=t.get(o)||0;s>0&&(n.name=o+(s-1)),s++,t.set(o,s)}}function getDimCount(a,t,r,n){var o=Math.max(a.dimensionsDetectedCount||1,t.length,r.length,n||0);return each$f(t,function(s){var l;isObject$3(s)&&(l=s.dimsDef)&&(o=Math.max(o,l.length))}),o}function genCoordDimName(a,t,r){if(r||t.hasKey(a)){for(var n=0;t.hasKey(a+n);)n++;a+=n}return t.set(a,!0),a}var CoordSysInfo=function(){function a(t){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=t}return a}();function getCoordSysInfoBySeries(a){var t=a.get("coordinateSystem"),r=new CoordSysInfo(t),n=fetchers[t];if(n)return n(a,r,r.axisMap,r.categoryAxisMap),r}var fetchers={cartesian2d:function(a,t,r,n){var o=a.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],s=a.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];t.coordSysDims=["x","y"],r.set("x",o),r.set("y",s),isCategory(o)&&(n.set("x",o),t.firstCategoryDimIndex=0),isCategory(s)&&(n.set("y",s),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(a,t,r,n){var o=a.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];t.coordSysDims=["single"],r.set("single",o),isCategory(o)&&(n.set("single",o),t.firstCategoryDimIndex=0)},polar:function(a,t,r,n){var o=a.getReferringComponents("polar",SINGLE_REFERRING).models[0],s=o.findAxisModel("radiusAxis"),l=o.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",s),r.set("angle",l),isCategory(s)&&(n.set("radius",s),t.firstCategoryDimIndex=0),isCategory(l)&&(n.set("angle",l),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(a,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(a,t,r,n){var o=a.ecModel,s=o.getComponent("parallel",a.get("parallelIndex")),l=t.coordSysDims=s.dimensions.slice();each$f(s.parallelAxisIndex,function(u,c){var f=o.getComponent("parallelAxis",u),h=l[c];r.set(h,f),isCategory(f)&&(n.set(h,f),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=c))})},matrix:function(a,t,r,n){var o=a.getReferringComponents("matrix",SINGLE_REFERRING).models[0];t.coordSysDims=["x","y"];var s=o.getDimensionModel("x"),l=o.getDimensionModel("y");r.set("x",s),r.set("y",l),n.set("x",s),n.set("y",l)}};function isCategory(a){return a.get("type")==="category"}function enableDataStack(a,t,r){r=r||{};var n=r.byIndex,o=r.stackedCoordDimension,s,l,u;isLegacyDimensionsInput(t)?s=t:(l=t.schema,s=l.dimensions,u=t.store);var c=!!(a&&a.get("stack")),f,h,v,d;if(each$f(s,function(x,T){isString(x)&&(s[T]=x={name:x}),c&&!x.isExtraCoord&&(!n&&!f&&x.ordinalMeta&&(f=x),!h&&x.type!=="ordinal"&&x.type!=="time"&&(!o||o===x.coordDim)&&(h=x))}),h&&!n&&!f&&(n=!0),h){v="__\0ecstackresult_"+a.id,d="__\0ecstackedover_"+a.id,f&&(f.createInvertedIndices=!0);var p=h.coordDim,g=h.type,y=0;each$f(s,function(x){x.coordDim===p&&y++});var _={name:v,coordDim:p,coordDimIndex:y,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length},S={name:d,coordDim:d,coordDimIndex:y+1,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length+1};l?(u&&(_.storeDimIndex=u.ensureCalculationDimension(d,g),S.storeDimIndex=u.ensureCalculationDimension(v,g)),l.appendCalculationDimension(_),l.appendCalculationDimension(S)):(s.push(_),s.push(S))}return{stackedDimension:h&&h.name,stackedByDimension:f&&f.name,isStackedByIndex:n,stackedOverDimension:d,stackResultDimension:v}}function isLegacyDimensionsInput(a){return!isSeriesDataSchema(a.schema)}function isDimensionStacked(a,t){return!!t&&t===a.getCalculationInfo("stackedDimension")}function getStackedDimension(a,t){return isDimensionStacked(a,t)?a.getCalculationInfo("stackResultDimension"):t}function getCoordSysDimDefs(a,t){var r=a.get("coordinateSystem"),n=CoordinateSystemManager.get(r),o;return t&&t.coordSysDims&&(o=map$1(t.coordSysDims,function(s){var l={name:s},u=t.axisMap.get(s);if(u){var c=u.get("type");l.type=getDimensionTypeByAxis(c)}return l})),o||(o=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),o}function injectOrdinalMeta(a,t,r){var n,o;return r&&each$f(a,function(s,l){var u=s.coordDim,c=r.categoryAxisMap.get(u);c&&(n==null&&(n=l),s.ordinalMeta=c.getOrdinalMeta(),t&&(s.createInvertedIndices=!0)),s.otherDims.itemName!=null&&(o=!0)}),!o&&n!=null&&(a[n].otherDims.itemName=0),n}function createSeriesData(a,t,r){r=r||{};var n=t.getSourceManager(),o,s=!1;a?(s=!0,o=createSourceFromSeriesDataOption(a)):(o=n.getSource(),s=o.sourceFormat===SOURCE_FORMAT_ORIGINAL);var l=getCoordSysInfoBySeries(t),u=getCoordSysDimDefs(t,l),c=r.useEncodeDefaulter,f=isFunction(c)?c:c?curry$1(makeSeriesEncodeForAxisCoordSys,u,t):null,h={coordDimensions:u,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:f,canOmitUnusedDimensions:!s},v=prepareSeriesDataSchema(o,h),d=injectOrdinalMeta(v.dimensions,r.createInvertedIndices,l),p=s?null:n.getSharedDataStore(v),g=enableDataStack(t,{schema:v,store:p}),y=new SeriesData(v,t);y.setCalculationInfo(g);var _=d!=null&&isNeedCompleteOrdinalData(o)?function(S,x,T,b){return b===d?T:this.defaultDimValueGetter(S,x,T,b)}:null;return y.hasItemOption=!1,y.initData(s?o:p,null,_),y}function isNeedCompleteOrdinalData(a){if(a.sourceFormat===SOURCE_FORMAT_ORIGINAL){var t=firstDataNotNull(a.data||[]);return!isArray$1(getDataItemValue(t))}}function firstDataNotNull(a){for(var t=0;t<a.length&&a[t]==null;)t++;return a[t]}function isIntervalOrLogScale(a){return a.type==="interval"||a.type==="log"}function intervalScaleNiceTicks(a,t,r,n,o){var s={},l=s.interval=nice(t/r);n!=null&&l<n&&(l=s.interval=n),o!=null&&l>o&&(l=s.interval=o);var u=s.intervalPrecision=getIntervalPrecision(l),c=s.niceTickExtent=[round$4(Math.ceil(a[0]/l)*l,u),round$4(Math.floor(a[1]/l)*l,u)];return fixExtent(c,a),s}function increaseInterval(a){var t=Math.pow(10,quantityExponent(a)),r=a/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,round$4(r*t)}function getIntervalPrecision(a){return getPrecision(a)+2}function clamp(a,t,r){a[t]=Math.max(Math.min(a[t],r[1]),r[0])}function fixExtent(a,t){!isFinite(a[0])&&(a[0]=t[0]),!isFinite(a[1])&&(a[1]=t[1]),clamp(a,0,t),clamp(a,1,t),a[0]>a[1]&&(a[0]=a[1])}function contain$1(a,t){return a>=t[0]&&a<=t[1]}var ScaleCalculator=function(){function a(){this.normalize=normalize$2,this.scale=scale}return a.prototype.updateMethods=function(t){t.hasBreaks()?(this.normalize=bind$1(t.normalize,t),this.scale=bind$1(t.scale,t)):(this.normalize=normalize$2,this.scale=scale)},a}();function normalize$2(a,t){return t[1]===t[0]?.5:(a-t[0])/(t[1]-t[0])}function scale(a,t){return a*(t[1]-t[0])+t[0]}function logTransform(a,t,r){var n=Math.log(a);return[Math.log(r?t[0]:Math.max(0,t[0]))/n,Math.log(r?t[1]:Math.max(0,t[1]))/n]}var Scale=function(){function a(t){this._calculator=new ScaleCalculator,this._setting=t||{},this._extent=[1/0,-1/0];var r=getScaleBreakHelper();r&&(this._brkCtx=r.createScaleBreakContext(),this._brkCtx.update(this._extent))}return a.prototype.getSetting=function(t){return this._setting[t]},a.prototype._innerUnionExtent=function(t){var r=this._extent;this._innerSetExtent(t[0]<r[0]?t[0]:r[0],t[1]>r[1]?t[1]:r[1])},a.prototype.unionExtentFromData=function(t,r){this._innerUnionExtent(t.getApproximateExtent(r))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.setExtent=function(t,r){this._innerSetExtent(t,r)},a.prototype._innerSetExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r),this._brkCtx&&this._brkCtx.update(n)},a.prototype.setBreaksFromOption=function(t){var r=getScaleBreakHelper();r&&this._innerSetBreak(r.parseAxisBreakOption(t,bind$1(this.parse,this)))},a.prototype._innerSetBreak=function(t){this._brkCtx&&(this._brkCtx.setBreaks(t),this._calculator.updateMethods(this._brkCtx),this._brkCtx.update(this._extent))},a.prototype._innerGetBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},a.prototype.hasBreaks=function(){return this._brkCtx?this._brkCtx.hasBreaks():!1},a.prototype._getExtentSpanWithBreaks=function(){return this._brkCtx&&this._brkCtx.hasBreaks()?this._brkCtx.getExtentSpan():this._extent[1]-this._extent[0]},a.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},a.prototype.isBlank=function(){return this._isBlank},a.prototype.setBlank=function(t){this._isBlank=t},a}();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=function(){function a(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++uidBase,this._onCollect=t.onCollect}return a.createByAxisModel=function(t){var r=t.option,n=r.data,o=n&&map$1(n,getName);return new a({categories:o,needCollect:!o,deduplication:r.dedplication!==!1})},a.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},a.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!isString(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,this._onCollect&&this._onCollect(t,r),r;var o=this._getOrCreateMap();return r=o.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,o.set(t,r),this._onCollect&&this._onCollect(t,r)):r=NaN),r},a.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},a}();function getName(a){return isObject$3(a)&&a.value!=null?a.value:a+""}var OrdinalScale=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;n.type="ordinal";var o=n.getSetting("ordinalMeta");return o||(o=new OrdinalMeta({})),isArray$1(o)&&(o=new OrdinalMeta({categories:map$1(o,function(s){return isObject$3(s)?s.value:s})})),n._ordinalMeta=o,n._extent=n.getSetting("extent")||[0,o.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:isString(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return contain$1(r,this._extent)&&r>=0&&r<this._ordinalMeta.categories.length},t.prototype.normalize=function(r){return r=this._getTickNumber(r),this._calculator.normalize(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(this._calculator.scale(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,o=n[0];o<=n[1];)r.push({value:o}),o++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,o=this._ordinalNumbersByTick=[],s=this._ticksByOrdinalNumber=[],l=0,u=this._ordinalMeta.categories.length,c=Math.min(u,n.length);l<c;++l){var f=n[l];o[l]=f,s[f]=l}for(var h=0;l<u;++l){for(;s[h]!=null;)h++;o.push(h),s[h]=l}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),o=this._ordinalMeta.categories[n];return o==null?"":o+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$4,IntervalScale=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r==null||r===""?NaN:Number(r)},t.prototype.contain=function(r){return contain$1(r,this._extent)},t.prototype.normalize=function(r){return this._calculator.normalize(r,this._extent)},t.prototype.scale=function(r){return this._calculator.scale(r,this._extent)},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(r)},t.prototype.getTicks=function(r){r=r||{};var n=this._interval,o=this._extent,s=this._niceExtent,l=this._intervalPrecision,u=getScaleBreakHelper(),c=[];if(!n)return c;if(r.breakTicks==="only_break"&&u)return u.addBreaksToTicks(c,this._brkCtx.breaks,this._extent),c;var f=1e4;o[0]<s[0]&&(r.expandToNicedExtent?c.push({value:roundNumber(s[0]-n,l)}):c.push({value:o[0]}));for(var h=function(g,y){return Math.round((y-g)/n)},v=s[0];v<=s[1];){if(c.push({value:v}),v=roundNumber(v+n,l),this._brkCtx){var d=this._brkCtx.calcNiceTickMultiple(v,h);d>=0&&(v=roundNumber(v+d*n,l))}if(c.length>0&&v===c[c.length-1].value)break;if(c.length>f)return[]}var p=c.length?c[c.length-1].value:s[1];return o[1]>p&&(r.expandToNicedExtent?c.push({value:roundNumber(p+n,l)}):c.push({value:o[1]})),u&&u.pruneTicksByBreak(r.pruneByBreak,c,this._brkCtx.breaks,function(g){return g.value},this._interval,this._extent),r.breakTicks!=="none"&&u&&u.addBreaksToTicks(c,this._brkCtx.breaks,this._extent),c},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks({expandToNicedExtent:!0}),o=[],s=this.getExtent(),l=1;l<n.length;l++){var u=n[l],c=n[l-1];if(!(c.break||u.break)){for(var f=0,h=[],v=u.value-c.value,d=v/r,p=getIntervalPrecision(d);f<r-1;){var g=roundNumber(c.value+(f+1)*d,p);g>s[0]&&g<s[1]&&h.push(g),f++}var y=getScaleBreakHelper();y&&y.pruneTicksByBreak("auto",h,this._getNonTransBreaks(),function(_){return _},this._interval,s),o.push(h)}}return o},t.prototype._getNonTransBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},t.prototype.getLabel=function(r,n){if(r==null)return"";var o=n&&n.precision;o==null?o=getPrecision(r.value)||0:o==="auto"&&(o=this._intervalPrecision);var s=roundNumber(r.value,o,!0);return addCommas(s)},t.prototype.calcNiceTicks=function(r,n,o){r=r||5;var s=this._extent.slice(),l=this._getExtentSpanWithBreaks();if(isFinite(l)){l<0&&(l=-l,s.reverse(),this._innerSetExtent(s[0],s[1]),s=this._extent.slice());var u=intervalScaleNiceTicks(s,l,r,n,o);this._intervalPrecision=u.intervalPrecision,this._interval=u.interval,this._niceExtent=u.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent.slice();if(n[0]===n[1])if(n[0]!==0){var o=Math.abs(n[0]);r.fixMax||(n[1]+=o/2),n[0]-=o/2}else n[1]=1;var s=n[1]-n[0];isFinite(s)||(n[0]=0,n[1]=1),this._innerSetExtent(n[0],n[1]),n=this._extent.slice(),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var l=this._interval,u=this._intervalPrecision;r.fixMin||(n[0]=roundNumber(Math.floor(n[0]/l)*l,u)),r.fixMax||(n[1]=roundNumber(Math.ceil(n[1]/l)*l,u)),this._innerSetExtent(n[0],n[1])},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(a){return isArray$1(a)?supportFloat32Array?new Float32Array(a):a:new Float32ArrayCtor(a)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(a){return a.get("stack")||STACK_PREFIX+a.seriesIndex}function getAxisKey$1(a){return a.dim+a.index}function getLayoutOnAxis(a){var t=[],r=a.axis,n="axis0";if(r.type==="category"){for(var o=r.getBandWidth(),s=0;s<a.count;s++)t.push(defaults({bandWidth:o,axisKey:n,stackId:STACK_PREFIX+s},a));for(var l=doCalBarWidthAndOffset(t),u=[],s=0;s<a.count;s++){var c=l[n][STACK_PREFIX+s];c.offsetCenter=c.offset+c.width/2,u.push(c)}return u}}function prepareLayoutBarSeries(a,t){var r=[];return t.eachSeriesByType(a,function(n){isOnCartesian(n)&&r.push(n)}),r}function getValueAxesMinGaps(a){var t={};each$f(a,function(c){var f=c.coordinateSystem,h=f.getBaseAxis();if(!(h.type!=="time"&&h.type!=="value"))for(var v=c.getData(),d=h.dim+"_"+h.index,p=v.getDimensionIndex(v.mapDimension(h.dim)),g=v.getStore(),y=0,_=g.count();y<_;++y){var S=g.get(p,y);t[d]?t[d].push(S):t[d]=[S]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];if(o){o.sort(function(c,f){return c-f});for(var s=null,l=1;l<o.length;++l){var u=o[l]-o[l-1];u>0&&(s=s===null?u:Math.min(s,u))}r[n]=s}}return r}function makeColumnLayout(a){var t=getValueAxesMinGaps(a),r=[];return each$f(a,function(n){var o=n.coordinateSystem,s=o.getBaseAxis(),l=s.getExtent(),u;if(s.type==="category")u=s.getBandWidth();else if(s.type==="value"||s.type==="time"){var c=s.dim+"_"+s.index,f=t[c],h=Math.abs(l[1]-l[0]),v=s.scale.getExtent(),d=Math.abs(v[1]-v[0]);u=f?h/d*f:h}else{var p=n.getData();u=Math.abs(l[1]-l[0])/p.count()}var g=parsePercent(n.get("barWidth"),u),y=parsePercent(n.get("barMaxWidth"),u),_=parsePercent(n.get("barMinWidth")||(isInLargeMode(n)?.5:1),u),S=n.get("barGap"),x=n.get("barCategoryGap"),T=n.get("defaultBarGap");r.push({bandWidth:u,barWidth:g,barMaxWidth:y,barMinWidth:_,barGap:S,barCategoryGap:x,defaultBarGap:T,axisKey:getAxisKey$1(s),stackId:getSeriesStackId$1(n)})}),doCalBarWidthAndOffset(r)}function doCalBarWidthAndOffset(a){var t={};each$f(a,function(n,o){var s=n.axisKey,l=n.bandWidth,u=t[s]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:null,gap:n.defaultBarGap||0,stacks:{}},c=u.stacks;t[s]=u;var f=n.stackId;c[f]||u.autoWidthCount++,c[f]=c[f]||{width:0,maxWidth:0};var h=n.barWidth;h&&!c[f].width&&(c[f].width=h,h=Math.min(u.remainedWidth,h),u.remainedWidth-=h);var v=n.barMaxWidth;v&&(c[f].maxWidth=v);var d=n.barMinWidth;d&&(c[f].minWidth=d);var p=n.barGap;p!=null&&(u.gap=p);var g=n.barCategoryGap;g!=null&&(u.categoryGap=g)});var r={};return each$f(t,function(n,o){r[o]={};var s=n.stacks,l=n.bandWidth,u=n.categoryGap;if(u==null){var c=keys(s).length;u=Math.max(35-c*4,15)+"%"}var f=parsePercent(u,l),h=parsePercent(n.gap,1),v=n.remainedWidth,d=n.autoWidthCount,p=(v-f)/(d+(d-1)*h);p=Math.max(p,0),each$f(s,function(S){var x=S.maxWidth,T=S.minWidth;if(S.width){var b=S.width;x&&(b=Math.min(b,x)),T&&(b=Math.max(b,T)),S.width=b,v-=b+h*b,d--}else{var b=p;x&&x<b&&(b=Math.min(x,v)),T&&T>b&&(b=T),b!==p&&(S.width=b,v-=b+h*b,d--)}}),p=(v-f)/(d+(d-1)*h),p=Math.max(p,0);var g=0,y;each$f(s,function(S,x){S.width||(S.width=p),y=S,g+=S.width*(1+h)}),y&&(g-=y.width*h);var _=-g/2;each$f(s,function(S,x){r[o][x]=r[o][x]||{bandWidth:l,offset:_,width:S.width},_+=S.width*(1+h)})}),r}function retrieveColumnLayout(a,t,r){if(a&&t){var n=a[getAxisKey$1(t)];return n!=null&&r!=null?n[getSeriesStackId$1(r)]:n}}function layout$2(a,t){var r=prepareLayoutBarSeries(a,t),n=makeColumnLayout(r);each$f(r,function(o){var s=o.getData(),l=o.coordinateSystem,u=l.getBaseAxis(),c=getSeriesStackId$1(o),f=n[getAxisKey$1(u)][c],h=f.offset,v=f.width;s.setLayout({bandWidth:f.bandWidth,offset:h,size:v})})}function createProgressiveLayout(a){return{seriesType:a,plan:createRenderPlanner(),reset:function(t){if(isOnCartesian(t)){var r=t.getData(),n=t.coordinateSystem,o=n.getBaseAxis(),s=n.getOtherAxis(o),l=r.getDimensionIndex(r.mapDimension(s.dim)),u=r.getDimensionIndex(r.mapDimension(o.dim)),c=t.get("showBackground",!0),f=r.mapDimension(s.dim),h=r.getCalculationInfo("stackResultDimension"),v=isDimensionStacked(r,f)&&!!r.getCalculationInfo("stackedOnSeries"),d=s.isHorizontal(),p=getValueAxisStart(o,s),g=isInLargeMode(t),y=t.get("barMinHeight")||0,_=h&&r.getDimensionIndex(h),S=r.getLayout("size"),x=r.getLayout("offset");return{progress:function(T,b){for(var C=T.count,w=g&&createFloat32Array(C*3),M=g&&c&&createFloat32Array(C*3),P=g&&createFloat32Array(C),L=n.master.getRect(),E=d?L.width:L.height,I,R=b.getStore(),D=0;(I=T.next())!=null;){var O=R.get(v?_:l,I),$=R.get(u,I),N=p,V=void 0;v&&(V=+O-R.get(l,I));var B=void 0,F=void 0,G=void 0,z=void 0;if(d){var H=n.dataToPoint([O,$]);if(v){var U=n.dataToPoint([V,$]);N=U[0]}B=N,F=H[1]+x,G=H[0]-N,z=S,Math.abs(G)<y&&(G=(G<0?-1:1)*y)}else{var H=n.dataToPoint([$,O]);if(v){var U=n.dataToPoint([$,V]);N=U[1]}B=H[0]+x,F=N,G=S,z=H[1]-N,Math.abs(z)<y&&(z=(z<=0?-1:1)*y)}g?(w[D]=B,w[D+1]=F,w[D+2]=d?G:z,M&&(M[D]=d?L.x:B,M[D+1]=d?F:L.y,M[D+2]=E),P[I]=I):b.setItemLayout(I,{x:B,y:F,width:G,height:z}),D+=3}g&&b.setLayout({largePoints:w,largeDataIndices:P,largeBackgroundPoints:M,valueAxisHorizontal:d})}}}}}}function isOnCartesian(a){return a.coordinateSystem&&a.coordinateSystem.type==="cartesian2d"}function isInLargeMode(a){return a.pipelineContext&&a.pipelineContext.large}function getValueAxisStart(a,t){var r=t.model.get("startValue");return r||(r=0),t.toGlobalCoord(t.dataToCoord(t.type==="log"?r>0?r:1:r))}var bisect=function(a,t,r,n){for(;r<n;){var o=r+n>>>1;a[o][1]<t?r=o+1:n=o}return r},TimeScale=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return format(r.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,o){var s=this.getSetting("useUTC"),l=this.getSetting("locale");return leveledFormat(r,n,o,l,s)},t.prototype.getTicks=function(r){r=r||{};var n=this._interval,o=this._extent,s=getScaleBreakHelper(),l=[];if(!n)return l;var u=this.getSetting("useUTC");if(s&&r.breakTicks==="only_break")return getScaleBreakHelper().addBreaksToTicks(l,this._brkCtx.breaks,this._extent),l;var c=getUnitFromValue(o[1],u);l.push({value:o[0],time:{level:0,upperTimeUnit:c,lowerTimeUnit:c}});var f=getIntervalTicks(this._minLevelUnit,this._approxInterval,u,o,this._getExtentSpanWithBreaks(),this._brkCtx);l=l.concat(f);var h=getUnitFromValue(o[1],u);l.push({value:o[1],time:{level:0,upperTimeUnit:h,lowerTimeUnit:h}});var v=this.getSetting("useUTC"),d=primaryTimeUnits.length-1,p=0;return each$f(l,function(g){d=Math.min(d,indexOf(primaryTimeUnits,g.time.upperTimeUnit)),p=Math.max(p,g.time.level)}),s&&getScaleBreakHelper().pruneTicksByBreak(r.pruneByBreak,l,this._brkCtx.breaks,function(g){return g.value},this._approxInterval,this._extent),s&&r.breakTicks!=="none"&&getScaleBreakHelper().addBreaksToTicks(l,this._brkCtx.breaks,this._extent,function(g){for(var y=Math.max(indexOf(primaryTimeUnits,getUnitFromValue(g.vmin,v)),indexOf(primaryTimeUnits,getUnitFromValue(g.vmax,v))),_=0,S=0;S<primaryTimeUnits.length;S++)if(!isPrimaryUnitValueAndGreaterSame(primaryTimeUnits[S],g.vmin,g.vmax,v)){_=S;break}var x=Math.min(_,d),T=Math.max(x,y);return{level:p,lowerTimeUnit:primaryTimeUnits[T],upperTimeUnit:primaryTimeUnits[x]}}),l},t.prototype.calcNiceExtent=function(r){var n=this.getExtent();if(n[0]===n[1]&&(n[0]-=ONE_DAY,n[1]+=ONE_DAY),n[1]===-1/0&&n[0]===1/0){var o=new Date;n[1]=+new Date(o.getFullYear(),o.getMonth(),o.getDate()),n[0]=n[1]-ONE_DAY}this._innerSetExtent(n[0],n[1]),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,o){r=r||10;var s=this._getExtentSpanWithBreaks();this._approxInterval=s/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),o!=null&&this._approxInterval>o&&(this._approxInterval=o);var l=scaleIntervals.length,u=Math.min(bisect(scaleIntervals,this._approxInterval,0,l),l-1);this._interval=scaleIntervals[u][1],this._intervalPrecision=getIntervalPrecision(this._interval),this._minLevelUnit=scaleIntervals[Math.max(u-1,0)][0]},t.prototype.parse=function(r){return isNumber(r)?r:+parseDate(r)},t.prototype.contain=function(r){return contain$1(r,this._extent)},t.prototype.normalize=function(r){return this._calculator.normalize(r,this._extent)},t.prototype.scale=function(r){return this._calculator.scale(r,this._extent)},t.type="time",t}(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isPrimaryUnitValueAndGreaterSame(a,t,r,n){return roundTime(new Date(t),a,n).getTime()===roundTime(new Date(r),a,n).getTime()}function getDateInterval(a,t){return a/=ONE_DAY,a>16?16:a>7.5?7:a>3.5?4:a>1.5?2:1}function getMonthInterval(a){var t=30*ONE_DAY;return a/=t,a>6?6:a>3?3:a>2?2:1}function getHourInterval(a){return a/=ONE_HOUR,a>12?12:a>6?6:a>3.5?4:a>2?2:1}function getMinutesAndSecondsInterval(a,t){return a/=t?ONE_MINUTE:ONE_SECOND,a>30?30:a>20?20:a>15?15:a>10?10:a>5?5:a>2?2:1}function getMillisecondsInterval(a){return nice(a)}function getFirstTimestampOfUnit(a,t,r){var n=Math.max(0,indexOf(primaryTimeUnits,t)-1);return roundTime(new Date(a),primaryTimeUnits[n],r).getTime()}function createEstimateNiceMultiple(a,t){var r=new Date(0);r[a](1);var n=r.getTime();r[a](1+t);var o=r.getTime()-n;return function(s,l){return Math.max(0,Math.round((l-s)/o))}}function getIntervalTicks(a,t,r,n,o,s){var l=1e4,u=timeUnits,c=0;function f(D,O,$,N,V,B,F){for(var G=createEstimateNiceMultiple(V,D),z=O,H=new Date(z);z<$&&z<=n[1]&&(F.push({value:z}),!(c++>l));)if(H[V](H[N]()+D),z=H.getTime(),s){var U=s.calcNiceTickMultiple(z,G);U>0&&(H[V](H[N]()+U*D),z=H.getTime())}F.push({value:z,notAdd:!0})}function h(D,O,$){var N=[],V=!O.length;if(!isPrimaryUnitValueAndGreaterSame(getPrimaryTimeUnit(D),n[0],n[1],r)){V&&(O=[{value:getFirstTimestampOfUnit(n[0],D,r)},{value:n[1]}]);for(var B=0;B<O.length-1;B++){var F=O[B].value,G=O[B+1].value;if(F!==G){var z=void 0,H=void 0,U=void 0,Y=!1;switch(D){case"year":z=Math.max(1,Math.round(t/ONE_DAY/365)),H=fullYearGetterName(r),U=fullYearSetterName(r);break;case"half-year":case"quarter":case"month":z=getMonthInterval(t),H=monthGetterName(r),U=monthSetterName(r);break;case"week":case"half-week":case"day":z=getDateInterval(t),H=dateGetterName(r),U=dateSetterName(r),Y=!0;break;case"half-day":case"quarter-day":case"hour":z=getHourInterval(t),H=hoursGetterName(r),U=hoursSetterName(r);break;case"minute":z=getMinutesAndSecondsInterval(t,!0),H=minutesGetterName(r),U=minutesSetterName(r);break;case"second":z=getMinutesAndSecondsInterval(t,!1),H=secondsGetterName(r),U=secondsSetterName(r);break;case"millisecond":z=getMillisecondsInterval(t),H=millisecondsGetterName(r),U=millisecondsSetterName(r);break}G>=n[0]&&F<=n[1]&&f(z,F,G,H,U,Y,N),D==="year"&&$.length>1&&B===0&&$.unshift({value:$[0].value-z})}}for(var B=0;B<N.length;B++)$.push(N[B])}}for(var v=[],d=[],p=0,g=0,y=0;y<u.length;++y){var _=getPrimaryTimeUnit(u[y]);if(isPrimaryTimeUnit(u[y])){h(u[y],v[v.length-1]||[],d);var S=u[y+1]?getPrimaryTimeUnit(u[y+1]):null;if(_!==S){if(d.length){g=p,d.sort(function(D,O){return D.value-O.value});for(var x=[],T=0;T<d.length;++T){var b=d[T].value;(T===0||d[T-1].value!==b)&&(x.push(d[T]),b>=n[0]&&b<=n[1]&&p++)}var C=o/t;if(p>C*1.5&&g>C/1.5||(v.push(x),p>C||a===u[y]))break}d=[]}}}for(var w=filter(map$1(v,function(D){return filter(D,function(O){return O.value>=n[0]&&O.value<=n[1]&&!O.notAdd})}),function(D){return D.length>0}),M=[],P=w.length-1,y=0;y<w.length;++y)for(var L=w[y],E=0;E<L.length;++E){var I=getUnitFromValue(L[E].value,r);M.push({value:L[E].value,time:{level:P-y,upperTimeUnit:I,lowerTimeUnit:I}})}M.sort(function(D,O){return D.value-O.value});for(var R=[],y=0;y<M.length;++y)(y===0||M[y].value!==M[y-1].value)&&R.push(M[y]);return R}Scale.registerClass(TimeScale);var fixRound=round$4,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog=Math.log,LogScale=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new IntervalScale,r}return t.prototype.getTicks=function(r){r=r||{};var n=this._extent.slice(),o=this._originalScale.getExtent(),s=a.prototype.getTicks.call(this,r),l=this.base,u=this._originalScale._innerGetBreaks(),c=getScaleBreakHelper();return map$1(s,function(f){var h=f.value,v=null,d=mathPow$1(l,h);h===n[0]&&this._fixMin?v=o[0]:h===n[1]&&this._fixMax&&(v=o[1]);var p;if(c){var g=c.getTicksLogTransformBreak(f,l,u,fixRoundingError);p=g.vBreak,v==null&&(v=g.brkRoundingCriterion)}return v!=null&&(d=fixRoundingError(d,v)),{value:d,break:p}},this)},t.prototype._getNonTransBreaks=function(){return this._originalScale._innerGetBreaks()},t.prototype.setExtent=function(r,n){this._originalScale.setExtent(r,n);var o=logTransform(this.base,[r,n]);a.prototype.setExtent.call(this,o[0],o[1])},t.prototype.getExtent=function(){var r=this.base,n=a.prototype.getExtent.call(this);n[0]=mathPow$1(r,n[0]),n[1]=mathPow$1(r,n[1]);var o=this._originalScale.getExtent();return this._fixMin&&(n[0]=fixRoundingError(n[0],o[0])),this._fixMax&&(n[1]=fixRoundingError(n[1],o[1])),n},t.prototype.unionExtentFromData=function(r,n){this._originalScale.unionExtentFromData(r,n);var o=logTransform(this.base,r.getApproximateExtent(n),!0);this._innerUnionExtent(o)},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent.slice(),o=this._getExtentSpanWithBreaks();if(!(!isFinite(o)||o<=0)){var s=quantity(o),l=r/o*s;for(l<=.5&&(s*=10);!isNaN(s)&&Math.abs(s)<1&&Math.abs(s)>0;)s*=10;var u=[fixRound(mathCeil$1(n[0]/s)*s),fixRound(mathFloor$1(n[1]/s)*s)];this._interval=s,this._intervalPrecision=getIntervalPrecision(s),this._niceExtent=u}},t.prototype.calcNiceExtent=function(r){a.prototype.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.contain=function(r){return r=mathLog(r)/mathLog(this.base),a.prototype.contain.call(this,r)},t.prototype.normalize=function(r){return r=mathLog(r)/mathLog(this.base),a.prototype.normalize.call(this,r)},t.prototype.scale=function(r){return r=a.prototype.scale.call(this,r),mathPow$1(this.base,r)},t.prototype.setBreaksFromOption=function(r){var n=getScaleBreakHelper();if(n){var o=n.logarithmicParseBreaksFromOption(r,this.base,bind$1(this.parse,this)),s=o.parsedOriginal,l=o.parsedLogged;this._originalScale._innerSetBreak(s),this._innerSetBreak(l)}},t.type="log",t}(IntervalScale);function fixRoundingError(a,t){return fixRound(a,getPrecision(t))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=function(){function a(t,r,n){this._prepareParams(t,r,n)}return a.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var o=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var s=r.get("min",!0);s==null&&(s=r.get("startValue",!0));var l=this._modelMinRaw=s;isFunction(l)?this._modelMinNum=parseAxisModelMinMax(t,l({min:n[0],max:n[1]})):l!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(t,l));var u=this._modelMaxRaw=r.get("max",!0);if(isFunction(u)?this._modelMaxNum=parseAxisModelMinMax(t,u({min:n[0],max:n[1]})):u!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(t,u)),o)this._axisDataLen=r.getCategories().length;else{var c=r.get("boundaryGap"),f=isArray$1(c)?c:[c||0,c||0];typeof f[0]=="boolean"||typeof f[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(f[0],1),parsePercent$1(f[1],1)]}},a.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,o=this._axisDataLen,s=this._boundaryGapInner,l=t?null:n-r||Math.abs(r),u=this._modelMinRaw==="dataMin"?r:this._modelMinNum,c=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,f=u!=null,h=c!=null;u==null&&(u=t?o?0:NaN:r-s[0]*l),c==null&&(c=t?o?o-1:NaN:n+s[1]*l),(u==null||!isFinite(u))&&(u=NaN),(c==null||!isFinite(c))&&(c=NaN);var v=eqNaN(u)||eqNaN(c)||t&&!o;this._needCrossZero&&(u>0&&c>0&&!f&&(u=0),u<0&&c<0&&!h&&(c=0));var d=this._determinedMin,p=this._determinedMax;return d!=null&&(u=d,f=!0),p!=null&&(c=p,h=!0),{min:u,max:c,minFixed:f,maxFixed:h,isBlank:v}},a.prototype.modifyDataMinMax=function(t,r){this[DATA_MIN_MAX_ATTR[t]]=r},a.prototype.setDeterminedMinMax=function(t,r){var n=DETERMINED_MIN_MAX_ATTR[t];this[n]=r},a.prototype.freeze=function(){this.frozen=!0},a}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(a,t,r){var n=a.rawExtentInfo;return n||(n=new ScaleRawExtentInfo(a,t,r),a.rawExtentInfo=n,n)}function parseAxisModelMinMax(a,t){return t==null?null:eqNaN(t)?NaN:a.parse(t)}function getScaleExtent(a,t){var r=a.type,n=ensureScaleRawExtentInfo(a,t,a.getExtent()).calculate();a.setBlank(n.isBlank);var o=n.min,s=n.max,l=t.ecModel;if(l&&r==="time"){var u=prepareLayoutBarSeries("bar",l),c=!1;if(each$f(u,function(v){c=c||v.getBaseAxis()===t.axis}),c){var f=makeColumnLayout(u),h=adjustScaleForOverflow(o,s,t,f);o=h.min,s=h.max}}return{extent:[o,s],fixMin:n.minFixed,fixMax:n.maxFixed}}function adjustScaleForOverflow(a,t,r,n){var o=r.axis.getExtent(),s=Math.abs(o[1]-o[0]),l=retrieveColumnLayout(n,r.axis);if(l===void 0)return{min:a,max:t};var u=1/0;each$f(l,function(p){u=Math.min(p.offset,u)});var c=-1/0;each$f(l,function(p){c=Math.max(p.offset+p.width,c)}),u=Math.abs(u),c=Math.abs(c);var f=u+c,h=t-a,v=1-(u+c)/s,d=h/v-h;return t+=d*(c/f),a-=d*(u/f),{min:a,max:t}}function niceScaleExtent(a,t){var r=t,n=getScaleExtent(a,r),o=n.extent,s=r.get("splitNumber");a instanceof LogScale&&(a.base=r.get("logBase"));var l=a.type,u=r.get("interval"),c=l==="interval"||l==="time";a.setBreaksFromOption(retrieveAxisBreaksOption(r)),a.setExtent(o[0],o[1]),a.calcNiceExtent({splitNumber:s,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:c?r.get("minInterval"):null,maxInterval:c?r.get("maxInterval"):null}),u!=null&&a.setInterval&&a.setInterval(u)}function createScaleByModel$1(a,t){if(t=t||a.get("type"),t)switch(t){case"category":return new OrdinalScale({ordinalMeta:a.getOrdinalMeta?a.getOrdinalMeta():a.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new(Scale.getClass(t)||IntervalScale)}}function ifAxisCrossZero(a){var t=a.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function makeLabelFormatter(a){var t=a.getLabelModel().get("formatter");if(a.type==="time"){var r=parseTimeAxisLabelFormatter(t);return function(o,s){return a.scale.getFormattedLabel(o,s,r)}}else{if(isString(t))return function(o){var s=a.scale.getLabel(o),l=t.replace("{value}",s??"");return l};if(isFunction(t)){if(a.type==="category")return function(o,s){return t(getAxisRawValue(a,o),o.value-a.scale.getExtent()[0],null)};var n=getScaleBreakHelper();return function(o,s){var l=null;return n&&(l=n.makeAxisLabelFormatterParamBreak(l,o.break)),t(getAxisRawValue(a,o),s,l)}}else return function(o){return a.scale.getLabel(o)}}}function getAxisRawValue(a,t){return a.type==="category"?a.scale.getLabel(t):t.value}function getOptionCategoryInterval(a){var t=a.get("interval");return t??"auto"}function shouldShowAllLabels(a){return a.type==="category"&&getOptionCategoryInterval(a.getLabelModel())===0}function getDataDimensionsOnAxis(a,t){var r={};return each$f(a.mapDimensionsAll(t),function(n){r[getStackedDimension(a,n)]=!0}),keys(r)}function unionAxisExtentFromData(a,t,r){t&&each$f(getDataDimensionsOnAxis(t,r),function(n){var o=t.getApproximateExtent(n);o[0]<a[0]&&(a[0]=o[0]),o[1]>a[1]&&(a[1]=o[1])})}function isNameLocationCenter(a){return a==="middle"||a==="center"}function shouldAxisShow(a){return a.getShallow("show")}function retrieveAxisBreaksOption(a){var t=a.get("breaks",!0);if(t!=null)return!getScaleBreakHelper()||!isSupportAxisBreak(a.axis)?void 0:t}function isSupportAxisBreak(a){return(a.dim==="x"||a.dim==="y"||a.dim==="z"||a.dim==="single")&&a.type!=="category"}var AxisModelCommonMixin=function(){function a(){}return a.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},a.prototype.getCoordSysModel=function(){},a}(),EPSILON=1e-8;function isAroundEqual(a,t){return Math.abs(a-t)<EPSILON}function contain(a,t,r){var n=0,o=a[0];if(!o)return!1;for(var s=1;s<a.length;s++){var l=a[s];n+=windingLine(o[0],o[1],l[0],l[1],t,r),o=l}var u=a[0];return(!isAroundEqual(o[0],u[0])||!isAroundEqual(o[1],u[1]))&&(n+=windingLine(o[0],o[1],u[0],u[1],t,r)),n!==0}var TMP_TRANSFORM=[];function transformPoints(a,t){for(var r=0;r<a.length;r++)applyTransform$1(a[r],a[r],t)}function updateBBoxFromPoints(a,t,r,n){for(var o=0;o<a.length;o++){var s=a[o];n&&(s=n.project(s)),s&&isFinite(s[0])&&isFinite(s[1])&&(min$1(t,t,s),max$1(r,r,s))}}function centroid$1(a){for(var t=0,r=0,n=0,o=a.length,s=a[o-1][0],l=a[o-1][1],u=0;u<o;u++){var c=a[u][0],f=a[u][1],h=s*f-c*l;t+=h,r+=(s+c)*h,n+=(l+f)*h,s=c,l=f}return t?[r/t/3,n/t/3,t]:[a[0][0]||0,a[0][1]||0]}var Region=function(){function a(t){this.name=t}return a.prototype.setCenter=function(t){this._center=t},a.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},a}(),GeoJSONPolygonGeometry=function(){function a(t,r){this.type="polygon",this.exterior=t,this.interiors=r}return a}(),GeoJSONLineStringGeometry=function(){function a(t){this.type="linestring",this.points=t}return a}(),GeoJSONRegion=function(a){__extends(t,a);function t(r,n,o){var s=a.call(this,r)||this;return s.type="geoJSON",s.geometries=n,s._center=o&&[o[0],o[1]],s}return t.prototype.calcCenter=function(){for(var r=this.geometries,n,o=0,s=0;s<r.length;s++){var l=r[s],u=l.exterior,c=u&&u.length;c>o&&(n=l,o=c)}if(n)return centroid$1(n.exterior);var f=this.getBoundingRect();return[f.x+f.width/2,f.y+f.height/2]},t.prototype.getBoundingRect=function(r){var n=this._rect;if(n&&!r)return n;var o=[1/0,1/0],s=[-1/0,-1/0],l=this.geometries;return each$f(l,function(u){u.type==="polygon"?updateBBoxFromPoints(u.exterior,o,s,r):each$f(u.points,function(c){updateBBoxFromPoints(c,o,s,r)})}),isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])||(o[0]=o[1]=s[0]=s[1]=0),n=new BoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),r||(this._rect=n),n},t.prototype.contain=function(r){var n=this.getBoundingRect(),o=this.geometries;if(!n.contain(r[0],r[1]))return!1;e:for(var s=0,l=o.length;s<l;s++){var u=o[s];if(u.type==="polygon"){var c=u.exterior,f=u.interiors;if(contain(c,r[0],r[1])){for(var h=0;h<(f?f.length:0);h++)if(contain(f[h],r[0],r[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(r,n,o,s){var l=this.getBoundingRect(),u=l.width/l.height;o?s||(s=o/u):o=u*s;for(var c=new BoundingRect(r,n,o,s),f=l.calculateTransform(c),h=this.geometries,v=0;v<h.length;v++){var d=h[v];d.type==="polygon"?(transformPoints(d.exterior,f),each$f(d.interiors,function(p){transformPoints(p,f)})):each$f(d.points,function(p){transformPoints(p,f)})}l=this._rect,l.copy(c),this._center=[l.x+l.width/2,l.y+l.height/2]},t.prototype.cloneShallow=function(r){r==null&&(r=this.name);var n=new t(r,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},t}(Region),GeoSVGRegion=function(a){__extends(t,a);function t(r,n){var o=a.call(this,r)||this;return o.type="geoSVG",o._elOnlyForCalculate=n,o}return t.prototype.calcCenter=function(){for(var r=this._elOnlyForCalculate,n=r.getBoundingRect(),o=[n.x+n.width/2,n.y+n.height/2],s=identity(TMP_TRANSFORM),l=r;l&&!l.isGeoSVGGraphicRoot;)mul(s,l.getLocalTransform(),s),l=l.parent;return invert(s,s),applyTransform$1(o,o,s),o},t}(Region);function decode(a){if(!a.UTF8Encoding)return a;var t=a,r=t.UTF8Scale;r==null&&(r=1024);var n=t.features;return each$f(n,function(o){var s=o.geometry,l=s.encodeOffsets,u=s.coordinates;if(l)switch(s.type){case"LineString":s.coordinates=decodeRing(u,l,r);break;case"Polygon":decodeRings(u,l,r);break;case"MultiLineString":decodeRings(u,l,r);break;case"MultiPolygon":each$f(u,function(c,f){return decodeRings(c,l[f],r)})}}),t.UTF8Encoding=!1,t}function decodeRings(a,t,r){for(var n=0;n<a.length;n++)a[n]=decodeRing(a[n],t[n],r)}function decodeRing(a,t,r){for(var n=[],o=t[0],s=t[1],l=0;l<a.length;l+=2){var u=a.charCodeAt(l)-64,c=a.charCodeAt(l+1)-64;u=u>>1^-(u&1),c=c>>1^-(c&1),u+=o,c+=s,o=u,s=c,n.push([u/r,c/r])}return n}function parseGeoJSON(a,t){return a=decode(a),map$1(filter(a.features,function(r){return r.geometry&&r.properties&&r.geometry.coordinates.length>0}),function(r){var n=r.properties,o=r.geometry,s=[];switch(o.type){case"Polygon":var l=o.coordinates;s.push(new GeoJSONPolygonGeometry(l[0],l.slice(1)));break;case"MultiPolygon":each$f(o.coordinates,function(c){c[0]&&s.push(new GeoJSONPolygonGeometry(c[0],c.slice(1)))});break;case"LineString":s.push(new GeoJSONLineStringGeometry([o.coordinates]));break;case"MultiLineString":s.push(new GeoJSONLineStringGeometry(o.coordinates))}var u=new GeoJSONRegion(n[t||"name"],s,n.cp);return u.properties=n,u})}var modelInner=makeInner(),axisInner=makeInner(),AxisTickLabelComputingKind={estimate:1,determine:2};function createAxisLabelsComputingContext(a){return{out:{noPxChangeTryDetermine:[]},kind:a}}function tickValuesToNumbers(a,t){var r=map$1(t,function(n){return a.scale.parse(n)});return a.type==="time"&&r.length>0&&(r.sort(),r.unshift(r[0]),r.push(r[r.length-1])),r}function createAxisLabels(a,t){var r=a.getLabelModel().get("customValues");if(r){var n=makeLabelFormatter(a),o=a.scale.getExtent(),s=tickValuesToNumbers(a,r),l=filter(s,function(u){return u>=o[0]&&u<=o[1]});return{labels:map$1(l,function(u){var c={value:u};return{formattedLabel:n(c),rawLabel:a.scale.getLabel(c),tickValue:u,time:void 0,break:void 0}})}}return a.type==="category"?makeCategoryLabels(a,t):makeRealNumberLabels(a)}function createAxisTicks(a,t,r){var n=a.getTickModel().get("customValues");if(n){var o=a.scale.getExtent(),s=tickValuesToNumbers(a,n);return{ticks:filter(s,function(l){return l>=o[0]&&l<=o[1]})}}return a.type==="category"?makeCategoryTicks(a,t):{ticks:map$1(a.scale.getTicks(r),function(l){return l.value})}}function makeCategoryLabels(a,t){var r=a.getLabelModel(),n=makeCategoryLabelsActually(a,r,t);return!r.get("show")||a.scale.isBlank()?{labels:[]}:n}function makeCategoryLabelsActually(a,t,r){var n=ensureCategoryLabelCache(a),o=getOptionCategoryInterval(t),s=r.kind===AxisTickLabelComputingKind.estimate;if(!s){var l=axisCacheGet(n,o);if(l)return l}var u,c;isFunction(o)?u=makeLabelsByCustomizedCategoryInterval(a,o):(c=o==="auto"?makeAutoCategoryInterval(a,r):o,u=makeLabelsByNumericCategoryInterval(a,c));var f={labels:u,labelCategoryInterval:c};return s?r.out.noPxChangeTryDetermine.push(function(){return axisCacheSet(n,o,f),!0}):axisCacheSet(n,o,f),f}function makeCategoryTicks(a,t){var r=ensureCategoryTickCache(a),n=getOptionCategoryInterval(t),o=axisCacheGet(r,n);if(o)return o;var s,l;if((!t.get("show")||a.scale.isBlank())&&(s=[]),isFunction(n))s=makeLabelsByCustomizedCategoryInterval(a,n,!0);else if(n==="auto"){var u=makeCategoryLabelsActually(a,a.getLabelModel(),createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine));l=u.labelCategoryInterval,s=map$1(u.labels,function(c){return c.tickValue})}else l=n,s=makeLabelsByNumericCategoryInterval(a,l,!0);return axisCacheSet(r,n,{ticks:s,tickCategoryInterval:l})}function makeRealNumberLabels(a){var t=a.scale.getTicks(),r=makeLabelFormatter(a);return{labels:map$1(t,function(n,o){return{formattedLabel:r(n,o),rawLabel:a.scale.getLabel(n),tickValue:n.value,time:n.time,break:n.break}})}}var ensureCategoryTickCache=initAxisCacheMethod("axisTick"),ensureCategoryLabelCache=initAxisCacheMethod("axisLabel");function initAxisCacheMethod(a){return function(r){return axisInner(r)[a]||(axisInner(r)[a]={list:[]})}}function axisCacheGet(a,t){for(var r=0;r<a.list.length;r++)if(a.list[r].key===t)return a.list[r].value}function axisCacheSet(a,t,r){return a.list.push({key:t,value:r}),r}function makeAutoCategoryInterval(a,t){if(t.kind===AxisTickLabelComputingKind.estimate){var r=a.calculateCategoryInterval(t);return t.out.noPxChangeTryDetermine.push(function(){return axisInner(a).autoInterval=r,!0}),r}var n=axisInner(a).autoInterval;return n??(axisInner(a).autoInterval=a.calculateCategoryInterval(t))}function calculateCategoryInterval(a,t){var r=t.kind,n=fetchAutoCategoryIntervalCalculationParams(a),o=makeLabelFormatter(a),s=(n.axisRotate-n.labelRotate)/180*Math.PI,l=a.scale,u=l.getExtent(),c=l.count();if(u[1]-u[0]<1)return 0;var f=1,h=40;c>h&&(f=Math.max(1,Math.floor(c/h)));for(var v=u[0],d=a.dataToCoord(v+1)-a.dataToCoord(v),p=Math.abs(d*Math.cos(s)),g=Math.abs(d*Math.sin(s)),y=0,_=0;v<=u[1];v+=f){var S=0,x=0,T=getBoundingRect(o({value:v}),n.font,"center","top");S=T.width*1.3,x=T.height*1.3,y=Math.max(y,S,7),_=Math.max(_,x,7)}var b=y/p,C=_/g;isNaN(b)&&(b=1/0),isNaN(C)&&(C=1/0);var w=Math.max(0,Math.floor(Math.min(b,C)));if(r===AxisTickLabelComputingKind.estimate)return t.out.noPxChangeTryDetermine.push(bind$1(calculateCategoryIntervalTryDetermine,null,a,w,c)),w;var M=calculateCategoryIntervalDealCache(a,w,c);return M??w}function calculateCategoryIntervalTryDetermine(a,t,r){return calculateCategoryIntervalDealCache(a,t,r)==null}function calculateCategoryIntervalDealCache(a,t,r){var n=modelInner(a.model),o=a.getExtent(),s=n.lastAutoInterval,l=n.lastTickCount;if(s!=null&&l!=null&&Math.abs(s-t)<=1&&Math.abs(l-r)<=1&&s>t&&n.axisExtent0===o[0]&&n.axisExtent1===o[1])return s;n.lastTickCount=r,n.lastAutoInterval=t,n.axisExtent0=o[0],n.axisExtent1=o[1]}function fetchAutoCategoryIntervalCalculationParams(a){var t=a.getLabelModel();return{axisRotate:a.getRotate?a.getRotate():a.isHorizontal&&!a.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function makeLabelsByNumericCategoryInterval(a,t,r){var n=makeLabelFormatter(a),o=a.scale,s=o.getExtent(),l=a.getLabelModel(),u=[],c=Math.max((t||0)+1,1),f=s[0],h=o.count();f!==0&&c>1&&h/c>2&&(f=Math.round(Math.ceil(f/c)*c));var v=shouldShowAllLabels(a),d=l.get("showMinLabel")||v,p=l.get("showMaxLabel")||v;d&&f!==s[0]&&y(s[0]);for(var g=f;g<=s[1];g+=c)y(g);p&&g-c!==s[1]&&y(s[1]);function y(_){var S={value:_};u.push(r?_:{formattedLabel:n(S),rawLabel:o.getLabel(S),tickValue:_,time:void 0,break:void 0})}return u}function makeLabelsByCustomizedCategoryInterval(a,t,r){var n=a.scale,o=makeLabelFormatter(a),s=[];return each$f(n.getTicks(),function(l){var u=n.getLabel(l),c=l.value;t(l.value,u)&&s.push(r?c:{formattedLabel:o(l),rawLabel:u,tickValue:c,time:void 0,break:void 0})}),s}var NORMALIZED_EXTENT=[0,1],Axis=function(){function a(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return a.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return t>=n&&t<=o},a.prototype.containData=function(t){return this.scale.contain(this.scale.parse(t))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.getPixelPrecision=function(t){return getPixelPrecision(t||this.scale.getExtent(),this._extent)},a.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},a.prototype.dataToCoord=function(t,r){var n=this._extent,o=this.scale;return t=o.normalize(o.parse(t)),this.onBand&&o.type==="ordinal"&&(n=n.slice(),fixExtentWithBands(n,o.count())),linearMap$2(t,NORMALIZED_EXTENT,n,r)},a.prototype.coordToData=function(t,r){var n=this._extent,o=this.scale;this.onBand&&o.type==="ordinal"&&(n=n.slice(),fixExtentWithBands(n,o.count()));var s=linearMap$2(t,n,NORMALIZED_EXTENT,r);return this.scale.scale(s)},a.prototype.pointToData=function(t,r){},a.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=createAxisTicks(this,r,{breakTicks:t.breakTicks,pruneByBreak:t.pruneByBreak}),o=n.ticks,s=map$1(o,function(u){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(u):u),tickValue:u}},this),l=r.get("alignWithLabel");return fixOnBandTicksCoords(this,s,l,t.clamp),s},a.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),o=map$1(n,function(s){return map$1(s,function(l){return{coord:this.dataToCoord(l),tickValue:l}},this)},this);return o},a.prototype.getViewLabels=function(t){return t=t||createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine),createAxisLabels(this,t).labels},a.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},a.prototype.getTickModel=function(){return this.model.getModel("axisTick")},a.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var o=Math.abs(t[1]-t[0]);return Math.abs(o)/n},a.prototype.calculateCategoryInterval=function(t){return t=t||createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine),calculateCategoryInterval(this,t)},a}();function fixExtentWithBands(a,t){var r=a[1]-a[0],n=t,o=r/n/2;a[0]+=o,a[1]-=o}function fixOnBandTicksCoords(a,t,r,n){var o=t.length;if(!a.onBand||r||!o)return;var s=a.getExtent(),l,u;if(o===1)t[0].coord=s[0],t[0].onBand=!0,l=t[1]={coord:s[1],tickValue:t[0].tickValue,onBand:!0};else{var c=t[o-1].tickValue-t[0].tickValue,f=(t[o-1].coord-t[0].coord)/c;each$f(t,function(p){p.coord-=f/2,p.onBand=!0});var h=a.scale.getExtent();u=1+h[1]-t[o-1].tickValue,l={coord:t[o-1].coord+f*u,tickValue:h[1]+1,onBand:!0},t.push(l)}var v=s[0]>s[1];d(t[0].coord,s[0])&&(n?t[0].coord=s[0]:t.shift()),n&&d(s[0],t[0].coord)&&t.unshift({coord:s[0],onBand:!0}),d(s[1],l.coord)&&(n?l.coord=s[1]:t.pop()),n&&d(l.coord,s[1])&&t.push({coord:s[1],onBand:!0});function d(p,g){return p=round$4(p),g=round$4(g),v?p>g:p<g}}var PI2$2=Math.PI*2,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(a,t,r,n,o){var s=r.width,l=r.height;switch(a){case"top":n.set(r.x+s/2,r.y-t),o.set(0,-1);break;case"bottom":n.set(r.x+s/2,r.y+l+t),o.set(0,1);break;case"left":n.set(r.x-t,r.y+l/2),o.set(-1,0);break;case"right":n.set(r.x+s+t,r.y+l/2),o.set(1,0);break}}function projectPointToArc(a,t,r,n,o,s,l,u,c){l-=a,u-=t;var f=Math.sqrt(l*l+u*u);l/=f,u/=f;var h=l*r+a,v=u*r+t;if(Math.abs(n-o)%PI2$2<1e-4)return c[0]=h,c[1]=v,f-r;if(s){var d=n;n=normalizeRadian(o),o=normalizeRadian(d)}else n=normalizeRadian(n),o=normalizeRadian(o);n>o&&(o+=PI2$2);var p=Math.atan2(u,l);if(p<0&&(p+=PI2$2),p>=n&&p<=o||p+PI2$2>=n&&p+PI2$2<=o)return c[0]=h,c[1]=v,f-r;var g=r*Math.cos(n)+a,y=r*Math.sin(n)+t,_=r*Math.cos(o)+a,S=r*Math.sin(o)+t,x=(g-l)*(g-l)+(y-u)*(y-u),T=(_-l)*(_-l)+(S-u)*(S-u);return x<T?(c[0]=g,c[1]=y,Math.sqrt(x)):(c[0]=_,c[1]=S,Math.sqrt(T))}function projectPointToLine(a,t,r,n,o,s,l,u){var c=o-a,f=s-t,h=r-a,v=n-t,d=Math.sqrt(h*h+v*v);h/=d,v/=d;var p=c*h+f*v,g=p/d;u&&(g=Math.min(Math.max(g,0),1)),g*=d;var y=l[0]=a+g*h,_=l[1]=t+g*v;return Math.sqrt((y-o)*(y-o)+(_-s)*(_-s))}function projectPointToRect(a,t,r,n,o,s,l){r<0&&(a=a+r,r=-r),n<0&&(t=t+n,n=-n);var u=a+r,c=t+n,f=l[0]=Math.min(Math.max(o,a),u),h=l[1]=Math.min(Math.max(s,t),c);return Math.sqrt((f-o)*(f-o)+(h-s)*(h-s))}var tmpPt=[];function nearestPointOnRect(a,t,r){var n=projectPointToRect(t.x,t.y,t.width,t.height,a.x,a.y,tmpPt);return r.set(tmpPt[0],tmpPt[1]),n}function nearestPointOnPath(a,t,r){for(var n=0,o=0,s=0,l=0,u,c,f=1/0,h=t.data,v=a.x,d=a.y,p=0;p<h.length;){var g=h[p++];p===1&&(n=h[p],o=h[p+1],s=n,l=o);var y=f;switch(g){case CMD$1.M:s=h[p++],l=h[p++],n=s,o=l;break;case CMD$1.L:y=projectPointToLine(n,o,h[p],h[p+1],v,d,tmpPt,!0),n=h[p++],o=h[p++];break;case CMD$1.C:y=cubicProjectPoint(n,o,h[p++],h[p++],h[p++],h[p++],h[p],h[p+1],v,d,tmpPt),n=h[p++],o=h[p++];break;case CMD$1.Q:y=quadraticProjectPoint(n,o,h[p++],h[p++],h[p],h[p+1],v,d,tmpPt),n=h[p++],o=h[p++];break;case CMD$1.A:var _=h[p++],S=h[p++],x=h[p++],T=h[p++],b=h[p++],C=h[p++];p+=1;var w=!!(1-h[p++]);u=Math.cos(b)*x+_,c=Math.sin(b)*T+S,p<=1&&(s=u,l=c);var M=(v-_)*T/x+_;y=projectPointToArc(_,S,T,b,b+C,w,M,d,tmpPt),n=Math.cos(b+C)*x+_,o=Math.sin(b+C)*T+S;break;case CMD$1.R:s=n=h[p++],l=o=h[p++];var P=h[p++],L=h[p++];y=projectPointToRect(s,l,P,L,v,d,tmpPt);break;case CMD$1.Z:y=projectPointToLine(n,o,s,l,v,d,tmpPt,!0),n=s,o=l;break}y<f&&(f=y,r.set(tmpPt[0],tmpPt[1]))}return f}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(a,t){if(a){var r=a.getTextGuideLine(),n=a.getTextContent();if(n&&r){var o=a.textGuideLineConfig||{},s=[[0,0],[0,0],[0,0]],l=o.candidates||DEFAULT_SEARCH_SPACE,u=n.getBoundingRect().clone();u.applyTransform(n.getComputedTransform());var c=1/0,f=o.anchor,h=a.getComputedTransform(),v=h&&invert([],h),d=t.get("length2")||0;f&&pt2.copy(f);for(var p=0;p<l.length;p++){var g=l[p];getCandidateAnchor(g,0,u,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,d),pt1.transform(v);var y=a.getBoundingRect(),_=f?f.distance(pt1):a instanceof Path?nearestPointOnPath(pt1,a.path,pt2):nearestPointOnRect(pt1,y,pt2);_<c&&(c=_,pt1.transform(h),pt2.transform(h),pt2.toArray(s[0]),pt1.toArray(s[1]),pt0.toArray(s[2]))}limitTurnAngle(s,t.get("minTurnAngle")),r.setShape({points:s})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(a,t){if(t<=180&&t>0){t=t/180*Math.PI,pt0.fromArray(a[0]),pt1.fromArray(a[1]),pt2.fromArray(a[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var r=dir.len(),n=dir2.len();if(!(r<.001||n<.001)){dir.scale(1/r),dir2.scale(1/n);var o=dir.dot(dir2),s=Math.cos(t);if(s<o){var l=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,l/Math.tan(Math.PI-t));var u=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(u))return;u<0?Point.copy(tmpProjPoint,pt1):u>1&&Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(a[1])}}}}function limitSurfaceAngle(a,t,r){if(r<=180&&r>0){r=r/180*Math.PI,pt0.fromArray(a[0]),pt1.fromArray(a[1]),pt2.fromArray(a[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var n=dir.len(),o=dir2.len();if(!(n<.001||o<.001)){dir.scale(1/n),dir2.scale(1/o);var s=dir.dot(t),l=Math.cos(r);if(s<l){var u=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var c=Math.PI/2,f=Math.acos(dir2.dot(t)),h=c+f-r;if(h>=c)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,u/Math.tan(Math.PI/2-h));var v=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(v))return;v<0?Point.copy(tmpProjPoint,pt1):v>1&&Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(a[1])}}}}function setLabelLineState(a,t,r,n){var o=r==="normal",s=o?a:a.ensureState(r);s.ignore=t;var l=n.get("smooth");l&&l===!0&&(l=.3),s.shape=s.shape||{},l>0&&(s.shape.smooth=l);var u=n.getModel("lineStyle").getLineStyle();o?a.useStyle(u):s.style=u}function buildLabelLinePath(a,t){var r=t.smooth,n=t.points;if(n)if(a.moveTo(n[0][0],n[0][1]),r>0&&n.length>=3){var o=dist$1(n[0],n[1]),s=dist$1(n[1],n[2]);if(!o||!s){a.lineTo(n[1][0],n[1][1]),a.lineTo(n[2][0],n[2][1]);return}var l=Math.min(o,s)*r,u=lerp$1([],n[1],n[0],l/o),c=lerp$1([],n[1],n[2],l/s),f=lerp$1([],u,c,.5);a.bezierCurveTo(u[0],u[1],u[0],u[1],f[0],f[1]),a.bezierCurveTo(c[0],c[1],c[0],c[1],n[2][0],n[2][1])}else for(var h=1;h<n.length;h++)a.lineTo(n[h][0],n[h][1])}function setLabelLineStyle(a,t,r){var n=a.getTextGuideLine(),o=a.getTextContent();if(!o){n&&a.removeTextGuideLine();return}for(var s=t.normal,l=s.get("show"),u=o.ignore,c=0;c<DISPLAY_STATES.length;c++){var f=DISPLAY_STATES[c],h=t[f],v=f==="normal";if(h){var d=h.get("show"),p=v?u:retrieve2(o.states[f]&&o.states[f].ignore,u);if(p||!retrieve2(d,l)){var g=v?n:n&&n.states[f];g&&(g.ignore=!0),n&&setLabelLineState(n,!0,f,h);continue}n||(n=new Polyline$1,a.setTextGuideLine(n),!v&&(u||!l)&&setLabelLineState(n,!0,"normal",t.normal),a.stateProxy&&(n.stateProxy=a.stateProxy)),setLabelLineState(n,!1,f,h)}}if(n){defaults(n.style,r),n.style.fill=null;var y=s.get("showAbove"),_=a.textGuideLineConfig=a.textGuideLineConfig||{};_.showAbove=y||!1,n.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(a,t){t=t||"labelLine";for(var r={normal:a.getModel(t)},n=0;n<SPECIAL_STATES.length;n++){var o=SPECIAL_STATES[n];r[o]=a.getModel([o,t])}return r}var LABEL_LAYOUT_BASE_PROPS=["label","labelLine","layoutOption","priority","defaultAttr","marginForce","minMarginForce","marginDefault","suggestIgnore"],LABEL_LAYOUT_DIRTY_BIT_OTHERS=1,LABEL_LAYOUT_DIRTY_BIT_OBB=2,LABEL_LAYOUT_DIRTY_ALL=LABEL_LAYOUT_DIRTY_BIT_OTHERS|LABEL_LAYOUT_DIRTY_BIT_OBB;function setLabelLayoutDirty(a,t,r){r=r||LABEL_LAYOUT_DIRTY_ALL,t?a.dirty|=r:a.dirty&=~r}function isLabelLayoutDirty(a,t){return t=t||LABEL_LAYOUT_DIRTY_ALL,a.dirty==null||!!(a.dirty&t)}function ensureLabelLayoutWithGeometry(a){if(a)return isLabelLayoutDirty(a)&&computeLabelGeometry(a,a.label,a),a}function computeLabelGeometry(a,t,r){var n=t.getComputedTransform();a.transform=ensureCopyTransform(a.transform,n);var o=a.localRect=ensureCopyRect(a.localRect,t.getBoundingRect()),s=t.style,l=s.margin,u=r&&r.marginForce,c=r&&r.minMarginForce,f=r&&r.marginDefault,h=s.__marginType;h==null&&f&&(l=f,h=LabelMarginType.textMargin);for(var v=0;v<4;v++)_tmpLabelMargin[v]=h===LabelMarginType.minMargin&&c&&c[v]!=null?c[v]:u&&u[v]!=null?u[v]:l?l[v]:0;h===LabelMarginType.textMargin&&expandOrShrinkRect(o,_tmpLabelMargin,!1,!1);var d=a.rect=ensureCopyRect(a.rect,o);return n&&d.applyTransform(n),h===LabelMarginType.minMargin&&expandOrShrinkRect(d,_tmpLabelMargin,!1,!1),a.axisAligned=isBoundingRectAxisAligned(n),(a.label=a.label||{}).ignore=t.ignore,setLabelLayoutDirty(a,!1),setLabelLayoutDirty(a,!0,LABEL_LAYOUT_DIRTY_BIT_OBB),a}var _tmpLabelMargin=[0,0,0,0];function computeLabelGeometry2(a,t,r){return a.transform=ensureCopyTransform(a.transform,r),a.localRect=ensureCopyRect(a.localRect,t),a.rect=ensureCopyRect(a.rect,t),r&&a.rect.applyTransform(r),a.axisAligned=isBoundingRectAxisAligned(r),a.obb=void 0,(a.label=a.label||{}).ignore=!1,a}function labelLayoutApplyTranslation(a,t){if(a){a.label.x+=t.x,a.label.y+=t.y,a.label.markRedraw();var r=a.transform;r&&(r[4]+=t.x,r[5]+=t.y);var n=a.rect;n&&(n.x+=t.x,n.y+=t.y);var o=a.obb;o&&o.fromBoundingRect(a.localRect,r)}}function newLabelLayoutWithGeometry(a,t){for(var r=0;r<LABEL_LAYOUT_BASE_PROPS.length;r++){var n=LABEL_LAYOUT_BASE_PROPS[r];a[n]==null&&(a[n]=t[n])}return ensureLabelLayoutWithGeometry(a)}function ensureOBB(a){var t=a.obb;return(!t||isLabelLayoutDirty(a,LABEL_LAYOUT_DIRTY_BIT_OBB))&&(a.obb=t=t||new OrientedBoundingRect,t.fromBoundingRect(a.localRect,a.transform),setLabelLayoutDirty(a,!1,LABEL_LAYOUT_DIRTY_BIT_OBB)),t}function shiftLayoutOnXY(a,t,r,n,o){var s=a.length,l=XY$2[t],u=WH$2[t];if(s<2)return!1;a.sort(function(L,E){return L.rect[l]-E.rect[l]});for(var c=0,f,h=!1,v=0,d=0;d<s;d++){var p=a[d],g=p.rect;f=g[l]-c,f<0&&(g[l]-=f,p.label[l]-=f,h=!0);var y=Math.max(-f,0);v+=y,c=g[l]+g[u]}v>0&&o&&w(-v/s,0,s);var _=a[0],S=a[s-1],x,T;b(),x<0&&M(-x,.8),T<0&&M(T,.8),b(),C(x,T,1),C(T,x,-1),b(),x<0&&P(-x),T<0&&P(T);function b(){x=_.rect[l]-r,T=n-S.rect[l]-S.rect[u]}function C(L,E,I){if(L<0){var R=Math.min(E,-L);if(R>0){w(R*I,0,s);var D=R+L;D<0&&M(-D*I,1)}else M(-L*I,1)}}function w(L,E,I){L!==0&&(h=!0);for(var R=E;R<I;R++){var D=a[R],O=D.rect;O[l]+=L,D.label[l]+=L}}function M(L,E){for(var I=[],R=0,D=1;D<s;D++){var O=a[D-1].rect,$=Math.max(a[D].rect[l]-O[l]-O[u],0);I.push($),R+=$}if(R){var N=Math.min(Math.abs(L)/R,E);if(L>0)for(var D=0;D<s-1;D++){var V=I[D]*N;w(V,0,D+1)}else for(var D=s-1;D>0;D--){var V=I[D-1]*N;w(-V,D,s)}}}function P(L){var E=L<0?-1:1;L=Math.abs(L);for(var I=Math.ceil(L/(s-1)),R=0;R<s-1;R++)if(E>0?w(I,0,R+1):w(-I,s-R-1,s),L-=I,L<=0)return}return h}function restoreIgnore(a){for(var t=0;t<a.length;t++){var r=a[t],n=r.defaultAttr,o=r.labelLine;r.label.attr("ignore",n.ignore),o&&o.attr("ignore",n.labelGuideIgnore)}}function hideOverlap(a){var t=[];a.sort(function(f,h){return(h.suggestIgnore?1:0)-(f.suggestIgnore?1:0)||h.priority-f.priority});function r(f){if(!f.ignore){var h=f.ensureState("emphasis");h.ignore==null&&(h.ignore=!1)}f.ignore=!0}for(var n=0;n<a.length;n++){var o=ensureLabelLayoutWithGeometry(a[n]);if(!o.label.ignore){for(var s=o.label,l=o.labelLine,u=!1,c=0;c<t.length;c++)if(labelIntersect(o,t[c],null,{touchThreshold:.05})){u=!0;break}u?(r(s),l&&r(l)):t.push(o)}}}function labelIntersect(a,t,r,n){return!a||!t||a.label&&a.label.ignore||t.label&&t.label.ignore||!a.rect.intersect(t.rect,r,n)?!1:a.axisAligned&&t.axisAligned?!0:ensureOBB(a).intersect(ensureOBB(t),r,n)}function cloneArr(a){if(a){for(var t=[],r=0;r<a.length;r++)t.push(a[r].slice());return t}}function prepareLayoutCallbackParams(a,t){var r=a.label,n=t&&t.getTextGuideLine();return{dataIndex:a.dataIndex,dataType:a.dataType,seriesIndex:a.seriesModel.seriesIndex,text:a.label.style.text,rect:a.hostRect,labelRect:a.rect,align:r.style.align,verticalAlign:r.style.verticalAlign,labelLinePoints:cloneArr(n&&n.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(a,t,r){for(var n=0;n<r.length;n++){var o=r[n];t[o]!=null&&(a[o]=t[o])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function a(){this._labelList=[],this._chartViewList=[]}return a.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},a.prototype._addLabel=function(t,r,n,o,s){var l=o.style,u=o.__hostTarget,c=u.textConfig||{},f=o.getComputedTransform(),h=o.getBoundingRect().plain();BoundingRect.applyTransform(h,h,f),f?dummyTransformable.setLocalTransform(f):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var v=o.__hostTarget,d;if(v){d=v.getBoundingRect().plain();var p=v.getComputedTransform();BoundingRect.applyTransform(d,d,p)}var g=d&&v.getTextGuideLine();this._labelList.push({label:o,labelLine:g,seriesModel:n,dataIndex:t,dataType:r,layoutOptionOrCb:s,layoutOption:null,rect:h,hostRect:d,priority:d?d.width*d.height:0,defaultAttr:{ignore:o.ignore,labelGuideIgnore:g&&g.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:l.x,y:l.y,align:l.align,verticalAlign:l.verticalAlign,width:l.width,height:l.height,fontSize:l.fontSize},cursor:o.cursor,attachedPos:c.position,attachedRot:c.rotation}})},a.prototype.addLabelsOfSeries=function(t){var r=this;this._chartViewList.push(t);var n=t.__model,o=n.get("labelLayout");(isFunction(o)||keys(o).length)&&t.group.traverse(function(s){if(s.ignore)return!0;var l=s.getTextContent(),u=getECData(s);l&&!l.disableLabelLayout&&r._addLabel(u.dataIndex,u.dataType,n,l,o)})},a.prototype.updateLayoutConfig=function(t){var r=t.getWidth(),n=t.getHeight();function o(T,b){return function(){updateLabelLinePoints(T,b)}}for(var s=0;s<this._labelList.length;s++){var l=this._labelList[s],u=l.label,c=u.__hostTarget,f=l.defaultAttr,h=void 0;isFunction(l.layoutOptionOrCb)?h=l.layoutOptionOrCb(prepareLayoutCallbackParams(l,c)):h=l.layoutOptionOrCb,h=h||{},l.layoutOption=h;var v=Math.PI/180;c&&c.setTextConfig({local:!1,position:h.x!=null||h.y!=null?null:f.attachedPos,rotation:h.rotate!=null?h.rotate*v:f.attachedRot,offset:[h.dx||0,h.dy||0]});var d=!1;if(h.x!=null?(u.x=parsePercent(h.x,r),u.setStyle("x",0),d=!0):(u.x=f.x,u.setStyle("x",f.style.x)),h.y!=null?(u.y=parsePercent(h.y,n),u.setStyle("y",0),d=!0):(u.y=f.y,u.setStyle("y",f.style.y)),h.labelLinePoints){var p=c.getTextGuideLine();p&&(p.setShape({points:h.labelLinePoints}),d=!1)}var g=labelLayoutInnerStore(u);g.needsUpdateLabelLine=d,u.rotation=h.rotate!=null?h.rotate*v:f.rotation,u.scaleX=f.scaleX,u.scaleY=f.scaleY;for(var y=0;y<LABEL_OPTION_TO_STYLE_KEYS.length;y++){var _=LABEL_OPTION_TO_STYLE_KEYS[y];u.setStyle(_,h[_]!=null?h[_]:f.style[_])}if(h.draggable){if(u.draggable=!0,u.cursor="move",c){var S=l.seriesModel;if(l.dataIndex!=null){var x=l.seriesModel.getData(l.dataType);S=x.getItemModel(l.dataIndex)}u.on("drag",o(c,S.getModel("labelLine")))}}else u.off("drag"),u.cursor=f.cursor}},a.prototype.layout=function(t){var r=t.getWidth(),n=t.getHeight(),o=[];each$f(this._labelList,function(c){c.defaultAttr.ignore||o.push(newLabelLayoutWithGeometry({},c))});var s=filter(o,function(c){return c.layoutOption.moveOverlap==="shiftX"}),l=filter(o,function(c){return c.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnXY(s,0,0,r),shiftLayoutOnXY(l,1,0,n);var u=filter(o,function(c){return c.layoutOption.hideOverlap});restoreIgnore(u),hideOverlap(u)},a.prototype.processLabelsOverall=function(){var t=this;each$f(this._chartViewList,function(r){var n=r.__model,o=r.ignoreLabelLineUpdate,s=n.isAnimationEnabled();r.group.traverse(function(l){if(l.ignore&&!l.forceLabelAnimation)return!0;var u=!o,c=l.getTextContent();!u&&c&&(u=labelLayoutInnerStore(c).needsUpdateLabelLine),u&&t._updateLabelLine(l,n),s&&t._animateLabels(l,n)})})},a.prototype._updateLabelLine=function(t,r){var n=t.getTextContent(),o=getECData(t),s=o.dataIndex;if(n&&s!=null){var l=r.getData(o.dataType),u=l.getItemModel(s),c={},f=l.getItemVisual(s,"style");if(f){var h=l.getVisual("drawType");c.stroke=f[h]}var v=u.getModel("labelLine");setLabelLineStyle(t,getLabelLineStatesModels(u),c),updateLabelLinePoints(t,v)}},a.prototype._animateLabels=function(t,r){var n=t.getTextContent(),o=t.getTextGuideLine();if(n&&(t.forceLabelAnimation||!n.ignore&&!n.invisible&&!t.disableLabelAnimation&&!isElementRemoved(t))){var s=labelLayoutInnerStore(n),l=s.oldLayout,u=getECData(t),c=u.dataIndex,f={x:n.x,y:n.y,rotation:n.rotation},h=r.getData(u.dataType);if(l){n.attr(l);var d=t.prevStates;d&&(indexOf(d,"select")>=0&&n.attr(s.oldLayoutSelect),indexOf(d,"emphasis")>=0&&n.attr(s.oldLayoutEmphasis)),updateProps$1(n,f,r,c)}else if(n.attr(f),!labelInner(n).valueAnimation){var v=retrieve2(n.style.opacity,1);n.style.opacity=0,initProps(n,{style:{opacity:v}},r,c)}if(s.oldLayout=f,n.states.select){var p=s.oldLayoutSelect={};extendWithKeys(p,f,LABEL_LAYOUT_PROPS),extendWithKeys(p,n.states.select,LABEL_LAYOUT_PROPS)}if(n.states.emphasis){var g=s.oldLayoutEmphasis={};extendWithKeys(g,f,LABEL_LAYOUT_PROPS),extendWithKeys(g,n.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(n,c,h,r,r)}if(o&&!o.ignore&&!o.invisible){var s=labelLineAnimationStore(o),l=s.oldLayout,y={points:o.shape.points};l?(o.attr({shape:l}),updateProps$1(o,{shape:y},r)):(o.setShape(y),o.style.strokePercent=0,initProps(o,{style:{strokePercent:1}},r)),s.oldLayout=y}},a}(),getLabelManager=makeInner();function installLabelLayout(a){a.registerUpdateLifecycle("series:beforeupdate",function(t,r,n){var o=getLabelManager(r).labelManager;o||(o=getLabelManager(r).labelManager=new LabelManager),o.clearLabels()}),a.registerUpdateLifecycle("series:layoutlabels",function(t,r,n){var o=getLabelManager(r).labelManager;n.updatedSeries.forEach(function(s){o.addLabelsOfSeries(r.getViewOfSeriesModel(s))}),o.updateLayoutConfig(r),o.layout(r),o.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function a(){}return a.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},a.prototype.moveTo=function(t,r){this._add("M",t,r)},a.prototype.lineTo=function(t,r){this._add("L",t,r)},a.prototype.bezierCurveTo=function(t,r,n,o,s,l){this._add("C",t,r,n,o,s,l)},a.prototype.quadraticCurveTo=function(t,r,n,o){this._add("Q",t,r,n,o)},a.prototype.arc=function(t,r,n,o,s,l){this.ellipse(t,r,n,n,0,o,s,l)},a.prototype.ellipse=function(t,r,n,o,s,l,u,c){var f=u-l,h=!c,v=Math.abs(f),d=isAroundZero(v-PI2$1)||(h?f>=PI2$1:-f>=PI2$1),p=f>0?f%PI2$1:f%PI2$1+PI2$1,g=!1;d?g=!0:isAroundZero(v)?g=!1:g=p>=PI$4==!!h;var y=t+n*mathCos(l),_=r+o*mathSin(l);this._start&&this._add("M",y,_);var S=Math.round(s*degree);if(d){var x=1/this._p,T=(h?1:-1)*(PI2$1-x);this._add("A",n,o,S,1,+h,t+n*mathCos(l+T),r+o*mathSin(l+T)),x>.01&&this._add("A",n,o,S,0,+h,y,_)}else{var b=t+n*mathCos(u),C=r+o*mathSin(u);this._add("A",n,o,S,+g,+h,b,C)}},a.prototype.rect=function(t,r,n,o){this._add("M",t,r),this._add("l",n,0),this._add("l",0,o),this._add("l",-n,0),this._add("Z")},a.prototype.closePath=function(){this._d.length>0&&this._add("Z")},a.prototype._add=function(t,r,n,o,s,l,u,c,f){for(var h=[],v=this._p,d=1;d<arguments.length;d++){var p=arguments[d];if(isNaN(p)){this._invalid=!0;return}h.push(Math.round(p*v)/v)}this._d.push(t+h.join(" ")),this._start=t==="Z"},a.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},a.prototype.getStr=function(){return this._str},a}(),NONE="none",mathRound=Math.round;function pathHasFill(a){var t=a.fill;return t!=null&&t!==NONE}function pathHasStroke(a){var t=a.stroke;return t!=null&&t!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(a){return"stroke-"+a.toLowerCase()});function mapStyleToAttrs(a,t,r,n){var o=t.opacity==null?1:t.opacity;if(r instanceof ZRImage){a("opacity",o);return}if(pathHasFill(t)){var s=normalizeColor(t.fill);a("fill",s.color);var l=t.fillOpacity!=null?t.fillOpacity*s.opacity*o:s.opacity*o;l<1&&a("fill-opacity",l)}else a("fill",NONE);if(pathHasStroke(t)){var u=normalizeColor(t.stroke);a("stroke",u.color);var c=t.strokeNoScale?r.getLineScale():1,f=c?(t.lineWidth||0)/c:0,h=t.strokeOpacity!=null?t.strokeOpacity*u.opacity*o:u.opacity*o,v=t.strokeFirst;if(f!==1&&a("stroke-width",f),v&&a("paint-order",v?"stroke":"fill"),h<1&&a("stroke-opacity",h),t.lineDash){var d=getLineDash(r),p=d[0],g=d[1];p&&(g=mathRound(g||0),a("stroke-dasharray",p.join(",")),(g||n)&&a("stroke-dashoffset",g))}for(var y=0;y<strokeProps.length;y++){var _=strokeProps[y];if(t[_]!==DEFAULT_PATH_STYLE[_]){var S=t[_]||DEFAULT_PATH_STYLE[_];S&&a(svgStrokeProps[y],S)}}}}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(a){return document.createElementNS(SVGNS,a)}function createVNode(a,t,r,n,o){return{tag:a,attrs:r||{},children:n,text:o,key:t}}function createElementOpen(a,t){var r=[];if(t)for(var n in t){var o=t[n],s=n;o!==!1&&(o!==!0&&o!=null&&(s+='="'+o+'"'),r.push(s))}return"<"+a+" "+r.join(" ")+">"}function createElementClose(a){return"</"+a+">"}function vNodeToString(a,t){t=t||{};var r=t.newline?`
`:"";function n(o){var s=o.children,l=o.tag,u=o.attrs,c=o.text;return createElementOpen(l,u)+(l!=="style"?encodeHTML(c):c||"")+(s?""+r+map$1(s,function(f){return n(f)}).join(r)+r:"")+createElementClose(l)}return n(a)}function getCssString(a,t,r){r=r||{};var n=r.newline?`
`:"",o=" {"+n,s=n+"}",l=map$1(keys(a),function(c){return c+o+map$1(keys(a[c]),function(f){return f+":"+a[c][f]+";"}).join(n)+s}).join(n),u=map$1(keys(t),function(c){return"@keyframes "+c+o+map$1(keys(t[c]),function(f){return f+o+map$1(keys(t[c][f]),function(h){var v=t[c][f][h];return h==="d"&&(v='path("'+v+'")'),h+":"+v+";"}).join(n)+s}).join(n)+s}).join(n);return!l&&!u?"":["<![CDATA[",l,u,"]]>"].join(n)}function createBrushScope(a){return{zrId:a,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(a,t,r,n){return createVNode("svg","root",{width:a,height:t,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:n?"0 0 "+a+" "+t:!1},r)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(a,t,r){var n=extend({},a.shape);extend(n,t),a.buildPath(r,n);var o=new SVGPathRebuilder;return o.reset(getPathPrecision(a)),r.rebuildPath(o,1),o.generateStr(),o.getStr()}function setTransformOrigin(a,t){var r=t.originX,n=t.originY;(r||n)&&(a[transformOriginKey]=r+"px "+n+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(a,t){var r=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[r]=a,r}function createCompoundPathCSSAnimation(a,t,r){var n=a.shape.paths,o={},s,l;if(each$f(n,function(c){var f=createBrushScope(r.zrId);f.animation=!0,createCSSAnimation(c,{},f,!0);var h=f.cssAnims,v=f.cssNodes,d=keys(h),p=d.length;if(p){l=d[p-1];var g=h[l];for(var y in g){var _=g[y];o[y]=o[y]||{d:""},o[y].d+=_.d||""}for(var S in v){var x=v[S].animation;x.indexOf(l)>=0&&(s=x)}}}),!!s){t.d=!1;var u=addAnimation(o,r);return s.replace(l,u)}}function getEasingFunc(a){return isString(a)?EASING_MAP[a]?"cubic-bezier("+EASING_MAP[a]+")":createCubicEasingFunc(a)?a:"":""}function createCSSAnimation(a,t,r,n){var o=a.animators,s=o.length,l=[];if(a instanceof CompoundPath){var u=createCompoundPathCSSAnimation(a,t,r);if(u)l.push(u);else if(!s)return}else if(!s)return;for(var c={},f=0;f<s;f++){var h=o[f],v=[h.getMaxTime()/1e3+"s"],d=getEasingFunc(h.getClip().easing),p=h.getDelay();d?v.push(d):v.push("linear"),p&&v.push(p/1e3+"s"),h.getLoop()&&v.push("infinite");var g=v.join(" ");c[g]=c[g]||[g,[]],c[g][1].push(h)}function y(x){var T=x[1],b=T.length,C={},w={},M={},P="animation-timing-function";function L(K,X,q){for(var W=K.getTracks(),j=K.getMaxTime(),re=0;re<W.length;re++){var Q=W[re];if(Q.needsAnimate()){var te=Q.keyframes,ae=Q.propName;if(q&&(ae=q(ae)),ae)for(var ne=0;ne<te.length;ne++){var oe=te[ne],ie=Math.round(oe.time/j*100)+"%",se=getEasingFunc(oe.easing),le=oe.rawValue;(isString(le)||isNumber(le))&&(X[ie]=X[ie]||{},X[ie][ae]=oe.rawValue,se&&(X[ie][P]=se))}}}}for(var E=0;E<b;E++){var I=T[E],R=I.targetName;R?R==="shape"&&L(I,w):!n&&L(I,C)}for(var D in C){var O={};copyTransform(O,a),extend(O,C[D]);var $=getSRTTransformString(O),N=C[D][P];M[D]=$?{transform:$}:{},setTransformOrigin(M[D],O),N&&(M[D][P]=N)}var V,B=!0;for(var D in w){M[D]=M[D]||{};var F=!V,N=w[D][P];F&&(V=new PathProxy);var G=V.len();V.reset(),M[D].d=buildPathString(a,w[D],V);var z=V.len();if(!F&&G!==z){B=!1;break}N&&(M[D][P]=N)}if(!B)for(var D in M)delete M[D].d;if(!n)for(var E=0;E<b;E++){var I=T[E],R=I.targetName;R==="style"&&L(I,M,function(W){return ANIMATE_STYLE_MAP[W]})}for(var H=keys(M),U=!0,Y,E=1;E<H.length;E++){var Z=H[E-1],J=H[E];if(M[Z][transformOriginKey]!==M[J][transformOriginKey]){U=!1;break}Y=M[Z][transformOriginKey]}if(U&&Y){for(var D in M)M[D][transformOriginKey]&&delete M[D][transformOriginKey];t[transformOriginKey]=Y}if(filter(H,function(K){return keys(M[K]).length>0}).length){var ee=addAnimation(M,r);return ee+" "+x[0]+" both"}}for(var _ in c){var u=y(c[_]);u&&l.push(u)}if(l.length){var S=r.zrId+"-cls-"+getClassId();r.cssNodes["."+S]={animation:l.join(",")},t.class=S}}function createCSSEmphasis(a,t,r){if(!a.ignore)if(a.isSilent()){var n={"pointer-events":"none"};setClassAttribute(n,t,r)}else{var o=a.states.emphasis&&a.states.emphasis.style?a.states.emphasis.style:{},s=o.fill;if(!s){var l=a.style&&a.style.fill,u=a.states.select&&a.states.select.style&&a.states.select.style.fill,c=a.currentStates.indexOf("select")>=0&&u||l;c&&(s=liftColor(c))}var f=o.lineWidth;if(f){var h=!o.strokeNoScale&&a.transform?a.transform[0]:1;f=f/h}var n={cursor:"pointer"};s&&(n.fill=s),o.stroke&&(n.stroke=o.stroke),f&&(n["stroke-width"]=f),setClassAttribute(n,t,r)}}function setClassAttribute(a,t,r,n){var o=JSON.stringify(a),s=r.cssStyleCache[o];s||(s=r.zrId+"-cls-"+getClassId(),r.cssStyleCache[o]=s,r.cssNodes["."+s+":hover"]=a),t.class=t.class?t.class+" "+s:s}var round$2=Math.round;function isImageLike(a){return a&&isString(a.src)}function isCanvasLike(a){return a&&isFunction(a.toDataURL)}function setStyleAttrs(a,t,r,n){mapStyleToAttrs(function(o,s){var l=o==="fill"||o==="stroke";l&&isGradient(s)?setGradient(t,a,o,n):l&&isPattern(s)?setPattern(r,a,o,n):a[o]=s,l&&n.ssr&&s==="none"&&(a["pointer-events"]="visible")},t,r,!1),setShadow(r,a,n)}function setMetaData(a,t){var r=getElementSSRData(t);r&&(r.each(function(n,o){n!=null&&(a[(META_DATA_PREFIX+o).toLowerCase()]=n+"")}),t.isSilent()&&(a[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(a){return isAroundZero(a[0]-1)&&isAroundZero(a[1])&&isAroundZero(a[2])&&isAroundZero(a[3]-1)}function noTranslate(a){return isAroundZero(a[4])&&isAroundZero(a[5])}function setTransform(a,t,r){if(t&&!(noTranslate(t)&&noRotateScale(t))){var n=1e4;a.transform=noRotateScale(t)?"translate("+round$2(t[4]*n)/n+" "+round$2(t[5]*n)/n+")":getMatrixStr(t)}}function convertPolyShape(a,t,r){for(var n=a.points,o=[],s=0;s<n.length;s++)o.push(round$2(n[s][0]*r)/r),o.push(round$2(n[s][1]*r)/r);t.points=o.join(" ")}function validatePolyShape(a){return!a.smooth}function createAttrsConvert(a){var t=map$1(a,function(r){return typeof r=="string"?[r,r]:r});return function(r,n,o){for(var s=0;s<t.length;s++){var l=t[s],u=r[l[0]];u!=null&&(n[l[1]]=round$2(u*o)/o)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(a){for(var t=a.animators,r=0;r<t.length;r++)if(t[r].targetName==="shape")return!0;return!1}function brushSVGPath(a,t){var r=a.style,n=a.shape,o=builtinShapesDef[a.type],s={},l=t.animation,u="path",c=a.style.strokePercent,f=t.compress&&getPathPrecision(a)||4;if(o&&!t.willUpdate&&!(o[1]&&!o[1](n))&&!(l&&hasShapeAnimation(a))&&!(c<1)){u=a.type;var h=Math.pow(10,f);o[0](n,s,h)}else{var v=!a.path||a.shapeChanged();a.path||a.createPathProxy();var d=a.path;v&&(d.beginPath(),a.buildPath(d,a.shape),a.pathUpdated());var p=d.getVersion(),g=a,y=g.__svgPathBuilder;(g.__svgPathVersion!==p||!y||c!==g.__svgPathStrokePercent)&&(y||(y=g.__svgPathBuilder=new SVGPathRebuilder),y.reset(f),d.rebuildPath(y,c),y.generateStr(),g.__svgPathVersion=p,g.__svgPathStrokePercent=c),s.d=y.getStr()}return setTransform(s,a.transform),setStyleAttrs(s,r,a,t),setMetaData(s,a),t.animation&&createCSSAnimation(a,s,t),t.emphasis&&createCSSEmphasis(a,s,t),createVNode(u,a.id+"",s)}function brushSVGImage(a,t){var r=a.style,n=r.image;if(n&&!isString(n)&&(isImageLike(n)?n=n.src:isCanvasLike(n)&&(n=n.toDataURL())),!!n){var o=r.x||0,s=r.y||0,l=r.width,u=r.height,c={href:n,width:l,height:u};return o&&(c.x=o),s&&(c.y=s),setTransform(c,a.transform),setStyleAttrs(c,r,a,t),setMetaData(c,a),t.animation&&createCSSAnimation(a,c,t),createVNode("image",a.id+"",c)}}function brushSVGTSpan(a,t){var r=a.style,n=r.text;if(n!=null&&(n+=""),!(!n||isNaN(r.x)||isNaN(r.y))){var o=r.font||DEFAULT_FONT,s=r.x||0,l=adjustTextY$1(r.y||0,getLineHeight(o),r.textBaseline),u=TEXT_ALIGN_TO_ANCHOR[r.textAlign]||r.textAlign,c={"dominant-baseline":"central","text-anchor":u};if(hasSeparateFont(r)){var f="",h=r.fontStyle,v=parseFontSize(r.fontSize);if(!parseFloat(v))return;var d=r.fontFamily||DEFAULT_FONT_FAMILY,p=r.fontWeight;f+="font-size:"+v+";font-family:"+d+";",h&&h!=="normal"&&(f+="font-style:"+h+";"),p&&p!=="normal"&&(f+="font-weight:"+p+";"),c.style=f}else c.style="font: "+o;return n.match(/\s/)&&(c["xml:space"]="preserve"),s&&(c.x=s),l&&(c.y=l),setTransform(c,a.transform),setStyleAttrs(c,r,a,t),setMetaData(c,a),t.animation&&createCSSAnimation(a,c,t),createVNode("text",a.id+"",c,void 0,n)}}function brush(a,t){if(a instanceof Path)return brushSVGPath(a,t);if(a instanceof ZRImage)return brushSVGImage(a,t);if(a instanceof TSpan)return brushSVGTSpan(a,t)}function setShadow(a,t,r){var n=a.style;if(hasShadow(n)){var o=getShadowKey(a),s=r.shadowCache,l=s[o];if(!l){var u=a.getGlobalScale(),c=u[0],f=u[1];if(!c||!f)return;var h=n.shadowOffsetX||0,v=n.shadowOffsetY||0,d=n.shadowBlur,p=normalizeColor(n.shadowColor),g=p.opacity,y=p.color,_=d/2/c,S=d/2/f,x=_+" "+S;l=r.zrId+"-s"+r.shadowIdx++,r.defs[l]=createVNode("filter",l,{id:l,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:h/c,dy:v/f,stdDeviation:x,"flood-color":y,"flood-opacity":g})]),s[o]=l}t.filter=getIdURL(l)}}function setGradient(a,t,r,n){var o=a[r],s,l={gradientUnits:o.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(o))s="linearGradient",l.x1=o.x,l.y1=o.y,l.x2=o.x2,l.y2=o.y2;else if(isRadialGradient(o))s="radialGradient",l.cx=retrieve2(o.x,.5),l.cy=retrieve2(o.y,.5),l.r=retrieve2(o.r,.5);else return;for(var u=o.colorStops,c=[],f=0,h=u.length;f<h;++f){var v=round4(u[f].offset)*100+"%",d=u[f].color,p=normalizeColor(d),g=p.color,y=p.opacity,_={offset:v};_["stop-color"]=g,y<1&&(_["stop-opacity"]=y),c.push(createVNode("stop",f+"",_))}var S=createVNode(s,"",l,c),x=vNodeToString(S),T=n.gradientCache,b=T[x];b||(b=n.zrId+"-g"+n.gradientIdx++,T[x]=b,l.id=b,n.defs[b]=createVNode(s,b,l,c)),t[r]=getIdURL(b)}function setPattern(a,t,r,n){var o=a.style[r],s=a.getBoundingRect(),l={},u=o.repeat,c=u==="no-repeat",f=u==="repeat-x",h=u==="repeat-y",v;if(isImagePattern(o)){var d=o.imageWidth,p=o.imageHeight,g=void 0,y=o.image;if(isString(y)?g=y:isImageLike(y)?g=y.src:isCanvasLike(y)&&(g=y.toDataURL()),typeof Image>"u"){var _="Image width/height must been given explictly in svg-ssr renderer.";assert(d,_),assert(p,_)}else if(d==null||p==null){var S=function(E,I){if(E){var R=E.elm,D=d||I.width,O=p||I.height;E.tag==="pattern"&&(f?(O=1,D/=s.width):h&&(D=1,O/=s.height)),E.attrs.width=D,E.attrs.height=O,R&&(R.setAttribute("width",D),R.setAttribute("height",O))}},x=createOrUpdateImage(g,null,a,function(E){c||S(w,E),S(v,E)});x&&x.width&&x.height&&(d=d||x.width,p=p||x.height)}v=createVNode("image","img",{href:g,width:d,height:p}),l.width=d,l.height=p}else o.svgElement&&(v=clone$4(o.svgElement),l.width=o.svgWidth,l.height=o.svgHeight);if(v){var T,b;c?T=b=1:f?(b=1,T=l.width/s.width):h?(T=1,b=l.height/s.height):l.patternUnits="userSpaceOnUse",T!=null&&!isNaN(T)&&(l.width=T),b!=null&&!isNaN(b)&&(l.height=b);var C=getSRTTransformString(o);C&&(l.patternTransform=C);var w=createVNode("pattern","",l,[v]),M=vNodeToString(w),P=n.patternCache,L=P[M];L||(L=n.zrId+"-p"+n.patternIdx++,P[M]=L,l.id=L,w=n.defs[L]=createVNode("pattern",L,l,[v])),t[r]=getIdURL(L)}}function setClipPath(a,t,r){var n=r.clipPathCache,o=r.defs,s=n[a.id];if(!s){s=r.zrId+"-c"+r.clipPathIdx++;var l={id:s};n[a.id]=s,o[s]=createVNode("clipPath",s,l,[brushSVGPath(a,r)])}t["clip-path"]=getIdURL(s)}function createTextNode(a){return document.createTextNode(a)}function insertBefore(a,t,r){a.insertBefore(t,r)}function removeChild(a,t){a.removeChild(t)}function appendChild(a,t){a.appendChild(t)}function parentNode(a){return a.parentNode}function nextSibling(a){return a.nextSibling}function setTextContent(a,t){a.textContent=t}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(a){return a===void 0}function isDef(a){return a!==void 0}function createKeyToOldIdx(a,t,r){for(var n={},o=t;o<=r;++o){var s=a[o].key;s!==void 0&&(n[s]=o)}return n}function sameVnode(a,t){var r=a.key===t.key,n=a.tag===t.tag;return n&&r}function createElm(a){var t,r=a.children,n=a.tag;if(isDef(n)){var o=a.elm=createElement(n);if(updateAttrs(emptyNode,a),isArray$1(r))for(t=0;t<r.length;++t){var s=r[t];s!=null&&appendChild(o,createElm(s))}else isDef(a.text)&&!isObject$3(a.text)&&appendChild(o,createTextNode(a.text))}else a.elm=createTextNode(a.text);return a.elm}function addVnodes(a,t,r,n,o){for(;n<=o;++n){var s=r[n];s!=null&&insertBefore(a,createElm(s),t)}}function removeVnodes(a,t,r,n){for(;r<=n;++r){var o=t[r];if(o!=null)if(isDef(o.tag)){var s=parentNode(o.elm);removeChild(s,o.elm)}else removeChild(a,o.elm)}}function updateAttrs(a,t){var r,n=t.elm,o=a&&a.attrs||{},s=t.attrs||{};if(o!==s){for(r in s){var l=s[r],u=o[r];u!==l&&(l===!0?n.setAttribute(r,""):l===!1?n.removeAttribute(r):r==="style"?n.style.cssText=l:r.charCodeAt(0)!==xChar?n.setAttribute(r,l):r==="xmlns:xlink"||r==="xmlns"?n.setAttributeNS(XMLNS,r,l):r.charCodeAt(3)===colonChar?n.setAttributeNS(XML_NAMESPACE,r,l):r.charCodeAt(5)===colonChar?n.setAttributeNS(XLINKNS,r,l):n.setAttribute(r,l))}for(r in o)r in s||n.removeAttribute(r)}}function updateChildren(a,t,r){for(var n=0,o=0,s=t.length-1,l=t[0],u=t[s],c=r.length-1,f=r[0],h=r[c],v,d,p,g;n<=s&&o<=c;)l==null?l=t[++n]:u==null?u=t[--s]:f==null?f=r[++o]:h==null?h=r[--c]:sameVnode(l,f)?(patchVnode(l,f),l=t[++n],f=r[++o]):sameVnode(u,h)?(patchVnode(u,h),u=t[--s],h=r[--c]):sameVnode(l,h)?(patchVnode(l,h),insertBefore(a,l.elm,nextSibling(u.elm)),l=t[++n],h=r[--c]):sameVnode(u,f)?(patchVnode(u,f),insertBefore(a,u.elm,l.elm),u=t[--s],f=r[++o]):(isUndef(v)&&(v=createKeyToOldIdx(t,n,s)),d=v[f.key],isUndef(d)?insertBefore(a,createElm(f),l.elm):(p=t[d],p.tag!==f.tag?insertBefore(a,createElm(f),l.elm):(patchVnode(p,f),t[d]=void 0,insertBefore(a,p.elm,l.elm))),f=r[++o]);(n<=s||o<=c)&&(n>s?(g=r[c+1]==null?null:r[c+1].elm,addVnodes(a,g,r,o,c)):removeVnodes(a,t,n,s))}function patchVnode(a,t){var r=t.elm=a.elm,n=a.children,o=t.children;a!==t&&(updateAttrs(a,t),isUndef(t.text)?isDef(n)&&isDef(o)?n!==o&&updateChildren(r,n,o):isDef(o)?(isDef(a.text)&&setTextContent(r,""),addVnodes(r,null,o,0,o.length-1)):isDef(n)?removeVnodes(r,n,0,n.length-1):isDef(a.text)&&setTextContent(r,""):a.text!==t.text&&(isDef(n)&&removeVnodes(r,n,0,n.length-1),setTextContent(r,t.text)))}function patch(a,t){if(sameVnode(a,t))patchVnode(a,t);else{var r=a.elm,n=parentNode(r);createElm(t),n!==null&&(insertBefore(n,t.elm,nextSibling(r)),removeVnodes(n,[a],0,0))}return t}var svgId=0,SVGPainter=function(){function a(t,r,n){if(this.type="svg",this.refreshHover=createMethodNotSupport(),this.configLayer=createMethodNotSupport(),this.storage=r,this._opts=n=extend({},n),this.root=t,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(n.width,n.height),t&&!n.ssr){var o=this._viewport=document.createElement("div");o.style.cssText="position:relative;overflow:hidden";var s=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),o.appendChild(s),t.appendChild(o)}this.resize(n.width,n.height)}return a.prototype.getType=function(){return this.type},a.prototype.getViewportRoot=function(){return this._viewport},a.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},a.prototype.getSvgDom=function(){return this._svgDom},a.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,t),this._oldVNode=t}},a.prototype.renderOneToVNode=function(t){return brush(t,createBrushScope(this._id))},a.prototype.renderToVNode=function(t){t=t||{};var r=this.storage.getDisplayList(!0),n=this._width,o=this._height,s=createBrushScope(this._id);s.animation=t.animation,s.willUpdate=t.willUpdate,s.compress=t.compress,s.emphasis=t.emphasis,s.ssr=this._opts.ssr;var l=[],u=this._bgVNode=createBackgroundVNode(n,o,this._backgroundColor,s);u&&l.push(u);var c=t.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(r,s,c?c.children:l),c&&l.push(c);var f=map$1(keys(s.defs),function(d){return s.defs[d]});if(f.length&&l.push(createVNode("defs","defs",{},f)),t.animation){var h=getCssString(s.cssNodes,s.cssAnims,{newline:!0});if(h){var v=createVNode("style","stl",{},[],h);l.push(v)}}return createSVGVNode(n,o,l,t.useViewBox)},a.prototype.renderToString=function(t){return t=t||{},vNodeToString(this.renderToVNode({animation:retrieve2(t.cssAnimation,!0),emphasis:retrieve2(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(t.useViewBox,!0)}),{newline:!0})},a.prototype.setBackgroundColor=function(t){this._backgroundColor=t},a.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},a.prototype._paintList=function(t,r,n){for(var o=t.length,s=[],l=0,u,c,f=0,h=0;h<o;h++){var v=t[h];if(!v.invisible){var d=v.__clipPaths,p=d&&d.length||0,g=c&&c.length||0,y=void 0;for(y=Math.max(p-1,g-1);y>=0&&!(d&&c&&d[y]===c[y]);y--);for(var _=g-1;_>y;_--)l--,u=s[l-1];for(var S=y+1;S<p;S++){var x={};setClipPath(d[S],x,r);var T=createVNode("g","clip-g-"+f++,x,[]);(u?u.children:n).push(T),s[l++]=T,u=T}c=d;var b=brush(v,r);b&&(u?u.children:n).push(b)}}},a.prototype.resize=function(t,r){var n=this._opts,o=this.root,s=this._viewport;if(t!=null&&(n.width=t),r!=null&&(n.height=r),o&&s&&(s.style.display="none",t=getSize$1(o,0,n),r=getSize$1(o,1,n),s.style.display=""),this._width!==t||this._height!==r){if(this._width=t,this._height=r,s){var l=s.style;l.width=t+"px",l.height=r+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var u=this._svgDom;u&&(u.setAttribute("width",t),u.setAttribute("height",r));var c=this._bgVNode&&this._bgVNode.elm;c&&(c.setAttribute("width",t),c.setAttribute("height",r))}}},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},a.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},a.prototype.toDataURL=function(t){var r=this.renderToString(),n="data:image/svg+xml;";return t?(r=encodeBase64(r),r&&n+"base64,"+r):n+"charset=UTF-8,"+encodeURIComponent(r)},a}();function createMethodNotSupport(a){return function(){}}function createBackgroundVNode(a,t,r,n){var o;if(r&&r!=="none")if(o=createVNode("rect","bg",{width:a,height:t,x:"0",y:"0"}),isGradient(r))setGradient({fill:r},o.attrs,"fill",n);else if(isPattern(r))setPattern({style:{fill:r},dirty:noop,getBoundingRect:function(){return{width:a,height:t}}},o.attrs,"fill",n);else{var s=normalizeColor(r),l=s.color,u=s.opacity;o.attrs.fill=l,u<1&&(o.attrs["fill-opacity"]=u)}return o}function install$V(a){a.registerPainter("svg",SVGPainter)}function createDom(a,t,r){var n=platformApi.createCanvas(),o=t.getWidth(),s=t.getHeight(),l=n.style;return l&&(l.position="absolute",l.left="0",l.top="0",l.width=o+"px",l.height=s+"px",n.setAttribute("data-zr-dom-id",a)),n.width=o*r,n.height=s*r,n}var Layer=function(a){__extends(t,a);function t(r,n,o){var s=a.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null;var l;o=o||devicePixelRatio,typeof r=="string"?l=createDom(r,n,o):isObject$3(r)&&(l=r,r=l.id),s.id=r,s.dom=l;var u=l.style;return u&&(disableUserSelect(l),l.onselectstart=function(){return!1},u.padding="0",u.margin="0",u.borderWidth="0"),s.painter=n,s.dpr=o,s}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,n,o,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var l=[],u=this.maxRepaintRectCount,c=!1,f=new BoundingRect(0,0,0,0);function h(x){if(!(!x.isFinite()||x.isZero()))if(l.length===0){var T=new BoundingRect(0,0,0,0);T.copy(x),l.push(T)}else{for(var b=!1,C=1/0,w=0,M=0;M<l.length;++M){var P=l[M];if(P.intersect(x)){var L=new BoundingRect(0,0,0,0);L.copy(P),L.union(x),l[M]=L,b=!0;break}else if(c){f.copy(x),f.union(P);var E=x.width*x.height,I=P.width*P.height,R=f.width*f.height,D=R-E-I;D<C&&(C=D,w=M)}}if(c&&(l[w].union(x),b=!0),!b){var T=new BoundingRect(0,0,0,0);T.copy(x),l.push(T)}c||(c=l.length>=u)}}for(var v=this.__startIndex;v<this.__endIndex;++v){var d=r[v];if(d){var p=d.shouldBePainted(o,s,!0,!0),g=d.__isRendered&&(d.__dirty&REDRAW_BIT||!p)?d.getPrevPaintRect():null;g&&h(g);var y=p&&(d.__dirty&REDRAW_BIT||!d.__isRendered)?d.getPaintRect():null;y&&h(y)}}for(var v=this.__prevStartIndex;v<this.__prevEndIndex;++v){var d=n[v],p=d&&d.shouldBePainted(o,s,!0,!0);if(d&&(!p||!d.__zr)&&d.__isRendered){var g=d.getPrevPaintRect();g&&h(g)}}var _;do{_=!1;for(var v=0;v<l.length;){if(l[v].isZero()){l.splice(v,1);continue}for(var S=v+1;S<l.length;)l[v].intersect(l[S])?(_=!0,l[v].union(l[S]),l.splice(S,1)):S++;v++}}while(_);return this._paintRects=l,l},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,n){var o=this.dpr,s=this.dom,l=s.style,u=this.domBack;l&&(l.width=r+"px",l.height=n+"px"),s.width=r*o,s.height=n*o,u&&(u.width=r*o,u.height=n*o,o!==1&&this.ctxBack.scale(o,o))},t.prototype.clear=function(r,n,o){var s=this.dom,l=this.ctx,u=s.width,c=s.height;n=n||this.clearColor;var f=this.motionBlur&&!r,h=this.lastFrameAlpha,v=this.dpr,d=this;f&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,u/v,c/v));var p=this.domBack;function g(y,_,S,x){if(l.clearRect(y,_,S,x),n&&n!=="transparent"){var T=void 0;if(isGradientObject(n)){var b=n.global||n.__width===S&&n.__height===x;T=b&&n.__canvasGradient||getCanvasGradient(l,n,{x:0,y:0,width:S,height:x}),n.__canvasGradient=T,n.__width=S,n.__height=x}else isImagePatternObject(n)&&(n.scaleX=n.scaleX||v,n.scaleY=n.scaleY||v,T=createCanvasPattern(l,n,{dirty:function(){d.setUnpainted(),d.painter.refresh()}}));l.save(),l.fillStyle=T||n,l.fillRect(y,_,S,x),l.restore()}f&&(l.save(),l.globalAlpha=h,l.drawImage(p,y,_,S,x),l.restore())}!o||f?g(0,0,u,c):o.length&&each$f(o,function(y){g(y.x*v,y.y*v,y.width*v,y.height*v)})},t}(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(a){return a?a.__builtin__?!0:!(typeof a.resize!="function"||typeof a.refresh!="function"):!1}function createRoot(a,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+a+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var CanvasPainter=function(){function a(t,r,n,o){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var s=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=extend({},n||{}),this.dpr=n.devicePixelRatio||devicePixelRatio,this._singleCanvas=s,this.root=t;var l=t.style;l&&(disableUserSelect(t),t.innerHTML=""),this.storage=r;var u=this._zlevelList;this._prevDisplayList=[];var c=this._layers;if(s){var h=t,v=h.width,d=h.height;n.width!=null&&(v=n.width),n.height!=null&&(d=n.height),this.dpr=n.devicePixelRatio||1,h.width=v*this.dpr,h.height=d*this.dpr,this._width=v,this._height=d;var p=new Layer(h,this,this.dpr);p.__builtin__=!0,p.initContext(),c[CANVAS_ZLEVEL]=p,p.zlevel=CANVAS_ZLEVEL,u.push(CANVAS_ZLEVEL),this._domRoot=t}else{this._width=getSize$1(t,0,n),this._height=getSize$1(t,1,n);var f=this._domRoot=createRoot(this._width,this._height);t.appendChild(f)}}return a.prototype.getType=function(){return"canvas"},a.prototype.isSingleCanvas=function(){return this._singleCanvas},a.prototype.getViewportRoot=function(){return this._domRoot},a.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},a.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,o=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,t,this._redrawId);for(var s=0;s<o.length;s++){var l=o[s],u=this._layers[l];if(!u.__builtin__&&u.refresh){var c=s===0?this._backgroundColor:null;u.refresh(c)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},a.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},a.prototype._paintHoverList=function(t){var r=t.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var o={inHover:!0,viewWidth:this._width,viewHeight:this._height},s,l=0;l<r;l++){var u=t[l];u.__inHover&&(n||(n=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),s||(s=n.ctx,s.save()),brush$1(s,u,o,l===r-1))}s&&s.restore()}},a.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},a.prototype.paintOne=function(t,r){brushSingle(t,r)},a.prototype._paintList=function(t,r,n,o){if(this._redrawId===o){n=n||!1,this._updateLayerStatus(t);var s=this._doPaintList(t,r,n),l=s.finished,u=s.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),u&&this._paintHoverList(t),l)this.eachLayer(function(f){f.afterBrush&&f.afterBrush()});else{var c=this;requestAnimationFrame(function(){c._paintList(t,r,n,o)})}}},a.prototype._compositeManually=function(){var t=this.getLayer(CANVAS_ZLEVEL).ctx,r=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,r,n),this.eachBuiltinLayer(function(o){o.virtual&&t.drawImage(o.dom,0,0,r,n)})},a.prototype._doPaintList=function(t,r,n){for(var o=this,s=[],l=this._opts.useDirtyRect,u=0;u<this._zlevelList.length;u++){var c=this._zlevelList[u],f=this._layers[c];f.__builtin__&&f!==this._hoverlayer&&(f.__dirty||n)&&s.push(f)}for(var h=!0,v=!1,d=function(y){var _=s[y],S=_.ctx,x=l&&_.createRepaintRects(t,r,p._width,p._height),T=n?_.__startIndex:_.__drawIndex,b=!n&&_.incremental&&Date.now,C=b&&Date.now(),w=_.zlevel===p._zlevelList[0]?p._backgroundColor:null;if(_.__startIndex===_.__endIndex)_.clear(!1,w,x);else if(T===_.__startIndex){var M=t[T];(!M.incremental||!M.notClear||n)&&_.clear(!1,w,x)}T===-1&&(console.error("For some unknown reason. drawIndex is -1"),T=_.__startIndex);var P,L=function(D){var O={inHover:!1,allClipped:!1,prevEl:null,viewWidth:o._width,viewHeight:o._height};for(P=T;P<_.__endIndex;P++){var $=t[P];if($.__inHover&&(v=!0),o._doPaintEl($,_,l,D,O,P===_.__endIndex-1),b){var N=Date.now()-C;if(N>15)break}}O.prevElClipPaths&&S.restore()};if(x)if(x.length===0)P=_.__endIndex;else for(var E=p.dpr,I=0;I<x.length;++I){var R=x[I];S.save(),S.beginPath(),S.rect(R.x*E,R.y*E,R.width*E,R.height*E),S.clip(),L(R),S.restore()}else S.save(),L(),S.restore();_.__drawIndex=P,_.__drawIndex<_.__endIndex&&(h=!1)},p=this,g=0;g<s.length;g++)d(g);return env.wxa&&each$f(this._layers,function(y){y&&y.ctx&&y.ctx.draw&&y.ctx.draw()}),{finished:h,needsRefreshHover:v}},a.prototype._doPaintEl=function(t,r,n,o,s,l){var u=r.ctx;if(n){var c=t.getPaintRect();(!o||c&&c.intersect(o))&&(brush$1(u,t,s,l),t.setPrevPaintRect(c))}else brush$1(u,t,s,l)},a.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=CANVAS_ZLEVEL);var n=this._layers[t];return n||(n=new Layer("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?merge(n,this._layerConfig[t],!0):this._layerConfig[t-EL_AFTER_INCREMENTAL_INC]&&merge(n,this._layerConfig[t-EL_AFTER_INCREMENTAL_INC],!0),r&&(n.virtual=r),this.insertLayer(t,n),n.initContext()),n},a.prototype.insertLayer=function(t,r){var n=this._layers,o=this._zlevelList,s=o.length,l=this._domRoot,u=null,c=-1;if(!n[t]&&isLayerValid(r)){if(s>0&&t>o[0]){for(c=0;c<s-1&&!(o[c]<t&&o[c+1]>t);c++);u=n[o[c]]}if(o.splice(c+1,0,t),n[t]=r,!r.virtual)if(u){var f=u.dom;f.nextSibling?l.insertBefore(r.dom,f.nextSibling):l.appendChild(r.dom)}else l.firstChild?l.insertBefore(r.dom,l.firstChild):l.appendChild(r.dom);r.painter||(r.painter=this)}},a.prototype.eachLayer=function(t,r){for(var n=this._zlevelList,o=0;o<n.length;o++){var s=n[o];t.call(r,this._layers[s],s)}},a.prototype.eachBuiltinLayer=function(t,r){for(var n=this._zlevelList,o=0;o<n.length;o++){var s=n[o],l=this._layers[s];l.__builtin__&&t.call(r,l,s)}},a.prototype.eachOtherLayer=function(t,r){for(var n=this._zlevelList,o=0;o<n.length;o++){var s=n[o],l=this._layers[s];l.__builtin__||t.call(r,l,s)}},a.prototype.getLayers=function(){return this._layers},a.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(v,d){v.__dirty=v.__used=!1});function r(v){s&&(s.__endIndex!==v&&(s.__dirty=!0),s.__endIndex=v)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var o=t[n];if(o.zlevel!==t[n-1].zlevel||o.incremental){this._needsManuallyCompositing=!0;break}}var s=null,l=0,u,c;for(c=0;c<t.length;c++){var o=t[c],f=o.zlevel,h=void 0;u!==f&&(u=f,l=0),o.incremental?(h=this.getLayer(f+INCREMENTAL_INC,this._needsManuallyCompositing),h.incremental=!0,l=1):h=this.getLayer(f+(l>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),h.__builtin__||logError("ZLevel "+f+" has been used by unkown layer "+h.id),h!==s&&(h.__used=!0,h.__startIndex!==c&&(h.__dirty=!0),h.__startIndex=c,h.incremental?h.__drawIndex=-1:h.__drawIndex=c,r(c),s=h),o.__dirty&REDRAW_BIT&&!o.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=c))}r(c),this.eachBuiltinLayer(function(v,d){!v.__used&&v.getElementCount()>0&&(v.__dirty=!0,v.__startIndex=v.__endIndex=v.__drawIndex=0),v.__dirty&&v.__drawIndex<0&&(v.__drawIndex=v.__startIndex)})},a.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},a.prototype._clearLayer=function(t){t.clear()},a.prototype.setBackgroundColor=function(t){this._backgroundColor=t,each$f(this._layers,function(r){r.setUnpainted()})},a.prototype.configLayer=function(t,r){if(r){var n=this._layerConfig;n[t]?merge(n[t],r,!0):n[t]=r;for(var o=0;o<this._zlevelList.length;o++){var s=this._zlevelList[o];if(s===t||s===t+EL_AFTER_INCREMENTAL_INC){var l=this._layers[s];merge(l,n[t],!0)}}}},a.prototype.delLayer=function(t){var r=this._layers,n=this._zlevelList,o=r[t];o&&(o.dom.parentNode.removeChild(o.dom),delete r[t],n.splice(indexOf(n,t),1))},a.prototype.resize=function(t,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var o=this._opts,s=this.root;if(t!=null&&(o.width=t),r!=null&&(o.height=r),t=getSize$1(s,0,o),r=getSize$1(s,1,o),n.style.display="",this._width!==t||r!==this._height){n.style.width=t+"px",n.style.height=r+"px";for(var l in this._layers)this._layers.hasOwnProperty(l)&&this._layers[l].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(CANVAS_ZLEVEL).resize(t,r)}return this},a.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},a.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},a.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var r=new Layer("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var n=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var o=r.dom.width,s=r.dom.height;this.eachLayer(function(v){v.__builtin__?n.drawImage(v.dom,0,0,o,s):v.renderToCanvas&&(n.save(),v.renderToCanvas(n),n.restore())})}else for(var l={inHover:!1,viewWidth:this._width,viewHeight:this._height},u=this.storage.getDisplayList(!0),c=0,f=u.length;c<f;c++){var h=u[c];brush$1(n,h,l,c===f-1)}return r.dom},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a}();function install$U(a){a.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return createSeriesData(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var n=new Group$3,o=createSymbol$1("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(o),o.setStyle(r.lineStyle);var s=this.getData().getVisual("symbol"),l=this.getData().getVisual("symbolRotate"),u=s==="none"?"circle":s,c=r.itemHeight*.8,f=createSymbol$1(u,(r.itemWidth-c)/2,(r.itemHeight-c)/2,c,c,r.itemStyle.fill);n.add(f),f.setStyle(r.itemStyle);var h=r.iconRotate==="inherit"?l:r.iconRotate||0;return f.rotation=h*Math.PI/180,f.setOrigin([r.itemWidth/2,r.itemHeight/2]),u.indexOf("empty")>-1&&(f.style.stroke=f.style.fill,f.style.fill=tokens.color.neutral00,f.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:6,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(SeriesModel);function getDefaultLabel(a,t){var r=a.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var o=retrieveRawValue(a,t,r[0]);return o!=null?o+"":null}else if(n){for(var s=[],l=0;l<r.length;l++)s.push(retrieveRawValue(a,t,r[l]));return s.join(" ")}}function getDefaultInterpolatedLabel(a,t){var r=a.mapDimensionsAll("defaultedLabel");if(!isArray$1(t))return t+"";for(var n=[],o=0;o<r.length;o++){var s=a.getDimensionIndex(r[o]);s>=0&&n.push(t[s])}return n.join(" ")}var Symbol$1=function(a){__extends(t,a);function t(r,n,o,s){var l=a.call(this)||this;return l.updateData(r,n,o,s),l}return t.prototype._createSymbol=function(r,n,o,s,l,u){this.removeAll();var c=createSymbol$1(r,-1,-1,2,2,null,u);c.attr({z2:retrieve2(l,100),culling:!0,scaleX:s[0]/2,scaleY:s[1]/2}),c.drift=driftSymbol,this._symbolType=r,this.add(c)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){enterEmphasis(this.childAt(0))},t.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},t.prototype.setZ=function(r,n){var o=this.childAt(0);o.zlevel=r,o.z=n},t.prototype.setDraggable=function(r,n){var o=this.childAt(0);o.draggable=r,o.cursor=!n&&r?"move":o.cursor},t.prototype.updateData=function(r,n,o,s){this.silent=!1;var l=r.getItemVisual(n,"symbol")||"circle",u=r.hostModel,c=t.getSymbolSize(r,n),f=t.getSymbolZ2(r,n),h=l!==this._symbolType,v=s&&s.disableAnimation;if(h){var d=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(l,r,n,c,f,d)}else{var p=this.childAt(0);p.silent=!1;var g={scaleX:c[0]/2,scaleY:c[1]/2};v?p.attr(g):updateProps$1(p,g,u,n),saveOldStyle(p)}if(this._updateCommon(r,n,c,o,s),h){var p=this.childAt(0);if(!v){var g={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:p.style.opacity}};p.scaleX=p.scaleY=0,p.style.opacity=0,initProps(p,g,u,n)}}v&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,o,s,l){var u=this.childAt(0),c=r.hostModel,f,h,v,d,p,g,y,_,S;if(s&&(f=s.emphasisItemStyle,h=s.blurItemStyle,v=s.selectItemStyle,d=s.focus,p=s.blurScope,y=s.labelStatesModels,_=s.hoverScale,S=s.cursorStyle,g=s.emphasisDisabled),!s||r.hasItemOption){var x=s&&s.itemModel?s.itemModel:r.getItemModel(n),T=x.getModel("emphasis");f=T.getModel("itemStyle").getItemStyle(),v=x.getModel(["select","itemStyle"]).getItemStyle(),h=x.getModel(["blur","itemStyle"]).getItemStyle(),d=T.get("focus"),p=T.get("blurScope"),g=T.get("disabled"),y=getLabelStatesModels(x),_=T.getShallow("scale"),S=x.getShallow("cursor")}var b=r.getItemVisual(n,"symbolRotate");u.attr("rotation",(b||0)*Math.PI/180||0);var C=normalizeSymbolOffset(r.getItemVisual(n,"symbolOffset"),o);C&&(u.x=C[0],u.y=C[1]),S&&u.attr("cursor",S);var w=r.getItemVisual(n,"style"),M=w.fill;if(u instanceof ZRImage){var P=u.style;u.useStyle(extend({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},w))}else u.__isEmptyBrush?u.useStyle(extend({},w)):u.useStyle(w),u.style.decal=null,u.setColor(M,l&&l.symbolInnerColor),u.style.strokeNoScale=!0;var L=r.getItemVisual(n,"liftZ"),E=this._z2;L!=null?E==null&&(this._z2=u.z2,u.z2+=L):E!=null&&(u.z2=E,this._z2=null);var I=l&&l.useNameLabel;setLabelStyle(u,y,{labelFetcher:c,labelDataIndex:n,defaultText:R,inheritColor:M,defaultOpacity:w.opacity});function R($){return I?r.getName($):getDefaultLabel(r,$)}this._sizeX=o[0]/2,this._sizeY=o[1]/2;var D=u.ensureState("emphasis");D.style=f,u.ensureState("select").style=v,u.ensureState("blur").style=h;var O=_==null||_===!0?Math.max(1.1,3/this._sizeY):isFinite(_)&&_>0?+_:1;D.scaleX=this._sizeX*O,D.scaleY=this._sizeY*O,this.setSymbolScale(1),toggleHoverEmphasis(this,d,p,g)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,o){var s=this.childAt(0),l=getECData(this).dataIndex,u=o&&o.animation;if(this.silent=s.silent=!0,o&&o.fadeLabel){var c=s.getTextContent();c&&removeElement(c,{style:{opacity:0}},n,{dataIndex:l,removeOpt:u,cb:function(){s.removeTextContent()}})}else s.removeTextContent();removeElement(s,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:l,cb:r,removeOpt:u})},t.getSymbolSize=function(r,n){return normalizeSymbolSize(r.getItemVisual(n,"symbolSize"))},t.getSymbolZ2=function(r,n){return r.getItemVisual(n,"z2")},t}(Group$3);function driftSymbol(a,t){this.parent.drift(a,t)}function symbolNeedsDraw$1(a,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&a.getItemVisual(r,"symbol")!=="none"}function normalizeUpdateOpt(a){return a!=null&&!isObject$3(a)&&(a={isIgnore:a}),a||{}}function makeSeriesScope$2(a){var t=a.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:getLabelStatesModels(t),cursorStyle:t.get("cursor")}}var SymbolDraw=function(){function a(t){this.group=new Group$3,this._SymbolCtor=t||Symbol$1}return a.prototype.updateData=function(t,r){this._progressiveEls=null,r=normalizeUpdateOpt(r);var n=this.group,o=t.hostModel,s=this._data,l=this._SymbolCtor,u=r.disableAnimation,c=makeSeriesScope$2(t),f={disableAnimation:u},h=r.getSymbolPoint||function(v){return t.getItemLayout(v)};s||n.removeAll(),t.diff(s).add(function(v){var d=h(v);if(symbolNeedsDraw$1(t,d,v,r)){var p=new l(t,v,c,f);p.setPosition(d),t.setItemGraphicEl(v,p),n.add(p)}}).update(function(v,d){var p=s.getItemGraphicEl(d),g=h(v);if(!symbolNeedsDraw$1(t,g,v,r)){n.remove(p);return}var y=t.getItemVisual(v,"symbol")||"circle",_=p&&p.getSymbolType&&p.getSymbolType();if(!p||_&&_!==y)n.remove(p),p=new l(t,v,c,f),p.setPosition(g);else{p.updateData(t,v,c,f);var S={x:g[0],y:g[1]};u?p.attr(S):updateProps$1(p,S,o)}n.add(p),t.setItemGraphicEl(v,p)}).remove(function(v){var d=s.getItemGraphicEl(v);d&&d.fadeOut(function(){n.remove(d)},o)}).execute(),this._getSymbolPoint=h,this._data=t},a.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,o){var s=t._getSymbolPoint(o);n.setPosition(s),n.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=makeSeriesScope$2(t),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=normalizeUpdateOpt(n);function o(c){c.isGroup||(c.incremental=!0,c.ensureState("emphasis").hoverLayer=!0)}for(var s=t.start;s<t.end;s++){var l=r.getItemLayout(s);if(symbolNeedsDraw$1(r,l,s,n)){var u=new this._SymbolCtor(r,s,this._seriesScope);u.traverse(o),u.setPosition(l),this.group.add(u),r.setItemGraphicEl(s,u),this._progressiveEls.push(u)}}},a.prototype.eachRendered=function(t){traverseElements(this._progressiveEls||this.group,t)},a.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(o){o.fadeOut(function(){r.remove(o)},n.hostModel)}):r.removeAll()},a}();function prepareDataCoordInfo(a,t,r){var n=a.getBaseAxis(),o=a.getOtherAxis(n),s=getValueStart(o,r),l=n.dim,u=o.dim,c=t.mapDimension(u),f=t.mapDimension(l),h=u==="x"||u==="radius"?1:0,v=map$1(a.dimensions,function(g){return t.mapDimension(g)}),d=!1,p=t.getCalculationInfo("stackResultDimension");return isDimensionStacked(t,v[0])&&(d=!0,v[0]=p),isDimensionStacked(t,v[1])&&(d=!0,v[1]=p),{dataDimsForPoint:v,valueStart:s,valueAxisDim:u,baseAxisDim:l,stacked:!!d,valueDim:c,baseDim:f,baseDataOffset:h,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function getValueStart(a,t){var r=0,n=a.scale.getExtent();return t==="start"?r=n[0]:t==="end"?r=n[1]:isNumber(t)&&!isNaN(t)?r=t:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function getStackedOnPoint(a,t,r,n){var o=NaN;a.stacked&&(o=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(o)&&(o=a.valueStart);var s=a.baseDataOffset,l=[];return l[s]=r.get(a.baseDim,n),l[1-s]=o,t.dataToPoint(l)}function diffData(a,t){var r=[];return t.diff(a).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,o){r.push({cmd:"=",idx:o,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function lineAnimationDiff(a,t,r,n,o,s,l,u){for(var c=diffData(a,t),f=[],h=[],v=[],d=[],p=[],g=[],y=[],_=prepareDataCoordInfo(o,t,l),S=a.getLayout("points")||[],x=t.getLayout("points")||[],T=0;T<c.length;T++){var b=c[T],C=!0,w=void 0,M=void 0;switch(b.cmd){case"=":w=b.idx*2,M=b.idx1*2;var P=S[w],L=S[w+1],E=x[M],I=x[M+1];(isNaN(P)||isNaN(L))&&(P=E,L=I),f.push(P,L),h.push(E,I),v.push(r[w],r[w+1]),d.push(n[M],n[M+1]),y.push(t.getRawIndex(b.idx1));break;case"+":var R=b.idx,D=_.dataDimsForPoint,O=o.dataToPoint([t.get(D[0],R),t.get(D[1],R)]);M=R*2,f.push(O[0],O[1]),h.push(x[M],x[M+1]);var $=getStackedOnPoint(_,o,t,R);v.push($[0],$[1]),d.push(n[M],n[M+1]),y.push(t.getRawIndex(R));break;case"-":C=!1}C&&(p.push(b),g.push(g.length))}g.sort(function(Z,J){return y[Z]-y[J]});for(var N=f.length,V=createFloat32Array(N),B=createFloat32Array(N),F=createFloat32Array(N),G=createFloat32Array(N),z=[],T=0;T<g.length;T++){var H=g[T],U=T*2,Y=H*2;V[U]=f[Y],V[U+1]=f[Y+1],B[U]=h[Y],B[U+1]=h[Y+1],F[U]=v[Y],F[U+1]=v[Y+1],G[U]=d[Y],G[U+1]=d[Y+1],z[T]=p[H]}return{current:V,next:B,stackedOnCurrent:F,stackedOnNext:G,status:z}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(a,t){return isNaN(a)||isNaN(t)}function drawSegment(a,t,r,n,o,s,l,u,c){for(var f,h,v,d,p,g,y=r,_=0;_<n;_++){var S=t[y*2],x=t[y*2+1];if(y>=o||y<0)break;if(isPointNull$1(S,x)){if(c){y+=s;continue}break}if(y===r)a[s>0?"moveTo":"lineTo"](S,x),v=S,d=x;else{var T=S-f,b=x-h;if(T*T+b*b<.5){y+=s;continue}if(l>0){for(var C=y+s,w=t[C*2],M=t[C*2+1];w===S&&M===x&&_<n;)_++,C+=s,y+=s,w=t[C*2],M=t[C*2+1],S=t[y*2],x=t[y*2+1],T=S-f,b=x-h;var P=_+1;if(c)for(;isPointNull$1(w,M)&&P<n;)P++,C+=s,w=t[C*2],M=t[C*2+1];var L=.5,E=0,I=0,R=void 0,D=void 0;if(P>=n||isPointNull$1(w,M))p=S,g=x;else{E=w-f,I=M-h;var O=S-f,$=w-S,N=x-h,V=M-x,B=void 0,F=void 0;if(u==="x"){B=Math.abs(O),F=Math.abs($);var G=E>0?1:-1;p=S-G*B*l,g=x,R=S+G*F*l,D=x}else if(u==="y"){B=Math.abs(N),F=Math.abs(V);var z=I>0?1:-1;p=S,g=x-z*B*l,R=S,D=x+z*F*l}else B=Math.sqrt(O*O+N*N),F=Math.sqrt($*$+V*V),L=F/(F+B),p=S-E*l*(1-L),g=x-I*l*(1-L),R=S+E*l*L,D=x+I*l*L,R=mathMin$5(R,mathMax$5(w,S)),D=mathMin$5(D,mathMax$5(M,x)),R=mathMax$5(R,mathMin$5(w,S)),D=mathMax$5(D,mathMin$5(M,x)),E=R-S,I=D-x,p=S-E*B/F,g=x-I*B/F,p=mathMin$5(p,mathMax$5(f,S)),g=mathMin$5(g,mathMax$5(h,x)),p=mathMax$5(p,mathMin$5(f,S)),g=mathMax$5(g,mathMin$5(h,x)),E=S-p,I=x-g,R=S+E*F/B,D=x+I*F/B}a.bezierCurveTo(v,d,p,g,S,x),v=R,d=D}else a.lineTo(S,x)}f=S,h=x,y+=s}return _}var ECPolylineShape=function(){function a(){this.smooth=0,this.smoothConstraint=!0}return a}(),ECPolyline=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:tokens.color.neutral99,fill:null}},t.prototype.getDefaultShape=function(){return new ECPolylineShape},t.prototype.buildPath=function(r,n){var o=n.points,s=0,l=o.length/2;if(n.connectNulls){for(;l>0&&isPointNull$1(o[l*2-2],o[l*2-1]);l--);for(;s<l&&isPointNull$1(o[s*2],o[s*2+1]);s++);}for(;s<l;)s+=drawSegment(r,o,s,l,l,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var o=this.path,s=o.data,l=PathProxy.CMD,u,c,f=n==="x",h=[],v=0;v<s.length;){var d=s[v++],p=void 0,g=void 0,y=void 0,_=void 0,S=void 0,x=void 0,T=void 0;switch(d){case l.M:u=s[v++],c=s[v++];break;case l.L:if(p=s[v++],g=s[v++],T=f?(r-u)/(p-u):(r-c)/(g-c),T<=1&&T>=0){var b=f?(g-c)*T+c:(p-u)*T+u;return f?[r,b]:[b,r]}u=p,c=g;break;case l.C:p=s[v++],g=s[v++],y=s[v++],_=s[v++],S=s[v++],x=s[v++];var C=f?cubicRootAt(u,p,y,S,r,h):cubicRootAt(c,g,_,x,r,h);if(C>0)for(var w=0;w<C;w++){var M=h[w];if(M<=1&&M>=0){var b=f?cubicAt(c,g,_,x,M):cubicAt(u,p,y,S,M);return f?[r,b]:[b,r]}}u=S,c=x;break}}},t}(Path),ECPolygonShape=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t}(ECPolylineShape),ECPolygon=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new ECPolygonShape},t.prototype.buildPath=function(r,n){var o=n.points,s=n.stackedOnPoints,l=0,u=o.length/2,c=n.smoothMonotone;if(n.connectNulls){for(;u>0&&isPointNull$1(o[u*2-2],o[u*2-1]);u--);for(;l<u&&isPointNull$1(o[l*2],o[l*2+1]);l++);}for(;l<u;){var f=drawSegment(r,o,l,u,u,1,n.smooth,c,n.connectNulls);drawSegment(r,s,l+f-1,f,u,-1,n.stackedOnSmooth,c,n.connectNulls),l+=f+1,r.closePath()}},t}(Path);function createGridClipPath(a,t,r,n,o){var s=a.getArea(),l=s.x,u=s.y,c=s.width,f=s.height,h=r.get(["lineStyle","width"])||0;l-=h/2,u-=h/2,c+=h,f+=h,c=Math.ceil(c),l!==Math.floor(l)&&(l=Math.floor(l),c++);var v=new Rect$2({shape:{x:l,y:u,width:c,height:f}});if(t){var d=a.getBaseAxis(),p=d.isHorizontal(),g=d.inverse;p?(g&&(v.shape.x+=c),v.shape.width=0):(g||(v.shape.y+=f),v.shape.height=0);var y=isFunction(o)?function(_){o(_,v)}:null;initProps(v,{shape:{width:c,height:f,x:l,y:u}},r,null,n,y)}return v}function createPolarClipPath(a,t,r){var n=a.getArea(),o=round$4(n.r0,1),s=round$4(n.r,1),l=new Sector({shape:{cx:round$4(a.cx,1),cy:round$4(a.cy,1),r0:o,r:s,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var u=a.getBaseAxis().dim==="angle";u?l.shape.endAngle=n.startAngle:l.shape.r=o,initProps(l,{shape:{endAngle:n.endAngle,r:s}},r)}return l}function createClipPath(a,t,r,n,o){if(a){if(a.type==="polar")return createPolarClipPath(a,t,r);if(a.type==="cartesian2d")return createGridClipPath(a,t,r,n,o)}else return null;return null}function isCoordinateSystemType(a,t){return a.type===t}function isPointsSame(a,t){if(a.length===t.length){for(var r=0;r<a.length;r++)if(a[r]!==t[r])return;return!0}}function bboxFromPoints(a){for(var t=1/0,r=1/0,n=-1/0,o=-1/0,s=0;s<a.length;){var l=a[s++],u=a[s++];isNaN(l)||(t=Math.min(l,t),n=Math.max(l,n)),isNaN(u)||(r=Math.min(u,r),o=Math.max(u,o))}return[[t,r],[n,o]]}function getBoundingDiff(a,t){var r=bboxFromPoints(a),n=r[0],o=r[1],s=bboxFromPoints(t),l=s[0],u=s[1];return Math.max(Math.abs(n[0]-l[0]),Math.abs(n[1]-l[1]),Math.abs(o[0]-u[0]),Math.abs(o[1]-u[1]))}function getSmooth(a){return isNumber(a)?a:a?.5:0}function getStackedOnPoints(a,t,r){if(!r.valueDim)return[];for(var n=t.count(),o=createFloat32Array(n*2),s=0;s<n;s++){var l=getStackedOnPoint(r,a,t,s);o[s*2]=l[0],o[s*2+1]=l[1]}return o}function turnPointsIntoStep(a,t,r,n,o){var s=r.getBaseAxis(),l=s.dim==="x"||s.dim==="radius"?0:1,u=[],c=0,f=[],h=[],v=[],d=[];if(o){for(c=0;c<a.length;c+=2){var p=t||a;!isNaN(p[c])&&!isNaN(p[c+1])&&d.push(a[c],a[c+1])}a=d}for(c=0;c<a.length-2;c+=2)switch(v[0]=a[c+2],v[1]=a[c+3],h[0]=a[c],h[1]=a[c+1],u.push(h[0],h[1]),n){case"end":f[l]=v[l],f[1-l]=h[1-l],u.push(f[0],f[1]);break;case"middle":var g=(h[l]+v[l])/2,y=[];f[l]=y[l]=g,f[1-l]=h[1-l],y[1-l]=v[1-l],u.push(f[0],f[1]),u.push(y[0],y[1]);break;default:f[l]=h[l],f[1-l]=v[1-l],u.push(f[0],f[1])}return u.push(a[c++],a[c++]),u}function clipColorStops(a,t){var r=[],n=a.length,o,s;function l(h,v,d){var p=h.coord,g=(d-p)/(v.coord-p),y=lerp(g,[h.color,v.color]);return{coord:d,color:y}}for(var u=0;u<n;u++){var c=a[u],f=c.coord;if(f<0)o=c;else if(f>t){s?r.push(l(s,c,t)):o&&r.push(l(o,c,0),l(o,c,t));break}else o&&(r.push(l(o,c,0)),o=null),r.push(c),s=c}return r}function getVisualGradient(a,t,r){var n=a.getVisual("visualMeta");if(!(!n||!n.length||!a.count())&&t.type==="cartesian2d"){for(var o,s,l=n.length-1;l>=0;l--){var u=a.getDimensionInfo(n[l].dimension);if(o=u&&u.coordDim,o==="x"||o==="y"){s=n[l];break}}if(s){var c=t.getAxis(o),f=map$1(s.stops,function(T){return{coord:c.toGlobalCoord(c.dataToCoord(T.value)),color:T.color}}),h=f.length,v=s.outerColors.slice();h&&f[0].coord>f[h-1].coord&&(f.reverse(),v.reverse());var d=clipColorStops(f,o==="x"?r.getWidth():r.getHeight()),p=d.length;if(!p&&h)return f[0].coord<0?v[1]?v[1]:f[h-1].color:v[0]?v[0]:f[0].color;var g=10,y=d[0].coord-g,_=d[p-1].coord+g,S=_-y;if(S<.001)return"transparent";each$f(d,function(T){T.offset=(T.coord-y)/S}),d.push({offset:p?d[p-1].offset:.5,color:v[1]||"transparent"}),d.unshift({offset:p?d[0].offset:.5,color:v[0]||"transparent"});var x=new LinearGradient(0,0,0,0,d,!0);return x[o]=y,x[o+"2"]=_,x}}}function getIsIgnoreFunc(a,t,r){var n=a.get("showAllSymbol"),o=n==="auto";if(!(n&&!o)){var s=r.getAxesByScale("ordinal")[0];if(s&&!(o&&canShowAllSymbolForCategory(s,t))){var l=t.mapDimension(s.dim),u={};return each$f(s.getViewLabels(),function(c){var f=s.scale.getRawOrdinalNumber(c.tickValue);u[f]=1}),function(c){return!u.hasOwnProperty(t.get(l,c))}}}}function canShowAllSymbolForCategory(a,t){var r=a.getExtent(),n=Math.abs(r[1]-r[0])/a.scale.count();isNaN(n)&&(n=0);for(var o=t.count(),s=Math.max(1,Math.round(o/5)),l=0;l<o;l+=s)if(Symbol$1.getSymbolSize(t,l)[a.isHorizontal()?1:0]*1.5>n)return!1;return!0}function isPointNull(a,t){return isNaN(a)||isNaN(t)}function getLastIndexNotNull(a){for(var t=a.length/2;t>0&&isPointNull(a[t*2-2],a[t*2-1]);t--);return t-1}function getPointAtIndex(a,t){return[a[t*2],a[t*2+1]]}function getIndexRange(a,t,r){for(var n=a.length/2,o=r==="x"?0:1,s,l,u=0,c=-1,f=0;f<n;f++)if(l=a[f*2+o],!(isNaN(l)||isNaN(a[f*2+1-o]))){if(f===0){s=l;continue}if(s<=t&&l>=t||s>=t&&l<=t){c=f;break}u=f,s=l}return{range:[u,c],t:(t-s)/(l-s)}}function anyStateShowEndLabel(a){if(a.get(["endLabel","show"]))return!0;for(var t=0;t<SPECIAL_STATES.length;t++)if(a.get([SPECIAL_STATES[t],"endLabel","show"]))return!0;return!1}function createLineClipPath(a,t,r,n){if(isCoordinateSystemType(t,"cartesian2d")){var o=n.getModel("endLabel"),s=o.get("valueAnimation"),l=n.getData(),u={lastFrameIndex:0},c=anyStateShowEndLabel(n)?function(p,g){a._endLabelOnDuring(p,g,l,u,s,o,t)}:null,f=t.getBaseAxis().isHorizontal(),h=createGridClipPath(t,r,n,function(){var p=a._endLabel;p&&r&&u.originalX!=null&&p.attr({x:u.originalX,y:u.originalY})},c);if(!n.get("clip",!0)){var v=h.shape,d=Math.max(v.width,v.height);f?(v.y-=d,v.height+=d*2):(v.x-=d,v.width+=d*2)}return c&&c(1,h),h}else return createPolarClipPath(t,r,n)}function getEndLabelStateSpecified(a,t){var r=t.getBaseAxis(),n=r.isHorizontal(),o=r.inverse,s=n?o?"right":"left":"center",l=n?"middle":o?"top":"bottom";return{normal:{align:a.get("align")||s,verticalAlign:a.get("verticalAlign")||l}}}var LineView=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.init=function(){var r=new Group$3,n=new SymbolDraw;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r,this._changePolyState=bind$1(this._changePolyState,this)},t.prototype.render=function(r,n,o){var s=r.coordinateSystem,l=this.group,u=r.getData(),c=r.getModel("lineStyle"),f=r.getModel("areaStyle"),h=u.getLayout("points")||[],v=s.type==="polar",d=this._coordSys,p=this._symbolDraw,g=this._polyline,y=this._polygon,_=this._lineGroup,S=!n.ssr&&r.get("animation"),x=!f.isEmpty(),T=f.get("origin"),b=prepareDataCoordInfo(s,u,T),C=x&&getStackedOnPoints(s,u,b),w=r.get("showSymbol"),M=r.get("connectNulls"),P=w&&!v&&getIsIgnoreFunc(r,u,s),L=this._data;L&&L.eachItemGraphicEl(function(Z,J){Z.__temp&&(l.remove(Z),L.setItemGraphicEl(J,null))}),w||p.remove(),l.add(_);var E=v?!1:r.get("step"),I;s&&s.getArea&&r.get("clip",!0)&&(I=s.getArea(),I.width!=null?(I.x-=.1,I.y-=.1,I.width+=.2,I.height+=.2):I.r0&&(I.r0-=.5,I.r+=.5)),this._clipShapeForSymbol=I;var R=getVisualGradient(u,s,o)||u.getVisual("style")[u.getVisual("drawType")];if(!(g&&d.type===s.type&&E===this._step))w&&p.updateData(u,{isIgnore:P,clipShape:I,disableAnimation:!0,getSymbolPoint:function(Z){return[h[Z*2],h[Z*2+1]]}}),S&&this._initSymbolLabelAnimation(u,s,I),E&&(C&&(C=turnPointsIntoStep(C,h,s,E,M)),h=turnPointsIntoStep(h,null,s,E,M)),g=this._newPolyline(h),x?y=this._newPolygon(h,C):y&&(_.remove(y),y=this._polygon=null),v||this._initOrUpdateEndLabel(r,s,convertToColorString(R)),_.setClipPath(createLineClipPath(this,s,!0,r));else{x&&!y?y=this._newPolygon(h,C):y&&!x&&(_.remove(y),y=this._polygon=null),v||this._initOrUpdateEndLabel(r,s,convertToColorString(R));var D=_.getClipPath();if(D){var O=createLineClipPath(this,s,!1,r);initProps(D,{shape:O.shape},r)}else _.setClipPath(createLineClipPath(this,s,!0,r));w&&p.updateData(u,{isIgnore:P,clipShape:I,disableAnimation:!0,getSymbolPoint:function(Z){return[h[Z*2],h[Z*2+1]]}}),(!isPointsSame(this._stackedOnPoints,C)||!isPointsSame(this._points,h))&&(S?this._doUpdateAnimation(u,C,s,o,E,T,M):(E&&(C&&(C=turnPointsIntoStep(C,h,s,E,M)),h=turnPointsIntoStep(h,null,s,E,M)),g.setShape({points:h}),y&&y.setShape({points:h,stackedOnPoints:C})))}var $=r.getModel("emphasis"),N=$.get("focus"),V=$.get("blurScope"),B=$.get("disabled");if(g.useStyle(defaults(c.getLineStyle(),{fill:"none",stroke:R,lineJoin:"bevel"})),setStatesStylesFromModel(g,r,"lineStyle"),g.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var F=g.getState("emphasis").style;F.lineWidth=+g.style.lineWidth+1}getECData(g).seriesIndex=r.seriesIndex,toggleHoverEmphasis(g,N,V,B);var G=getSmooth(r.get("smooth")),z=r.get("smoothMonotone");if(g.setShape({smooth:G,smoothMonotone:z,connectNulls:M}),y){var H=u.getCalculationInfo("stackedOnSeries"),U=0;y.useStyle(defaults(f.getAreaStyle(),{fill:R,opacity:.7,lineJoin:"bevel",decal:u.getVisual("style").decal})),H&&(U=getSmooth(H.get("smooth"))),y.setShape({smooth:G,stackedOnSmooth:U,smoothMonotone:z,connectNulls:M}),setStatesStylesFromModel(y,r,"areaStyle"),getECData(y).seriesIndex=r.seriesIndex,toggleHoverEmphasis(y,N,V,B)}var Y=this._changePolyState;u.eachItemGraphicEl(function(Z){Z&&(Z.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=u,this._coordSys=s,this._stackedOnPoints=C,this._points=h,this._step=E,this._valueOrigin=T,r.get("triggerLineEvent")&&(this.packEventData(r,g),y&&this.packEventData(r,y))},t.prototype.packEventData=function(r,n){getECData(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,n,o,s){var l=r.getData(),u=queryDataIndex(l,s);if(this._changePolyState("emphasis"),!(u instanceof Array)&&u!=null&&u>=0){var c=l.getLayout("points"),f=l.getItemGraphicEl(u);if(!f){var h=c[u*2],v=c[u*2+1];if(isNaN(h)||isNaN(v)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(h,v))return;var d=r.get("zlevel")||0,p=r.get("z")||0;f=new Symbol$1(l,u),f.x=h,f.y=v,f.setZ(d,p);var g=f.getSymbolPath().getTextContent();g&&(g.zlevel=d,g.z=p,g.z2=this._polyline.z2+1),f.__temp=!0,l.setItemGraphicEl(u,f),f.stopSymbolAnimation(!0),this.group.add(f)}f.highlight()}else ChartView.prototype.highlight.call(this,r,n,o,s)},t.prototype.downplay=function(r,n,o,s){var l=r.getData(),u=queryDataIndex(l,s);if(this._changePolyState("normal"),u!=null&&u>=0){var c=l.getItemGraphicEl(u);c&&(c.__temp?(l.setItemGraphicEl(u,null),this.group.remove(c)):c.downplay())}else ChartView.prototype.downplay.call(this,r,n,o,s)},t.prototype._changePolyState=function(r){var n=this._polygon;setStatesFlag(this._polyline,r),n&&setStatesFlag(n,r)},t.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new ECPolyline({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(r,n){var o=this._polygon;return o&&this._lineGroup.remove(o),o=new ECPolygon({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(o),this._polygon=o,o},t.prototype._initSymbolLabelAnimation=function(r,n,o){var s,l,u=n.getBaseAxis(),c=u.inverse;n.type==="cartesian2d"?(s=u.isHorizontal(),l=!1):n.type==="polar"&&(s=u.dim==="angle",l=!0);var f=r.hostModel,h=f.get("animationDuration");isFunction(h)&&(h=h(null));var v=f.get("animationDelay")||0,d=isFunction(v)?v(null):v;r.eachItemGraphicEl(function(p,g){var y=p;if(y){var _=[p.x,p.y],S=void 0,x=void 0,T=void 0;if(o)if(l){var b=o,C=n.pointToCoord(_);s?(S=b.startAngle,x=b.endAngle,T=-C[1]/180*Math.PI):(S=b.r0,x=b.r,T=C[0])}else{var w=o;s?(S=w.x,x=w.x+w.width,T=p.x):(S=w.y+w.height,x=w.y,T=p.y)}var M=x===S?0:(T-S)/(x-S);c&&(M=1-M);var P=isFunction(v)?v(g):h*M+d,L=y.getSymbolPath(),E=L.getTextContent();y.attr({scaleX:0,scaleY:0}),y.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:P}),E&&E.animateFrom({style:{opacity:0}},{duration:300,delay:P}),L.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,n,o){var s=r.getModel("endLabel");if(anyStateShowEndLabel(r)){var l=r.getData(),u=this._polyline,c=l.getLayout("points");if(!c){u.removeTextContent(),this._endLabel=null;return}var f=this._endLabel;f||(f=this._endLabel=new ZRText({z2:200}),f.ignoreClip=!0,u.setTextContent(this._endLabel),u.disableLabelAnimation=!0);var h=getLastIndexNotNull(c);h>=0&&(setLabelStyle(u,getLabelStatesModels(r,"endLabel"),{inheritColor:o,labelFetcher:r,labelDataIndex:h,defaultText:function(v,d,p){return p!=null?getDefaultInterpolatedLabel(l,p):getDefaultLabel(l,v)},enableTextSetter:!0},getEndLabelStateSpecified(s,n)),u.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,n,o,s,l,u,c){var f=this._endLabel,h=this._polyline;if(f){r<1&&s.originalX==null&&(s.originalX=f.x,s.originalY=f.y);var v=o.getLayout("points"),d=o.hostModel,p=d.get("connectNulls"),g=u.get("precision"),y=u.get("distance")||0,_=c.getBaseAxis(),S=_.isHorizontal(),x=_.inverse,T=n.shape,b=x?S?T.x:T.y+T.height:S?T.x+T.width:T.y,C=(S?y:0)*(x?-1:1),w=(S?0:-y)*(x?-1:1),M=S?"x":"y",P=getIndexRange(v,b,M),L=P.range,E=L[1]-L[0],I=void 0;if(E>=1){if(E>1&&!p){var R=getPointAtIndex(v,L[0]);f.attr({x:R[0]+C,y:R[1]+w}),l&&(I=d.getRawValue(L[0]))}else{var R=h.getPointOn(b,M);R&&f.attr({x:R[0]+C,y:R[1]+w});var D=d.getRawValue(L[0]),O=d.getRawValue(L[1]);l&&(I=interpolateRawValues(o,g,D,O,P.t))}s.lastFrameIndex=L[0]}else{var $=r===1||s.lastFrameIndex>0?L[0]:0,R=getPointAtIndex(v,$);l&&(I=d.getRawValue($)),f.attr({x:R[0]+C,y:R[1]+w})}if(l){var N=labelInner(f);typeof N.setLabelText=="function"&&N.setLabelText(I)}}},t.prototype._doUpdateAnimation=function(r,n,o,s,l,u,c){var f=this._polyline,h=this._polygon,v=r.hostModel,d=lineAnimationDiff(this._data,r,this._stackedOnPoints,n,this._coordSys,o,this._valueOrigin),p=d.current,g=d.stackedOnCurrent,y=d.next,_=d.stackedOnNext;if(l&&(g=turnPointsIntoStep(d.stackedOnCurrent,d.current,o,l,c),p=turnPointsIntoStep(d.current,null,o,l,c),_=turnPointsIntoStep(d.stackedOnNext,d.next,o,l,c),y=turnPointsIntoStep(d.next,null,o,l,c)),getBoundingDiff(p,y)>3e3||h&&getBoundingDiff(g,_)>3e3){f.stopAnimation(),f.setShape({points:y}),h&&(h.stopAnimation(),h.setShape({points:y,stackedOnPoints:_}));return}f.shape.__points=d.current,f.shape.points=p;var S={shape:{points:y}};d.current!==p&&(S.shape.__points=d.next),f.stopAnimation(),updateProps$1(f,S,v),h&&(h.setShape({points:p,stackedOnPoints:g}),h.stopAnimation(),updateProps$1(h,{shape:{stackedOnPoints:_}},v),f.shape.points!==h.shape.points&&(h.shape.points=f.shape.points));for(var x=[],T=d.status,b=0;b<T.length;b++){var C=T[b].cmd;if(C==="="){var w=r.getItemGraphicEl(T[b].idx1);w&&x.push({el:w,ptIdx:b})}}f.animators&&f.animators.length&&f.animators[0].during(function(){h&&h.dirtyShape();for(var M=f.shape.__points,P=0;P<x.length;P++){var L=x[P].el,E=x[P].ptIdx*2;L.x=M[E],L.y=M[E+1],L.markRedraw()}})},t.prototype.remove=function(r){var n=this.group,o=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),o&&o.eachItemGraphicEl(function(s,l){s.__temp&&(n.remove(s),o.setItemGraphicEl(l,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(ChartView);function pointsLayout(a,t){return{seriesType:a,plan:createRenderPlanner(),reset:function(r){var n=r.getData(),o=r.coordinateSystem,s=r.pipelineContext,l=t||s.large;if(o){var u=map$1(o.dimensions,function(p){return n.mapDimension(p)}).slice(0,2),c=u.length,f=n.getCalculationInfo("stackResultDimension");isDimensionStacked(n,u[0])&&(u[0]=f),isDimensionStacked(n,u[1])&&(u[1]=f);var h=n.getStore(),v=n.getDimensionIndex(u[0]),d=n.getDimensionIndex(u[1]);return c&&{progress:function(p,g){for(var y=p.end-p.start,_=l&&createFloat32Array(y*c),S=[],x=[],T=p.start,b=0;T<p.end;T++){var C=void 0;if(c===1){var w=h.get(v,T);C=o.dataToPoint(w,null,x)}else S[0]=h.get(v,T),S[1]=h.get(d,T),C=o.dataToPoint(S,null,x);l?(_[b++]=C[0],_[b++]=C[1]):g.setItemLayout(T,C.slice())}l&&g.setLayout("points",_)}}}}}}var samplers={average:function(a){for(var t=0,r=0,n=0;n<a.length;n++)isNaN(a[n])||(t+=a[n],r++);return r===0?NaN:t/r},sum:function(a){for(var t=0,r=0;r<a.length;r++)t+=a[r]||0;return t},max:function(a){for(var t=-1/0,r=0;r<a.length;r++)a[r]>t&&(t=a[r]);return isFinite(t)?t:NaN},min:function(a){for(var t=1/0,r=0;r<a.length;r++)a[r]<t&&(t=a[r]);return isFinite(t)?t:NaN},nearest:function(a){return a[0]}},indexSampler=function(a){return Math.round(a.length/2)};function dataSample(a){return{seriesType:a,reset:function(t,r,n){var o=t.getData(),s=t.get("sampling"),l=t.coordinateSystem,u=o.count();if(u>10&&l.type==="cartesian2d"&&s){var c=l.getBaseAxis(),f=l.getOtherAxis(c),h=c.getExtent(),v=n.getDevicePixelRatio(),d=Math.abs(h[1]-h[0])*(v||1),p=Math.round(u/d);if(isFinite(p)&&p>1){s==="lttb"?t.setData(o.lttbDownSample(o.mapDimension(f.dim),1/p)):s==="minmax"&&t.setData(o.minmaxDownSample(o.mapDimension(f.dim),1/p));var g=void 0;isString(s)?g=samplers[s]:isFunction(s)&&(g=s),g&&t.setData(o.downSample(o.mapDimension(f.dim),1/p,g,indexSampler))}}}}}function install$T(a){a.registerChartView(LineView),a.registerSeriesModel(LineSeriesModel),a.registerLayout(pointsLayout("line",!0)),a.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){return createSeriesData(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r,n,o){var s=this.coordinateSystem;if(s&&s.clampData){var l=s.clampData(r),u=s.dataToPoint(l);if(o)each$f(s.getAxes(),function(d,p){if(d.type==="category"&&n!=null){var g=d.getTicksCoords(),y=d.getTickModel().get("alignWithLabel"),_=l[p],S=n[p]==="x1"||n[p]==="y1";if(S&&!y&&(_+=1),g.length<2)return;if(g.length===2){u[p]=d.toGlobalCoord(d.getExtent()[S?1:0]);return}for(var x=void 0,T=void 0,b=1,C=0;C<g.length;C++){var w=g[C].coord,M=C===g.length-1?g[C-1].tickValue+b:g[C].tickValue;if(M===_){T=w;break}else if(M<_)x=w;else if(x!=null&&M>_){T=(w+x)/2;break}C===1&&(b=M-g[0].tickValue)}T==null&&(x?x&&(T=g[g.length-1].coord):T=g[0].coord),u[p]=d.toGlobalCoord(T)}});else{var c=this.getData(),f=c.getLayout("offset"),h=c.getLayout("size"),v=s.getBaseAxis().isHorizontal()?0:1;u[v]+=f+h/2}return u}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",defaultBarGap:"10%"},t}(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>r&&(r=n),r},t.prototype.brushSelector=function(r,n,o){return o.rect(n.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:tokens.color.primary,borderWidth:2}},realtimeSort:!1}),t}(BaseBarSeriesModel),SausageShape=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),SausagePath=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new SausageShape},t.prototype.buildPath=function(r,n){var o=n.cx,s=n.cy,l=Math.max(n.r0||0,0),u=Math.max(n.r,0),c=(u-l)*.5,f=l+c,h=n.startAngle,v=n.endAngle,d=n.clockwise,p=Math.PI*2,g=d?v-h<p:h-v<p;g||(h=v-(d?p:-p));var y=Math.cos(h),_=Math.sin(h),S=Math.cos(v),x=Math.sin(v);g?(r.moveTo(y*l+o,_*l+s),r.arc(y*f+o,_*f+s,c,-Math.PI+h,h,!d)):r.moveTo(y*u+o,_*u+s),r.arc(o,s,u,h,v,!d),r.arc(S*f+o,x*f+s,c,v-Math.PI*2,v-Math.PI,!d),l!==0&&r.arc(o,s,l,v,h,d)},t}(Path);function createSectorCalculateTextPosition(a,t){t=t||{};var r=t.isRoundCap;return function(n,o,s){var l=o.position;if(!l||l instanceof Array)return calculateTextPosition(n,o,s);var u=a(l),c=o.distance!=null?o.distance:5,f=this.shape,h=f.cx,v=f.cy,d=f.r,p=f.r0,g=(d+p)/2,y=f.startAngle,_=f.endAngle,S=(y+_)/2,x=r?Math.abs(d-p)/2:0,T=Math.cos,b=Math.sin,C=h+d*T(y),w=v+d*b(y),M="left",P="top";switch(u){case"startArc":C=h+(p-c)*T(S),w=v+(p-c)*b(S),M="center",P="top";break;case"insideStartArc":C=h+(p+c)*T(S),w=v+(p+c)*b(S),M="center",P="bottom";break;case"startAngle":C=h+g*T(y)+adjustAngleDistanceX(y,c+x,!1),w=v+g*b(y)+adjustAngleDistanceY(y,c+x,!1),M="right",P="middle";break;case"insideStartAngle":C=h+g*T(y)+adjustAngleDistanceX(y,-c+x,!1),w=v+g*b(y)+adjustAngleDistanceY(y,-c+x,!1),M="left",P="middle";break;case"middle":C=h+g*T(S),w=v+g*b(S),M="center",P="middle";break;case"endArc":C=h+(d+c)*T(S),w=v+(d+c)*b(S),M="center",P="bottom";break;case"insideEndArc":C=h+(d-c)*T(S),w=v+(d-c)*b(S),M="center",P="top";break;case"endAngle":C=h+g*T(_)+adjustAngleDistanceX(_,c+x,!0),w=v+g*b(_)+adjustAngleDistanceY(_,c+x,!0),M="left",P="middle";break;case"insideEndAngle":C=h+g*T(_)+adjustAngleDistanceX(_,-c+x,!0),w=v+g*b(_)+adjustAngleDistanceY(_,-c+x,!0),M="right",P="middle";break;default:return calculateTextPosition(n,o,s)}return n=n||{},n.x=C,n.y=w,n.align=M,n.verticalAlign=P,n}}function setSectorTextRotation(a,t,r,n){if(isNumber(n)){a.setTextConfig({rotation:n});return}else if(isArray$1(t)){a.setTextConfig({rotation:0});return}var o=a.shape,s=o.clockwise?o.startAngle:o.endAngle,l=o.clockwise?o.endAngle:o.startAngle,u=(s+l)/2,c,f=r(t);switch(f){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":c=u;break;case"startAngle":case"insideStartAngle":c=s;break;case"endAngle":case"insideEndAngle":c=l;break;default:a.setTextConfig({rotation:0});return}var h=Math.PI*1.5-c;f==="middle"&&h>Math.PI/2&&h<Math.PI*1.5&&(h-=Math.PI),a.setTextConfig({rotation:h})}function adjustAngleDistanceX(a,t,r){return t*Math.sin(a)*(r?-1:1)}function adjustAngleDistanceY(a,t,r){return t*Math.cos(a)*(r?1:-1)}function getSectorCornerRadius(a,t,r){var n=a.get("borderRadius");if(n==null)return r?{cornerRadius:0}:null;isArray$1(n)||(n=[n,n,n,n]);var o=Math.abs(t.r||0-t.r0||0);return{cornerRadius:map$1(n,function(s){return parsePercent$1(s,o)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(a,t){var r=a.getArea&&a.getArea();if(isCoordinateSystemType(a,"cartesian2d")){var n=a.getBaseAxis();if(n.type!=="category"||!n.onBand){var o=t.getLayout("bandWidth");n.isHorizontal()?(r.x-=o,r.width+=o*2):(r.y-=o,r.height+=o*2)}}return r}var BarView=function(a){__extends(t,a);function t(){var r=a.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,n,o,s){this._model=r,this._removeOnRenderedListener(o),this._updateDrawMode(r);var l=r.get("coordinateSystem");(l==="cartesian2d"||l==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,n,o):this._renderNormal(r,n,o,s))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,n){this._progressiveEls=[],this._incrementalRenderLarge(r,n)},t.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(r,n,o,s){var l=this.group,u=r.getData(),c=this._data,f=r.coordinateSystem,h=f.getBaseAxis(),v;f.type==="cartesian2d"?v=h.isHorizontal():f.type==="polar"&&(v=h.dim==="angle");var d=r.isAnimationEnabled()?r:null,p=shouldRealtimeSort(r,f);p&&this._enableRealtimeSort(p,u,o);var g=r.get("clip",!0)||p,y=getClipArea(f,u);l.removeClipPath();var _=r.get("roundCap",!0),S=r.get("showBackground",!0),x=r.getModel("backgroundStyle"),T=x.get("borderRadius")||0,b=[],C=this._backgroundEls,w=s&&s.isInitSort,M=s&&s.type==="changeAxisOrder";function P(I){var R=getLayout[f.type](u,I);if(!R)return null;var D=createBackgroundEl(f,v,R);return D.useStyle(x.getItemStyle()),f.type==="cartesian2d"?D.setShape("r",T):D.setShape("cornerRadius",T),b[I]=D,D}u.diff(c).add(function(I){var R=u.getItemModel(I),D=getLayout[f.type](u,I,R);if(D&&(S&&P(I),!(!u.hasValue(I)||!isValidLayout[f.type](D)))){var O=!1;g&&(O=clip[f.type](y,D));var $=elementCreator[f.type](r,u,I,D,v,d,h.model,!1,_);p&&($.forceLabelAnimation=!0),updateStyle($,u,I,R,D,r,v,f.type==="polar"),w?$.attr({shape:D}):p?updateRealtimeAnimation(p,d,$,D,I,v,!1,!1):initProps($,{shape:D},r,I),u.setItemGraphicEl(I,$),l.add($),$.ignore=O}}).update(function(I,R){var D=u.getItemModel(I),O=getLayout[f.type](u,I,D);if(O){if(S){var $=void 0;C.length===0?$=P(R):($=C[R],$.useStyle(x.getItemStyle()),f.type==="cartesian2d"?$.setShape("r",T):$.setShape("cornerRadius",T),b[I]=$);var N=getLayout[f.type](u,I),V=createBackgroundShape(v,N,f);updateProps$1($,{shape:V},d,I)}var B=c.getItemGraphicEl(R);if(!u.hasValue(I)||!isValidLayout[f.type](O)){l.remove(B);return}var F=!1;g&&(F=clip[f.type](y,O),F&&l.remove(B));var G=B&&(B.type==="sector"&&_||B.type==="sausage"&&!_);if(G&&(B&&removeElementWithFadeOut(B,r,R),B=null),B?saveOldStyle(B):B=elementCreator[f.type](r,u,I,O,v,d,h.model,!0,_),p&&(B.forceLabelAnimation=!0),M){var z=B.getTextContent();if(z){var H=labelInner(z);H.prevValue!=null&&(H.prevValue=H.value)}}else updateStyle(B,u,I,D,O,r,v,f.type==="polar");w?B.attr({shape:O}):p?updateRealtimeAnimation(p,d,B,O,I,v,!0,M):updateProps$1(B,{shape:O},r,I,null),u.setItemGraphicEl(I,B),B.ignore=F,l.add(B)}}).remove(function(I){var R=c.getItemGraphicEl(I);R&&removeElementWithFadeOut(R,r,I)}).execute();var L=this._backgroundGroup||(this._backgroundGroup=new Group$3);L.removeAll();for(var E=0;E<b.length;++E)L.add(b[E]);l.add(L),this._backgroundEls=b,this._data=u},t.prototype._renderLarge=function(r,n,o){this._clear(),createLarge$1(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,n){this._removeBackground(),createLarge$1(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var n=r.get("clip",!0)&&createClipPath(r.coordinateSystem,!1,r),o=this.group;n?o.setClipPath(n):o.removeClipPath()},t.prototype._enableRealtimeSort=function(r,n,o){var s=this;if(n.count()){var l=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,r,o),this._isFirstFrame=!1;else{var u=function(c){var f=n.getItemGraphicEl(c),h=f&&f.shape;return h&&Math.abs(l.isHorizontal()?h.height:h.width)||0};this._onRendered=function(){s._updateSortWithinSameData(n,u,l,o)},o.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,n,o){var s=[];return r.each(r.mapDimension(n.dim),function(l,u){var c=o(u);c=c??NaN,s.push({dataIndex:u,mappedValue:c,ordinalNumber:l})}),s.sort(function(l,u){return u.mappedValue-l.mappedValue}),{ordinalNumbers:map$1(s,function(l){return l.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,n,o){for(var s=o.scale,l=r.mapDimension(o.dim),u=Number.MAX_VALUE,c=0,f=s.getOrdinalMeta().categories.length;c<f;++c){var h=r.rawIndexOf(l,s.getRawOrdinalNumber(c)),v=h<0?Number.MIN_VALUE:n(r.indexOfRawIndex(h));if(v>u)return!0;u=v}return!1},t.prototype._isOrderDifferentInView=function(r,n){for(var o=n.scale,s=o.getExtent(),l=Math.max(0,s[0]),u=Math.min(s[1],o.getOrdinalMeta().categories.length-1);l<=u;++l)if(r.ordinalNumbers[l]!==o.getRawOrdinalNumber(l))return!0},t.prototype._updateSortWithinSameData=function(r,n,o,s){if(this._isOrderChangedWithinSameData(r,n,o)){var l=this._dataSort(r,o,n);this._isOrderDifferentInView(l,o)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",axisId:o.index,sortInfo:l}))}},t.prototype._dispatchInitSort=function(r,n,o){var s=n.baseAxis,l=this._dataSort(r,s,function(u){return r.get(r.mapDimension(n.otherAxis.dim),u)});o.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:l})},t.prototype.remove=function(r,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(r,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var n=this.group,o=this._data;r&&r.isAnimationEnabled()&&o&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],o.eachItemGraphicEl(function(s){removeElementWithFadeOut(s,r,getECData(s).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(ChartView),clip={cartesian2d:function(a,t){var r=t.width<0?-1:1,n=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var o=a.x+a.width,s=a.y+a.height,l=mathMax$4(t.x,a.x),u=mathMin$4(t.x+t.width,o),c=mathMax$4(t.y,a.y),f=mathMin$4(t.y+t.height,s),h=u<l,v=f<c;return t.x=h&&l>o?u:l,t.y=v&&c>s?f:c,t.width=h?0:u-l,t.height=v?0:f-c,r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),h||v},polar:function(a,t){var r=t.r0<=t.r?1:-1;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}var o=mathMin$4(t.r,a.r),s=mathMax$4(t.r0,a.r0);t.r=o,t.r0=s;var l=o-s<0;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}return l}},elementCreator={cartesian2d:function(a,t,r,n,o,s,l,u,c){var f=new Rect$2({shape:extend({},n),z2:1});if(f.__dataIndex=r,f.name="item",s){var h=f.shape,v=o?"height":"width";h[v]=0}return f},polar:function(a,t,r,n,o,s,l,u,c){var f=!o&&c?SausagePath:Sector,h=new f({shape:n,z2:1});h.name="item";var v=createPolarPositionMapping(o);if(h.calculateTextPosition=createSectorCalculateTextPosition(v,{isRoundCap:f===SausagePath}),s){var d=h.shape,p=o?"r":"endAngle",g={};d[p]=o?n.r0:n.startAngle,g[p]=n[p],(u?updateProps$1:initProps)(h,{shape:g},s)}return h}};function shouldRealtimeSort(a,t){var r=a.get("realtimeSort",!0),n=t.getBaseAxis();if(r&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function updateRealtimeAnimation(a,t,r,n,o,s,l,u){var c,f;s?(f={x:n.x,width:n.width},c={y:n.y,height:n.height}):(f={y:n.y,height:n.height},c={x:n.x,width:n.width}),u||(l?updateProps$1:initProps)(r,{shape:c},t,o,null);var h=t?a.baseAxis.model:null;(l?updateProps$1:initProps)(r,{shape:f},h,o)}function checkPropertiesNotValid(a,t){for(var r=0;r<t.length;r++)if(!isFinite(a[t[r]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(a){return!checkPropertiesNotValid(a,rectPropties)},polar:function(a){return!checkPropertiesNotValid(a,polarPropties)}},getLayout={cartesian2d:function(a,t,r){var n=a.getItemLayout(t);if(!n)return null;var o=r?getLineWidth(r,n):0,s=n.width>0?1:-1,l=n.height>0?1:-1;return{x:n.x+s*o/2,y:n.y+l*o/2,width:n.width-s*o,height:n.height-l*o}},polar:function(a,t,r){var n=a.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function isZeroOnPolar(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function createPolarPositionMapping(a){return function(t){var r=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+r;default:return n}}}(a)}function updateStyle(a,t,r,n,o,s,l,u){var c=t.getItemVisual(r,"style");if(u){if(!s.get("roundCap")){var h=a.shape,v=getSectorCornerRadius(n.getModel("itemStyle"),h,!0);extend(h,v),a.setShape(h)}}else{var f=n.get(["itemStyle","borderRadius"])||0;a.setShape("r",f)}a.useStyle(c);var d=n.getShallow("cursor");d&&a.attr("cursor",d);var p=u?l?o.r>=o.r0?"endArc":"startArc":o.endAngle>=o.startAngle?"endAngle":"startAngle":l?o.height>=0?"bottom":"top":o.width>=0?"right":"left",g=getLabelStatesModels(n);setLabelStyle(a,g,{labelFetcher:s,labelDataIndex:r,defaultText:getDefaultLabel(s.getData(),r),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:p});var y=a.getTextContent();if(u&&y){var _=n.get(["label","position"]);a.textConfig.inside=_==="middle"?!0:null,setSectorTextRotation(a,_==="outside"?p:_,createPolarPositionMapping(l),n.get(["label","rotate"]))}setLabelValueAnimation(y,g,s.getRawValue(r),function(x){return getDefaultInterpolatedLabel(t,x)});var S=n.getModel(["emphasis"]);toggleHoverEmphasis(a,S.get("focus"),S.get("blurScope"),S.get("disabled")),setStatesStylesFromModel(a,n),isZeroOnPolar(o)&&(a.style.fill="none",a.style.stroke="none",each$f(a.states,function(x){x.style&&(x.style.fill=x.style.stroke="none")}))}function getLineWidth(a,t){var r=a.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var n=a.get(["itemStyle","borderWidth"])||0,o=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),s=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,o,s)}var LagePathShape=function(){function a(){}return a}(),LargePath=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new LagePathShape},t.prototype.buildPath=function(r,n){for(var o=n.points,s=this.baseDimIdx,l=1-this.baseDimIdx,u=[],c=[],f=this.barWidth,h=0;h<o.length;h+=3)c[s]=f,c[l]=o[h+2],u[s]=o[h+s],u[l]=o[h+l],r.rect(u[0],u[1],c[0],c[1])},t}(Path);function createLarge$1(a,t,r,n){var o=a.getData(),s=o.getLayout("valueAxisHorizontal")?1:0,l=o.getLayout("largeDataIndices"),u=o.getLayout("size"),c=a.getModel("backgroundStyle"),f=o.getLayout("largeBackgroundPoints");if(f){var h=new LargePath({shape:{points:f},incremental:!!n,silent:!0,z2:0});h.baseDimIdx=s,h.largeDataIndices=l,h.barWidth=u,h.useStyle(c.getItemStyle()),t.add(h),r&&r.push(h)}var v=new LargePath({shape:{points:o.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});v.baseDimIdx=s,v.largeDataIndices=l,v.barWidth=u,t.add(v),v.useStyle(o.getVisual("style")),v.style.stroke=null,getECData(v).seriesIndex=a.seriesIndex,a.get("silent")||(v.on("mousedown",largePathUpdateDataIndex),v.on("mousemove",largePathUpdateDataIndex)),r&&r.push(v)}var largePathUpdateDataIndex=throttle(function(a){var t=this,r=largePathFindDataIndex(t,a.offsetX,a.offsetY);getECData(t).dataIndex=r>=0?r:null},30,!1);function largePathFindDataIndex(a,t,r){for(var n=a.baseDimIdx,o=1-n,s=a.shape.points,l=a.largeDataIndices,u=[],c=[],f=a.barWidth,h=0,v=s.length/3;h<v;h++){var d=h*3;if(c[n]=f,c[o]=s[d+2],u[n]=s[d+n],u[o]=s[d+o],c[o]<0&&(u[o]+=c[o],c[o]=-c[o]),t>=u[0]&&t<=u[0]+c[0]&&r>=u[1]&&r<=u[1]+c[1])return l[h]}return-1}function createBackgroundShape(a,t,r){if(isCoordinateSystemType(r,"cartesian2d")){var n=t,o=r.getArea();return{x:a?n.x:o.x,y:a?o.y:n.y,width:a?n.width:o.width,height:a?o.height:n.height}}else{var o=r.getArea(),s=t;return{cx:o.cx,cy:o.cy,r0:a?o.r0:s.r0,r:a?o.r:s.r,startAngle:a?s.startAngle:0,endAngle:a?s.endAngle:Math.PI*2}}}function createBackgroundEl(a,t,r){var n=a.type==="polar"?Sector:Rect$2;return new n({shape:createBackgroundShape(t,r,a),silent:!0,z2:0})}function install$S(a){a.registerChartView(BarView),a.registerSeriesModel(BarSeriesModel),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,curry$1(layout$2,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var n=t.componentType||"series";r.eachComponent({mainType:n,query:t},function(o){t.sortInfo&&o.axis.setCategorySortInfo(t.sortInfo)})})}var PI2=Math.PI*2,RADIAN$4=Math.PI/180;function pieLayout(a,t,r){t.eachSeriesByType(a,function(n){var o=n.getData(),s=o.mapDimension("value"),l=getCircleLayout(n,r),u=l.cx,c=l.cy,f=l.r,h=l.r0,v=l.viewRect,d=-n.get("startAngle")*RADIAN$4,p=n.get("endAngle"),g=n.get("padAngle")*RADIAN$4;p=p==="auto"?d-PI2:-p*RADIAN$4;var y=n.get("minAngle")*RADIAN$4,_=y+g,S=0;o.each(s,function(V){!isNaN(V)&&S++});var x=o.getSum(s),T=Math.PI/(x||S)*2,b=n.get("clockwise"),C=n.get("roseType"),w=n.get("stillShowZeroSum"),M=o.getDataExtent(s);M[0]=0;var P=b?1:-1,L=[d,p],E=P*g/2;normalizeArcAngles(L,!b),d=L[0],p=L[1];var I=getSeriesLayoutData(n);I.startAngle=d,I.endAngle=p,I.clockwise=b,I.cx=u,I.cy=c,I.r=f,I.r0=h;var R=Math.abs(p-d),D=R,O=0,$=d;if(o.setLayout({viewRect:v,r:f}),o.each(s,function(V,B){var F;if(isNaN(V)){o.setItemLayout(B,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:u,cy:c,r0:h,r:C?NaN:f});return}C!=="area"?F=x===0&&w?T:V*T:F=R/S,F<_?(F=_,D-=_):O+=V;var G=$+P*F,z=0,H=0;g>F?(z=$+P*F/2,H=z):(z=$+E,H=G-E),o.setItemLayout(B,{angle:F,startAngle:z,endAngle:H,clockwise:b,cx:u,cy:c,r0:h,r:C?linearMap$2(V,M,[h,f]):f}),$=G}),D<PI2&&S)if(D<=.001){var N=R/S;o.each(s,function(V,B){if(!isNaN(V)){var F=o.getItemLayout(B);F.angle=N;var G=0,z=0;N<g?(G=d+P*(B+1/2)*N,z=G):(G=d+P*B*N+E,z=d+P*(B+1)*N-E),F.startAngle=G,F.endAngle=z}})}else T=D/O,$=d,o.each(s,function(V,B){if(!isNaN(V)){var F=o.getItemLayout(B),G=F.angle===_?_:V*T,z=0,H=0;G<g?(z=$+P*G/2,H=z):(z=$+E,H=$+P*G-E),F.startAngle=z,F.endAngle=H,$+=P*G}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(a){return{seriesType:a,reset:function(t,r){var n=r.findComponents({mainType:"legend"});if(!(!n||!n.length)){var o=t.getData();o.filterSelf(function(s){for(var l=o.getName(s),u=0;u<n.length;u++)if(!n[u].isSelected(l))return!1;return!0})}}}}var RADIAN$3=Math.PI/180;function adjustSingleSide(a,t,r,n,o,s,l,u,c,f){if(a.length<2)return;function h(y){for(var _=y.rB,S=_*_,x=0;x<y.list.length;x++){var T=y.list[x],b=Math.abs(T.label.y-r),C=n+T.len,w=C*C,M=Math.sqrt(Math.abs((1-b*b/S)*w)),P=t+(M+T.len2)*o,L=P-T.label.x,E=T.targetTextWidth-L*o;constrainTextWidth(T,E,!0),T.label.x=P}}function v(y){for(var _={list:[],maxY:0},S={list:[],maxY:0},x=0;x<y.length;x++)if(y[x].labelAlignTo==="none"){var T=y[x],b=T.label.y>r?S:_,C=Math.abs(T.label.y-r);if(C>=b.maxY){var w=T.label.x-t-T.len2*o,M=n+T.len,P=Math.abs(w)<M?Math.sqrt(C*C/(1-w*w/M/M)):M;b.rB=P,b.maxY=C}b.list.push(T)}h(_),h(S)}for(var d=a.length,p=0;p<d;p++)if(a[p].position==="outer"&&a[p].labelAlignTo==="labelLine"){var g=a[p].label.x-f;a[p].linePoints[1][0]+=g,a[p].label.x=f}shiftLayoutOnXY(a,1,c,c+l)&&v(a)}function avoidOverlap(a,t,r,n,o,s,l,u){for(var c=[],f=[],h=Number.MAX_VALUE,v=-Number.MAX_VALUE,d=0;d<a.length;d++){var p=a[d].label;isPositionCenter(a[d])||(p.x<t?(h=Math.min(h,p.x),c.push(a[d])):(v=Math.max(v,p.x),f.push(a[d])))}for(var d=0;d<a.length;d++){var g=a[d];if(!isPositionCenter(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var p=g.label,y=g.linePoints,_=void 0;g.labelAlignTo==="edge"?p.x<t?_=y[2][0]-g.labelDistance-l-g.edgeDistance:_=l+o-g.edgeDistance-y[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?p.x<t?_=h-l-g.bleedMargin:_=l+o-v-g.bleedMargin:p.x<t?_=p.x-l-g.bleedMargin:_=l+o-p.x-g.bleedMargin,g.targetTextWidth=_,constrainTextWidth(g,_,!1)}}adjustSingleSide(f,t,r,n,1,o,s,l,u,v),adjustSingleSide(c,t,r,n,-1,o,s,l,u,h);for(var d=0;d<a.length;d++){var g=a[d];if(!isPositionCenter(g)&&g.linePoints){var p=g.label,y=g.linePoints,S=g.labelAlignTo==="edge",x=p.style.padding,T=x?x[1]+x[3]:0,b=p.style.backgroundColor?0:T,C=g.rect.width+b,w=y[1][0]-y[2][0];S?p.x<t?y[2][0]=l+g.edgeDistance+C+g.labelDistance:y[2][0]=l+o-g.edgeDistance-C-g.labelDistance:(p.x<t?y[2][0]=p.x+g.labelDistance:y[2][0]=p.x-g.labelDistance,y[1][0]=y[2][0]+w),y[1][1]=y[2][1]=p.y}}}function constrainTextWidth(a,t,r){if(a.labelStyleWidth==null){var n=a.label,o=n.style,s=a.rect,l=o.backgroundColor,u=o.padding,c=u?u[1]+u[3]:0,f=o.overflow,h=s.width+(l?0:c);if(t<h||r){if(f&&f.match("break")){n.setStyle("backgroundColor",null),n.setStyle("width",t-c);var v=n.getBoundingRect();n.setStyle("width",Math.ceil(v.width)),n.setStyle("backgroundColor",l)}else{var d=t-c,p=t<h?d:r?d>a.unconstrainedWidth?null:d:null;n.setStyle("width",p)}computeLabelGlobalRect(s,n)}}}function computeLabelGlobalRect(a,t){_tmpLabelGeometry.rect=a,computeLabelGeometry(_tmpLabelGeometry,t,_computeLabelGeometryOpt)}var _computeLabelGeometryOpt={minMarginForce:[null,0,null,0],marginDefault:[1,0,1,0]},_tmpLabelGeometry={};function isPositionCenter(a){return a.position==="center"}function pieLabelLayout(a){var t=a.getData(),r=[],n,o,s=!1,l=(a.get("minShowLabelAngle")||0)*RADIAN$3,u=t.getLayout("viewRect"),c=t.getLayout("r"),f=u.width,h=u.x,v=u.y,d=u.height;function p(w){w.ignore=!0}function g(w){if(!w.ignore)return!0;for(var M in w.states)if(w.states[M].ignore===!1)return!0;return!1}t.each(function(w){var M=t.getItemGraphicEl(w),P=M.shape,L=M.getTextContent(),E=M.getTextGuideLine(),I=t.getItemModel(w),R=I.getModel("label"),D=R.get("position")||I.get(["emphasis","label","position"]),O=R.get("distanceToLabelLine"),$=R.get("alignTo"),N=parsePercent(R.get("edgeDistance"),f),V=R.get("bleedMargin");V==null&&(V=Math.min(f,d)>200?10:2);var B=I.getModel("labelLine"),F=B.get("length");F=parsePercent(F,f);var G=B.get("length2");if(G=parsePercent(G,f),Math.abs(P.endAngle-P.startAngle)<l){each$f(L.states,p),L.ignore=!0,E&&(each$f(E.states,p),E.ignore=!0);return}if(g(L)){var z=(P.startAngle+P.endAngle)/2,H=Math.cos(z),U=Math.sin(z),Y,Z,J,ee;n=P.cx,o=P.cy;var K=D==="inside"||D==="inner";if(D==="center")Y=P.cx,Z=P.cy,ee="center";else{var X=(K?(P.r+P.r0)/2*H:P.r*H)+n,q=(K?(P.r+P.r0)/2*U:P.r*U)+o;if(Y=X+H*3,Z=q+U*3,!K){var W=X+H*(F+c-P.r),j=q+U*(F+c-P.r),re=W+(H<0?-1:1)*G,Q=j;$==="edge"?Y=H<0?h+N:h+f-N:Y=re+(H<0?-O:O),Z=Q,J=[[X,q],[W,j],[re,Q]]}ee=K?"center":$==="edge"?H>0?"right":"left":H>0?"left":"right"}var te=Math.PI,ae=0,ne=R.get("rotate");if(isNumber(ne))ae=ne*(te/180);else if(D==="center")ae=0;else if(ne==="radial"||ne===!0){var oe=H<0?-z+te:-z;ae=oe}else if(ne==="tangential"&&D!=="outside"&&D!=="outer"){var ie=Math.atan2(H,U);ie<0&&(ie=te*2+ie);var se=U>0;se&&(ie=te+ie),ae=ie-te}if(s=!!ae,L.x=Y,L.y=Z,L.rotation=ae,L.setStyle({verticalAlign:"middle"}),K){L.setStyle({align:ee});var ue=L.states.select;ue&&(ue.x+=L.x,ue.y+=L.y)}else{var le=new BoundingRect(0,0,0,0);computeLabelGlobalRect(le,L),r.push({label:L,labelLine:E,position:D,len:F,len2:G,minTurnAngle:B.get("minTurnAngle"),maxSurfaceAngle:B.get("maxSurfaceAngle"),surfaceNormal:new Point(H,U),linePoints:J,textAlign:ee,labelDistance:O,labelAlignTo:$,edgeDistance:N,bleedMargin:V,rect:le,unconstrainedWidth:le.width,labelStyleWidth:L.style.width})}M.setTextConfig({inside:K})}}),!s&&a.get("avoidLabelOverlap")&&avoidOverlap(r,n,o,c,f,d,h,v);for(var y=0;y<r.length;y++){var _=r[y],S=_.label,x=_.labelLine,T=isNaN(S.x)||isNaN(S.y);if(S){S.setStyle({align:_.textAlign}),T&&(each$f(S.states,p),S.ignore=!0);var b=S.states.select;b&&(b.x+=S.x,b.y+=S.y)}if(x){var C=_.linePoints;T||!C?(each$f(x.states,p),x.ignore=!0):(limitTurnAngle(C,_.minTurnAngle),limitSurfaceAngle(C,_.surfaceNormal,_.maxSurfaceAngle),x.setShape({points:C}),S.__hostTarget.textGuideLineConfig={anchor:new Point(C[0][0],C[0][1])})}}}var PiePiece=function(a){__extends(t,a);function t(r,n,o){var s=a.call(this)||this;s.z2=2;var l=new ZRText;return s.setTextContent(l),s.updateData(r,n,o,!0),s}return t.prototype.updateData=function(r,n,o,s){var l=this,u=r.hostModel,c=r.getItemModel(n),f=c.getModel("emphasis"),h=r.getItemLayout(n),v=extend(getSectorCornerRadius(c.getModel("itemStyle"),h,!0),h);if(isNaN(v.startAngle)){l.setShape(v);return}if(s){l.setShape(v);var d=u.getShallow("animationType");u.ecModel.ssr?(initProps(l,{scaleX:0,scaleY:0},u,{dataIndex:n,isFrom:!0}),l.originX=v.cx,l.originY=v.cy):d==="scale"?(l.shape.r=h.r0,initProps(l,{shape:{r:h.r}},u,n)):o!=null?(l.setShape({startAngle:o,endAngle:o}),initProps(l,{shape:{startAngle:h.startAngle,endAngle:h.endAngle}},u,n)):(l.shape.endAngle=h.startAngle,updateProps$1(l,{shape:{endAngle:h.endAngle}},u,n))}else saveOldStyle(l),updateProps$1(l,{shape:v},u,n);l.useStyle(r.getItemVisual(n,"style")),setStatesStylesFromModel(l,c);var p=(h.startAngle+h.endAngle)/2,g=u.get("selectedOffset"),y=Math.cos(p)*g,_=Math.sin(p)*g,S=c.getShallow("cursor");S&&l.attr("cursor",S),this._updateLabel(u,r,n),l.ensureState("emphasis").shape=extend({r:h.r+(f.get("scale")&&f.get("scaleSize")||0)},getSectorCornerRadius(f.getModel("itemStyle"),h)),extend(l.ensureState("select"),{x:y,y:_,shape:getSectorCornerRadius(c.getModel(["select","itemStyle"]),h)}),extend(l.ensureState("blur"),{shape:getSectorCornerRadius(c.getModel(["blur","itemStyle"]),h)});var x=l.getTextGuideLine(),T=l.getTextContent();x&&extend(x.ensureState("select"),{x:y,y:_}),extend(T.ensureState("select"),{x:y,y:_}),toggleHoverEmphasis(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},t.prototype._updateLabel=function(r,n,o){var s=this,l=n.getItemModel(o),u=l.getModel("labelLine"),c=n.getItemVisual(o,"style"),f=c&&c.fill,h=c&&c.opacity;setLabelStyle(s,getLabelStatesModels(l),{labelFetcher:n.hostModel,labelDataIndex:o,inheritColor:f,defaultOpacity:h,defaultText:r.getFormattedLabel(o,"normal")||n.getName(o)});var v=s.getTextContent();s.setTextConfig({position:null,rotation:null}),v.attr({z2:10});var d=l.get(["label","position"]);if(d!=="outside"&&d!=="outer")s.removeTextGuideLine();else{var p=this.getTextGuideLine();p||(p=new Polyline$1,this.setTextGuideLine(p)),setLabelLineStyle(this,getLabelLineStatesModels(l),{stroke:f,opacity:retrieve3(u.get(["lineStyle","opacity"]),h,1)})}},t}(Sector),PieView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.ignoreLabelLineUpdate=!0,r}return t.prototype.render=function(r,n,o,s){var l=r.getData(),u=this._data,c=this.group,f;if(!u&&l.count()>0){for(var h=l.getItemLayout(0),v=1;isNaN(h&&h.startAngle)&&v<l.count();++v)h=l.getItemLayout(v);h&&(f=h.startAngle)}if(this._emptyCircleSector&&c.remove(this._emptyCircleSector),l.count()===0&&r.get("showEmptyCircle")){var d=getSeriesLayoutData(r),p=new Sector({shape:clone$4(d)});p.useStyle(r.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=p,c.add(p)}l.diff(u).add(function(g){var y=new PiePiece(l,g,f);l.setItemGraphicEl(g,y),c.add(y)}).update(function(g,y){var _=u.getItemGraphicEl(y);_.updateData(l,g,f),_.off("click"),c.add(_),l.setItemGraphicEl(g,_)}).remove(function(g){var y=u.getItemGraphicEl(g);removeElementWithFadeOut(y,r,g)}).execute(),pieLabelLayout(r),r.get("animationTypeUpdate")!=="expansion"&&(this._data=l)},t.prototype.dispose=function(){},t.prototype.containPoint=function(r,n){var o=n.getData(),s=o.getItemLayout(0);if(s){var l=r[0]-s.cx,u=r[1]-s.cy,c=Math.sqrt(l*l+u*u);return c<=s.r&&c>=s.r0}},t.type="pie",t}(ChartView);function createSeriesDataSimply(a,t,r){t=isArray$1(t)&&{coordDimensions:t}||extend({encodeDefine:a.getEncode()},t);var n=a.getSource(),o=prepareSeriesDataSchema(n,t).dimensions,s=new SeriesData(o,a);return s.initData(n,r),s}var LegendVisualProvider=function(){function a(t,r){this._getDataWithEncodedVisual=t,this._getRawData=r}return a.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},a.prototype.containName=function(t){var r=this._getRawData();return r.indexOfName(t)>=0},a.prototype.indexOfName=function(t){var r=this._getDataWithEncodedVisual();return r.indexOfName(t)},a.prototype.getItemVisual=function(t,r){var n=this._getDataWithEncodedVisual();return n.getItemVisual(t,r)},a}(),innerData=makeInner(),PieSeriesModel=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(r)},t.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},t.prototype.getDataParams=function(r){var n=this.getData(),o=innerData(n),s=o.seats;if(!s){var l=[];n.each(n.mapDimension("value"),function(c){l.push(c)}),s=o.seats=getPercentSeats(l,n.hostModel.get("percentPrecision"))}var u=a.prototype.getDataParams.call(this,r);return u.percent=s[r]||0,u.$vars.push("percent"),u},t.prototype._defaultLabelLine=function(r){defaultEmphasis(r,"labelLine",["show"]);var n=r.labelLine,o=r.emphasis.labelLine;n.show=n.show&&r.label.show,o.show=o.show&&r.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"50%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,coordinateSystemUsage:"box",left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:30,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(SeriesModel);registerLayOutOnCoordSysUsage({fullType:PieSeriesModel.type,getCoord2:function(a){return a.getShallow("center")}});function negativeDataFilter(a){return{seriesType:a,reset:function(t,r){var n=t.getData();n.filterSelf(function(o){var s=n.mapDimension("value"),l=n.get(s,o);return!(isNumber(l)&&!isNaN(l)&&l<0)})}}}function install$R(a){a.registerChartView(PieView),a.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",a.registerAction),a.registerLayout(curry$1(pieLayout,"pie")),a.registerProcessor(dataFilter$1("pie")),a.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return createSeriesData(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(r,n,o){return o.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:tokens.color.primary}},universalTransition:{divideShape:"clone"}},t}(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function a(){}return a}(),LargeSymbolPath=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var o=n.points,s=n.size,l=this.symbolProxy,u=l.shape,c=r.getContext?r.getContext():r,f=c&&s[0]<BOOST_SIZE_THRESHOLD,h=this.softClipShape,v;if(f){this._ctx=c;return}for(this._ctx=null,v=this._off;v<o.length;){var d=o[v++],p=o[v++];isNaN(d)||isNaN(p)||h&&!h.contain(d,p)||(u.x=d-s[0]/2,u.y=p-s[1]/2,u.width=s[0],u.height=s[1],l.buildPath(r,u,!0))}this.incremental&&(this._off=v,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,o=r.size,s=this._ctx,l=this.softClipShape,u;if(s){for(u=this._off;u<n.length;){var c=n[u++],f=n[u++];isNaN(c)||isNaN(f)||l&&!l.contain(c,f)||s.fillRect(c-o[0]/2,f-o[1]/2,o[0],o[1])}this.incremental&&(this._off=u,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var o=this.shape,s=o.points,l=o.size,u=Math.max(l[0],4),c=Math.max(l[1],4),f=s.length/2-1;f>=0;f--){var h=f*2,v=s[h]-u/2,d=s[h+1]-c/2;if(r>=v&&n>=d&&r<=v+u&&n<=d+c)return f}return-1},t.prototype.contain=function(r,n){var o=this.transformCoordToLocal(r,n),s=this.getBoundingRect();if(r=o[0],n=o[1],s.contain(r,n)){var l=this.hoverDataIdx=this.findDataIndex(r,n);return l>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,o=n.points,s=n.size,l=s[0],u=s[1],c=1/0,f=1/0,h=-1/0,v=-1/0,d=0;d<o.length;){var p=o[d++],g=o[d++];c=Math.min(p,c),h=Math.max(p,h),f=Math.min(g,f),v=Math.max(g,v)}r=this._rect=new BoundingRect(c-l/2,f-u/2,h-c+l,v-f+u)}return r},t}(Path),LargeSymbolDraw=function(){function a(){this.group=new Group$3}return a.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},a.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var o=(n.endIndex-n.startIndex)*2,s=n.startIndex*4*2;r=new Float32Array(r.buffer,s,o)}n.setShape("points",r),n.reset()})},a.prototype.incrementalPrepareUpdate=function(t){this._clear()},a.prototype.incrementalUpdate=function(t,r,n){var o=this._newAdded[0],s=r.getLayout("points"),l=o&&o.shape.points;if(l&&l.length<2e4){var u=l.length,c=new Float32Array(u+s.length);c.set(l),c.set(s,u),o.endIndex=t.end,o.setShape({points:c})}else{this._newAdded=[];var f=this._create();f.startIndex=t.start,f.endIndex=t.end,f.incremental=!0,f.setShape({points:s}),this._setCommon(f,r,n)}},a.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},a.prototype._create=function(){var t=new LargeSymbolPath({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},a.prototype._setCommon=function(t,r,n){var o=r.hostModel;n=n||{};var s=r.getVisual("symbolSize");t.setShape("size",s instanceof Array?s:[s,s]),t.softClipShape=n.clipShape||null,t.symbolProxy=createSymbol$1(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var l=t.shape.size[0]<BOOST_SIZE_THRESHOLD;t.useStyle(o.getModel("itemStyle").getItemStyle(l?["color","shadowBlur","shadowColor"]:["color"]));var u=r.getVisual("style"),c=u&&u.fill;c&&t.setColor(c);var f=getECData(t);f.seriesIndex=o.seriesIndex,t.on("mousemove",function(h){f.dataIndex=null;var v=t.hoverDataIdx;v>=0&&(f.dataIndex=v+(t.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),ScatterView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){var s=r.getData(),l=this._updateSymbolDraw(s,r);l.updateData(s,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,o){var s=r.getData(),l=this._updateSymbolDraw(s,r);l.incrementalPrepareUpdate(s),this._finished=!1},t.prototype.incrementalRender=function(r,n,o){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,o){var s=r.getData();if(this.group.dirty(),!this._finished||s.count()>1e4)return{update:!0};var l=pointsLayout("").reset(r,n,o);l.progress&&l.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout(s)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){if(r.get("clip",!0)){var n=r.coordinateSystem;return n&&n.getArea&&n.getArea(.1)}},t.prototype._updateSymbolDraw=function(r,n){var o=this._symbolDraw,s=n.pipelineContext,l=s.large;return(!o||l!==this._isLargeDraw)&&(o&&o.remove(),o=this._symbolDraw=l?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=l,this.group.removeAll()),this.group.add(o.group),o},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(ChartView),OUTER_BOUNDS_DEFAULT={left:0,right:0,top:0,bottom:0},OUTER_BOUNDS_CLAMP_DEFAULT=["25%","25%"],GridModel=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.mergeDefaultAndTheme=function(r,n){var o=getLayoutParams(r.outerBounds);a.prototype.mergeDefaultAndTheme.apply(this,arguments),o&&r.outerBounds&&mergeLayoutParam(r.outerBounds,o)},t.prototype.mergeOption=function(r,n){a.prototype.mergeOption.apply(this,arguments),this.option.outerBounds&&r.outerBounds&&mergeLayoutParam(this.option.outerBounds,r.outerBounds)},t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"15%",top:65,right:"10%",bottom:80,containLabel:!1,outerBoundsMode:"auto",outerBounds:OUTER_BOUNDS_DEFAULT,outerBoundsContain:"all",outerBoundsClampWidth:OUTER_BOUNDS_CLAMP_DEFAULT[0],outerBoundsClampHeight:OUTER_BOUNDS_CLAMP_DEFAULT[1],backgroundColor:tokens.color.transparent,borderWidth:1,borderColor:tokens.color.neutral30},t}(ComponentModel),CartesianAxisModel=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},t.type="cartesian2dAxis",t}(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:tokens.color.axisLine,width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15],breakLine:!0},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12,color:tokens.color.axisLabel,textMargin:[0,3]},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:tokens.color.axisSplitLine,width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:[tokens.color.backgroundTint,tokens.color.backgroundTransparent]}},breakArea:{show:!0,itemStyle:{color:tokens.color.neutral00,borderColor:tokens.color.border,borderWidth:1,borderType:[3,3],opacity:.6},zigzagAmplitude:4,zigzagMinSpan:4,zigzagMaxSpan:20,zigzagZ:100,expandOnClick:!0},breakLabelLayout:{moveOverlap:"auto"}},categoryAxis=merge({boundaryGap:!0,deduplication:null,jitter:0,jitterOverlap:!0,jitterMargin:2,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto",show:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:tokens.color.axisMinorSplitLine,width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1},_impl=null;function registerAxisBreakHelperImpl(a){_impl||(_impl=a)}function getAxisBreakHelper(){return _impl}function axisModelCreator(a,t,r,n){each$f(AXIS_TYPES,function(o,s){var l=merge(merge({},axisDefault[s],!0),n,!0),u=function(c){__extends(f,c);function f(){var h=c!==null&&c.apply(this,arguments)||this;return h.type=t+"Axis."+s,h}return f.prototype.mergeDefaultAndTheme=function(h,v){var d=fetchLayoutMode(this),p=d?getLayoutParams(h):{},g=v.getTheme();merge(h,g.get(s+"Axis")),merge(h,this.getDefaultOption()),h.type=getAxisType(h),d&&mergeLayoutParam(h,p,d)},f.prototype.optionUpdated=function(){var h=this.option;h.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},f.prototype.getCategories=function(h){var v=this.option;if(v.type==="category")return h?v.data:this.__ordinalMeta.categories},f.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},f.prototype.updateAxisBreaks=function(h){var v=getAxisBreakHelper();return v?v.updateModelAxisBreak(this,h):{breaks:[]}},f.type=t+"Axis."+s,f.defaultOption=l,f}(r);a.registerComponentModel(u)}),a.registerSubTypeDefaulter(t+"Axis",getAxisType)}function getAxisType(a){return a.type||(a.data?"category":"value")}var Cartesian=function(){function a(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return a.prototype.getAxis=function(t){return this._axes[t]},a.prototype.getAxes=function(){return map$1(this._dimList,function(t){return this._axes[t]},this)},a.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),filter(this.getAxes(),function(r){return r.scale.type===t})},a.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},a}(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(a){return(a.type==="interval"||a.type==="time")&&!a.hasBreaks()}var Cartesian2D=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=cartesian2DDimensions,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(r)||!canCalculateAffineTransform(n))){var o=r.getExtent(),s=n.getExtent(),l=this.dataToPoint([o[0],s[0]]),u=this.dataToPoint([o[1],s[1]]),c=o[1]-o[0],f=s[1]-s[0];if(!(!c||!f)){var h=(u[0]-l[0])/c,v=(u[1]-l[1])/f,d=l[0]-o[0]*h,p=l[1]-s[0]*v,g=this._transform=[h,0,0,v,d,p];this._invTransform=invert([],g)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),o=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&o.contain(o.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var o=this.dataToPoint(r),s=this.dataToPoint(n),l=this.getArea(),u=new BoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]);return l.intersect(u)},t.prototype.dataToPoint=function(r,n,o){o=o||[];var s=r[0],l=r[1];if(this._transform&&s!=null&&isFinite(s)&&l!=null&&isFinite(l))return applyTransform$1(o,r,this._transform);var u=this.getAxis("x"),c=this.getAxis("y");return o[0]=u.toGlobalCoord(u.dataToCoord(s,n)),o[1]=c.toGlobalCoord(c.dataToCoord(l,n)),o},t.prototype.clampData=function(r,n){var o=this.getAxis("x").scale,s=this.getAxis("y").scale,l=o.getExtent(),u=s.getExtent(),c=o.parse(r[0]),f=s.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(l[0],l[1]),c),Math.max(l[0],l[1])),n[1]=Math.min(Math.max(Math.min(u[0],u[1]),f),Math.max(u[0],u[1])),n},t.prototype.pointToData=function(r,n,o){if(o=o||[],this._invTransform)return applyTransform$1(o,r,this._invTransform);var s=this.getAxis("x"),l=this.getAxis("y");return o[0]=s.coordToData(s.toLocalCoord(r[0]),n),o[1]=l.coordToData(l.toLocalCoord(r[1]),n),o},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(r){r=r||0;var n=this.getAxis("x").getGlobalExtent(),o=this.getAxis("y").getGlobalExtent(),s=Math.min(n[0],n[1])-r,l=Math.min(o[0],o[1])-r,u=Math.max(n[0],n[1])-s+r,c=Math.max(o[0],o[1])-l+r;return new BoundingRect(s,l,u,c)},t}(Cartesian),Axis2D=function(a){__extends(t,a);function t(r,n,o,s,l){var u=a.call(this,r,n,o)||this;return u.index=0,u.type=s||"value",u.position=l||"bottom",u}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(Axis),AXIS_BREAK_EXPAND_ACTION_TYPE="expandAxisBreak",AXIS_BREAK_COLLAPSE_ACTION_TYPE="collapseAxisBreak",AXIS_BREAK_TOGGLE_ACTION_TYPE="toggleAxisBreak",AXIS_BREAK_CHANGED_EVENT_TYPE="axisbreakchanged",expandAxisBreakActionInfo={type:AXIS_BREAK_EXPAND_ACTION_TYPE,event:AXIS_BREAK_CHANGED_EVENT_TYPE,update:"update",refineEvent:refineAxisBreakChangeEvent},collapseAxisBreakActionInfo={type:AXIS_BREAK_COLLAPSE_ACTION_TYPE,event:AXIS_BREAK_CHANGED_EVENT_TYPE,update:"update",refineEvent:refineAxisBreakChangeEvent},toggleAxisBreakActionInfo={type:AXIS_BREAK_TOGGLE_ACTION_TYPE,event:AXIS_BREAK_CHANGED_EVENT_TYPE,update:"update",refineEvent:refineAxisBreakChangeEvent};function refineAxisBreakChangeEvent(a,t,r,n){var o=[];return each$f(a,function(s){o=o.concat(s.eventBreaks)}),{eventContent:{breaks:o}}}function registerAction(a){a.registerAction(expandAxisBreakActionInfo,t),a.registerAction(collapseAxisBreakActionInfo,t),a.registerAction(toggleAxisBreakActionInfo,t);function t(r,n){var o=[],s=parseFinder$1(n,r);function l(u,c){each$f(s[u],function(f){var h=f.updateAxisBreaks(r);each$f(h.breaks,function(v){var d;o.push(defaults((d={},d[c]=f.componentIndex,d),v))})})}return l("xAxisModels","xAxisIndex"),l("yAxisModels","yAxisIndex"),l("singleAxisModels","singleAxisIndex"),{eventBreaks:o}}}var PI$3=Math.PI,DEFAULT_CENTER_NAME_MARGIN_LEVELS=[[1,2,1,2],[5,3,5,3],[8,3,8,3]],DEFAULT_ENDS_NAME_MARGIN_LEVELS=[[0,1,0,1],[0,3,0,3],[0,3,0,3]],getLabelInner=makeInner(),getTickInner=makeInner(),AxisBuilderSharedContext=function(){function a(t){this.recordMap={},this.resolveAxisNameOverlap=t}return a.prototype.ensureRecord=function(t){var r=t.axis.dim,n=t.componentIndex,o=this.recordMap,s=o[r]||(o[r]=[]);return s[n]||(s[n]={ready:{}})},a}();function resetOverlapRecordToShared(a,t,r,n){var o=r.axis,s=t.ensureRecord(r),l=[],u,c=hasAxisName(a.axisName)&&isNameLocationCenter(a.nameLocation);each$f(n,function(g){var y=ensureLabelLayoutWithGeometry(g);if(!(!y||y.label.ignore)){l.push(y);var _=s.transGroup;c&&(_.transform?invert(_stTransTmp,_.transform):identity(_stTransTmp),y.transform&&mul(_stTransTmp,_stTransTmp,y.transform),BoundingRect.copy(_stLabelRectTmp,y.localRect),_stLabelRectTmp.applyTransform(_stTransTmp),u?u.union(_stLabelRectTmp):BoundingRect.copy(u=new BoundingRect(0,0,0,0),_stLabelRectTmp))}});var f=Math.abs(s.dirVec.x)>.1?"x":"y",h=s.transGroup[f];if(l.sort(function(g,y){return Math.abs(g.label[f]-h)-Math.abs(y.label[f]-h)}),c&&u){var v=o.getExtent(),d=Math.min(v[0],v[1]),p=Math.max(v[0],v[1])-d;u.union(new BoundingRect(d,0,p,1))}s.stOccupiedRect=u,s.labelInfoList=l}var _stTransTmp=create$1(),_stLabelRectTmp=new BoundingRect(0,0,0,0),resolveAxisNameOverlapDefault=function(a,t,r,n,o,s){if(isNameLocationCenter(a.nameLocation)){var l=s.stOccupiedRect;l&&moveIfOverlap(computeLabelGeometry2({},l,s.transGroup.transform),n,o)}else moveIfOverlapByLinearLabels(s.labelInfoList,s.dirVec,n,o)};function moveIfOverlap(a,t,r){var n=new Point;labelIntersect(a,t,n,{direction:Math.atan2(r.y,r.x),bidirectional:!1,touchThreshold:.05})&&labelLayoutApplyTranslation(t,n)}function moveIfOverlapByLinearLabels(a,t,r,n){for(var o=Point.dot(n,t)>=0,s=0,l=a.length;s<l;s++){var u=a[o?s:l-1-s];u.label.ignore||moveIfOverlap(u,r,n)}}var AxisBuilder=function(){function a(t,r,n,o){this.group=new Group$3,this._axisModel=t,this._api=r,this._local={},this._shared=o||new AxisBuilderSharedContext(resolveAxisNameOverlapDefault),this._resetCfgDetermined(n)}return a.prototype.updateCfg=function(t){var r=this._cfg.raw;r.position=t.position,r.labelOffset=t.labelOffset,this._resetCfgDetermined(r)},a.prototype.__getRawCfg=function(){return this._cfg.raw},a.prototype._resetCfgDetermined=function(t){var r=this._axisModel,n=r.getDefaultOption?r.getDefaultOption():{},o=retrieve2(t.axisName,r.get("name")),s=r.get("nameMoveOverlap");(s==null||s==="auto")&&(s=retrieve2(t.defaultNameMoveOverlap,!0));var l={raw:t,position:t.position,rotation:t.rotation,nameDirection:retrieve2(t.nameDirection,1),tickDirection:retrieve2(t.tickDirection,1),labelDirection:retrieve2(t.labelDirection,1),labelOffset:retrieve2(t.labelOffset,0),silent:retrieve2(t.silent,!0),axisName:o,nameLocation:retrieve3(r.get("nameLocation"),n.nameLocation,"end"),shouldNameMoveOverlap:hasAxisName(o)&&s,optionHideOverlap:r.get(["axisLabel","hideOverlap"]),showMinorTicks:r.get(["minorTick","show"])};this._cfg=l;var u=new Group$3({x:l.position[0],y:l.position[1],rotation:l.rotation});u.updateTransform(),this._transformGroup=u;var c=this._shared.ensureRecord(r);c.transGroup=this._transformGroup,c.dirVec=new Point(Math.cos(-l.rotation),Math.sin(-l.rotation))},a.prototype.build=function(t,r){var n=this;return t||(t={axisLine:!0,axisTickLabelEstimate:!1,axisTickLabelDetermine:!0,axisName:!0}),each$f(AXIS_BUILDER_AXIS_PART_NAMES,function(o){t[o]&&builders[o](n._cfg,n._local,n._shared,n._axisModel,n.group,n._transformGroup,n._api,r||{})}),this},a.innerTextLayout=function(t,r,n){var o=remRadian(r-t),s,l;return isRadianAroundZero(o)?(l=n>0?"top":"bottom",s="center"):isRadianAroundZero(o-PI$3)?(l=n>0?"bottom":"top",s="center"):(l="middle",o>0&&o<PI$3?s=n>0?"right":"left":s=n>0?"left":"right"),{rotation:o,textAlign:s,textVerticalAlign:l}},a.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},a.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},a}(),AXIS_BUILDER_AXIS_PART_NAMES=["axisLine","axisTickLabelEstimate","axisTickLabelDetermine","axisName"],builders={axisLine:function(a,t,r,n,o,s,l){var u=n.get(["axisLine","show"]);if(u==="auto"&&(u=!0,a.raw.axisLineAutoShow!=null&&(u=!!a.raw.axisLineAutoShow)),!!u){var c=n.axis.getExtent(),f=s.transform,h=[c[0],0],v=[c[1],0],d=h[0]>v[0];f&&(applyTransform$1(h,h,f),applyTransform$1(v,v,f));var p=extend({lineCap:"round"},n.getModel(["axisLine","lineStyle"]).getLineStyle()),g={strokeContainThreshold:a.raw.strokeContainThreshold||5,silent:!0,z2:1,style:p};if(n.get(["axisLine","breakLine"])&&n.axis.scale.hasBreaks())getAxisBreakHelper().buildAxisBreakLine(n,o,s,g);else{var y=new Line$1(extend({shape:{x1:h[0],y1:h[1],x2:v[0],y2:v[1]}},g));subPixelOptimizeLine(y.shape,y.style.lineWidth),y.anid="line",o.add(y)}var _=n.get(["axisLine","symbol"]);if(_!=null){var S=n.get(["axisLine","symbolSize"]);isString(_)&&(_=[_,_]),(isString(S)||isNumber(S))&&(S=[S,S]);var x=normalizeSymbolOffset(n.get(["axisLine","symbolOffset"])||0,S),T=S[0],b=S[1];each$f([{rotate:a.rotation+Math.PI/2,offset:x[0],r:0},{rotate:a.rotation-Math.PI/2,offset:x[1],r:Math.sqrt((h[0]-v[0])*(h[0]-v[0])+(h[1]-v[1])*(h[1]-v[1]))}],function(C,w){if(_[w]!=="none"&&_[w]!=null){var M=createSymbol$1(_[w],-T/2,-b/2,T,b,p.stroke,!0),P=C.r+C.offset,L=d?v:h;M.attr({rotation:C.rotate,x:L[0]+P*Math.cos(a.rotation),y:L[1]-P*Math.sin(a.rotation),silent:!0,z2:11}),o.add(M)}})}}},axisTickLabelEstimate:function(a,t,r,n,o,s,l,u){var c=dealLastTickLabelResultReusable(t,o,u);c&&layOutAxisTickLabel(a,t,r,n,o,s,l,AxisTickLabelComputingKind.estimate)},axisTickLabelDetermine:function(a,t,r,n,o,s,l,u){var c=dealLastTickLabelResultReusable(t,o,u);c&&layOutAxisTickLabel(a,t,r,n,o,s,l,AxisTickLabelComputingKind.determine);var f=buildAxisMajorTicks(a,o,s,n);syncLabelIgnoreToMajorTicks(a,t.labelLayoutList,f),buildAxisMinorTicks(a,o,s,n,a.tickDirection)},axisName:function(a,t,r,n,o,s,l,u){var c=r.ensureRecord(n);t.nameEl&&(o.remove(t.nameEl),t.nameEl=c.nameLayout=c.nameLocation=null);var f=a.axisName;if(hasAxisName(f)){var h=a.nameLocation,v=a.nameDirection,d=n.getModel("nameTextStyle"),p=n.get("nameGap")||0,g=n.axis.getExtent(),y=n.axis.inverse?-1:1,_=new Point(0,0),S=new Point(0,0);h==="start"?(_.x=g[0]-y*p,S.x=-y):h==="end"?(_.x=g[1]+y*p,S.x=y):(_.x=(g[0]+g[1])/2,_.y=a.labelOffset+v*p,S.y=v);var x=create$1();S.transform(rotate(x,x,a.rotation));var T=n.get("nameRotate");T!=null&&(T=T*PI$3/180);var b,C;isNameLocationCenter(h)?b=AxisBuilder.innerTextLayout(a.rotation,T??a.rotation,v):(b=endTextLayout(a.rotation,h,T||0,g),C=a.raw.axisNameAvailableWidth,C!=null&&(C=Math.abs(C/Math.sin(b.rotation)),!isFinite(C)&&(C=null)));var w=d.getFont(),M=n.get("nameTruncate",!0)||{},P=M.ellipsis,L=retrieve(a.raw.nameTruncateMaxWidth,M.maxWidth,C),E=u.nameMarginLevel||0,I=new ZRText({x:_.x,y:_.y,rotation:b.rotation,silent:AxisBuilder.isLabelSilent(n),style:createTextStyle(d,{text:f,font:w,overflow:"truncate",width:L,ellipsis:P,fill:d.getTextColor()||n.get(["axisLine","lineStyle","color"]),align:d.get("align")||b.textAlign,verticalAlign:d.get("verticalAlign")||b.textVerticalAlign}),z2:1});if(setTooltipConfig({el:I,componentModel:n,itemName:f}),I.__fullText=f,I.anid="name",n.get("triggerEvent")){var R=AxisBuilder.makeAxisEventDataBase(n);R.targetType="axisName",R.name=f,getECData(I).eventData=R}s.add(I),I.updateTransform(),t.nameEl=I;var D=c.nameLayout=ensureLabelLayoutWithGeometry({label:I,priority:I.z2,defaultAttr:{ignore:I.ignore},marginDefault:isNameLocationCenter(h)?DEFAULT_CENTER_NAME_MARGIN_LEVELS[E]:DEFAULT_ENDS_NAME_MARGIN_LEVELS[E]});if(c.nameLocation=h,o.add(I),I.decomposeTransform(),a.shouldNameMoveOverlap&&D){var O=r.ensureRecord(n);r.resolveAxisNameOverlap(a,r,n,D,S,O)}}}};function layOutAxisTickLabel(a,t,r,n,o,s,l,u){axisLabelBuildResultExists(t)||buildAxisLabel(a,t,o,u,n,l);var c=t.labelLayoutList;updateAxisLabelChangableProps(a,n,c,s),adjustBreakLabels(n,a.rotation,c);var f=a.optionHideOverlap;fixMinMaxLabelShow(n,c,f),f&&hideOverlap(filter(c,function(h){return h&&!h.label.ignore})),resetOverlapRecordToShared(a,r,n,c)}function endTextLayout(a,t,r,n){var o=remRadian(r-a),s,l,u=n[0]>n[1],c=t==="start"&&!u||t!=="start"&&u;return isRadianAroundZero(o-PI$3/2)?(l=c?"bottom":"top",s="center"):isRadianAroundZero(o-PI$3*1.5)?(l=c?"top":"bottom",s="center"):(l="middle",o<PI$3*1.5&&o>PI$3/2?s=c?"left":"right":s=c?"right":"left"),{rotation:o,textAlign:s,textVerticalAlign:l}}function fixMinMaxLabelShow(a,t,r){if(shouldShowAllLabels(a.axis))return;function n(u,c,f){var h=ensureLabelLayoutWithGeometry(t[c]),v=ensureLabelLayoutWithGeometry(t[f]);if(!(!h||!v)){if(u===!1||h.suggestIgnore){ignoreEl(h.label);return}if(v.suggestIgnore){ignoreEl(v.label);return}var d=.1;if(!r){var p=[0,0,0,0];h=newLabelLayoutWithGeometry({marginForce:p},h),v=newLabelLayoutWithGeometry({marginForce:p},v)}labelIntersect(h,v,null,{touchThreshold:d})&&ignoreEl(u?v.label:h.label)}}var o=a.get(["axisLabel","showMinLabel"]),s=a.get(["axisLabel","showMaxLabel"]),l=t.length;n(o,0,1),n(s,l-1,l-2)}function syncLabelIgnoreToMajorTicks(a,t,r){a.showMinorTicks||each$f(t,function(n){if(n&&n.label.ignore)for(var o=0;o<r.length;o++){var s=r[o],l=getTickInner(s),u=getLabelInner(n.label);if(l.tickValue!=null&&!l.onBand&&l.tickValue===u.tickValue){ignoreEl(s);return}}})}function ignoreEl(a){a&&(a.ignore=!0)}function createTicks(a,t,r,n,o){for(var s=[],l=[],u=[],c=0;c<a.length;c++){var f=a[c].coord;l[0]=f,l[1]=0,u[0]=f,u[1]=r,t&&(applyTransform$1(l,l,t),applyTransform$1(u,u,t));var h=new Line$1({shape:{x1:l[0],y1:l[1],x2:u[0],y2:u[1]},style:n,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(h.shape,h.style.lineWidth),h.anid=o+"_"+a[c].tickValue,s.push(h);var v=getTickInner(h);v.onBand=!!a[c].onBand,v.tickValue=a[c].tickValue}return s}function buildAxisMajorTicks(a,t,r,n){var o=n.axis,s=n.getModel("axisTick"),l=s.get("show");if(l==="auto"&&(l=!0,a.raw.axisTickAutoShow!=null&&(l=!!a.raw.axisTickAutoShow)),!l||o.scale.isBlank())return[];for(var u=s.getModel("lineStyle"),c=a.tickDirection*s.get("length"),f=o.getTicksCoords(),h=createTicks(f,r.transform,c,defaults(u.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),v=0;v<h.length;v++)t.add(h[v]);return h}function buildAxisMinorTicks(a,t,r,n,o){var s=n.axis,l=n.getModel("minorTick");if(!(!a.showMinorTicks||s.scale.isBlank())){var u=s.getMinorTicksCoords();if(u.length)for(var c=l.getModel("lineStyle"),f=o*l.get("length"),h=defaults(c.getLineStyle(),defaults(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),v=0;v<u.length;v++)for(var d=createTicks(u[v],r.transform,f,h,"minorticks_"+v),p=0;p<d.length;p++)t.add(d[p])}}function dealLastTickLabelResultReusable(a,t,r){if(axisLabelBuildResultExists(a)){var n=a.axisLabelsCreationContext,o=n.out.noPxChangeTryDetermine;if(r.noPxChange){for(var s=!0,l=0;l<o.length;l++)s=s&&o[l]();if(s)return!1}o.length&&(t.remove(a.labelGroup),axisLabelBuildResultSet(a,null,null,null))}return!0}function buildAxisLabel(a,t,r,n,o,s){var l=o.axis,u=retrieve(a.raw.axisLabelShow,o.get(["axisLabel","show"])),c=new Group$3;r.add(c);var f=createAxisLabelsComputingContext(n);if(!u||l.scale.isBlank()){axisLabelBuildResultSet(t,[],c,f);return}var h=o.getModel("axisLabel"),v=l.getViewLabels(f),d=(retrieve(a.raw.labelRotate,h.get("rotate"))||0)*PI$3/180,p=AxisBuilder.innerTextLayout(a.rotation,d,a.labelDirection),g=o.getCategories&&o.getCategories(!0),y=[],_=o.get("triggerEvent"),S=1/0,x=-1/0;each$f(v,function(b,C){var w,M=l.scale.type==="ordinal"?l.scale.getRawOrdinalNumber(b.tickValue):b.tickValue,P=b.formattedLabel,L=b.rawLabel,E=h;if(g&&g[M]){var I=g[M];isObject$3(I)&&I.textStyle&&(E=new Model(I.textStyle,h,o.ecModel))}var R=E.getTextColor()||o.get(["axisLine","lineStyle","color"]),D=E.getShallow("align",!0)||p.textAlign,O=retrieve2(E.getShallow("alignMinLabel",!0),D),$=retrieve2(E.getShallow("alignMaxLabel",!0),D),N=E.getShallow("verticalAlign",!0)||E.getShallow("baseline",!0)||p.textVerticalAlign,V=retrieve2(E.getShallow("verticalAlignMinLabel",!0),N),B=retrieve2(E.getShallow("verticalAlignMaxLabel",!0),N),F=10+(((w=b.time)===null||w===void 0?void 0:w.level)||0);S=Math.min(S,F),x=Math.max(x,F);var G=new ZRText({x:0,y:0,rotation:0,silent:AxisBuilder.isLabelSilent(o),z2:F,style:createTextStyle(E,{text:P,align:C===0?O:C===v.length-1?$:D,verticalAlign:C===0?V:C===v.length-1?B:N,fill:isFunction(R)?R(l.type==="category"?L:l.type==="value"?M+"":M,C):R})});G.anid="label_"+M;var z=getLabelInner(G);if(z.break=b.break,z.tickValue=M,z.layoutRotation=p.rotation,setTooltipConfig({el:G,componentModel:o,itemName:P,formatterParamsExtra:{isTruncated:function(){return G.isTruncated},value:L,tickIndex:C}}),_){var H=AxisBuilder.makeAxisEventDataBase(o);H.targetType="axisLabel",H.value=L,H.tickIndex=C,b.break&&(H.break={start:b.break.parsedBreak.vmin,end:b.break.parsedBreak.vmax}),l.type==="category"&&(H.dataIndex=M),getECData(G).eventData=H,b.break&&addBreakEventHandler(o,s,G,b.break)}y.push(G),c.add(G)});var T=map$1(y,function(b){return{label:b,priority:getLabelInner(b).break?b.z2+(x-S+1):b.z2,defaultAttr:{ignore:b.ignore}}});axisLabelBuildResultSet(t,T,c,f)}function axisLabelBuildResultExists(a){return!!a.labelLayoutList}function axisLabelBuildResultSet(a,t,r,n){a.labelLayoutList=t,a.labelGroup=r,a.axisLabelsCreationContext=n}function updateAxisLabelChangableProps(a,t,r,n){var o=t.get(["axisLabel","margin"]);each$f(r,function(s,l){var u=ensureLabelLayoutWithGeometry(s);if(u){var c=u.label,f=getLabelInner(c);u.suggestIgnore=c.ignore,c.ignore=!1,copyTransform(_tmpLayoutEl,_tmpLayoutElReset),_tmpLayoutEl.x=t.axis.dataToCoord(f.tickValue),_tmpLayoutEl.y=a.labelOffset+a.labelDirection*o,_tmpLayoutEl.rotation=f.layoutRotation,n.add(_tmpLayoutEl),_tmpLayoutEl.updateTransform(),n.remove(_tmpLayoutEl),_tmpLayoutEl.decomposeTransform(),copyTransform(c,_tmpLayoutEl),c.markRedraw(),setLabelLayoutDirty(u,!0),ensureLabelLayoutWithGeometry(u)}})}var _tmpLayoutEl=new Rect$2,_tmpLayoutElReset=new Rect$2;function hasAxisName(a){return!!a}function addBreakEventHandler(a,t,r,n){r.on("click",function(o){var s={type:AXIS_BREAK_EXPAND_ACTION_TYPE,breaks:[{start:n.parsedBreak.breakOption.start,end:n.parsedBreak.breakOption.end}]};s[a.axis.dim+"AxisIndex"]=a.componentIndex,t.dispatchAction(s)})}function adjustBreakLabels(a,t,r){var n=getScaleBreakHelper();if(n){var o=n.retrieveAxisBreakPairs(r,function(l){return l&&getLabelInner(l.label).break},!0),s=a.get(["breakLabelLayout","moveOverlap"],!0);(s===!0||s==="auto")&&each$f(o,function(l){getAxisBreakHelper().adjustBreakLabelPair(a.axis.inverse,t,[ensureLabelLayoutWithGeometry(r[l[0]]),ensureLabelLayoutWithGeometry(r[l[1]])])})}}function layout$1(a,t,r){r=r||{};var n=t.axis,o={},s=n.getAxesOnZeroOf()[0],l=n.position,u=s?"onZero":l,c=n.dim,f=[a.x,a.x+a.width,a.y,a.y+a.height],h={left:0,right:1,top:0,bottom:1,onZero:2},v=t.get("offset")||0,d=c==="x"?[f[2]-v,f[3]+v]:[f[0]-v,f[1]+v];if(s){var p=s.toGlobalCoord(s.dataToCoord(0));d[h.onZero]=Math.max(Math.min(p,d[1]),d[0])}o.position=[c==="y"?d[h[u]]:f[0],c==="x"?d[h[u]]:f[3]],o.rotation=Math.PI/2*(c==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=g[l],o.labelOffset=s?d[h[l]]-d[h.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),retrieve(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var y=t.get(["axisLabel","rotate"]);return o.labelRotate=u==="top"?-y:y,o.z2=1,o}function isCartesian2DInjectedAsDataCoordSys(a){return a.coordinateSystem&&a.coordinateSystem.type==="cartesian2d"}function findAxisModels(a){var t={xAxisModel:null,yAxisModel:null};return each$f(t,function(r,n){var o=n.replace(/Model$/,""),s=a.getReferringComponents(o,SINGLE_REFERRING).models[0];t[n]=s}),t}function createCartesianAxisViewCommonPartBuilder(a,t,r,n,o,s){for(var l=layout$1(a,r),u=!1,c=!1,f=0;f<t.length;f++)isIntervalOrLogScale(t[f].getOtherAxis(r.axis).scale)&&(u=c=!0,r.axis.type==="category"&&r.axis.onBand&&(c=!1));return l.axisLineAutoShow=u,l.axisTickAutoShow=c,l.defaultNameMoveOverlap=s,new AxisBuilder(r,n,l,o)}function updateCartesianAxisViewCommonPartBuilder(a,t,r){var n=layout$1(t,r);a.updateCfg(n)}function alignScaleTicks(a,t,r){var n=IntervalScale.prototype,o=n.getTicks.call(r),s=n.getTicks.call(r,{expandToNicedExtent:!0}),l=o.length-1,u=n.getInterval.call(r),c=getScaleExtent(a,t),f=c.extent,h=c.fixMin,v=c.fixMax;a.type==="log"&&(f=logTransform(a.base,f,!0)),a.setBreaksFromOption(retrieveAxisBreaksOption(t)),a.setExtent(f[0],f[1]),a.calcNiceExtent({splitNumber:l,fixMin:h,fixMax:v});var d=n.getExtent.call(a);h&&(f[0]=d[0]),v&&(f[1]=d[1]);var p=n.getInterval.call(a),g=f[0],y=f[1];if(h&&v)p=(y-g)/l;else if(h)for(y=f[0]+p*l;y<f[1]&&isFinite(y)&&isFinite(f[1]);)p=increaseInterval(p),y=f[0]+p*l;else if(v)for(g=f[1]-p*l;g>f[0]&&isFinite(g)&&isFinite(f[0]);)p=increaseInterval(p),g=f[1]-p*l;else{var _=a.getTicks().length-1;_>l&&(p=increaseInterval(p));var S=p*l;y=Math.ceil(f[1]/p)*p,g=round$4(y-S),g<0&&f[0]>=0?(g=0,y=round$4(S)):y>0&&f[1]<=0&&(y=0,g=-round$4(S))}var x=(o[0].value-s[0].value)/u,T=(o[l].value-s[l].value)/u;n.setExtent.call(a,g+p*x,y+p*T),n.setInterval.call(a,p),(x||T)&&n.setNiceExtent.call(a,g+p,y-p)}var XY_TO_MARGIN_IDX=[[3,1],[0,2]],Grid=function(){function a(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(t,r,n),this.model=t}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function o(l){var u,c=keys(l),f=c.length;if(f){for(var h=[],v=f-1;v>=0;v--){var d=+c[v],p=l[d],g=p.model,y=p.scale;isIntervalOrLogScale(y)&&g.get("alignTicks")&&g.get("interval")==null?h.push(p):(niceScaleExtent(y,g),isIntervalOrLogScale(y)&&(u=p))}h.length&&(u||(u=h.pop(),niceScaleExtent(u.scale,u.model)),each$f(h,function(_){alignScaleTicks(_.scale,_.model,u.scale)}))}}o(n.x),o(n.y);var s={};each$f(n.x,function(l){fixAxisOnZero(n,"y",l,s)}),each$f(n.y,function(l){fixAxisOnZero(n,"x",l,s)}),this.resize(this.model,r)},a.prototype.resize=function(t,r,n){var o=createBoxLayoutReference(t,r),s=this._rect=getLayoutRect(t.getBoxLayoutParams(),o.refContainer),l=this._axesMap,u=this._coordsList,c=t.get("containLabel");if(updateAllAxisExtentTransByGridRect(l,s),!n){var f=createAxisBiulders(s,u,l,c,r),h=void 0;if(c)legacyLayOutGridByContainLabel?(legacyLayOutGridByContainLabel(this._axesList,s),updateAllAxisExtentTransByGridRect(l,s)):h=layOutGridByOuterBounds(s.clone(),"axisLabel",null,s,l,f,o);else{var v=prepareOuterBounds(t,s,o),d=v.outerBoundsRect,p=v.parsedOuterBoundsContain,g=v.outerBoundsClamp;d&&(h=layOutGridByOuterBounds(d,p,g,s,l,f,o))}createOrUpdateAxesView(s,l,AxisTickLabelComputingKind.determine,null,h,o)}each$f(this._coordsList,function(y){y.calcAffineTransform()})},a.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}isObject$3(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var o=0,s=this._coordsList;o<s.length;o++)if(s[o].getAxis("x").index===t||s[o].getAxis("y").index===r)return s[o]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(t,r,n){var o=this._findConvertTarget(r);return o.cartesian?o.cartesian.dataToPoint(n):o.axis?o.axis.toGlobalCoord(o.axis.dataToCoord(n)):null},a.prototype.convertFromPixel=function(t,r,n){var o=this._findConvertTarget(r);return o.cartesian?o.cartesian.pointToData(n):o.axis?o.axis.coordToData(o.axis.toLocalCoord(n)):null},a.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],o=t.yAxisModel||r&&r.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],s=t.gridModel,l=this._coordsList,u,c;if(r)u=r.coordinateSystem,indexOf(l,u)<0&&(u=null);else if(n&&o)u=this.getCartesian(n.componentIndex,o.componentIndex);else if(n)c=this.getAxis("x",n.componentIndex);else if(o)c=this.getAxis("y",o.componentIndex);else if(s){var f=s.coordinateSystem;f===this&&(u=this._coordsList[0])}return{cartesian:u,axis:c}},a.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},a.prototype._initCartesian=function(t,r,n){var o=this,s=this,l={left:!1,right:!1,top:!1,bottom:!1},u={x:{},y:{}},c={x:0,y:0};if(r.eachComponent("xAxis",f("x"),this),r.eachComponent("yAxis",f("y"),this),!c.x||!c.y){this._axesMap={},this._axesList=[];return}this._axesMap=u,each$f(u.x,function(h,v){each$f(u.y,function(d,p){var g="x"+v+"y"+p,y=new Cartesian2D(g);y.master=o,y.model=t,o._coordsMap[g]=y,o._coordsList.push(y),y.addAxis(h),y.addAxis(d)})});function f(h){return function(v,d){if(isAxisUsedInTheGrid(v,t)){var p=v.get("position");h==="x"?p!=="top"&&p!=="bottom"&&(p=l.bottom?"top":"bottom"):p!=="left"&&p!=="right"&&(p=l.left?"right":"left"),l[p]=!0;var g=new Axis2D(h,createScaleByModel$1(v),[0,0],v.get("type"),p),y=g.type==="category";g.onBand=y&&v.get("boundaryGap"),g.inverse=v.get("inverse"),v.axis=g,g.model=v,g.grid=s,g.index=d,s._axesList.push(g),u[h][d]=g,c[h]++}}}},a.prototype._updateScale=function(t,r){each$f(this._axesList,function(o){if(o.scale.setExtent(1/0,-1/0),o.type==="category"){var s=o.model.get("categorySortInfo");o.scale.setSortInfo(s)}}),t.eachSeries(function(o){if(isCartesian2DInjectedAsDataCoordSys(o)){var s=findAxisModels(o),l=s.xAxisModel,u=s.yAxisModel;if(!isAxisUsedInTheGrid(l,r)||!isAxisUsedInTheGrid(u,r))return;var c=this.getCartesian(l.componentIndex,u.componentIndex),f=o.getData(),h=c.getAxis("x"),v=c.getAxis("y");n(f,h),n(f,v)}},this);function n(o,s){each$f(getDataDimensionsOnAxis(o,s.dim),function(l){s.scale.unionExtentFromData(o,l)})}},a.prototype.getTooltipAxes=function(t){var r=[],n=[];return each$f(this.getCartesians(),function(o){var s=t!=null&&t!=="auto"?o.getAxis(t):o.getBaseAxis(),l=o.getOtherAxis(s);indexOf(r,s)<0&&r.push(s),indexOf(n,l)<0&&n.push(l)}),{baseAxes:r,otherAxes:n}},a.create=function(t,r){var n=[];return t.eachComponent("grid",function(o,s){var l=new a(o,t,r);l.name="grid_"+s,l.resize(o,r,!0),o.coordinateSystem=l,n.push(l)}),t.eachSeries(function(o){injectCoordSysByOption({targetModel:o,coordSysType:"cartesian2d",coordSysProvider:s});function s(){var l=findAxisModels(o),u=l.xAxisModel,c=l.yAxisModel,f=u.getCoordSysModel(),h=f.coordinateSystem;return h.getCartesian(u.componentIndex,c.componentIndex)}}),n},a.dimensions=cartesian2DDimensions,a}();function isAxisUsedInTheGrid(a,t){return a.getCoordSysModel()===t}function fixAxisOnZero(a,t,r,n){r.getAxesOnZeroOf=function(){return s?[s]:[]};var o=a[t],s,l=r.model,u=l.get(["axisLine","onZero"]),c=l.get(["axisLine","onZeroAxisIndex"]);if(!u)return;if(c!=null)canOnZeroToAxis(o[c])&&(s=o[c]);else for(var f in o)if(o.hasOwnProperty(f)&&canOnZeroToAxis(o[f])&&!n[h(o[f])]){s=o[f];break}s&&(n[h(s)]=!0);function h(v){return v.dim+"_"+v.index}}function canOnZeroToAxis(a){return a&&a.type!=="category"&&a.type!=="time"&&ifAxisCrossZero(a)}function updateAxisTransform(a,t){var r=a.getExtent(),n=r[0]+r[1];a.toGlobalCoord=a.dim==="x"?function(o){return o+t}:function(o){return n-o+t},a.toLocalCoord=a.dim==="x"?function(o){return o-t}:function(o){return n-o+t}}function updateAllAxisExtentTransByGridRect(a,t){each$f(a.x,function(r){return updateAxisExtentTransByGridRect(r,t.x,t.width)}),each$f(a.y,function(r){return updateAxisExtentTransByGridRect(r,t.y,t.height)})}function updateAxisExtentTransByGridRect(a,t,r){var n=[0,r],o=a.inverse?1:0;a.setExtent(n[o],n[1-o]),updateAxisTransform(a,t)}var legacyLayOutGridByContainLabel;function registerLegacyGridContainLabelImpl(a){legacyLayOutGridByContainLabel=a}function layOutGridByOuterBounds(a,t,r,n,o,s,l){createOrUpdateAxesView(n,o,AxisTickLabelComputingKind.estimate,t,!1,l);var u=[0,0,0,0];f(0),f(1),h(n,0,NaN),h(n,1,NaN);var c=find(u,function(d){return d>0})==null;return expandOrShrinkRect(n,u,!0,!0,r),updateAllAxisExtentTransByGridRect(o,n),c;function f(d){each$f(o[XY$2[d]],function(p){if(shouldAxisShow(p.model)){var g=s.ensureRecord(p.model),y=g.labelInfoList;if(y)for(var _=0;_<y.length;_++){var S=y[_],x=p.scale.normalize(getLabelInner(S.label).tickValue);x=d===1?1-x:x,h(S.rect,d,x),h(S.rect,1-d,NaN)}var T=g.nameLayout;if(T){var x=isNameLocationCenter(g.nameLocation)?.5:NaN;h(T.rect,d,x),h(T.rect,1-d,NaN)}}})}function h(d,p,g){var y=a[XY$2[p]]-d[XY$2[p]],_=d[WH$2[p]]+d[XY$2[p]]-(a[WH$2[p]]+a[XY$2[p]]);y=v(y,1-g),_=v(_,g);var S=XY_TO_MARGIN_IDX[p][0],x=XY_TO_MARGIN_IDX[p][1];u[S]=mathMax$a(u[S],y),u[x]=mathMax$a(u[x],_)}function v(d,p){return d>0&&!eqNaN(p)&&p>1e-4&&(d/=p),d}}function createAxisBiulders(a,t,r,n,o){var s=new AxisBuilderSharedContext(resolveAxisNameOverlapForGrid);return each$f(r,function(l){return each$f(l,function(u){if(shouldAxisShow(u.model)){var c=!n;u.axisBuilder=createCartesianAxisViewCommonPartBuilder(a,t,u.model,o,s,c)}})}),s}function createOrUpdateAxesView(a,t,r,n,o,s){var l=r===AxisTickLabelComputingKind.determine;each$f(t,function(f){return each$f(f,function(h){shouldAxisShow(h.model)&&(updateCartesianAxisViewCommonPartBuilder(h.axisBuilder,a,h.model),h.axisBuilder.build(l?{axisTickLabelDetermine:!0}:{axisTickLabelEstimate:!0},{noPxChange:o}))})});var u={x:0,y:0};c(0),c(1);function c(f){u[XY$2[1-f]]=a[WH$2[f]]<=s.refContainer[WH$2[f]]*.5?0:1-f===1?2:1}each$f(t,function(f,h){return each$f(f,function(v){shouldAxisShow(v.model)&&((n==="all"||l)&&v.axisBuilder.build({axisName:!0},{nameMarginLevel:u[h]}),l&&v.axisBuilder.build({axisLine:!0}))})})}function prepareOuterBounds(a,t,r){var n,o=a.get("outerBoundsMode",!0);o==="same"?n=t.clone():(o==null||o==="auto")&&(n=getLayoutRect(a.get("outerBounds",!0)||OUTER_BOUNDS_DEFAULT,r.refContainer));var s=a.get("outerBoundsContain",!0),l;s==null||s==="auto"||indexOf(["all","axisLabel"],s)<0?l="all":l=s;var u=[parsePositionSizeOption(retrieve2(a.get("outerBoundsClampWidth",!0),OUTER_BOUNDS_CLAMP_DEFAULT[0]),t.width),parsePositionSizeOption(retrieve2(a.get("outerBoundsClampHeight",!0),OUTER_BOUNDS_CLAMP_DEFAULT[1]),t.height)];return{outerBoundsRect:n,parsedOuterBoundsContain:l,outerBoundsClamp:u}}var resolveAxisNameOverlapForGrid=function(a,t,r,n,o,s){var l=r.axis.dim==="x"?"y":"x";resolveAxisNameOverlapDefault(a,t,r,n,o,s),isNameLocationCenter(a.nameLocation)||each$f(t.recordMap[l],function(u){u&&u.labelInfoList&&u.dirVec&&moveIfOverlapByLinearLabels(u.labelInfoList,u.dirVec,n,o)})};function collect(a,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(r,a,t),r.seriesInvolved&&collectSeriesInfo(r,a),r}function collectAxesInfo(a,t,r){var n=t.getComponent("tooltip"),o=t.getComponent("axisPointer"),s=o.get("link",!0)||[],l=[];each$f(r.getCoordinateSystems(),function(u){if(!u.axisPointerEnabled)return;var c=makeKey(u.model),f=a.coordSysAxesInfo[c]={};a.coordSysMap[c]=u;var h=u.model,v=h.getModel("tooltip",n);if(each$f(u.getAxes(),curry$1(y,!1,null)),u.getTooltipAxes&&n&&v.get("show")){var d=v.get("trigger")==="axis",p=v.get(["axisPointer","type"])==="cross",g=u.getTooltipAxes(v.get(["axisPointer","axis"]));(d||p)&&each$f(g.baseAxes,curry$1(y,p?"cross":!0,d)),p&&each$f(g.otherAxes,curry$1(y,"cross",!1))}function y(_,S,x){var T=x.model.getModel("axisPointer",o),b=T.get("show");if(!(!b||b==="auto"&&!_&&!isHandleTrigger(T))){S==null&&(S=T.get("triggerTooltip")),T=_?makeAxisPointerModel(x,v,o,t,_,S):T;var C=T.get("snap"),w=T.get("triggerEmphasis"),M=makeKey(x.model),P=S||C||x.type==="category",L=a.axesInfo[M]={key:M,axis:x,coordSys:u,axisPointerModel:T,triggerTooltip:S,triggerEmphasis:w,involveSeries:P,snap:C,useHandle:isHandleTrigger(T),seriesModels:[],linkGroup:null};f[M]=L,a.seriesInvolved=a.seriesInvolved||P;var E=getLinkGroupIndex(s,x);if(E!=null){var I=l[E]||(l[E]={axesInfo:{}});I.axesInfo[M]=L,I.mapper=s[E].mapper,L.linkGroup=I}}}})}function makeAxisPointerModel(a,t,r,n,o,s){var l=t.getModel("axisPointer"),u=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],c={};each$f(u,function(d){c[d]=clone$4(l.get(d))}),c.snap=a.type!=="category"&&!!s,l.get("type")==="cross"&&(c.type="line");var f=c.label||(c.label={});if(f.show==null&&(f.show=!1),o==="cross"){var h=l.get(["label","show"]);if(f.show=h??!0,!s){var v=c.lineStyle=l.get("crossStyle");v&&defaults(f,v.textStyle)}}return a.model.getModel("axisPointer",new Model(c,r,n))}function collectSeriesInfo(a,t){t.eachSeries(function(r){var n=r.coordinateSystem,o=r.get(["tooltip","trigger"],!0),s=r.get(["tooltip","show"],!0);!n||!n.model||o==="none"||o===!1||o==="item"||s===!1||r.get(["axisPointer","show"],!0)===!1||each$f(a.coordSysAxesInfo[makeKey(n.model)],function(l){var u=l.axis;n.getAxis(u.dim)===u&&(l.seriesModels.push(r),l.seriesDataCount==null&&(l.seriesDataCount=0),l.seriesDataCount+=r.getData().count())})})}function getLinkGroupIndex(a,t){for(var r=t.model,n=t.dim,o=0;o<a.length;o++){var s=a[o]||{};if(checkPropInLink(s[n+"AxisId"],r.id)||checkPropInLink(s[n+"AxisIndex"],r.componentIndex)||checkPropInLink(s[n+"AxisName"],r.name))return o}}function checkPropInLink(a,t){return a==="all"||isArray$1(a)&&indexOf(a,t)>=0||a===t}function fixValue(a){var t=getAxisInfo$1(a);if(t){var r=t.axisPointerModel,n=t.axis.scale,o=r.option,s=r.get("status"),l=r.get("value");l!=null&&(l=n.parse(l));var u=isHandleTrigger(r);s==null&&(o.status=u?"show":"hide");var c=n.getExtent().slice();c[0]>c[1]&&c.reverse(),(l==null||l>c[1])&&(l=c[1]),l<c[0]&&(l=c[0]),o.value=l,u&&(o.status=t.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(a){var t=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[makeKey(a)]}function getAxisPointerModel(a){var t=getAxisInfo$1(a);return t&&t.axisPointerModel}function isHandleTrigger(a){return!!a.get(["handle","show"])}function makeKey(a){return a.type+"||"+a.id}var axisPointerClazz={},AxisView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o,s){this.axisPointerClass&&fixValue(r),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,o,!0)},t.prototype.updateAxisPointer=function(r,n,o,s){this._doUpdateAxisPointerClass(r,o,!1)},t.prototype.remove=function(r,n){var o=this._axisPointer;o&&o.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),a.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,o){var s=t.getAxisPointerClass(this.axisPointerClass);if(s){var l=getAxisPointerModel(r);l?(this._axisPointer||(this._axisPointer=new s)).render(r,l,n,o):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){axisPointerClazz[r]=n},t.getAxisPointerClass=function(r){return r&&axisPointerClazz[r]},t.type="axis",t}(ComponentView),inner$i=makeInner();function rectCoordAxisBuildSplitArea(a,t,r,n){var o=r.axis;if(!o.scale.isBlank()){var s=r.getModel("splitArea"),l=s.getModel("areaStyle"),u=l.get("color"),c=n.coordinateSystem.getRect(),f=o.getTicksCoords({tickModel:s,clamp:!0,breakTicks:"none",pruneByBreak:"preserve_extent_bound"});if(f.length){var h=u.length,v=inner$i(a).splitAreaColors,d=createHashMap(),p=0;if(v)for(var g=0;g<f.length;g++){var y=v.get(f[g].tickValue);if(y!=null){p=(y+(h-1)*g)%h;break}}var _=o.toGlobalCoord(f[0].coord),S=l.getAreaStyle();u=isArray$1(u)?u:[u];for(var g=1;g<f.length;g++){var x=o.toGlobalCoord(f[g].coord),T=void 0,b=void 0,C=void 0,w=void 0;o.isHorizontal()?(T=_,b=c.y,C=x-T,w=c.height,_=T+C):(T=c.x,b=_,C=c.width,w=x-b,_=b+w);var M=f[g-1].tickValue;M!=null&&d.set(M,p),t.add(new Rect$2({anid:M!=null?"area_"+M:null,shape:{x:T,y:b,width:C,height:w},style:defaults({fill:u[p]},S),autoBatch:!0,silent:!0})),p=(p+1)%h}inner$i(a).splitAreaColors=d}}}function rectCoordAxisHandleRemove(a){inner$i(a).splitAreaColors=null}var selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine","breakArea"],CartesianAxisView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,o,s){this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!shouldAxisShow(r)){this._axisGroup.add(r.axis.axisBuilder.group),each$f(selfBuilderAttrs$2,function(c){r.get([c,"show"])&&axisElementBuilders$2[c](this,this._axisGroup,r,r.getCoordSysModel(),o)},this);var u=s&&s.type==="changeAxisOrder"&&s.isInitSort;u||groupTransition(l,this._axisGroup,r),a.prototype.render.call(this,r,n,o,s)}},t.prototype.remove=function(){rectCoordAxisHandleRemove(this)},t.type="cartesianAxis",t}(AxisView),axisElementBuilders$2={splitLine:function(a,t,r,n,o){var s=r.axis;if(!s.scale.isBlank()){var l=r.getModel("splitLine"),u=l.getModel("lineStyle"),c=u.get("color"),f=l.get("showMinLine")!==!1,h=l.get("showMaxLine")!==!1;c=isArray$1(c)?c:[c];for(var v=n.coordinateSystem.getRect(),d=s.isHorizontal(),p=0,g=s.getTicksCoords({tickModel:l,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),y=[],_=[],S=u.getLineStyle(),x=0;x<g.length;x++){var T=s.toGlobalCoord(g[x].coord);if(!(x===0&&!f||x===g.length-1&&!h)){var b=g[x].tickValue;d?(y[0]=T,y[1]=v.y,_[0]=T,_[1]=v.y+v.height):(y[0]=v.x,y[1]=T,_[0]=v.x+v.width,_[1]=T);var C=p++%c.length,w=new Line$1({anid:b!=null?"line_"+b:null,autoBatch:!0,shape:{x1:y[0],y1:y[1],x2:_[0],y2:_[1]},style:defaults({stroke:c[C]},S),silent:!0});subPixelOptimizeLine(w.shape,S.lineWidth),t.add(w)}}}},minorSplitLine:function(a,t,r,n,o){var s=r.axis,l=r.getModel("minorSplitLine"),u=l.getModel("lineStyle"),c=n.coordinateSystem.getRect(),f=s.isHorizontal(),h=s.getMinorTicksCoords();if(h.length)for(var v=[],d=[],p=u.getLineStyle(),g=0;g<h.length;g++)for(var y=0;y<h[g].length;y++){var _=s.toGlobalCoord(h[g][y].coord);f?(v[0]=_,v[1]=c.y,d[0]=_,d[1]=c.y+c.height):(v[0]=c.x,v[1]=_,d[0]=c.x+c.width,d[1]=_);var S=new Line$1({anid:"minor_line_"+h[g][y].tickValue,autoBatch:!0,shape:{x1:v[0],y1:v[1],x2:d[0],y2:d[1]},style:p,silent:!0});subPixelOptimizeLine(S.shape,p.lineWidth),t.add(S)}},splitArea:function(a,t,r,n,o){rectCoordAxisBuildSplitArea(a,t,r,n)},breakArea:function(a,t,r,n,o){var s=getAxisBreakHelper(),l=r.axis.scale;s&&l.type!=="ordinal"&&s.rectCoordBuildBreakAxis(t,a,r,n.coordinateSystem.getRect(),o)}},CartesianXAxisView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(CartesianAxisView),CartesianYAxisView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=CartesianXAxisView.type,r}return t.type="yAxis",t}(CartesianAxisView),GridView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new Rect$2({shape:r.coordinateSystem.getRect(),style:defaults({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ComponentView),extraOption={offset:0};function install$Q(a){a.registerComponentView(GridView),a.registerComponentModel(GridModel),a.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(a,"x",CartesianAxisModel,extraOption),axisModelCreator(a,"y",CartesianAxisModel,extraOption),a.registerComponentView(CartesianXAxisView),a.registerComponentView(CartesianYAxisView),a.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function needFixJitter(a,t){var r=a.coordinateSystem,n=r&&r.type,o=r&&r.getBaseAxis&&r.getBaseAxis(),s=o&&o.scale&&o.scale.type,l=n==="cartesian2d"&&s==="ordinal"||n==="single",u=t.model.get("jitter")>0;return l&&u}var inner$h=makeInner();function fixJitter(a,t,r,n){if(a instanceof Axis2D){var o=a.scale.type;if(o!=="category"&&o!=="ordinal")return r}var s=a.model,l=s.get("jitter"),u=s.get("jitterOverlap"),c=s.get("jitterMargin")||0,f=a.scale.type==="ordinal"?a.getBandWidth():null;return l>0?u?fixJitterIgnoreOverlaps(r,l,f,n):fixJitterAvoidOverlaps(a,t,r,n,l,c):r}function fixJitterIgnoreOverlaps(a,t,r,n){if(r===null)return a+(Math.random()-.5)*t;var o=r-n*2,s=Math.min(Math.max(0,t),o);return a+(Math.random()-.5)*s}function fixJitterAvoidOverlaps(a,t,r,n,o,s){var l=inner$h(a);l.items||(l.items=[]);var u=l.items,c=placeJitterOnDirection(u,t,r,n,o,s,1),f=placeJitterOnDirection(u,t,r,n,o,s,-1),h=Math.abs(c-r)<Math.abs(f-r)?c:f,v=a.scale.type==="ordinal"?a.getBandWidth():null,d=Math.abs(h-r);return d>o/2||v&&d>v/2-n?fixJitterIgnoreOverlaps(r,o,v,n):(u.push({fixedCoord:t,floatCoord:h,r:n}),h)}function placeJitterOnDirection(a,t,r,n,o,s,l){for(var u=r,c=0;c<a.length;c++){var f=a[c],h=t-f.fixedCoord,v=u-f.floatCoord,d=h*h+v*v,p=n+f.r+s;if(d<p*p){var g=f.floatCoord+Math.sqrt(p*p-h*h)*l;if(Math.abs(g-r)>o/2)return Number.MAX_VALUE;if(l===1&&g>u||l===-1&&g<u){u=g,c=-1;continue}}}return u}function jitterLayout(a){a.eachSeriesByType("scatter",function(t){var r=t.coordinateSystem;if(r&&(r.type==="cartesian2d"||r.type==="single")){var n=r.getBaseAxis?r.getBaseAxis():null,o=n&&needFixJitter(t,n);if(o){var s=t.getData();s.each(function(l){var u=n.dim,c=n.orient,f=c==="horizontal"&&n.type!=="category"||c==="vertical"&&n.type==="category",h=s.getItemLayout(l),v=s.getItemVisual(l,"symbolSize"),d=v instanceof Array?(v[1]+v[0])/2:v;if(u==="y"||u==="single"&&f){var p=fixJitter(n,h[0],h[1],d/2);s.setItemLayout(l,[h[0],p])}else if(u==="x"||u==="single"&&!f){var p=fixJitter(n,h[1],h[0],d/2);s.setItemLayout(l,[p,h[1]])}})}}})}function install$P(a){use(install$Q),a.registerSeriesModel(ScatterSeriesModel),a.registerChartView(ScatterView),a.registerLayout(pointsLayout("scatter"))}function installScatterJitter(a){a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,jitterLayout)}function radarLayout(a){a.eachSeriesByType("radar",function(t){var r=t.getData(),n=[],o=t.coordinateSystem;if(o){var s=o.getIndicatorAxes();each$f(s,function(l,u){r.each(r.mapDimension(s[u].dim),function(c,f){n[f]=n[f]||[];var h=o.dataToPoint(c,u);n[f][u]=isValidPoint(h)?h:getValueMissingPoint(o)})}),r.each(function(l){var u=find(n[l],function(c){return isValidPoint(c)})||getValueMissingPoint(o);n[l].push(u.slice()),r.setItemLayout(l,n[l])})}})}function isValidPoint(a){return!isNaN(a[0])&&!isNaN(a[1])}function getValueMissingPoint(a){return[a.cx,a.cy]}function radarBackwardCompat(a){var t=a.polar;if(t){isArray$1(t)||(t=[t]);var r=[];each$f(t,function(n,o){n.indicator?(n.type&&!n.shape&&(n.shape=n.type),a.radar=a.radar||[],isArray$1(a.radar)||(a.radar=[a.radar]),a.radar.push(n)):r.push(n)}),a.polar=r}each$f(a.series,function(n){n&&n.type==="radar"&&n.polarIndex&&(n.radarIndex=n.polarIndex)})}var RadarView$1=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){var s=r.coordinateSystem,l=this.group,u=r.getData(),c=this._data;function f(d,p){var g=d.getItemVisual(p,"symbol")||"circle";if(g!=="none"){var y=normalizeSymbolSize(d.getItemVisual(p,"symbolSize")),_=createSymbol$1(g,-1,-1,2,2),S=d.getItemVisual(p,"symbolRotate")||0;return _.attr({style:{strokeNoScale:!0},z2:100,scaleX:y[0]/2,scaleY:y[1]/2,rotation:S*Math.PI/180||0}),_}}function h(d,p,g,y,_,S){g.removeAll();for(var x=0;x<p.length-1;x++){var T=f(y,_);T&&(T.__dimIdx=x,d[x]?(T.setPosition(d[x]),graphic[S?"initProps":"updateProps"](T,{x:p[x][0],y:p[x][1]},r,_)):T.setPosition(p[x]),g.add(T))}}function v(d){return map$1(d,function(p){return[s.cx,s.cy]})}u.diff(c).add(function(d){var p=u.getItemLayout(d);if(p){var g=new Polygon,y=new Polyline$1,_={shape:{points:p}};g.shape.points=v(p),y.shape.points=v(p),initProps(g,_,r,d),initProps(y,_,r,d);var S=new Group$3,x=new Group$3;S.add(y),S.add(g),S.add(x),h(y.shape.points,p,x,u,d,!0),u.setItemGraphicEl(d,S)}}).update(function(d,p){var g=c.getItemGraphicEl(p),y=g.childAt(0),_=g.childAt(1),S=g.childAt(2),x={shape:{points:u.getItemLayout(d)}};x.shape.points&&(h(y.shape.points,x.shape.points,S,u,d,!1),saveOldStyle(_),saveOldStyle(y),updateProps$1(y,x,r),updateProps$1(_,x,r),u.setItemGraphicEl(d,g))}).remove(function(d){l.remove(c.getItemGraphicEl(d))}).execute(),u.eachItemGraphicEl(function(d,p){var g=u.getItemModel(p),y=d.childAt(0),_=d.childAt(1),S=d.childAt(2),x=u.getItemVisual(p,"style"),T=x.fill;l.add(d),y.useStyle(defaults(g.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:T})),setStatesStylesFromModel(y,g,"lineStyle"),setStatesStylesFromModel(_,g,"areaStyle");var b=g.getModel("areaStyle"),C=b.isEmpty()&&b.parentModel.isEmpty();_.ignore=C,each$f(["emphasis","select","blur"],function(M){var P=g.getModel([M,"areaStyle"]),L=P.isEmpty()&&P.parentModel.isEmpty();_.ensureState(M).ignore=L&&C;var E=g.getModel([M,"lineStyle"]).getLineStyle();y.ensureState(M).style=E;var I=P.getAreaStyle();_.ensureState(M).style=I;var R=g.getModel([M,"itemStyle"]).getItemStyle();S.eachChild(function(D){D.ensureState(M).style=clone$4(R)})}),_.useStyle(defaults(g.getModel("areaStyle").getAreaStyle(),{fill:T,opacity:.7,decal:x.decal}));var w=g.getModel("emphasis");S.eachChild(function(M){if(M instanceof ZRImage){var P=M.style;M.useStyle(extend({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},x))}else M.useStyle(x),M.setColor(T),M.style.strokeNoScale=!0;var L=u.getStore().get(u.getDimensionIndex(M.__dimIdx),p);(L==null||isNaN(L))&&(L=""),setLabelStyle(M,getLabelStatesModels(g),{labelFetcher:u.hostModel,labelDataIndex:p,labelDimIndex:M.__dimIdx,defaultText:L,inheritColor:T,defaultOpacity:x.opacity})}),toggleHoverEmphasis(d,w.get("focus"),w.get("blurScope"),w.get("disabled"))}),this._data=u},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(ChartView),RadarSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},t.prototype.getInitialData=function(r,n){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(r,n,o){var s=this.getData(),l=this.coordinateSystem,u=l.getIndicatorAxes(),c=this.getData().getName(r),f=c===""?this.name:c,h=retrieveVisualColorForTooltipMarker(this,r);return createTooltipMarkup("section",{header:f,sortBlocks:!0,blocks:map$1(u,function(v){var d=s.get(s.mapDimension(v.dim),r);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:h,name:v.name,value:d,sortParam:d})})})},t.prototype.getTooltipPosition=function(r){if(r!=null){for(var n=this.getData(),o=this.coordinateSystem,s=n.getValues(map$1(o.dimensions,function(f){return n.mapDimension(f)}),r),l=0,u=s.length;l<u;l++)if(!isNaN(s[l])){var c=o.getIndicatorAxes();return o.coordToPoint(c[l].dataToCoord(s[l]),l)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(a,t){return defaults({show:t},a)}var RadarModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){var r=this.get("boundaryGap"),n=this.get("splitNumber"),o=this.get("scale"),s=this.get("axisLine"),l=this.get("axisTick"),u=this.get("axisLabel"),c=this.get("axisName"),f=this.get(["axisName","show"]),h=this.get(["axisName","formatter"]),v=this.get("axisNameGap"),d=this.get("triggerEvent"),p=map$1(this.get("indicator")||[],function(g){g.max!=null&&g.max>0&&!g.min?g.min=0:g.min!=null&&g.min<0&&!g.max&&(g.max=0);var y=c;g.color!=null&&(y=defaults({color:g.color},c));var _=merge(clone$4(g),{boundaryGap:r,splitNumber:n,scale:o,axisLine:s,axisTick:l,axisLabel:u,name:g.text,showName:f,nameLocation:"end",nameGap:v,nameTextStyle:y,triggerEvent:d},!1);if(isString(h)){var S=_.name;_.name=h.replace("{value}",S??"")}else isFunction(h)&&(_.name=h(_.name,_));var x=new Model(_,null,this.ecModel);return mixin(x,AxisModelCommonMixin.prototype),x.mainType="radar",x.componentIndex=this.componentIndex,x},this);this._indicatorModels=p},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"50%",startAngle:90,axisName:{show:!0,color:tokens.color.axisLabel},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:tokens.color.neutral20}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},t}(ComponentModel),RadarView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){var s=this.group;s.removeAll(),this._buildAxes(r,o),this._buildSplitLineAndArea(r)},t.prototype._buildAxes=function(r,n){var o=r.coordinateSystem,s=o.getIndicatorAxes(),l=map$1(s,function(u){var c=u.model.get("showName")?u.name:"",f=new AxisBuilder(u.model,n,{axisName:c,position:[o.cx,o.cy],rotation:u.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return f});each$f(l,function(u){u.build(),this.group.add(u.group)},this)},t.prototype._buildSplitLineAndArea=function(r){var n=r.coordinateSystem,o=n.getIndicatorAxes();if(!o.length)return;var s=r.get("shape"),l=r.getModel("splitLine"),u=r.getModel("splitArea"),c=l.getModel("lineStyle"),f=u.getModel("areaStyle"),h=l.get("show"),v=u.get("show"),d=c.get("color"),p=f.get("color"),g=isArray$1(d)?d:[d],y=isArray$1(p)?p:[p],_=[],S=[];function x($,N,V){var B=V%N.length;return $[B]=$[B]||[],B}if(s==="circle")for(var T=o[0].getTicksCoords(),b=n.cx,C=n.cy,w=0;w<T.length;w++){if(h){var M=x(_,g,w);_[M].push(new Circle({shape:{cx:b,cy:C,r:T[w].coord}}))}if(v&&w<T.length-1){var M=x(S,y,w);S[M].push(new Ring({shape:{cx:b,cy:C,r0:T[w].coord,r:T[w+1].coord}}))}}else for(var P,L=map$1(o,function($,N){var V=$.getTicksCoords();return P=P==null?V.length-1:Math.min(V.length-1,P),map$1(V,function(B){return n.coordToPoint(B.coord,N)})}),E=[],w=0;w<=P;w++){for(var I=[],R=0;R<o.length;R++)I.push(L[R][w]);if(I[0]&&I.push(I[0].slice()),h){var M=x(_,g,w);_[M].push(new Polyline$1({shape:{points:I}}))}if(v&&E){var M=x(S,y,w-1);S[M].push(new Polygon({shape:{points:I.concat(E)}}))}E=I.slice().reverse()}var D=c.getLineStyle(),O=f.getAreaStyle();each$f(S,function($,N){this.group.add(mergePath($,{style:defaults({stroke:"none",fill:y[N%y.length]},O),silent:!0}))},this),each$f(_,function($,N){this.group.add(mergePath($,{style:defaults({fill:"none",stroke:g[N%g.length]},D),silent:!0}))},this)},t.type="radar",t}(ComponentView),IndicatorAxis=function(a){__extends(t,a);function t(r,n,o){var s=a.call(this,r,n,o)||this;return s.type="value",s.angle=0,s.name="",s}return t}(Axis),Radar=function(){function a(t,r,n){this.dimensions=[],this._model=t,this._indicatorAxes=map$1(t.getIndicatorModels(),function(o,s){var l="indicator_"+s,u=new IndicatorAxis(l,new IntervalScale);return u.name=o.get("name"),u.model=o,o.axis=u,this.dimensions.push(l),u},this),this.resize(t,n)}return a.prototype.getIndicatorAxes=function(){return this._indicatorAxes},a.prototype.dataToPoint=function(t,r){var n=this._indicatorAxes[r];return this.coordToPoint(n.dataToCoord(t),r)},a.prototype.coordToPoint=function(t,r){var n=this._indicatorAxes[r],o=n.angle,s=this.cx+t*Math.cos(o),l=this.cy-t*Math.sin(o);return[s,l]},a.prototype.pointToData=function(t){var r=t[0]-this.cx,n=t[1]-this.cy,o=Math.sqrt(r*r+n*n);r/=o,n/=o;for(var s=Math.atan2(-n,r),l=1/0,u,c=-1,f=0;f<this._indicatorAxes.length;f++){var h=this._indicatorAxes[f],v=Math.abs(s-h.angle);v<l&&(u=h,c=f,l=v)}return[c,+(u&&u.coordToData(o))]},a.prototype.resize=function(t,r){var n=createBoxLayoutReference(t,r).refContainer,o=t.get("center"),s=Math.min(n.width,n.height)/2;this.cx=parsePercent(o[0],n.width)+n.x,this.cy=parsePercent(o[1],n.height)+n.y,this.startAngle=t.get("startAngle")*Math.PI/180;var l=t.get("radius");(isString(l)||isNumber(l))&&(l=[0,l]),this.r0=parsePercent(l[0],s),this.r=parsePercent(l[1],s),each$f(this._indicatorAxes,function(u,c){u.setExtent(this.r0,this.r);var f=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;f=Math.atan2(Math.sin(f),Math.cos(f)),u.angle=f},this)},a.prototype.update=function(t,r){var n=this._indicatorAxes,o=this._model;each$f(n,function(u){u.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(u,c){if(!(u.get("coordinateSystem")!=="radar"||t.getComponent("radar",u.get("radarIndex"))!==o)){var f=u.getData();each$f(n,function(h){h.scale.unionExtentFromData(f,f.mapDimension(h.dim))})}},this);var s=o.get("splitNumber"),l=new IntervalScale;l.setExtent(0,s),l.setInterval(1),each$f(n,function(u,c){alignScaleTicks(u.scale,u.model,l)})},a.prototype.convertToPixel=function(t,r,n){return console.warn("Not implemented."),null},a.prototype.convertFromPixel=function(t,r,n){return console.warn("Not implemented."),null},a.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},a.create=function(t,r){var n=[];return t.eachComponent("radar",function(o){var s=new a(o,t,r);n.push(s),o.coordinateSystem=s}),t.eachSeriesByType("radar",function(o){o.get("coordinateSystem")==="radar"&&(o.coordinateSystem=n[o.get("radarIndex")||0])}),n},a.dimensions=[],a}();function install$O(a){a.registerCoordinateSystem("radar",Radar),a.registerComponentModel(RadarModel),a.registerComponentView(RadarView),a.registerVisual({seriesType:"radar",reset:function(t){var r=t.getData();r.each(function(n){r.setItemVisual(n,"legendIcon","roundRect")}),r.setVisual("legendIcon","roundRect")}})}function install$N(a){use(install$O),a.registerChartView(RadarView$1),a.registerSeriesModel(RadarSeriesModel),a.registerLayout(radarLayout),a.registerProcessor(dataFilter$1("radar")),a.registerPreprocessor(radarBackwardCompat)}var inner$g=makeInner();function take(a,t,r){inner$g(a)[t]=r}function release(a,t,r){var n=inner$g(a),o=n[t];o===r&&(n[t]=null)}function isTaken(a,t){return!!inner$g(a)[t]}registerAction$1({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(a,t,r){var n=t.getComponentByElement(a.topTarget);if(!n||n===r||IRRELEVANT_EXCLUDES.hasOwnProperty(n.mainType))return!1;var o=n.coordinateSystem;if(!o||o.model===r)return!1;var s=retrieveZInfo(n),l=retrieveZInfo(r);return!((s.zlevel-l.zlevel||s.z-l.z)<=0)}var RoamController=function(a){__extends(t,a);function t(r){var n=a.call(this)||this;n._zr=r;var o=bind$1(n._mousedownHandler,n),s=bind$1(n._mousemoveHandler,n),l=bind$1(n._mouseupHandler,n),u=bind$1(n._mousewheelHandler,n),c=bind$1(n._pinchHandler,n);return n.enable=function(f,h){var v=h.zInfo,d=retrieveZInfo(v.component),p=d.z,g=d.zlevel,y={component:v.component,z:p,zlevel:g,z2:retrieve2(v.z2,-1/0)},_=extend({},h.triggerInfo);this._opt=defaults(extend({},h),{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0,zInfoParsed:y,triggerInfo:_}),f==null&&(f=!0),(!this._enabled||this._controlType!==f)&&(this._enabled=!0,this.disable(),(f===!0||f==="move"||f==="pan")&&(addRoamZrListener(r,"mousedown",o,y),addRoamZrListener(r,"mousemove",s,y),addRoamZrListener(r,"mouseup",l,y)),(f===!0||f==="scale"||f==="zoom")&&(addRoamZrListener(r,"mousewheel",u,y),addRoamZrListener(r,"pinch",c,y)))},n.disable=function(){this._enabled=!1,removeRoamZrListener(r,"mousedown",o),removeRoamZrListener(r,"mousemove",s),removeRoamZrListener(r,"mouseup",l),removeRoamZrListener(r,"mousewheel",u),removeRoamZrListener(r,"pinch",c)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype._checkPointer=function(r,n,o){var s=this._opt,l=s.zInfoParsed;if(onIrrelevantElement(r,s.api,l.component))return!1;var u=s.triggerInfo,c=u.roamTrigger,f=!1;return c==="global"&&(f=!0),f||(f=u.isInSelf(r,n,o)),f&&u.isInClip&&!u.isInClip(r,n,o)&&(f=!1),f},t.prototype._decideCursorStyle=function(r,n,o,s){var l=r.target;if(!l&&this._checkPointer(r,n,o))return"grab";if(s)return l&&l.cursor||"default"},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!(isMiddleOrRightButtonOnMouseUpDown(r)||eventConsumed(r))){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var o=r.offsetX,s=r.offsetY;this._checkPointer(r,o,s)&&(this._x=o,this._y=s,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){var n=this._zr;if(!(r.gestureEvent==="pinch"||isTaken(n,"globalPan")||eventConsumed(r))){var o=r.offsetX,s=r.offsetY;if(!this._dragging||!isAvailableBehavior("moveOnMouseMove",r,this._opt)){var l=this._decideCursorStyle(r,o,s,!1);l&&n.setCursorStyle(l);return}n.setCursorStyle("grabbing");var u=this._x,c=this._y,f=o-u,h=s-c;this._x=o,this._y=s,this._opt.preventDefaultMouseMove&&stop(r.event),r.__ecRoamConsumed=!0,trigger$1(this,"pan","moveOnMouseMove",r,{dx:f,dy:h,oldX:u,oldY:c,newX:o,newY:s,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){if(!eventConsumed(r)){var n=this._zr;if(!isMiddleOrRightButtonOnMouseUpDown(r)){this._dragging=!1;var o=this._decideCursorStyle(r,r.offsetX,r.offsetY,!0);o&&n.setCursorStyle(o)}}},t.prototype._mousewheelHandler=function(r){if(!eventConsumed(r)){var n=isAvailableBehavior("zoomOnMouseWheel",r,this._opt),o=isAvailableBehavior("moveOnMouseWheel",r,this._opt),s=r.wheelDelta,l=Math.abs(s),u=r.offsetX,c=r.offsetY;if(!(s===0||!n&&!o)){if(n){var f=l>3?1.4:l>1?1.2:1.1,h=s>0?f:1/f;this._checkTriggerMoveZoom(this,"zoom","zoomOnMouseWheel",r,{scale:h,originX:u,originY:c,isAvailableBehavior:null})}if(o){var v=Math.abs(s),d=(s>0?1:-1)*(v>3?.4:v>1?.15:.05);this._checkTriggerMoveZoom(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:d,originX:u,originY:c,isAvailableBehavior:null})}}}},t.prototype._pinchHandler=function(r){if(!(isTaken(this._zr,"globalPan")||eventConsumed(r))){var n=r.pinchScale>1?1.1:1/1.1;this._checkTriggerMoveZoom(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t.prototype._checkTriggerMoveZoom=function(r,n,o,s,l){r._checkPointer(s,l.originX,l.originY)&&(stop(s.event),s.__ecRoamConsumed=!0,trigger$1(r,n,o,s,l))},t}(Eventful);function eventConsumed(a){return a.__ecRoamConsumed}var innerZrStore=makeInner();function ensureZrStore(a){var t=innerZrStore(a);return t.roam=t.roam||{},t.uniform=t.uniform||{},t}function addRoamZrListener(a,t,r,n){for(var o=ensureZrStore(a),s=o.roam,l=s[t]=s[t]||[],u=0;u<l.length;u++){var c=l[u].zInfoParsed;if((c.zlevel-n.zlevel||c.z-n.z||c.z2-n.z2)<=0)break}l.splice(u,0,{listener:r,zInfoParsed:n}),ensureUniformListener(a,t)}function removeRoamZrListener(a,t,r){for(var n=ensureZrStore(a),o=n.roam[t]||[],s=0;s<o.length;s++)if(o[s].listener===r){o.splice(s,1),o.length||removeUniformListener(a,t);return}}function ensureUniformListener(a,t){var r=ensureZrStore(a);r.uniform[t]||a.on(t,r.uniform[t]=function(n){var o=r.roam[t];if(o)for(var s=0;s<o.length;s++)o[s].listener(n)})}function removeUniformListener(a,t){var r=ensureZrStore(a),n=r.uniform;n[t]&&(a.off(t,n[t]),n[t]=null)}function trigger$1(a,t,r,n,o){o.isAvailableBehavior=bind$1(isAvailableBehavior,null,r,n),a.trigger(t,o)}function isAvailableBehavior(a,t,r){var n=r[a];return!a||n&&(!isString(n)||t.event[n+"Key"])}function updateViewOnPan(a,t,r){var n=a.target;n.x+=t,n.y+=r,n.dirty()}function updateViewOnZoom(a,t,r,n){var o=a.target,s=a.zoomLimit,l=a.zoom=a.zoom||1;l*=t,l=clampByZoomLimit(l,s);var u=l/a.zoom;a.zoom=l,zoomTransformableByOrigin(o,r,n,u),o.dirty()}function updateController(a,t,r,n,o,s){var l=new BoundingRect(0,0,0,0);n.enable(a.get("roam"),{api:t,zInfo:{component:a},triggerInfo:{roamTrigger:a.get("roamTrigger"),isInSelf:function(f,h,v){return l.copy(r.getBoundingRect()),l.applyTransform(r.getComputedTransform()),l.contain(h,v)},isInClip:function(f,h,v){return!s||s.contain(h,v)}}}),o.zoomLimit=a.get("scaleLimit");var u=a.coordinateSystem;o.zoom=u?u.getZoom():1;var c=a.subType+"Roam";n.off("pan").off("zoom").on("pan",function(f){updateViewOnPan(o,f.dx,f.dy),t.dispatchAction({seriesId:a.id,type:c,dx:f.dx,dy:f.dy})}).on("zoom",function(f){updateViewOnZoom(o,f.scale,f.originX,f.originY),t.dispatchAction({seriesId:a.id,type:c,zoom:f.scale,originX:f.originX,originY:f.originY}),t.updateLabelLayout()})}function getCenterCoord(a,t){return a.pointToProjected?a.pointToProjected(t):a.pointToData(t)}function updateCenterAndZoomInAction(a,t,r){var n=a.getZoom(),o=a.getCenter(),s=t.zoom,l=a.projectedToPoint?a.projectedToPoint(o):a.dataToPoint(o);return t.dx!=null&&t.dy!=null&&(l[0]-=t.dx,l[1]-=t.dy,a.setCenter(getCenterCoord(a,l))),s!=null&&(s=clampByZoomLimit(n*s,r)/n,zoomTransformableByOrigin(a,t.originX,t.originY,s),a.updateTransform(),a.setCenter(getCenterCoord(a,l)),a.setZoom(s*n)),{center:a.getCenter(),zoom:a.getZoom()}}function zoomTransformableByOrigin(a,t,r,n){a.x-=(t-a.x)*(n-1),a.y-=(r-a.y)*(n-1),a.scaleX*=n,a.scaleY*=n}function clampByZoomLimit(a,t){if(t){var r=t.min||0,n=t.max||1/0;a=Math.max(Math.min(n,a),r)}return a}function parseXML(a){if(isString(a)){var t=new DOMParser;a=t.parseFromString(a,"text/xml")}var r=a;for(r.nodeType===9&&(r=r.firstChild);r.nodeName.toLowerCase()!=="svg"||r.nodeType!==1;)r=r.nextSibling;return r}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function a(){this._defs={},this._root=null}return a.prototype.parse=function(t,r){r=r||{};var n=parseXML(t);this._defsUsePending=[];var o=new Group$3;this._root=o;var s=[],l=n.getAttribute("viewBox")||"",u=parseFloat(n.getAttribute("width")||r.width),c=parseFloat(n.getAttribute("height")||r.height);isNaN(u)&&(u=null),isNaN(c)&&(c=null),parseAttributes(n,o,null,!0,!1);for(var f=n.firstChild;f;)this._parseNode(f,o,s,null,!1,!1),f=f.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var h,v;if(l){var d=splitNumberSequence(l);d.length>=4&&(h={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(h&&u!=null&&c!=null&&(v=makeViewBoxTransform(h,{x:0,y:0,width:u,height:c}),!r.ignoreViewBox)){var p=o;o=new Group$3,o.add(p),p.scaleX=p.scaleY=v.scale,p.x=v.x,p.y=v.y}return!r.ignoreRootClip&&u!=null&&c!=null&&o.setClipPath(new Rect$2({shape:{x:0,y:0,width:u,height:c}})),{root:o,width:u,height:c,viewBoxRect:h,viewBoxTransform:v,named:s}},a.prototype._parseNode=function(t,r,n,o,s,l){var u=t.nodeName.toLowerCase(),c,f=o;if(u==="defs"&&(s=!0),u==="text"&&(l=!0),u==="defs"||u==="switch")c=r;else{if(!s){var h=nodeParsers[u];if(h&&hasOwn(nodeParsers,u)){c=h.call(this,t,r);var v=t.getAttribute("name");if(v){var d={name:v,namedFrom:null,svgNodeTagLower:u,el:c};n.push(d),u==="g"&&(f=d)}else o&&n.push({name:o.name,namedFrom:o,svgNodeTagLower:u,el:c});r.add(c)}}var p=paintServerParsers[u];if(p&&hasOwn(paintServerParsers,u)){var g=p.call(this,t),y=t.getAttribute("id");y&&(this._defs[y]=g)}}if(c&&c.isGroup)for(var _=t.firstChild;_;)_.nodeType===1?this._parseNode(_,c,n,f,s,l):_.nodeType===3&&l&&this._parseText(_,c),_=_.nextSibling},a.prototype._parseText=function(t,r){var n=new TSpan({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(r,n),parseAttributes(t,n,this._defsUsePending,!1,!1),applyTextAlignment(n,r);var o=n.style,s=o.fontSize;s&&s<9&&(o.fontSize=9,n.scaleX*=s/9,n.scaleY*=s/9);var l=(o.fontSize||o.fontFamily)&&[o.fontStyle,o.fontWeight,(o.fontSize||12)+"px",o.fontFamily||"sans-serif"].join(" ");o.font=l;var u=n.getBoundingRect();return this._textX+=u.width,r.add(n),n},a.internalField=function(){nodeParsers={g:function(t,r){var n=new Group$3;return inheritStyle(r,n),parseAttributes(t,n,this._defsUsePending,!1,!1),n},rect:function(t,r){var n=new Rect$2;return inheritStyle(r,n),parseAttributes(t,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(t,r){var n=new Circle;return inheritStyle(r,n),parseAttributes(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),n.silent=!0,n},line:function(t,r){var n=new Line$1;return inheritStyle(r,n),parseAttributes(t,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(t,r){var n=new Ellipse;return inheritStyle(r,n),parseAttributes(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(t,r){var n=t.getAttribute("points"),o;n&&(o=parsePoints(n));var s=new Polygon({shape:{points:o||[]},silent:!0});return inheritStyle(r,s),parseAttributes(t,s,this._defsUsePending,!1,!1),s},polyline:function(t,r){var n=t.getAttribute("points"),o;n&&(o=parsePoints(n));var s=new Polyline$1({shape:{points:o||[]},silent:!0});return inheritStyle(r,s),parseAttributes(t,s,this._defsUsePending,!1,!1),s},image:function(t,r){var n=new ZRImage;return inheritStyle(r,n),parseAttributes(t,n,this._defsUsePending,!1,!1),n.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),n.silent=!0,n},text:function(t,r){var n=t.getAttribute("x")||"0",o=t.getAttribute("y")||"0",s=t.getAttribute("dx")||"0",l=t.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(s),this._textY=parseFloat(o)+parseFloat(l);var u=new Group$3;return inheritStyle(r,u),parseAttributes(t,u,this._defsUsePending,!1,!0),u},tspan:function(t,r){var n=t.getAttribute("x"),o=t.getAttribute("y");n!=null&&(this._textX=parseFloat(n)),o!=null&&(this._textY=parseFloat(o));var s=t.getAttribute("dx")||"0",l=t.getAttribute("dy")||"0",u=new Group$3;return inheritStyle(r,u),parseAttributes(t,u,this._defsUsePending,!1,!0),this._textX+=parseFloat(s),this._textY+=parseFloat(l),u},path:function(t,r){var n=t.getAttribute("d")||"",o=createFromString(n);return inheritStyle(r,o),parseAttributes(t,o,this._defsUsePending,!1,!1),o.silent=!0,o}}}(),a}(),paintServerParsers={lineargradient:function(a){var t=parseInt(a.getAttribute("x1")||"0",10),r=parseInt(a.getAttribute("y1")||"0",10),n=parseInt(a.getAttribute("x2")||"10",10),o=parseInt(a.getAttribute("y2")||"0",10),s=new LinearGradient(t,r,n,o);return parsePaintServerUnit(a,s),parseGradientColorStops(a,s),s},radialgradient:function(a){var t=parseInt(a.getAttribute("cx")||"0",10),r=parseInt(a.getAttribute("cy")||"0",10),n=parseInt(a.getAttribute("r")||"0",10),o=new RadialGradient(t,r,n);return parsePaintServerUnit(a,o),parseGradientColorStops(a,o),o}};function parsePaintServerUnit(a,t){var r=a.getAttribute("gradientUnits");r==="userSpaceOnUse"&&(t.global=!0)}function parseGradientColorStops(a,t){for(var r=a.firstChild;r;){if(r.nodeType===1&&r.nodeName.toLocaleLowerCase()==="stop"){var n=r.getAttribute("offset"),o=void 0;n&&n.indexOf("%")>0?o=parseInt(n,10)/100:n?o=parseFloat(n):o=0;var s={};parseInlineStyle(r,s,s);var l=s.stopColor||r.getAttribute("stop-color")||"#000000",u=s.stopOpacity||r.getAttribute("stop-opacity");if(u){var c=parse(l),f=c&&c[3];f&&(c[3]*=parseCssFloat(u),l=stringify(c,"rgba"))}t.colorStops.push({offset:o,color:l})}r=r.nextSibling}}function inheritStyle(a,t){a&&a.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),defaults(t.__inheritedStyle,a.__inheritedStyle))}function parsePoints(a){for(var t=splitNumberSequence(a),r=[],n=0;n<t.length;n+=2){var o=parseFloat(t[n]),s=parseFloat(t[n+1]);r.push([o,s])}return r}function parseAttributes(a,t,r,n,o){var s=t,l=s.__inheritedStyle=s.__inheritedStyle||{},u={};a.nodeType===1&&(parseTransformAttribute(a,t),parseInlineStyle(a,l,u),n||parseAttributeStyle(a,l,u)),s.style=s.style||{},l.fill!=null&&(s.style.fill=getFillStrokeStyle(s,"fill",l.fill,r)),l.stroke!=null&&(s.style.stroke=getFillStrokeStyle(s,"stroke",l.stroke,r)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(c){l[c]!=null&&(s.style[c]=parseFloat(l[c]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(c){l[c]!=null&&(s.style[c]=l[c])}),o&&(s.__selfStyle=u),l.lineDash&&(s.style.lineDash=map$1(splitNumberSequence(l.lineDash),function(c){return parseFloat(c)})),(l.visibility==="hidden"||l.visibility==="collapse")&&(s.invisible=!0),l.display==="none"&&(s.ignore=!0)}function applyTextAlignment(a,t){var r=t.__selfStyle;if(r){var n=r.textBaseline,o=n;!n||n==="auto"||n==="baseline"?o="alphabetic":n==="before-edge"||n==="text-before-edge"?o="top":n==="after-edge"||n==="text-after-edge"?o="bottom":(n==="central"||n==="mathematical")&&(o="middle"),a.style.textBaseline=o}var s=t.__inheritedStyle;if(s){var l=s.textAlign,u=l;l&&(l==="middle"&&(u="center"),a.style.textAlign=u)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(a,t,r,n){var o=r&&r.match(urlRegex);if(o){var s=trim$1(o[1]);n.push([a,t,s]);return}return r==="none"&&(r=null),r}function applyDefs(a,t){for(var r=0;r<t.length;r++){var n=t[r];n[0].style[n[1]]=a[n[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(a){return a.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(a,t){var r=a.getAttribute("transform");if(r){r=r.replace(/,/g," ");var n=[],o=null;r.replace(transformRegex,function(v,d,p){return n.push(d,p),""});for(var s=n.length-1;s>0;s-=2){var l=n[s],u=n[s-1],c=splitNumberSequence(l);switch(o=o||create$1(),u){case"translate":translate(o,o,[parseFloat(c[0]),parseFloat(c[1]||"0")]);break;case"scale":scale$1(o,o,[parseFloat(c[0]),parseFloat(c[1]||c[0])]);break;case"rotate":rotate(o,o,-parseFloat(c[0])*DEGREE_TO_ANGLE,[parseFloat(c[1]||"0"),parseFloat(c[2]||"0")]);break;case"skewX":var f=Math.tan(parseFloat(c[0])*DEGREE_TO_ANGLE);mul(o,[1,0,f,1,0,0],o);break;case"skewY":var h=Math.tan(parseFloat(c[0])*DEGREE_TO_ANGLE);mul(o,[1,h,0,1,0,0],o);break;case"matrix":o[0]=parseFloat(c[0]),o[1]=parseFloat(c[1]),o[2]=parseFloat(c[2]),o[3]=parseFloat(c[3]),o[4]=parseFloat(c[4]),o[5]=parseFloat(c[5]);break}}t.setLocalTransform(o)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(a,t,r){var n=a.getAttribute("style");if(n){styleRegex.lastIndex=0;for(var o;(o=styleRegex.exec(n))!=null;){var s=o[1],l=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,s)?INHERITABLE_STYLE_ATTRIBUTES_MAP[s]:null;l&&(t[l]=o[2]);var u=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,s)?SELF_STYLE_ATTRIBUTES_MAP[s]:null;u&&(r[u]=o[2])}}}function parseAttributeStyle(a,t,r){for(var n=0;n<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;n++){var o=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[n],s=a.getAttribute(o);s!=null&&(t[INHERITABLE_STYLE_ATTRIBUTES_MAP[o]]=s)}for(var n=0;n<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;n++){var o=SELF_STYLE_ATTRIBUTES_MAP_KEYS[n],s=a.getAttribute(o);s!=null&&(r[SELF_STYLE_ATTRIBUTES_MAP[o]]=s)}}function makeViewBoxTransform(a,t){var r=t.width/a.width,n=t.height/a.height,o=Math.min(r,n);return{scale:o,x:-(a.x+a.width/2)*o+(t.x+t.width/2),y:-(a.y+a.height/2)*o+(t.y+t.height/2)}}function parseSVG(a,t){var r=new SVGParser;return r.parse(a,t)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function a(t,r){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=t,this._parsedXML=parseXML(r)}return a.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var r=createRegions(t.named),n=r.regions,o=r.regionsMap;this._regions=n,this._regionsMap=o}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},a.prototype._buildGraphic=function(t){var r,n;try{r=t&&parseSVG(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},n=r.root,assert(n!=null)}catch(_){throw new Error(`Invalid svg format
`+_.message)}var o=new Group$3;o.add(n),o.isGeoSVGGraphicRoot=!0;var s=r.width,l=r.height,u=r.viewBoxRect,c=this._boundingRect;if(!c){var f=void 0,h=void 0,v=void 0,d=void 0;if(s!=null?(f=0,v=s):u&&(f=u.x,v=u.width),l!=null?(h=0,d=l):u&&(h=u.y,d=u.height),f==null||h==null){var p=n.getBoundingRect();f==null&&(f=p.x,v=p.width),h==null&&(h=p.y,d=p.height)}c=this._boundingRect=new BoundingRect(f,h,v,d)}if(u){var g=makeViewBoxTransform(u,c);n.scaleX=n.scaleY=g.scale,n.x=g.x,n.y=g.y}o.setClipPath(new Rect$2({shape:c.plain()}));var y=[];return each$f(r.named,function(_){REGION_AVAILABLE_SVG_TAG_MAP.get(_.svgNodeTagLower)!=null&&(y.push(_),setSilent(_.el))}),{root:o,boundingRect:c,named:y}},a.prototype.useGraphic=function(t){var r=this._usedGraphicMap,n=r.get(t);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),r.set(t,n),n)},a.prototype.freeGraphic=function(t){var r=this._usedGraphicMap,n=r.get(t);n&&(r.removeKey(t),this._freedGraphics.push(n))},a}();function setSilent(a){a.silent=!1,a.isGroup&&a.traverse(function(t){t.silent=!1})}function createRegions(a){var t=[],r=createHashMap();return each$f(a,function(n){if(n.namedFrom==null){var o=new GeoSVGRegion(n.name,n.el);t.push(o),r.set(n.name,o)}}),{regions:t,regionsMap:r}}var geoCoord=[126,25],nanhaiName="å—æµ·è¯¸å²›",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(a,t){if(a==="china"){for(var r=0;r<t.length;r++)if(t[r].name===nanhaiName)return;t.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(n){return{type:"polygon",exterior:n}}),geoCoord))}}var coordsOffsetMap={å—æµ·è¯¸å²›:[32,80],å¹¿ä¸œ:[0,-10],é¦™æ¸¯:[10,5],æ¾³é—¨:[-10,10],å¤©æ´¥:[5,5]};function fixTextCoords(a,t){if(a==="china"){var r=coordsOffsetMap[t.name];if(r){var n=t.getCenter();n[0]+=r[0]/10.5,n[1]+=-r[1]/(10.5/.75),t.setCenter(n)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(a,t){a==="china"&&t.name==="å°æ¹¾"&&t.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function a(t,r,n){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=t,this._specialAreas=n,this._geoJSON=parseInput(r)}return a.prototype.load=function(t,r){r=r||DEFAULT_NAME_PROPERTY;var n=this._parsedMap.get(r);if(!n){var o=this._parseToRegions(r);n=this._parsedMap.set(r,{regions:o,boundingRect:calculateBoundingRect(o)})}var s=createHashMap(),l=[];return each$f(n.regions,function(u){var c=u.name;t&&hasOwn(t,c)&&(u=u.cloneShallow(c=t[c])),l.push(u),s.set(c,u)}),{regions:l,boundingRect:n.boundingRect||new BoundingRect(0,0,0,0),regionsMap:s}},a.prototype._parseToRegions=function(t){var r=this._mapName,n=this._geoJSON,o;try{o=n?parseGeoJSON(n,t):[]}catch(s){throw new Error(`Invalid geoJson format
`+s.message)}return fixNanhai(r,o),each$f(o,function(s){var l=s.name;fixTextCoords(r,s),fixDiaoyuIsland(r,s);var u=this._specialAreas&&this._specialAreas[l];u&&s.transformTo(u.left,u.top,u.width,u.height)},this),o},a.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},a}();function calculateBoundingRect(a){for(var t,r=0;r<a.length;r++){var n=a[r].getBoundingRect();t=t||n.clone(),t.union(n)}return t}function parseInput(a){return isString(a)?typeof JSON<"u"&&JSON.parse?JSON.parse(a):new Function("return ("+a+");")():a}var storage=createHashMap();const geoSourceManager={registerMap:function(a,t,r){if(t.svg){var n=new GeoSVGResource(a,t.svg);storage.set(a,n)}else{var o=t.geoJson||t.geoJSON;o&&!t.features?r=t.specialAreas:o=t;var n=new GeoJSONResource(a,o,r);storage.set(a,n)}},getGeoResource:function(a){return storage.get(a)},getMapForUser:function(a){var t=storage.get(a);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(a,t,r){var n=storage.get(a);if(n)return n.load(t,r)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(a){var t=a.getItemStyle(),r=a.get("areaColor");return r!=null&&(t.fill=r),t}function fixLineStyle(a){var t=a.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var MapDraw=function(){function a(t){var r=this.group=new Group$3,n=this._transformGroup=new Group$3;r.add(n),this.uid=getUID("ec_map_draw"),this._controller=new RoamController(t.getZr()),this._controllerHost={target:n},n.add(this._regionsGroup=new Group$3),n.add(this._svgGroup=new Group$3)}return a.prototype.draw=function(t,r,n,o,s){var l=t.mainType==="geo",u=t.getData&&t.getData();l&&r.eachComponent({mainType:"series",subType:"map"},function(T){!u&&T.getHostGeoModel()===t&&(u=T.getData())});var c=t.coordinateSystem,f=this._regionsGroup,h=this._transformGroup,v=c.getTransformInfo(),d=v.raw,p=v.roam,g=!f.childAt(0)||s,y=t.getShallow("clip",!0),_;y?(_=c.getViewRect().clone(),this.group.setClipPath(new Rect$2({shape:_.clone()}))):this.group.removeClipPath(),g?(h.x=p.x,h.y=p.y,h.scaleX=p.scaleX,h.scaleY=p.scaleY,h.dirty()):updateProps$1(h,p,t);var S=u&&u.getVisual("visualMeta")&&u.getVisual("visualMeta").length>0,x={api:n,geo:c,mapOrGeoModel:t,data:u,isVisualEncodedByVisualMap:S,isGeo:l,transformInfoRaw:d};c.resourceType==="geoJSON"?this._buildGeoJSON(x):c.resourceType==="geoSVG"&&this._buildSVG(x),this._updateController(t,_,r,n),this._updateMapSelectHandler(t,f,n,o)},a.prototype._buildGeoJSON=function(t){var r=this._regionsGroupByName=createHashMap(),n=createHashMap(),o=this._regionsGroup,s=t.transformInfoRaw,l=t.mapOrGeoModel,u=t.data,c=t.geo.projection,f=c&&c.stream;function h(p,g){return g&&(p=g(p)),p&&[p[0]*s.scaleX+s.x,p[1]*s.scaleY+s.y]}function v(p){for(var g=[],y=!f&&c&&c.project,_=0;_<p.length;++_){var S=h(p[_],y);S&&g.push(S)}return g}function d(p){return{shape:{points:v(p)}}}o.removeAll(),each$f(t.geo.regions,function(p){var g=p.name,y=r.get(g),_=n.get(g)||{},S=_.dataIdx,x=_.regionModel;if(!y){y=r.set(g,new Group$3),o.add(y),S=u?u.indexOfName(g):null,x=t.isGeo?l.getRegionModel(g):u?u.getItemModel(S):null;var T=x.get("silent",!0);T!=null&&(y.silent=T),n.set(g,{dataIdx:S,regionModel:x})}var b=[],C=[];each$f(p.geometries,function(P){if(P.type==="polygon"){var L=[P.exterior].concat(P.interiors||[]);f&&(L=projectPolys(L,f)),each$f(L,function(I){b.push(new Polygon(d(I)))})}else{var E=P.points;f&&(E=projectPolys(E,f,!0)),each$f(E,function(I){C.push(new Polyline$1(d(I)))})}});var w=h(p.getCenter(),c&&c.project);function M(P,L){if(P.length){var E=new CompoundPath({culling:!0,segmentIgnoreThreshold:1,shape:{paths:P}});y.add(E),applyOptionStyleForRegion(t,E,S,x),resetLabelForRegion(t,E,g,x,l,S,w),L&&(fixLineStyle(E),each$f(E.states,fixLineStyle))}}M(b),M(C,!0)}),r.each(function(p,g){var y=n.get(g),_=y.dataIdx,S=y.regionModel;resetEventTriggerForRegion(t,p,g,S,l,_),resetTooltipForRegion(t,p,g,S,l),resetStateTriggerForRegion(t,p,g,S,l)},this)},a.prototype._buildSVG=function(t){var r=t.geo.map,n=t.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(r)&&(this._freeSVG(),this._useSVG(r));var o=this._svgDispatcherMap=createHashMap(),s=!1;each$f(this._svgGraphicRecord.named,function(l){var u=l.name,c=t.mapOrGeoModel,f=t.data,h=l.svgNodeTagLower,v=l.el,d=f?f.indexOfName(u):null,p=c.getRegionModel(u);OPTION_STYLE_ENABLED_TAG_MAP.get(h)!=null&&v instanceof Displayable&&applyOptionStyleForRegion(t,v,d,p),v instanceof Displayable&&(v.culling=!0);var g=p.get("silent",!0);if(g!=null&&(v.silent=g),v.z2EmphasisLift=0,!l.namedFrom&&(LABEL_HOST_MAP.get(h)!=null&&resetLabelForRegion(t,v,u,p,c,d,null),resetEventTriggerForRegion(t,v,u,p,c,d),resetTooltipForRegion(t,v,u,p,c),STATE_TRIGGER_TAG_MAP.get(h)!=null)){var y=resetStateTriggerForRegion(t,v,u,p,c);y==="self"&&(s=!0);var _=o.get(u)||o.set(u,[]);_.push(v)}},this),this._enableBlurEntireSVG(s,t)},a.prototype._enableBlurEntireSVG=function(t,r){if(t&&r.isGeo){var n=r.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),o=n.opacity;this._svgGraphicRecord.root.traverse(function(s){if(!s.isGroup){setDefaultStateProxy(s);var l=s.ensureState("blur").style||{};l.opacity==null&&o!=null&&(l.opacity=o),s.ensureState("emphasis")}})}},a.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},a.prototype.findHighDownDispatchers=function(t,r){if(t==null)return[];var n=r.coordinateSystem;if(n.resourceType==="geoJSON"){var o=this._regionsGroupByName;if(o){var s=o.get(t);return s?[s]:[]}}else if(n.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},a.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},a.prototype._useSVG=function(t){var r=geoSourceManager.getGeoResource(t);if(r&&r.type==="geoSVG"){var n=r.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=t}},a.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var r=geoSourceManager.getGeoResource(t);r&&r.type==="geoSVG"&&r.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},a.prototype._updateController=function(t,r,n,o){var s=t.coordinateSystem,l=this._controller,u=this._controllerHost;u.zoomLimit=t.get("scaleLimit"),u.zoom=s.getZoom(),l.enable(t.get("roam")||!1,{api:o,zInfo:{component:t},triggerInfo:{roamTrigger:t.get("roamTrigger"),isInSelf:function(h,v,d){return s.containPoint([v,d])},isInClip:function(h,v,d){return!r||r.contain(v,d)}}});var c=t.mainType;function f(){var h={type:"geoRoam",componentType:c};return h[c+"Id"]=t.id,h}l.off("pan").on("pan",function(h){this._mouseDownFlag=!1,updateViewOnPan(u,h.dx,h.dy),o.dispatchAction(extend(f(),{dx:h.dx,dy:h.dy,animation:{duration:0}}))},this),l.off("zoom").on("zoom",function(h){this._mouseDownFlag=!1,updateViewOnZoom(u,h.scale,h.originX,h.originY),o.dispatchAction(extend(f(),{totalZoom:u.zoom,zoom:h.scale,originX:h.originX,originY:h.originY,animation:{duration:0}}))},this)},a.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var r=t.getTextContent();r&&(r.ignore=mapLabelRaw(r).ignore)})},a.prototype._updateMapSelectHandler=function(t,r,n,o){var s=this;r.off("mousedown"),r.off("click"),t.get("selectedMode")&&(r.on("mousedown",function(){s._mouseDownFlag=!0}),r.on("click",function(l){s._mouseDownFlag&&(s._mouseDownFlag=!1)}))},a}();function applyOptionStyleForRegion(a,t,r,n){var o=n.getModel("itemStyle"),s=n.getModel(["emphasis","itemStyle"]),l=n.getModel(["blur","itemStyle"]),u=n.getModel(["select","itemStyle"]),c=getFixedItemStyle(o),f=getFixedItemStyle(s),h=getFixedItemStyle(u),v=getFixedItemStyle(l),d=a.data;if(d){var p=d.getItemVisual(r,"style"),g=d.getItemVisual(r,"decal");a.isVisualEncodedByVisualMap&&p.fill&&(c.fill=p.fill),g&&(c.decal=createOrUpdatePatternFromDecal(g,a.api))}t.setStyle(c),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=f,t.ensureState("select").style=h,t.ensureState("blur").style=v,setDefaultStateProxy(t)}function resetLabelForRegion(a,t,r,n,o,s,l){var u=a.data,c=a.isGeo,f=u&&isNaN(u.get(u.mapDimension("value"),s)),h=u&&u.getItemLayout(s);if(c||f||h&&h.showLabel){var v=c?r:s,d=void 0;(!u||s>=0)&&(d=o);var p=l?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(t,getLabelStatesModels(n),{labelFetcher:d,labelDataIndex:v,defaultText:r},p);var g=t.getTextContent();if(g&&(mapLabelRaw(g).ignore=g.ignore,t.textConfig&&l)){var y=t.getBoundingRect().clone();t.textConfig.layoutRect=y,t.textConfig.position=[(l[0]-y.x)/y.width*100+"%",(l[1]-y.y)/y.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function resetEventTriggerForRegion(a,t,r,n,o,s){a.data?a.data.setItemGraphicEl(s,t):getECData(t).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:r,region:n&&n.option||{}}}function resetTooltipForRegion(a,t,r,n,o){a.data||setTooltipConfig({el:t,componentModel:o,itemName:r,itemTooltipOption:n.get("tooltip")})}function resetStateTriggerForRegion(a,t,r,n,o){t.highDownSilentOnTouch=!!o.get("selectedMode");var s=n.getModel("emphasis"),l=s.get("focus");return toggleHoverEmphasis(t,l,s.get("blurScope"),s.get("disabled")),a.isGeo&&enableComponentHighDownFeatures(t,o,r),l}function projectPolys(a,t,r){var n=[],o;function s(){o=[]}function l(){o.length&&(n.push(o),o=[])}var u=t({polygonStart:s,polygonEnd:l,lineStart:s,lineEnd:l,point:function(c,f){isFinite(c)&&isFinite(f)&&o.push([c,f])},sphere:function(){}});return!r&&u.polygonStart(),each$f(a,function(c){u.lineStart();for(var f=0;f<c.length;f++)u.point(c[f][0],c[f][1]);u.lineEnd()}),!r&&u.polygonEnd(),n}var MapView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o,s){if(!(s&&s.type==="mapToggleSelect"&&s.from===this.uid)){var l=this.group;if(l.removeAll(),!r.getHostGeoModel()){if(this._mapDraw&&s&&s.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),s&&s.type==="geoRoam"&&s.componentType==="series"&&s.seriesId===r.id){var u=this._mapDraw;u&&l.add(u.group)}else if(r.needsDrawMap){var u=this._mapDraw||new MapDraw(o);l.add(u.group),u.draw(r,n,o,this,s),this._mapDraw=u}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;r.get("showLegendSymbol")&&n.getComponent("legend")&&this._renderSymbols(r,n,o)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(r,n,o){var s=r.originalData,l=this.group;s.each(s.mapDimension("value"),function(u,c){if(!isNaN(u)){var f=s.getItemLayout(c);if(!(!f||!f.point)){var h=f.point,v=f.offset,d=new Circle({style:{fill:r.getData().getVisual("style").fill},shape:{cx:h[0]+v*9,cy:h[1],r:3},silent:!0,z2:8+(v?0:Z2_EMPHASIS_LIFT+1)});if(!v){var p=r.mainSeries.getData(),g=s.getName(c),y=p.indexOfName(g),_=s.getItemModel(c),S=_.getModel("label"),x=p.getItemGraphicEl(y);setLabelStyle(d,getLabelStatesModels(_),{labelFetcher:{getFormattedLabel:function(T,b){return r.getFormattedLabel(y,b)}},defaultText:g}),d.disableLabelAnimation=!0,S.get("position")||d.setTextConfig({position:"bottom"}),x.onHoverStateChange=function(T){setStatesFlag(d,T)}}l.add(d)}}})},t.type="map",t}(ChartView),MapSeries=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.needsDrawMap=!1,r.seriesGroup=[],r.getTooltipPosition=function(n){if(n!=null){var o=this.getData().getName(n),s=this.coordinateSystem,l=s.getRegion(o);return l&&s.dataToPoint(l.getCenter())}},r}return t.prototype.getInitialData=function(r){for(var n=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),o=createHashMap(),s=[],l=0,u=n.count();l<u;l++){var c=n.getName(l);o.set(c,l)}var f=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(f.regions,function(h){var v=h.name,d=o.get(v),p=h.properties&&h.properties.echartsStyle,g;d==null?(g={name:v},s.push(g)):g=n.getRawDataItem(d),p&&merge(g,p)}),n.appendData(s),n},t.prototype.getHostGeoModel=function(){if(decideCoordSysUsageKind(this).kind!==CoordinateSystemUsageKind.boxCoordSys)return this.getReferringComponents("geo",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0]},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(r){var n=this.getData();return n.get(n.mapDimension("value"),r)},t.prototype.getRegionModel=function(r){var n=this.getData();return n.getItemModel(n.indexOfName(r))},t.prototype.formatTooltip=function(r,n,o){for(var s=this.getData(),l=this.getRawValue(r),u=s.getName(r),c=this.seriesGroup,f=[],h=0;h<c.length;h++){var v=c[h].originalData.indexOfName(u),d=s.mapDimension("value");isNaN(c[h].originalData.get(d,v))||f.push(c[h].name)}return createTooltipMarkup("section",{header:f.join(", "),noHeader:!f.length,blocks:[createTooltipMarkup("nameValue",{name:u,value:l})]})},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.getLegendIcon=function(r){var n=r.icon||"roundRect",o=createSymbol$1(n,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill);return o.setStyle(r.itemStyle),o.style.stroke="none",n.indexOf("empty")>-1&&(o.style.stroke=o.style.fill,o.style.fill=tokens.color.neutral00,o.style.lineWidth=2),o},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:tokens.color.tertiary},itemStyle:{borderWidth:.5,borderColor:tokens.color.border,areaColor:tokens.color.background},emphasis:{label:{show:!0,color:tokens.color.primary},itemStyle:{areaColor:tokens.color.highlight}},select:{label:{show:!0,color:tokens.color.primary},itemStyle:{color:tokens.color.highlight}},nameProperty:"name"},t}(SeriesModel);function dataStatistics(a,t){var r={};return each$f(a,function(n){n.each(n.mapDimension("value"),function(o,s){var l="ec-"+n.getName(s);r[l]=r[l]||[],isNaN(o)||r[l].push(o)})}),a[0].map(a[0].mapDimension("value"),function(n,o){for(var s="ec-"+a[0].getName(o),l=0,u=1/0,c=-1/0,f=r[s].length,h=0;h<f;h++)u=Math.min(u,r[s][h]),c=Math.max(c,r[s][h]),l+=r[s][h];var v;return t==="min"?v=u:t==="max"?v=c:t==="average"?v=l/f:v=l,f===0?NaN:v})}function mapDataStatistic(a){var t={};a.eachSeriesByType("map",function(r){var n=r.getHostGeoModel(),o=n?"o"+n.id:"i"+r.getMapType();(t[o]=t[o]||[]).push(r)}),each$f(t,function(r,n){for(var o=dataStatistics(map$1(r,function(l){return l.getData()}),r[0].get("mapValueCalculation")),s=0;s<r.length;s++)r[s].originalData=r[s].getData();for(var s=0;s<r.length;s++)r[s].seriesGroup=r,r[s].needsDrawMap=s===0&&!r[s].getHostGeoModel(),r[s].setData(o.cloneShallow()),r[s].mainSeries=r[0]})}function mapSymbolLayout(a){var t={};a.eachSeriesByType("map",function(r){var n=r.getMapType();if(!(r.getHostGeoModel()||t[n])){var o={};each$f(r.seriesGroup,function(l){var u=l.coordinateSystem,c=l.originalData;l.get("showLegendSymbol")&&a.getComponent("legend")&&c.each(c.mapDimension("value"),function(f,h){var v=c.getName(h),d=u.getRegion(v);if(!(!d||isNaN(f))){var p=o[v]||0,g=u.dataToPoint(d.getCenter());o[v]=p+1,c.setItemLayout(h,{point:g,offset:p})}})});var s=r.getData();s.each(function(l){var u=s.getName(l),c=s.getItemLayout(l)||{};c.showLabel=!o[u],s.setItemLayout(l,c)}),t[n]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(a){__extends(t,a);function t(r,n){var o=a.call(this)||this;return o.type="view",o.dimensions=["x","y"],o._roamTransformable=new Transformable,o._rawTransformable=new Transformable,o.name=r,o._opt=n,o}return t.prototype.setBoundingRect=function(r,n,o,s){return this._rect=new BoundingRect(r,n,o,s),this._updateCenterAndZoom(),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,n,o,s){this._transformTo(r,n,o,s),this._viewRect=new BoundingRect(r,n,o,s)},t.prototype._transformTo=function(r,n,o,s){var l=this.getBoundingRect(),u=this._rawTransformable;u.transform=l.calculateTransform(new BoundingRect(r,n,o,s));var c=u.parent;u.parent=null,u.decomposeTransform(),u.parent=c,this._updateTransform()},t.prototype.setCenter=function(r){var n=this._opt;n&&n.api&&n.ecModel&&n.ecModel.getShallow("legacyViewCoordSysCenterBase")&&r&&(r=[parsePercent(r[0],n.api.getWidth()),parsePercent(r[1],n.api.getWidth())]),this._centerOption=clone$4(r),this._updateCenterAndZoom()},t.prototype.setZoom=function(r){this._zoom=clampByZoomLimit(r||1,this.zoomLimit),this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),n=r.x+r.width/2,o=r.y+r.height/2;return[n,o]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._centerOption,n=this._rect;r&&n&&(this._center=[parsePercent(r[0],n.width,n.x),parsePercent(r[1],n.height,n.y)]);var o=this._rawTransformable.getLocalTransform(),s=this._roamTransformable,l=this.getDefaultCenter(),u=this.getCenter(),c=this.getZoom();u=applyTransform$1([],u,o),l=applyTransform$1([],l,o),s.originX=u[0],s.originY=u[1],s.x=l[0]-u[0],s.y=l[1]-u[1],s.scaleX=s.scaleY=c,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,n=this._rawTransformable;n.parent=r,r.updateTransform(),n.updateTransform(),copy(this.transform||(this.transform=[]),n.transform||create$1()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,n=this._roamTransformable,o=new Transformable;return o.transform=n.transform,o.decomposeTransform(),{roam:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,n,o){var s=n?this._rawTransform:this.transform;return o=o||[],s?v2ApplyTransform(o,r,s):copy$1(o,r)},t.prototype.pointToData=function(r,n,o){o=o||[];var s=this.invTransform;return s?v2ApplyTransform(o,r,s):(o[0]=r[0],o[1]=r[1],o)},t.prototype.convertToPixel=function(r,n,o){var s=getCoordSys$5(n);return s===this?s.dataToPoint(o):null},t.prototype.convertFromPixel=function(r,n,o){var s=getCoordSys$5(n);return s===this?s.pointToData(o):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(Transformable);function getCoordSys$5(a){var t=a.seriesModel;return t?t.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(a){__extends(t,a);function t(r,n,o){var s=a.call(this,r,{api:o.api,ecModel:o.ecModel})||this;s.dimensions=geo2DDimensions,s.type="geo",s._nameCoordMap=createHashMap(),s.map=n;var l=o.projection,u=geoSourceManager.load(n,o.nameMap,o.nameProperty),c=geoSourceManager.getGeoResource(n);s.resourceType=c?c.type:null;var f=s.regions=u.regions,h=GEO_DEFAULT_PARAMS[c.type];s._regionsMap=u.regionsMap,s.regions=u.regions,s.projection=l;var v;if(l)for(var d=0;d<f.length;d++){var p=f[d].getBoundingRect(l);v=v||p.clone(),v.union(p)}else v=u.boundingRect;return s.setBoundingRect(v.x,v.y,v.width,v.height),s.aspectScale=l?1:retrieve2(o.aspectScale,h.aspectScale),s._invertLongitute=l?!1:h.invertLongitute,s}return t.prototype._transformTo=function(r,n,o,s){var l=this.getBoundingRect(),u=this._invertLongitute;l=l.clone(),u&&(l.y=-l.y-l.height);var c=this._rawTransformable;c.transform=l.calculateTransform(new BoundingRect(r,n,o,s));var f=c.parent;c.parent=null,c.decomposeTransform(),c.parent=f,u&&(c.scaleY=-c.scaleY),this._updateTransform()},t.prototype.getRegion=function(r){return this._regionsMap.get(r)},t.prototype.getRegionByCoord=function(r){for(var n=this.regions,o=0;o<n.length;o++){var s=n[o];if(s.type==="geoJSON"&&s.contain(r))return n[o]}},t.prototype.addGeoCoord=function(r,n){this._nameCoordMap.set(r,n)},t.prototype.getGeoCoord=function(r){var n=this._regionsMap.get(r);return this._nameCoordMap.get(r)||n&&n.getCenter()},t.prototype.dataToPoint=function(r,n,o){if(isString(r)&&(r=this.getGeoCoord(r)),r){var s=this.projection;return s&&(r=s.project(r)),r&&this.projectedToPoint(r,n,o)}},t.prototype.pointToData=function(r,n,o){var s=this.projection;return s&&(r=s.unproject(r)),r&&this.pointToProjected(r,o)},t.prototype.pointToProjected=function(r,n){return a.prototype.pointToData.call(this,r,0,n)},t.prototype.projectedToPoint=function(r,n,o){return a.prototype.dataToPoint.call(this,r,n,o)},t.prototype.convertToPixel=function(r,n,o){var s=getCoordSys$4(n);return s===this?s.dataToPoint(o):null},t.prototype.convertFromPixel=function(r,n,o){var s=getCoordSys$4(n);return s===this?s.pointToData(o):null},t}(View);mixin(Geo,View);function getCoordSys$4(a){var t=a.geoModel,r=a.seriesModel;return t?t.coordinateSystem:r?r.coordinateSystem||(r.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}function resizeGeo(a,t){var r=a.get("boundingCoords");if(r!=null){var n=r[0],o=r[1];if(isFinite(n[0])&&isFinite(n[1])&&isFinite(o[0])&&isFinite(o[1])){var s=this.projection;if(s){var l=n[0],u=n[1],c=o[0],f=o[1];n=[1/0,1/0],o=[-1/0,-1/0];var h=function(C,w,M,P){for(var L=M-C,E=P-w,I=0;I<=100;I++){var R=I/100,D=s.project([C+L*R,w+E*R]);min$1(n,n,D),max$1(o,o,D)}};h(l,u,c,u),h(c,u,c,f),h(c,f,l,f),h(l,f,c,u)}this.setBoundingRect(n[0],n[1],o[0]-n[0],o[1]-n[1])}}var v=this.getBoundingRect(),d=a.get("layoutCenter"),p=a.get("layoutSize"),g=createBoxLayoutReference(a,t).refContainer,y=v.width/v.height*this.aspectScale,_=!1,S,x;d&&p&&(S=[parsePercent(d[0],g.width)+g.x,parsePercent(d[1],g.height)+g.y],x=parsePercent(p,Math.min(g.width,g.height)),!isNaN(S[0])&&!isNaN(S[1])&&!isNaN(x)&&(_=!0));var T;if(_)T={},y>1?(T.width=x,T.height=x/y):(T.height=x,T.width=x*y),T.y=S[1]-T.height/2,T.x=S[0]-T.width/2;else{var b=a.getBoxLayoutParams();b.aspect=y,T=getLayoutRect(b,g),T=applyPreserveAspect(a,T,y)}this.setViewRect(T.x,T.y,T.width,T.height),this.setCenter(a.get("center")),this.setZoom(a.get("zoom"))}function setGeoCoords(a,t){each$f(t.get("geoCoord"),function(r,n){a.addGeoCoord(n,r)})}var GeoCreator=function(){function a(){this.dimensions=geo2DDimensions}return a.prototype.create=function(t,r){var n=[];function o(l){return{nameProperty:l.get("nameProperty"),aspectScale:l.get("aspectScale"),projection:l.get("projection")}}t.eachComponent("geo",function(l,u){var c=l.get("map"),f=new Geo(c+u,c,extend({nameMap:l.get("nameMap"),api:r,ecModel:t},o(l)));f.zoomLimit=l.get("scaleLimit"),n.push(f),l.coordinateSystem=f,f.model=l,f.resize=resizeGeo,f.resize(l,r)}),t.eachSeries(function(l){injectCoordSysByOption({targetModel:l,coordSysType:"geo",coordSysProvider:function(){var u=l.subType==="map"?l.getHostGeoModel():l.getReferringComponents("geo",SINGLE_REFERRING).models[0];return u&&u.coordinateSystem},allowNotFound:!0})});var s={};return t.eachSeriesByType("map",function(l){if(!l.getHostGeoModel()){var u=l.getMapType();s[u]=s[u]||[],s[u].push(l)}}),each$f(s,function(l,u){var c=map$1(l,function(h){return h.get("nameMap")}),f=new Geo(u,u,extend({nameMap:mergeAll(c),api:r,ecModel:t},o(l[0])));f.zoomLimit=retrieve.apply(null,map$1(l,function(h){return h.get("scaleLimit")})),n.push(f),f.resize=resizeGeo,f.resize(l[0],r),each$f(l,function(h){h.coordinateSystem=f,setGeoCoords(f,h)})}),n},a.prototype.getFilledRegions=function(t,r,n,o){for(var s=(t||[]).slice(),l=createHashMap(),u=0;u<s.length;u++)l.set(s[u].name,s[u]);var c=geoSourceManager.load(r,n,o);return each$f(c.regions,function(f){var h=f.name,v=l.get(h),d=f.properties&&f.properties.echartsStyle;v||(v={name:h},s.push(v)),d&&merge(v,d)}),s},a}(),geoCreator=new GeoCreator,GeoModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n,o){this.mergeDefaultAndTheme(r,o);var s=geoSourceManager.getGeoResource(r.map);if(s&&s.type==="geoJSON"){var l=r.itemStyle=r.itemStyle||{};"color"in l||(l.color=r.defaultItemStyleColor||tokens.color.backgroundTint)}defaultEmphasis(r,"label",["show"])},t.prototype.optionUpdated=function(){var r=this,n=this.option;n.regions=geoCreator.getFilledRegions(n.regions,n.map,n.nameMap,n.nameProperty);var o={};this._optionModelMap=reduce(n.regions||[],function(s,l){var u=l.name;return u&&(s.set(u,new Model(l,r,r.ecModel)),l.selected&&(o[u]=!0)),s},createHashMap()),n.selectedMap||(n.selectedMap=o)},t.prototype.getRegionModel=function(r){return this._optionModelMap.get(r)||new Model(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(r,n){var o=this.getRegionModel(r),s=n==="normal"?o.get(["label","formatter"]):o.get(["emphasis","label","formatter"]),l={name:r};if(isFunction(s))return l.status=n,s(l);if(isString(s))return s.replace("{a}",r??"")},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.select=function(r){var n=this.option,o=n.selectedMode;if(o){o!=="multiple"&&(n.selectedMap=null);var s=n.selectedMap||(n.selectedMap={});s[r]=!0}},t.prototype.unSelect=function(r){var n=this.option.selectedMap;n&&(n[r]=!1)},t.prototype.toggleSelected=function(r){this[this.isSelected(r)?"unSelect":"select"](r)},t.prototype.isSelected=function(r){var n=this.option.selectedMap;return!!(n&&n[r])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:tokens.color.tertiary},itemStyle:{borderWidth:.5,borderColor:tokens.color.border},emphasis:{label:{show:!0,color:tokens.color.primary},itemStyle:{color:tokens.color.highlight}},select:{label:{show:!0,color:tokens.color.primary},itemStyle:{color:tokens.color.highlight}},regions:[]},t}(ComponentModel),GeoView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.focusBlurEnabled=!0,r}return t.prototype.init=function(r,n){this._api=n},t.prototype.render=function(r,n,o,s){if(this._model=r,!r.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(o));var l=this._mapDraw;l.draw(r,n,o,this,s),l.group.on("click",this._handleRegionClick,this),l.group.silent=r.get("silent"),this.group.add(l.group),this.updateSelectStatus(r,n,o)},t.prototype._handleRegionClick=function(r){var n;findEventDispatcher(r.target,function(o){return(n=getECData(o).eventData)!=null},!0),n&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:n.name})},t.prototype.updateSelectStatus=function(r,n,o){var s=this;this._mapDraw.group.traverse(function(l){var u=getECData(l).eventData;if(u)return s._model.isSelected(u.name)?o.enterSelect(l):o.leaveSelect(l),!0})},t.prototype.findHighDownDispatchers=function(r){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(r,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(ComponentView);function registerMap(a,t,r){geoSourceManager.registerMap(a,t,r)}function install$M(a){a.registerCoordinateSystem("geo",geoCreator),a.registerComponentModel(GeoModel),a.registerComponentView(GeoView),a.registerImpl("registerMap",registerMap),a.registerImpl("getMap",function(r){return geoSourceManager.getMapForUser(r)});function t(r,n){n.update="geo:updateSelectStatus",a.registerAction(n,function(o,s){var l={},u=[];return s.eachComponent({mainType:"geo",query:o},function(c){c[r](o.name);var f=c.coordinateSystem;each$f(f.regions,function(v){l[v.name]=c.isSelected(v.name)||!1});var h=[];each$f(l,function(v,d){l[d]&&h.push(d)}),u.push({geoIndex:c.componentIndex,name:h})}),{selected:l,allSelected:u,name:o.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),a.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(r,n,o){var s=r.componentType;s||(r.geoId!=null?s="geo":r.seriesId!=null&&(s="series")),s||(s="series"),n.eachComponent({mainType:s,query:r},function(l){var u=l.coordinateSystem;if(u.type==="geo"){var c=updateCenterAndZoomInAction(u,r,l.get("scaleLimit"));l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom),s==="series"&&each$f(l.seriesGroup,function(f){f.setCenter(c.center),f.setZoom(c.zoom)})}})})}function install$L(a){use(install$M),a.registerChartView(MapView),a.registerSeriesModel(MapSeries),a.registerLayout(mapSymbolLayout),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",a.registerAction)}function init(a){var t=a;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],n,o;n=r.pop();)if(o=n.children,n.isExpand&&o.length)for(var s=o.length,l=s-1;l>=0;l--){var u=o[l];u.hierNode={defaultAncestor:null,ancestor:u,prelim:0,modifier:0,change:0,shift:0,i:l,thread:null},r.push(u)}}function firstWalk(a,t){var r=a.isExpand?a.children:[],n=a.parentNode.children,o=a.hierNode.i?n[a.hierNode.i-1]:null;if(r.length){executeShifts(a);var s=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;o?(a.hierNode.prelim=o.hierNode.prelim+t(a,o),a.hierNode.modifier=a.hierNode.prelim-s):a.hierNode.prelim=s}else o&&(a.hierNode.prelim=o.hierNode.prelim+t(a,o));a.parentNode.hierNode.defaultAncestor=apportion(a,o,a.parentNode.hierNode.defaultAncestor||n[0],t)}function secondWalk(a){var t=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:t},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function separation(a){return arguments.length?a:defaultSeparation}function radialCoordinate(a,t){return a-=Math.PI/2,{x:t*Math.cos(a),y:t*Math.sin(a)}}function executeShifts(a){for(var t=a.children,r=t.length,n=0,o=0;--r>=0;){var s=t[r];s.hierNode.prelim+=n,s.hierNode.modifier+=n,o+=s.hierNode.change,n+=s.hierNode.shift+o}}function apportion(a,t,r,n){if(t){for(var o=a,s=a,l=s.parentNode.children[0],u=t,c=o.hierNode.modifier,f=s.hierNode.modifier,h=l.hierNode.modifier,v=u.hierNode.modifier;u=nextRight(u),s=nextLeft(s),u&&s;){o=nextRight(o),l=nextLeft(l),o.hierNode.ancestor=a;var d=u.hierNode.prelim+v-s.hierNode.prelim-f+n(u,s);d>0&&(moveSubtree(nextAncestor(u,a,r),a,d),f+=d,c+=d),v+=u.hierNode.modifier,f+=s.hierNode.modifier,c+=o.hierNode.modifier,h+=l.hierNode.modifier}u&&!nextRight(o)&&(o.hierNode.thread=u,o.hierNode.modifier+=v-c),s&&!nextLeft(l)&&(l.hierNode.thread=s,l.hierNode.modifier+=f-h,r=a)}return r}function nextRight(a){var t=a.children;return t.length&&a.isExpand?t[t.length-1]:a.hierNode.thread}function nextLeft(a){var t=a.children;return t.length&&a.isExpand?t[0]:a.hierNode.thread}function nextAncestor(a,t,r){return a.hierNode.ancestor.parentNode===t.parentNode?a.hierNode.ancestor:r}function moveSubtree(a,t,r){var n=r/(t.hierNode.i-a.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,a.hierNode.change+=n}function defaultSeparation(a,t){return a.parentNode===t.parentNode?1:2}var TreeEdgeShape=function(){function a(){this.parentPoint=[],this.childPoints=[]}return a}(),TreePath=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:tokens.color.neutral99,fill:null}},t.prototype.getDefaultShape=function(){return new TreeEdgeShape},t.prototype.buildPath=function(r,n){var o=n.childPoints,s=o.length,l=n.parentPoint,u=o[0],c=o[s-1];if(s===1){r.moveTo(l[0],l[1]),r.lineTo(u[0],u[1]);return}var f=n.orient,h=f==="TB"||f==="BT"?0:1,v=1-h,d=parsePercent(n.forkPosition,1),p=[];p[h]=l[h],p[v]=l[v]+(c[v]-l[v])*d,r.moveTo(l[0],l[1]),r.lineTo(p[0],p[1]),r.moveTo(u[0],u[1]),p[h]=u[h],r.lineTo(p[0],p[1]),p[h]=c[h],r.lineTo(p[0],p[1]),r.lineTo(c[0],c[1]);for(var g=1;g<s-1;g++){var y=o[g];r.moveTo(y[0],y[1]),p[h]=y[h],r.lineTo(p[0],p[1])}},t}(Path),TreeView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new Group$3,r}return t.prototype.init=function(r,n){this._controller=new RoamController(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,n,o){var s=r.getData(),l=r.layoutInfo,u=this._mainGroup,c=r.get("layout");c==="radial"?(u.x=l.x+l.width/2,u.y=l.y+l.height/2):(u.x=l.x,u.y=l.y),this._updateViewCoordSys(r,o),this._updateController(r,null,n,o);var f=this._data;s.diff(f).add(function(h){symbolNeedsDraw(s,h)&&updateNode(s,h,null,u,r)}).update(function(h,v){var d=f.getItemGraphicEl(v);if(!symbolNeedsDraw(s,h)){d&&removeNode(f,v,d,u,r);return}updateNode(s,h,d,u,r)}).remove(function(h){var v=f.getItemGraphicEl(h);v&&removeNode(f,h,v,u,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&s.eachItemGraphicEl(function(h,v){h.off("click").on("click",function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:v})})}),this._data=s},t.prototype._updateViewCoordSys=function(r,n){var o=r.getData(),s=[];o.each(function(v){var d=o.getItemLayout(v);d&&!isNaN(d.x)&&!isNaN(d.y)&&s.push([+d.x,+d.y])});var l=[],u=[];fromPoints(s,l,u);var c=this._min,f=this._max;u[0]-l[0]===0&&(l[0]=c?c[0]:l[0]-1,u[0]=f?f[0]:u[0]+1),u[1]-l[1]===0&&(l[1]=c?c[1]:l[1]-1,u[1]=f?f[1]:u[1]+1);var h=r.coordinateSystem=new View(null,{api:n,ecModel:r.ecModel});h.zoomLimit=r.get("scaleLimit"),h.setBoundingRect(l[0],l[1],u[0]-l[0],u[1]-l[1]),h.setCenter(r.get("center")),h.setZoom(r.get("zoom")),this.group.attr({x:h.x,y:h.y,scaleX:h.scaleX,scaleY:h.scaleY}),this._min=l,this._max=u},t.prototype._updateController=function(r,n,o,s){var l=this;updateController(r,s,this.group,this._controller,this._controllerHost,n),this._controller.on("zoom",function(u){l._updateNodeAndLinkScale(r)})},t.prototype._updateNodeAndLinkScale=function(r){var n=r.getData(),o=this._getNodeGlobalScale(r);n.eachItemGraphicEl(function(s,l){s.setSymbolScale(o)})},t.prototype._getNodeGlobalScale=function(r){var n=r.coordinateSystem;if(n.type!=="view")return 1;var o=this._nodeScaleRatio,s=n.scaleX||1,l=n.getZoom(),u=(l-1)*o+1;return u/s},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(ChartView);function symbolNeedsDraw(a,t){var r=a.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function updateNode(a,t,r,n,o){var s=!r,l=a.tree.getNodeByDataIndex(t),u=l.getModel(),c=l.getVisual("style").fill,f=l.isExpand===!1&&l.children.length!==0?c:tokens.color.neutral00,h=a.tree.root,v=l.parentNode===h?l:l.parentNode||l,d=a.getItemGraphicEl(v.dataIndex),p=v.getLayout(),g=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:p,y=l.getLayout();s?(r=new Symbol$1(a,t,null,{symbolInnerColor:f,useNameLabel:!0}),r.x=g.x,r.y=g.y):r.updateData(a,t,null,{symbolInnerColor:f,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=y.rawX,r.__radialRawY=y.rawY,n.add(r),a.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,updateProps$1(r,{x:y.x,y:y.y},o);var _=r.getSymbolPath();if(o.get("layout")==="radial"){var S=h.children[0],x=S.getLayout(),T=S.children.length,b=void 0,C=void 0;if(y.x===x.x&&l.isExpand===!0&&S.children.length){var w={x:(S.children[0].getLayout().x+S.children[T-1].getLayout().x)/2,y:(S.children[0].getLayout().y+S.children[T-1].getLayout().y)/2};b=Math.atan2(w.y-x.y,w.x-x.x),b<0&&(b=Math.PI*2+b),C=w.x<x.x,C&&(b=b-Math.PI)}else b=Math.atan2(y.y-x.y,y.x-x.x),b<0&&(b=Math.PI*2+b),l.children.length===0||l.children.length!==0&&l.isExpand===!1?(C=y.x<x.x,C&&(b=b-Math.PI)):(C=y.x>x.x,C||(b=b-Math.PI));var M=C?"left":"right",P=u.getModel("label"),L=P.get("rotate"),E=L*(Math.PI/180),I=_.getTextContent();I&&(_.setTextConfig({position:P.get("position")||M,rotation:L==null?-b:E,origin:"center"}),I.setStyle("verticalAlign","middle"))}var R=u.get(["emphasis","focus"]),D=R==="relative"?concatArray(l.getAncestorsIndices(),l.getDescendantIndices()):R==="ancestor"?l.getAncestorsIndices():R==="descendant"?l.getDescendantIndices():null;D&&(getECData(r).focus=D),drawEdge(o,l,h,r,g,p,y,n),r.__edge&&(r.onHoverStateChange=function(O){if(O!=="blur"){var $=l.parentNode&&a.getItemGraphicEl(l.parentNode.dataIndex);$&&$.hoverState===HOVER_STATE_BLUR||setStatesFlag(r.__edge,O)}})}function drawEdge(a,t,r,n,o,s,l,u){var c=t.getModel(),f=a.get("edgeShape"),h=a.get("layout"),v=a.getOrient(),d=a.get(["lineStyle","curveness"]),p=a.get("edgeForkPosition"),g=c.getModel("lineStyle").getLineStyle(),y=n.__edge;if(f==="curve")t.parentNode&&t.parentNode!==r&&(y||(y=n.__edge=new BezierCurve({shape:getEdgeShape(h,v,d,o,o)})),updateProps$1(y,{shape:getEdgeShape(h,v,d,s,l)},a));else if(f==="polyline"&&h==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var _=t.children,S=[],x=0;x<_.length;x++){var T=_[x].getLayout();S.push([T.x,T.y])}y||(y=n.__edge=new TreePath({shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]],orient:v,forkPosition:p}})),updateProps$1(y,{shape:{parentPoint:[l.x,l.y],childPoints:S}},a)}y&&!(f==="polyline"&&!t.isExpand)&&(y.useStyle(defaults({strokeNoScale:!0,fill:null},g)),setStatesStylesFromModel(y,c,"lineStyle"),setDefaultStateProxy(y),u.add(y))}function removeNodeEdge(a,t,r,n,o){var s=t.tree.root,l=getSourceNode(s,a),u=l.source,c=l.sourceLayout,f=t.getItemGraphicEl(a.dataIndex);if(f){var h=t.getItemGraphicEl(u.dataIndex),v=h.__edge,d=f.__edge||(u.isExpand===!1||u.children.length===1?v:void 0),p=n.get("edgeShape"),g=n.get("layout"),y=n.get("orient"),_=n.get(["lineStyle","curveness"]);d&&(p==="curve"?removeElement(d,{shape:getEdgeShape(g,y,_,c,c),style:{opacity:0}},n,{cb:function(){r.remove(d)},removeOpt:o}):p==="polyline"&&n.get("layout")==="orthogonal"&&removeElement(d,{shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]]},style:{opacity:0}},n,{cb:function(){r.remove(d)},removeOpt:o}))}}function getSourceNode(a,t){for(var r=t.parentNode===a?t:t.parentNode||t,n;n=r.getLayout(),n==null;)r=r.parentNode===a?r:r.parentNode||r;return{source:r,sourceLayout:n}}function removeNode(a,t,r,n,o){var s=a.tree.getNodeByDataIndex(t),l=a.tree.root,u=getSourceNode(l,s).sourceLayout,c={duration:o.get("animationDurationUpdate"),easing:o.get("animationEasingUpdate")};removeElement(r,{x:u.x+1,y:u.y+1},o,{cb:function(){n.remove(r),a.setItemGraphicEl(t,null)},removeOpt:c}),r.fadeOut(null,a.hostModel,{fadeLabel:!0,animation:c}),s.children.forEach(function(f){removeNodeEdge(f,a,n,o,c)}),removeNodeEdge(s,a,n,o,c)}function getEdgeShape(a,t,r,n,o){var s,l,u,c,f,h,v,d;if(a==="radial"){f=n.rawX,v=n.rawY,h=o.rawX,d=o.rawY;var p=radialCoordinate(f,v),g=radialCoordinate(f,v+(d-v)*r),y=radialCoordinate(h,d+(v-d)*r),_=radialCoordinate(h,d);return{x1:p.x||0,y1:p.y||0,x2:_.x||0,y2:_.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:y.x||0,cpy2:y.y||0}}else f=n.x,v=n.y,h=o.x,d=o.y,(t==="LR"||t==="RL")&&(s=f+(h-f)*r,l=v,u=h+(f-h)*r,c=d),(t==="TB"||t==="BT")&&(s=f,l=v+(d-v)*r,u=h,c=d+(v-d)*r);return{x1:f,y1:v,x2:h,y2:d,cpx1:s,cpy1:l,cpx2:u,cpy2:c}}var inner$f=makeInner();function linkSeriesData(a){var t=a.mainData,r=a.datas;r||(r={main:t},a.datasAttr={main:"data"}),a.datas=a.mainData=null,linkAll(t,r,a),each$f(r,function(n){each$f(t.TRANSFERABLE_METHODS,function(o){n.wrapMethod(o,curry$1(transferInjection,a))})}),t.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,a)),each$f(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,curry$1(changeInjection,a))}),assert(r[t.dataType]===t)}function transferInjection(a,t){if(isMainData(this)){var r=extend({},inner$f(this).datas);r[this.dataType]=t,linkAll(t,r,a)}else linkSingle(t,this.dataType,inner$f(this).mainData,a);return t}function changeInjection(a,t){return a.struct&&a.struct.update(),t}function cloneShallowInjection(a,t){return each$f(inner$f(t).datas,function(r,n){r!==t&&linkSingle(r.cloneShallow(),n,t,a)}),t}function getLinkedData(a){var t=inner$f(this).mainData;return a==null||t==null?t:inner$f(t).datas[a]}function getLinkedDataAll(){var a=inner$f(this).mainData;return a==null?[{data:a}]:map$1(keys(inner$f(a).datas),function(t){return{type:t,data:inner$f(a).datas[t]}})}function isMainData(a){return inner$f(a).mainData===a}function linkAll(a,t,r){inner$f(a).datas={},each$f(t,function(n,o){linkSingle(n,o,a,r)})}function linkSingle(a,t,r,n){inner$f(r).datas[t]=a,inner$f(a).mainData=r,a.dataType=t,n.struct&&(a[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=a),a.getLinkedData=getLinkedData,a.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function a(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(t,r,n){isFunction(t)&&(n=r,r=t,t=null),t=t||{},isString(t)&&(t={order:t});var o=t.order||"preorder",s=this[t.attr||"children"],l;o==="preorder"&&(l=r.call(n,this));for(var u=0;!l&&u<s.length;u++)s[u].eachNode(t,r,n);o==="postorder"&&r.call(n,this)},a.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var n=0;n<this.children.length;n++){var o=this.children[n];o.updateDepthAndHeight(t+1),o.height>r&&(r=o.height)}this.height=r+1},a.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,n=this.children,o=n.length;r<o;r++){var s=n[r].getNodeById(t);if(s)return s}},a.prototype.contains=function(t){if(t===this)return!0;for(var r=0,n=this.children,o=n.length;r<o;r++){var s=n[r].contains(t);if(s)return s}},a.prototype.getAncestors=function(t){for(var r=[],n=t?this:this.parentNode;n;)r.push(n),n=n.parentNode;return r.reverse(),r},a.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},a.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},a.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},a.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,n=r.data.getItemModel(this.dataIndex);return n.getModel(t)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},a.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},a.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},a.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},a}(),Tree=function(){function a(t){this.type="tree",this._nodes=[],this.hostModel=t}return a.prototype.eachNode=function(t,r,n){this.root.eachNode(t,r,n)},a.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},a.prototype.getNodeById=function(t){return this.root.getNodeById(t)},a.prototype.update=function(){for(var t=this.data,r=this._nodes,n=0,o=r.length;n<o;n++)r[n].dataIndex=-1;for(var n=0,o=t.count();n<o;n++)r[t.getRawIndex(n)].dataIndex=n},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(t,r,n){var o=new a(r),s=[],l=1;u(t);function u(h,v){var d=h.value;l=Math.max(l,isArray$1(d)?d.length:1),s.push(h);var p=new TreeNode(convertOptionIdName(h.name,""),o);v?addChild(p,v):o.root=p,o._nodes.push(p);var g=h.children;if(g)for(var y=0;y<g.length;y++)u(g[y],p)}o.root.updateDepthAndHeight(0);var c=prepareSeriesDataSchema(s,{coordDimensions:["value"],dimensionsCount:l}).dimensions,f=new SeriesData(c,r);return f.initData(s),n&&n(f),linkSeriesData({mainData:f,struct:o,structAttr:"tree"}),o.update(),o},a}();function addChild(a,t){var r=t.children;a.parentNode!==t&&(r.push(a),a.parentNode=t)}function retrieveTargetInfo(a,t,r){if(a&&indexOf(t,a.type)>=0){var n=r.getData().tree.root,o=a.targetNode;if(isString(o)&&(o=n.getNodeById(o)),o&&n.contains(o))return{node:o};var s=a.targetNodeId;if(s!=null&&(o=n.getNodeById(s)))return{node:o}}}function getPathToRoot(a){for(var t=[];a;)a=a.parentNode,a&&t.push(a);return t.reverse()}function aboveViewRoot(a,t){var r=getPathToRoot(a);return indexOf(r,t)>=0}function wrapTreePathInfo(a,t){for(var r=[];a;){var n=a.dataIndex;r.push({name:a.name,dataIndex:n,value:t.getRawValue(n)}),a=a.parentNode}return r.reverse(),r}var TreeSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var n={name:r.name,children:r.data},o=r.leaves||{},s=new Model(o,this,this.ecModel),l=Tree.createTree(n,this,u);function u(v){v.wrapMethod("getItemModel",function(d,p){var g=l.getNodeByDataIndex(p);return g&&g.children.length&&g.isExpand||(d.parentModel=s),d})}var c=0;l.eachNode("preorder",function(v){v.depth>c&&(c=v.depth)});var f=r.expandAndCollapse,h=f&&r.initialTreeDepth>=0?r.initialTreeDepth:c;return l.root.eachNode("preorder",function(v){var d=v.hostTree.data.getRawDataItem(v.dataIndex);v.isExpand=d&&d.collapsed!=null?!d.collapsed:v.depth<=h}),l.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,n,o){for(var s=this.getData().tree,l=s.root.children[0],u=s.getNodeByDataIndex(r),c=u.getValue(),f=u.name;u&&u!==l;)f=u.parentNode.name+"."+f,u=u.parentNode;return createTooltipMarkup("nameValue",{name:f,value:c,noValue:isNaN(c)||c==null})},t.prototype.getDataParams=function(r){var n=a.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=wrapTreePathInfo(o,this),n.collapsed=!o.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystemUsage:"box",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,roamTrigger:"global",nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:tokens.color.borderTint,width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(SeriesModel);function eachAfter(a,t,r){for(var n=[a],o=[],s;s=n.pop();)if(o.push(s),s.isExpand){var l=s.children;if(l.length)for(var u=0;u<l.length;u++)n.push(l[u])}for(;s=o.pop();)t(s,r)}function eachBefore(a,t){for(var r=[a],n;n=r.pop();)if(t(n),n.isExpand){var o=n.children;if(o.length)for(var s=o.length-1;s>=0;s--)r.push(o[s])}}function treeLayout(a,t){a.eachSeriesByType("tree",function(r){commonLayout(r,t)})}function commonLayout(a,t){var r=createBoxLayoutReference(a,t).refContainer,n=getLayoutRect(a.getBoxLayoutParams(),r);a.layoutInfo=n;var o=a.get("layout"),s=0,l=0,u=null;o==="radial"?(s=2*Math.PI,l=Math.min(n.height,n.width)/2,u=separation(function(b,C){return(b.parentNode===C.parentNode?1:2)/b.depth})):(s=n.width,l=n.height,u=separation());var c=a.getData().tree.root,f=c.children[0];if(f){init(c),eachAfter(f,firstWalk,u),c.hierNode.modifier=-f.hierNode.prelim,eachBefore(f,secondWalk);var h=f,v=f,d=f;eachBefore(f,function(b){var C=b.getLayout().x;C<h.getLayout().x&&(h=b),C>v.getLayout().x&&(v=b),b.depth>d.depth&&(d=b)});var p=h===v?1:u(h,v)/2,g=p-h.getLayout().x,y=0,_=0,S=0,x=0;if(o==="radial")y=s/(v.getLayout().x+p+g),_=l/(d.depth-1||1),eachBefore(f,function(b){S=(b.getLayout().x+g)*y,x=(b.depth-1)*_;var C=radialCoordinate(S,x);b.setLayout({x:C.x,y:C.y,rawX:S,rawY:x},!0)});else{var T=a.getOrient();T==="RL"||T==="LR"?(_=l/(v.getLayout().x+p+g),y=s/(d.depth-1||1),eachBefore(f,function(b){x=(b.getLayout().x+g)*_,S=T==="LR"?(b.depth-1)*y:s-(b.depth-1)*y,b.setLayout({x:S,y:x},!0)})):(T==="TB"||T==="BT")&&(y=s/(v.getLayout().x+p+g),_=l/(d.depth-1||1),eachBefore(f,function(b){S=(b.getLayout().x+g)*y,x=T==="TB"?(b.depth-1)*_:l-(b.depth-1)*_,b.setLayout({x:S,y:x},!0)}))}}}function treeVisual(a){a.eachSeriesByType("tree",function(t){var r=t.getData(),n=r.tree;n.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle(),u=r.ensureUniqueItemVisual(o.dataIndex,"style");extend(u,l)})})}function installTreeAction(a){a.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var o=t.dataIndex,s=n.getData().tree,l=s.getNodeByDataIndex(o);l.isExpand=!l.isExpand})}),a.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",subType:"tree",query:t},function(o){var s=o.coordinateSystem,l=updateCenterAndZoomInAction(s,t,o.get("scaleLimit"));o.setCenter(l.center),o.setZoom(l.zoom)})})}function install$K(a){a.registerChartView(TreeView),a.registerSeriesModel(TreeSeriesModel),a.registerLayout(treeLayout),a.registerVisual(treeVisual),installTreeAction(a)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(a){for(var t=0;t<actionTypes.length;t++)a.registerAction({type:actionTypes[t],update:"updateView"},noop);a.registerAction({type:"treemapRootToNode",update:"updateView"},function(r,n){n.eachComponent({mainType:"series",subType:"treemap",query:r},o);function o(s,l){var u=["treemapZoomToNode","treemapRootToNode"],c=retrieveTargetInfo(r,u,s);if(c){var f=s.getViewRoot();f&&(r.direction=aboveViewRoot(f,c.node)?"rollUp":"drillDown"),s.resetViewRoot(c.node)}}})}function enableAriaDecalForTree(a){var t=a.getData(),r=t.tree,n={};r.eachNode(function(o){for(var s=o;s&&s.depth>1;)s=s.parentNode;var l=getDecalFromPalette(a.ecModel,s.name||s.dataIndex+"",n);o.setVisual("decal",l)})}var TreemapSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.preventUsingHoverLayer=!0,r}return t.prototype.getInitialData=function(r,n){var o={name:r.name,children:r.data};completeTreeValue$1(o);var s=r.levels||[],l=this.designatedVisualItemStyle={},u=new Model({itemStyle:l},this,n);s=r.levels=setDefault(s,n);var c=map$1(s||[],function(v){return new Model(v,u,n)},this),f=Tree.createTree(o,this,h);function h(v){v.wrapMethod("getItemModel",function(d,p){var g=f.getNodeByDataIndex(p),y=g?c[g.depth]:null;return d.parentModel=y||u,d})}return f.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(r,n,o){var s=this.getData(),l=this.getRawValue(r),u=s.getName(r);return createTooltipMarkup("nameValue",{name:u,value:l})},t.prototype.getDataParams=function(r){var n=a.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=wrapTreePathInfo(o,this),n.treePathInfo=n.treeAncestors,n},t.prototype.setLayoutInfo=function(r){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,r)},t.prototype.mapIdToIndex=function(r){var n=this._idIndexMap;n||(n=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var o=n.get(r);return o==null&&n.set(r,o=this._idIndexMapCount++),o},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var n=this.getRawData().tree.root;(!r||r!==n&&!n.contains(r))&&(this._viewRoot=n)},t.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,coordinateSystemUsage:"box",left:tokens.size.l,top:tokens.size.xxxl,right:tokens.size.l,bottom:tokens.size.xxxl,sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"â–¶",zoomToNodeRatio:.32*.32,scaleLimit:{max:5,min:.2},roam:!0,roamTrigger:"global",nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",bottom:tokens.size.m,emptyItemWidth:25,itemStyle:{color:tokens.color.backgroundShade,textStyle:{color:tokens.color.secondary}},emphasis:{itemStyle:{color:tokens.color.background}}},label:{show:!0,distance:0,padding:5,position:"inside",color:tokens.color.neutral00,overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:tokens.color.neutral00,borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(SeriesModel);function completeTreeValue$1(a){var t=0;each$f(a.children,function(n){completeTreeValue$1(n);var o=n.value;isArray$1(o)&&(o=o[0]),t+=o});var r=a.value;isArray$1(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=t),r<0&&(r=0),isArray$1(a.value)?a.value[0]=r:a.value=r}function setDefault(a,t){var r=normalizeToArray(t.get("color")),n=normalizeToArray(t.get(["aria","decal","decals"]));if(r){a=a||[];var o,s;each$f(a,function(u){var c=new Model(u),f=c.get("color"),h=c.get("decal");(c.get(["itemStyle","color"])||f&&f!=="none")&&(o=!0),(c.get(["itemStyle","decal"])||h&&h!=="none")&&(s=!0)});var l=a[0]||(a[0]={});return o||(l.color=r.slice()),!s&&n&&(l.decal=n.slice()),a}}var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function a(t){this.group=new Group$3,t.add(this.group)}return a.prototype.render=function(t,r,n,o){var s=t.getModel("breadcrumb"),l=this.group;if(l.removeAll(),!(!s.get("show")||!n)){var u=s.getModel("itemStyle"),c=s.getModel("emphasis"),f=u.getModel("textStyle"),h=c.getModel(["itemStyle","textStyle"]),v=createBoxLayoutReference(t,r).refContainer,d={left:s.get("left"),right:s.get("right"),top:s.get("top"),bottom:s.get("bottom")},p={emptyItemWidth:s.get("emptyItemWidth"),totalWidth:0,renderList:[]},g=getLayoutRect(d,v);this._prepare(n,p,f),this._renderContent(t,p,g,u,c,f,h,o),positionElement(l,d,v)}},a.prototype._prepare=function(t,r,n){for(var o=t;o;o=o.parentNode){var s=convertOptionIdName(o.getModel().get("name"),""),l=n.getTextRect(s),u=Math.max(l.width+TEXT_PADDING*2,r.emptyItemWidth);r.totalWidth+=u+ITEM_GAP,r.renderList.push({node:o,text:s,width:u})}},a.prototype._renderContent=function(t,r,n,o,s,l,u,c){for(var f=0,h=r.emptyItemWidth,v=t.get(["breadcrumb","height"]),d=r.totalWidth,p=r.renderList,g=s.getModel("itemStyle").getItemStyle(),y=p.length-1;y>=0;y--){var _=p[y],S=_.node,x=_.width,T=_.text;d>n.width&&(d-=x-h,x=h,T=null);var b=new Polygon({shape:{points:makeItemPoints(f,0,x,v,y===p.length-1,y===0)},style:defaults(o.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle(l,{text:T})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(c,S)});b.disableLabelAnimation=!0,b.getTextContent().ensureState("emphasis").style=createTextStyle(u,{text:T}),b.ensureState("emphasis").style=g,toggleHoverEmphasis(b,s.get("focus"),s.get("blurScope"),s.get("disabled")),this.group.add(b),packEventData(b,t,S),f+=x+ITEM_GAP}},a.prototype.remove=function(){this.group.removeAll()},a}();function makeItemPoints(a,t,r,n,o,s){var l=[[o?a:a-ARRAY_LENGTH,t],[a+r,t],[a+r,t+n],[o?a:a-ARRAY_LENGTH,t+n]];return!s&&l.splice(2,0,[a+r+ARRAY_LENGTH,t+n/2]),!o&&l.push([a,t+n/2]),l}function packEventData(a,t,r){getECData(a).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&wrapTreePathInfo(r,t)}}var AnimationWrap=function(){function a(){this._storage=[],this._elExistsMap={}}return a.prototype.add=function(t,r,n,o,s){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:r,duration:n,delay:o,easing:s}),!0)},a.prototype.finished=function(t){return this._finishedCallback=t,this},a.prototype.start=function(){for(var t=this,r=this._storage.length,n=function(){r--,r<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},o=0,s=this._storage.length;o<s;o++){var l=this._storage[o];l.el.animateTo(l.target,{duration:l.duration,delay:l.delay,easing:l.easing,setToFinal:!0,done:n,aborted:n})}return this},a}();function createWrap(){return new AnimationWrap}var Group$2=Group$3,Rect$1=Rect$2,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(a){var t=getStateItemStyle(a);return t.stroke=t.fill=t.lineWidth=null,t},inner$e=makeInner(),TreemapView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r._state="ready",r._storage=createStorage(),r}return t.prototype.render=function(r,n,o,s){var l=n.findComponents({mainType:"series",subType:"treemap",query:s});if(!(indexOf(l,r)<0)){this.seriesModel=r,this.api=o,this.ecModel=n;var u=["treemapZoomToNode","treemapRootToNode"],c=retrieveTargetInfo(s,u,r),f=s&&s.type,h=r.layoutInfo,v=!this._oldTree,d=this._storage,p=f==="treemapRootToNode"&&c&&d?{rootNodeGroup:d.nodeGroup[c.node.getRawIndex()],direction:s.direction}:null,g=this._giveContainerGroup(h),y=r.get("animation"),_=this._doRender(g,r,p);y&&!v&&(!f||f==="treemapZoomToNode"||f==="treemapRootToNode")?this._doAnimation(g,_,r,p):_.renderFinally(),this._resetController(o),this._renderBreadcrumb(r,o,c)}},t.prototype._giveContainerGroup=function(r){var n=this._containerGroup;return n||(n=this._containerGroup=new Group$2,this._initEvents(n),this.group.add(n)),n.x=r.x,n.y=r.y,n},t.prototype._doRender=function(r,n,o){var s=n.getData().tree,l=this._oldTree,u=createStorage(),c=createStorage(),f=this._storage,h=[];function v(x,T,b,C){return renderNode(n,c,f,o,u,h,x,T,b,C)}y(s.root?[s.root]:[],l&&l.root?[l.root]:[],r,s===l||!l,0);var d=_(f);if(this._oldTree=s,this._storage=c,this._controllerHost){var p=this.seriesModel.layoutInfo,g=s.root.getLayout();g.width===p.width&&g.height===p.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:u,willDeleteEls:d,renderFinally:S};function y(x,T,b,C,w){C?(T=x,each$f(x,function(L,E){!L.isRemoved()&&P(E,E)})):new DataDiffer(T,x,M,M).add(P).update(P).remove(curry$1(P,null)).execute();function M(L){return L.getId()}function P(L,E){var I=L!=null?x[L]:null,R=E!=null?T[E]:null,D=v(I,R,b,w);D&&y(I&&I.viewChildren||[],R&&R.viewChildren||[],D,C,w+1)}}function _(x){var T=createStorage();return x&&each$f(x,function(b,C){var w=T[C];each$f(b,function(M){M&&(w.push(M),inner$e(M).willDelete=!0)})}),T}function S(){each$f(d,function(x){each$f(x,function(T){T.parent&&T.parent.remove(T)})}),each$f(h,function(x){x.invisible=!0,x.dirty()})}},t.prototype._doAnimation=function(r,n,o,s){var l=o.get("animationDurationUpdate"),u=o.get("animationEasing"),c=(isFunction(l)?0:l)||0,f=(isFunction(u)?null:u)||"cubicOut",h=createWrap();each$f(n.willDeleteEls,function(v,d){each$f(v,function(p,g){if(!p.invisible){var y=p.parent,_,S=inner$e(y);if(s&&s.direction==="drillDown")_=y===s.rootNodeGroup?{shape:{x:0,y:0,width:S.nodeWidth,height:S.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var x=0,T=0;S.willDelete||(x=S.nodeWidth/2,T=S.nodeHeight/2),_=d==="nodeGroup"?{x,y:T,style:{opacity:0}}:{shape:{x,y:T,width:0,height:0},style:{opacity:0}}}_&&h.add(p,_,c,0,f)}})}),each$f(this._storage,function(v,d){each$f(v,function(p,g){var y=n.lastsForAnimation[d][g],_={};y&&(p instanceof Group$3?y.oldX!=null&&(_.x=p.x,_.y=p.y,p.x=y.oldX,p.y=y.oldY):(y.oldShape&&(_.shape=extend({},p.shape),p.setShape(y.oldShape)),y.fadein?(p.setStyle("opacity",0),_.style={opacity:1}):p.style.opacity!==1&&(_.style={opacity:1})),h.add(p,_,c,0,f))})},this),this._state="animating",h.finished(bind$1(function(){this._state="ready",n.renderFinally()},this)).start()},t.prototype._resetController=function(r){var n=this,o=this._controller,s=this._controllerHost;s||(this._controllerHost={target:this.group},s=this._controllerHost);var l=this.seriesModel;o||(o=this._controller=new RoamController(r.getZr()),o.on("pan",bind$1(this._onPan,this)),o.on("zoom",bind$1(this._onZoom,this))),o.enable(l.get("roam"),{api:r,zInfo:{component:l},triggerInfo:{roamTrigger:l.get("roamTrigger"),isInSelf:function(u,c,f){var h=n._containerGroup;return h?h.getBoundingRect().contain(c-h.x,f-h.y):!1}}}),s.zoomLimit=l.get("scaleLimit"),s.zoom=l.get("zoom")},t.prototype._clearController=function(){var r=this._controller;this._controllerHost=null,r&&(r.dispose(),r=null)},t.prototype._onPan=function(r){if(this._state!=="animating"&&(Math.abs(r.dx)>DRAG_THRESHOLD||Math.abs(r.dy)>DRAG_THRESHOLD)){var n=this.seriesModel.getData().tree.root;if(!n)return;var o=n.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+r.dx,y:o.y+r.dy,width:o.width,height:o.height}})}},t.prototype._onZoom=function(r){var n=r.originX,o=r.originY,s=r.scale;if(this._state!=="animating"){var l=this.seriesModel.getData().tree.root;if(!l)return;var u=l.getLayout();if(!u)return;var c=new BoundingRect(u.x,u.y,u.width,u.height),f=null,h=this._controllerHost;f=h.zoomLimit;var v=h.zoom=h.zoom||1;if(v*=s,f){var d=f.min||0,p=f.max||1/0;v=Math.max(Math.min(p,v),d)}var g=v/h.zoom;h.zoom=v;var y=this.seriesModel.layoutInfo;n-=y.x,o-=y.y;var _=create$1();translate(_,_,[-n,-o]),scale$1(_,_,[g,g]),translate(_,_,[n,o]),c.applyTransform(_),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:c.x,y:c.y,width:c.width,height:c.height}})}},t.prototype._initEvents=function(r){var n=this;r.on("click",function(o){if(n._state==="ready"){var s=n.seriesModel.get("nodeClick",!0);if(s){var l=n.findTarget(o.offsetX,o.offsetY);if(l){var u=l.node;if(u.getLayout().isLeafRoot)n._rootToNode(l);else if(s==="zoomToNode")n._zoomToNode(l);else if(s==="link"){var c=u.hostTree.data.getItemModel(u.dataIndex),f=c.get("link",!0),h=c.get("target",!0)||"blank";f&&windowOpen(f,h)}}}}},this)},t.prototype._renderBreadcrumb=function(r,n,o){var s=this;o||(o=r.get("leafDepth",!0)!=null?{node:r.getViewRoot()}:this.findTarget(n.getWidth()/2,n.getHeight()/2),o||(o={node:r.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(r,n,o.node,function(l){s._state!=="animating"&&(aboveViewRoot(r.getViewRoot(),l)?s._rootToNode({node:l}):s._zoomToNode({node:l}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(r){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},t.prototype._rootToNode=function(r){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},t.prototype.findTarget=function(r,n){var o,s=this.seriesModel.getViewRoot();return s.eachNode({attr:"viewChildren",order:"preorder"},function(l){var u=this._storage.background[l.getRawIndex()];if(u){var c=u.transformCoordToLocal(r,n),f=u.shape;if(f.x<=c[0]&&c[0]<=f.x+f.width&&f.y<=c[1]&&c[1]<=f.y+f.height)o={node:l,offsetX:c[0],offsetY:c[1]};else return!1}},this),o},t.type="treemap",t}(ChartView);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(a,t,r,n,o,s,l,u,c,f){if(!l)return;var h=l.getLayout(),v=a.getData(),d=l.getModel();if(v.setItemGraphicEl(l.dataIndex,null),!h||!h.isInView)return;var p=h.width,g=h.height,y=h.borderWidth,_=h.invisible,S=l.getRawIndex(),x=u&&u.getRawIndex(),T=l.viewChildren,b=h.upperHeight,C=T&&T.length,w=d.getModel("itemStyle"),M=d.getModel(["emphasis","itemStyle"]),P=d.getModel(["blur","itemStyle"]),L=d.getModel(["select","itemStyle"]),E=w.get("borderRadius")||0,I=Z("nodeGroup",Group$2);if(!I)return;if(c.add(I),I.x=h.x||0,I.y=h.y||0,I.markRedraw(),inner$e(I).nodeWidth=p,inner$e(I).nodeHeight=g,h.isAboveViewRoot)return I;var R=Z("background",Rect$1,f,Z2_BG);R&&G(I,R,C&&h.upperLabelHeight);var D=d.getModel("emphasis"),O=D.get("focus"),$=D.get("blurScope"),N=D.get("disabled"),V=O==="ancestor"?l.getAncestorsIndices():O==="descendant"?l.getDescendantIndices():O;if(C)isHighDownDispatcher(I)&&setAsHighDownDispatcher(I,!1),R&&(setAsHighDownDispatcher(R,!N),v.setItemGraphicEl(l.dataIndex,R),enableHoverFocus(R,V,$));else{var B=Z("content",Rect$1,f,Z2_CONTENT);B&&z(I,B),R.disableMorphing=!0,R&&isHighDownDispatcher(R)&&setAsHighDownDispatcher(R,!1),setAsHighDownDispatcher(I,!N),v.setItemGraphicEl(l.dataIndex,I);var F=d.getShallow("cursor");F&&B.attr("cursor",F),enableHoverFocus(I,V,$)}return I;function G(K,X,q){var W=getECData(X);if(W.dataIndex=l.dataIndex,W.seriesIndex=a.seriesIndex,X.setShape({x:0,y:0,width:p,height:g,r:E}),_)H(X);else{X.invisible=!1;var j=l.getVisual("style"),re=j.stroke,Q=getItemStyleNormal(w);Q.fill=re;var te=getStateItemStyle(M);te.fill=M.get("borderColor");var ae=getStateItemStyle(P);ae.fill=P.get("borderColor");var ne=getStateItemStyle(L);if(ne.fill=L.get("borderColor"),q){var oe=p-2*y;U(X,re,j.opacity,{x:y,y:0,width:oe,height:b})}else X.removeTextContent();X.setStyle(Q),X.ensureState("emphasis").style=te,X.ensureState("blur").style=ae,X.ensureState("select").style=ne,setDefaultStateProxy(X)}K.add(X)}function z(K,X){var q=getECData(X);q.dataIndex=l.dataIndex,q.seriesIndex=a.seriesIndex;var W=Math.max(p-2*y,0),j=Math.max(g-2*y,0);if(X.culling=!0,X.setShape({x:y,y,width:W,height:j,r:E}),_)H(X);else{X.invisible=!1;var re=l.getVisual("style"),Q=re.fill,te=getItemStyleNormal(w);te.fill=Q,te.decal=re.decal;var ae=getStateItemStyle(M),ne=getStateItemStyle(P),oe=getStateItemStyle(L);U(X,Q,re.opacity,null),X.setStyle(te),X.ensureState("emphasis").style=ae,X.ensureState("blur").style=ne,X.ensureState("select").style=oe,setDefaultStateProxy(X)}K.add(X)}function H(K){!K.invisible&&s.push(K)}function U(K,X,q,W){var j=d.getModel(W?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),re=convertOptionIdName(d.get("name"),null),Q=j.getShallow("show");setLabelStyle(K,getLabelStatesModels(d,W?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:Q?re:null,inheritColor:X,defaultOpacity:q,labelFetcher:a,labelDataIndex:l.dataIndex});var te=K.getTextContent();if(te){var ae=te.style,ne=normalizeCssArray$1(ae.padding||0);W&&(K.setTextConfig({layoutRect:W}),te.disableLabelLayout=!0),te.beforeUpdate=function(){var ie=Math.max((W?W.width:K.shape.width)-ne[1]-ne[3],0),se=Math.max((W?W.height:K.shape.height)-ne[0]-ne[2],0);(ae.width!==ie||ae.height!==se)&&te.setStyle({width:ie,height:se})},ae.truncateMinChar=2,ae.lineOverflow="truncate",Y(ae,W,h);var oe=te.getState("emphasis");Y(oe?oe.style:null,W,h)}}function Y(K,X,q){var W=K?K.text:null;if(!X&&q.isLeafRoot&&W!=null){var j=a.get("drillDownIcon",!0);K.text=j?j+" "+W:W}}function Z(K,X,q,W){var j=x!=null&&r[K][x],re=o[K];return j?(r[K][x]=null,J(re,j)):_||(j=new X,j instanceof Displayable&&(j.z2=calculateZ2(q,W)),ee(re,j)),t[K][S]=j}function J(K,X){var q=K[S]={};X instanceof Group$2?(q.oldX=X.x,q.oldY=X.y):q.oldShape=extend({},X.shape)}function ee(K,X){var q=K[S]={},W=l.parentNode,j=X instanceof Group$3;if(W&&(!n||n.direction==="drillDown")){var re=0,Q=0,te=o.background[W.getRawIndex()];!n&&te&&te.oldShape&&(re=te.oldShape.width,Q=te.oldShape.height),j?(q.oldX=0,q.oldY=Q):q.oldShape={x:re,y:Q,width:0,height:0}}q.fadein=!j}}function calculateZ2(a,t){return a*Z2_BASE+t}var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function a(t){var r=t.mappingMethod,n=t.type,o=this.option=clone$4(t);this.type=n,this.mappingMethod=r,this._normalizeData=normalizers[r];var s=a.visualHandlers[n];this.applyVisual=s.applyVisual,this.getColorMapper=s.getColorMapper,this._normalizedToVisual=s._normalizedToVisual[r],r==="piecewise"?(normalizeVisualRange(o),preprocessForPiecewise(o)):r==="category"?o.categories?preprocessForSpecifiedCategory(o):normalizeVisualRange(o,!0):(assert(r!=="linear"||o.dataExtent),normalizeVisualRange(o))}return a.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},a.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},a.listVisualTypes=function(){return keys(a.visualHandlers)},a.isValidType=function(t){return a.visualHandlers.hasOwnProperty(t)},a.eachVisual=function(t,r,n){isObject$3(t)?each$f(t,r,n):r.call(n,t)},a.mapVisual=function(t,r,n){var o,s=isArray$1(t)?[]:isObject$3(t)?{}:(o=!0,null);return a.eachVisual(t,function(l,u){var c=r.call(n,l,u);o?s=c:s[u]=c}),s},a.retrieveVisuals=function(t){var r={},n;return t&&each$c(a.visualHandlers,function(o,s){t.hasOwnProperty(s)&&(r[s]=t[s],n=!0)}),n?r:null},a.prepareVisualTypes=function(t){if(isArray$1(t))t=t.slice();else if(isObject(t)){var r=[];each$c(t,function(n,o){r.push(o)}),t=r}else return[];return t.sort(function(n,o){return o==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),t},a.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},a.findPieceIndex=function(t,r,n){for(var o,s=1/0,l=0,u=r.length;l<u;l++){var c=r[l].value;if(c!=null){if(c===t||isString(c)&&c===t+"")return l;n&&d(c,l)}}for(var l=0,u=r.length;l<u;l++){var f=r[l],h=f.interval,v=f.close;if(h){if(h[0]===-1/0){if(littleThan(v[1],t,h[1]))return l}else if(h[1]===1/0){if(littleThan(v[0],h[0],t))return l}else if(littleThan(v[0],h[0],t)&&littleThan(v[1],t,h[1]))return l;n&&d(h[0],l),n&&d(h[1],l)}}if(n)return t===1/0?r.length-1:t===-1/0?0:o;function d(p,g){var y=Math.abs(p-t);y<s&&(s=y,o=g)}},a.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var t=this.option;return bind$1(t.mappingMethod==="category"?function(r,n){return!n&&(r=this._normalizeData(r)),doMapCategory.call(this,r)}:function(r,n,o){var s=!!o;return!n&&(r=this._normalizeData(r)),o=fastLerp(r,t.parsedVisual,o),s?o:stringify(o,"rgba")},this)},_normalizedToVisual:{linear:function(t){return stringify(fastLerp(t,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(t,r){var n=getSpecifiedVisual.call(this,r);return n==null&&(n=stringify(fastLerp(t,this.option.parsedVisual),"rgba")),n},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(t,r){return modifyHSL(t,r)}),colorSaturation:makePartialColorVisualHandler(function(t,r){return modifyHSL(t,null,r)}),colorLightness:makePartialColorVisualHandler(function(t,r){return modifyHSL(t,null,null,r)}),colorAlpha:makePartialColorVisualHandler(function(t,r){return modifyAlpha(t,r)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(t,r,n){var o=this.mapValueToVisual(t);n("symbol",o)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(t,r){var n=getSpecifiedVisual.call(this,r);return n==null&&(n=doMapToArray.call(this,t)),n},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},a}();function preprocessForPiecewise(a){var t=a.pieceList;a.hasSpecialVisual=!1,each$f(t,function(r,n){r.originIndex=n,r.visual!=null&&(a.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(a){var t=a.categories,r=a.categoryMap={},n=a.visual;if(each$c(t,function(l,u){r[l]=u}),!isArray$1(n)){var o=[];isObject$3(n)?each$c(n,function(l,u){var c=r[u];o[c??CATEGORY_DEFAULT_VISUAL_INDEX]=l}):o[CATEGORY_DEFAULT_VISUAL_INDEX]=n,n=setVisualToOption(a,o)}for(var s=t.length-1;s>=0;s--)n[s]==null&&(delete r[t[s]],t.pop())}function normalizeVisualRange(a,t){var r=a.visual,n=[];isObject$3(r)?each$c(r,function(s){n.push(s)}):r!=null&&n.push(r);var o={color:1,symbol:1};!t&&n.length===1&&!o.hasOwnProperty(a.type)&&(n[1]=n[0]),setVisualToOption(a,n)}function makePartialColorVisualHandler(a){return{applyVisual:function(t,r,n){var o=this.mapValueToVisual(t);n("color",a(r("color"),o))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(a){var t=this.option.visual;return t[Math.round(linearMap$2(a,[0,1],[0,t.length-1],!0))]||{}}function makeApplyVisual(a){return function(t,r,n){n(a,this.mapValueToVisual(t))}}function doMapCategory(a){var t=this.option.visual;return t[this.option.loop&&a!==CATEGORY_DEFAULT_VISUAL_INDEX?a%t.length:a]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(a){return{linear:function(t){return linearMap$2(t,a,this.option.visual,!0)},category:doMapCategory,piecewise:function(t,r){var n=getSpecifiedVisual.call(this,r);return n==null&&(n=linearMap$2(t,a,this.option.visual,!0)),n},fixed:doMapFixed}}function getSpecifiedVisual(a){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var n=VisualMapping.findPieceIndex(a,r),o=r[n];if(o&&o.visual)return o.visual[this.type]}}function setVisualToOption(a,t){return a.visual=t,a.type==="color"&&(a.parsedVisual=map$1(t,function(r){var n=parse(r);return n||[0,0,0,1]})),t}var normalizers={linear:function(a){return linearMap$2(a,this.option.dataExtent,[0,1],!0)},piecewise:function(a){var t=this.option.pieceList,r=VisualMapping.findPieceIndex(a,t,!0);if(r!=null)return linearMap$2(r,[0,t.length-1],[0,1],!0)},category:function(a){var t=this.option.categories?this.option.categoryMap[a]:a;return t??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop};function littleThan(a,t,r){return a?t<=r:t<r}var ITEM_STYLE_NORMAL="itemStyle",inner$d=makeInner();const treemapVisual={seriesType:"treemap",reset:function(a){var t=a.getData().tree,r=t.root;r.isRemoved()||travelTree(r,{},a.getViewRoot().getAncestors(),a)}};function travelTree(a,t,r,n){var o=a.getModel(),s=a.getLayout(),l=a.hostTree.data;if(!(!s||s.invisible||!s.isInView)){var u=o.getModel(ITEM_STYLE_NORMAL),c=buildVisuals(u,t,n),f=l.ensureUniqueItemVisual(a.dataIndex,"style"),h=u.get("borderColor"),v=u.get("borderColorSaturation"),d;v!=null&&(d=calculateColor(c),h=calculateBorderColor(v,d)),f.stroke=h;var p=a.viewChildren;if(!p||!p.length)d=calculateColor(c),f.fill=d;else{var g=buildVisualMapping(a,o,s,u,c,p);each$f(p,function(y,_){if(y.depth>=r.length||y===r[y.depth]){var S=mapVisual$1(o,c,y,_,g,n);travelTree(y,S,r,n)}})}}}function buildVisuals(a,t,r){var n=extend({},t),o=r.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(s){o[s]=t[s];var l=a.get(s);o[s]=null,l!=null&&(n[s]=l)}),n}function calculateColor(a){var t=getValueVisualDefine(a,"color");if(t){var r=getValueVisualDefine(a,"colorAlpha"),n=getValueVisualDefine(a,"colorSaturation");return n&&(t=modifyHSL(t,null,null,n)),r&&(t=modifyAlpha(t,r)),t}}function calculateBorderColor(a,t){return t!=null?modifyHSL(t,null,null,a):null}function getValueVisualDefine(a,t){var r=a[t];if(r!=null&&r!=="none")return r}function buildVisualMapping(a,t,r,n,o,s){if(!(!s||!s.length)){var l=getRangeVisual(t,"color")||o.color!=null&&o.color!=="none"&&(getRangeVisual(t,"colorAlpha")||getRangeVisual(t,"colorSaturation"));if(l){var u=t.get("visualMin"),c=t.get("visualMax"),f=r.dataExtent.slice();u!=null&&u<f[0]&&(f[0]=u),c!=null&&c>f[1]&&(f[1]=c);var h=t.get("colorMappingBy"),v={type:l.name,dataExtent:f,visual:l.range};v.type==="color"&&(h==="index"||h==="id")?(v.mappingMethod="category",v.loop=!0):v.mappingMethod="linear";var d=new VisualMapping(v);return inner$d(d).drColorMappingBy=h,d}}}function getRangeVisual(a,t){var r=a.get(t);return isArray$1(r)&&r.length?{name:t,range:r}:null}function mapVisual$1(a,t,r,n,o,s){var l=extend({},t);if(o){var u=o.type,c=u==="color"&&inner$d(o).drColorMappingBy,f=c==="index"?n:c==="id"?s.mapIdToIndex(r.getId()):r.getValue(a.get("visualDimension"));l[u]=o.mapValueToVisual(f)}return l}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(a,t,r,n){var o=a.option,s=createBoxLayoutReference(a,r).refContainer,l=getLayoutRect(a.getBoxLayoutParams(),s),u=o.size||[],c=parsePercent(retrieveValue(l.width,u[0]),s.width),f=parsePercent(retrieveValue(l.height,u[1]),s.height),h=n&&n.type,v=["treemapZoomToNode","treemapRootToNode"],d=retrieveTargetInfo(n,v,a),p=h==="treemapRender"||h==="treemapMove"?n.rootRect:null,g=a.getViewRoot(),y=getPathToRoot(g);if(h!=="treemapMove"){var _=h==="treemapZoomToNode"?estimateRootSize(a,d,g,c,f):p?[p.width,p.height]:[c,f],S=o.sort;S&&S!=="asc"&&S!=="desc"&&(S="desc");var x={squareRatio:o.squareRatio,sort:S,leafDepth:o.leafDepth};g.hostTree.clearLayouts();var T={x:0,y:0,width:_[0],height:_[1],area:_[0]*_[1]};g.setLayout(T),squarify(g,x,!1,0),T=g.getLayout(),each$b(y,function(C,w){var M=(y[w+1]||g).getValue();C.setLayout(extend({dataExtent:[M,M],borderWidth:0,upperHeight:0},T))})}var b=a.getData().tree.root;b.setLayout(calculateRootPosition(l,p,d),!0),a.setLayoutInfo(l),prunning(b,new BoundingRect(-l.x,-l.y,r.getWidth(),r.getHeight()),y,g,0)}};function squarify(a,t,r,n){var o,s;if(!a.isRemoved()){var l=a.getLayout();o=l.width,s=l.height;var u=a.getModel(),c=u.get(PATH_BORDER_WIDTH),f=u.get(PATH_GAP_WIDTH)/2,h=getUpperLabelHeight(u),v=Math.max(c,h),d=c-f,p=v-f;a.setLayout({borderWidth:c,upperHeight:v,upperLabelHeight:h},!0),o=mathMax$3(o-2*d,0),s=mathMax$3(s-d-p,0);var g=o*s,y=initChildren$1(a,u,g,t,r,n);if(y.length){var _={x:d,y:p,width:o,height:s},S=mathMin$3(o,s),x=1/0,T=[];T.area=0;for(var b=0,C=y.length;b<C;){var w=y[b];T.push(w),T.area+=w.getLayout().area;var M=worst(T,S,t.squareRatio);M<=x?(b++,x=M):(T.area-=T.pop().getLayout().area,position(T,S,_,f,!1),S=mathMin$3(_.width,_.height),T.length=T.area=0,x=1/0)}if(T.length&&position(T,S,_,f,!0),!r){var P=u.get("childrenVisibleMin");P!=null&&g<P&&(r=!0)}for(var b=0,C=y.length;b<C;b++)squarify(y[b],t,r,n+1)}}}function initChildren$1(a,t,r,n,o,s){var l=a.children||[],u=n.sort;u!=="asc"&&u!=="desc"&&(u=null);var c=n.leafDepth!=null&&n.leafDepth<=s;if(o&&!c)return a.viewChildren=[];l=filter(l,function(p){return!p.isRemoved()}),sort$1(l,u);var f=statistic(t,l,u);if(f.sum===0)return a.viewChildren=[];if(f.sum=filterByThreshold(t,r,f.sum,u,l),f.sum===0)return a.viewChildren=[];for(var h=0,v=l.length;h<v;h++){var d=l[h].getValue()/f.sum*r;l[h].setLayout({area:d})}return c&&(l.length&&a.setLayout({isLeafRoot:!0},!0),l.length=0),a.viewChildren=l,a.setLayout({dataExtent:f.dataExtent},!0),l}function filterByThreshold(a,t,r,n,o){if(!n)return r;for(var s=a.get("visibleMin"),l=o.length,u=l,c=l-1;c>=0;c--){var f=o[n==="asc"?l-c-1:c].getValue();f/r*t<s&&(u=c,r-=f)}return n==="asc"?o.splice(0,l-u):o.splice(u,l-u),r}function sort$1(a,t){return t&&a.sort(function(r,n){var o=t==="asc"?r.getValue()-n.getValue():n.getValue()-r.getValue();return o===0?t==="asc"?r.dataIndex-n.dataIndex:n.dataIndex-r.dataIndex:o}),a}function statistic(a,t,r){for(var n=0,o=0,s=t.length;o<s;o++)n+=t[o].getValue();var l=a.get("visualDimension"),u;return!t||!t.length?u=[NaN,NaN]:l==="value"&&r?(u=[t[t.length-1].getValue(),t[0].getValue()],r==="asc"&&u.reverse()):(u=[1/0,-1/0],each$b(t,function(c){var f=c.getValue(l);f<u[0]&&(u[0]=f),f>u[1]&&(u[1]=f)})),{sum:n,dataExtent:u}}function worst(a,t,r){for(var n=0,o=1/0,s=0,l=void 0,u=a.length;s<u;s++)l=a[s].getLayout().area,l&&(l<o&&(o=l),l>n&&(n=l));var c=a.area*a.area,f=t*t*r;return c?mathMax$3(f*n/c,c/(f*o)):1/0}function position(a,t,r,n,o){var s=t===r.width?0:1,l=1-s,u=["x","y"],c=["width","height"],f=r[u[s]],h=t?a.area/t:0;(o||h>r[c[l]])&&(h=r[c[l]]);for(var v=0,d=a.length;v<d;v++){var p=a[v],g={},y=h?p.getLayout().area/h:0,_=g[c[l]]=mathMax$3(h-2*n,0),S=r[u[s]]+r[c[s]]-f,x=v===d-1||S<y?S:y,T=g[c[s]]=mathMax$3(x-2*n,0);g[u[l]]=r[u[l]]+mathMin$3(n,_/2),g[u[s]]=f+mathMin$3(n,T/2),f+=x,p.setLayout(g,!0)}r[u[l]]+=h,r[c[l]]-=h}function estimateRootSize(a,t,r,n,o){var s=(t||{}).node,l=[n,o];if(!s||s===r)return l;for(var u,c=n*o,f=c*a.option.zoomToNodeRatio;u=s.parentNode;){for(var h=0,v=u.children,d=0,p=v.length;d<p;d++)h+=v[d].getValue();var g=s.getValue();if(g===0)return l;f*=h/g;var y=u.getModel(),_=y.get(PATH_BORDER_WIDTH),S=Math.max(_,getUpperLabelHeight(y));f+=4*_*_+(3*_+S)*Math.pow(f,.5),f>MAX_SAFE_INTEGER&&(f=MAX_SAFE_INTEGER),s=u}f<c&&(f=c);var x=Math.pow(f/c,.5);return[n*x,o*x]}function calculateRootPosition(a,t,r){if(t)return{x:t.x,y:t.y};var n={x:0,y:0};if(!r)return n;var o=r.node,s=o.getLayout();if(!s)return n;for(var l=[s.width/2,s.height/2],u=o;u;){var c=u.getLayout();l[0]+=c.x,l[1]+=c.y,u=u.parentNode}return{x:a.width/2-l[0],y:a.height/2-l[1]}}function prunning(a,t,r,n,o){var s=a.getLayout(),l=r[o],u=l&&l===a;if(!(l&&!u||o===r.length&&a!==n)){a.setLayout({isInView:!0,invisible:!u&&!t.intersect(s),isAboveViewRoot:u},!0);var c=new BoundingRect(t.x-s.x,t.y-s.y,t.width,t.height);each$b(a.viewChildren||[],function(f){prunning(f,c,r,n,o+1)})}}function getUpperLabelHeight(a){return a.get(PATH_UPPER_LABEL_SHOW)?a.get(PATH_UPPER_LABEL_HEIGHT):0}function install$J(a){a.registerSeriesModel(TreemapSeriesModel),a.registerChartView(TreemapView),a.registerVisual(treemapVisual),a.registerLayout(treemapLayout),installTreemapAction(a)}function categoryFilter(a){var t=a.findComponents({mainType:"legend"});!t||!t.length||a.eachSeriesByType("graph",function(r){var n=r.getCategoriesData(),o=r.getGraph(),s=o.data,l=n.mapArray(n.getName);s.filterSelf(function(u){var c=s.getItemModel(u),f=c.getShallow("category");if(f!=null){isNumber(f)&&(f=l[f]);for(var h=0;h<t.length;h++)if(!t[h].isSelected(f))return!1}return!0})})}function categoryVisual(a){var t={};a.eachSeriesByType("graph",function(r){var n=r.getCategoriesData(),o=r.getData(),s={};n.each(function(l){var u=n.getName(l);s["ec-"+u]=l;var c=n.getItemModel(l),f=c.getModel("itemStyle").getItemStyle();f.fill||(f.fill=r.getColorFromPalette(u,t)),n.setItemVisual(l,"style",f);for(var h=["symbol","symbolSize","symbolKeepAspect"],v=0;v<h.length;v++){var d=c.getShallow(h[v],!0);d!=null&&n.setItemVisual(l,h[v],d)}}),n.count()&&o.each(function(l){var u=o.getItemModel(l),c=u.getShallow("category");if(c!=null){isString(c)&&(c=s["ec-"+c]);var f=n.getItemVisual(c,"style"),h=o.ensureUniqueItemVisual(l,"style");extend(h,f);for(var v=["symbol","symbolSize","symbolKeepAspect"],d=0;d<v.length;d++)o.setItemVisual(l,v[d],n.getItemVisual(c,v[d]))}})})}function normalize$1(a){return a instanceof Array||(a=[a,a]),a}function graphEdgeVisual(a){a.eachSeriesByType("graph",function(t){var r=t.getGraph(),n=t.getEdgeData(),o=normalize$1(t.get("edgeSymbol")),s=normalize$1(t.get("edgeSymbolSize"));n.setVisual("fromSymbol",o&&o[0]),n.setVisual("toSymbol",o&&o[1]),n.setVisual("fromSymbolSize",s&&s[0]),n.setVisual("toSymbolSize",s&&s[1]),n.setVisual("style",t.getModel("lineStyle").getLineStyle()),n.each(function(l){var u=n.getItemModel(l),c=r.getEdgeByIndex(l),f=normalize$1(u.getShallow("symbol",!0)),h=normalize$1(u.getShallow("symbolSize",!0)),v=u.getModel("lineStyle").getLineStyle(),d=n.ensureUniqueItemVisual(l,"style");switch(extend(d,v),d.stroke){case"source":{var p=c.node1.getVisual("style");d.stroke=p&&p.fill;break}case"target":{var p=c.node2.getVisual("style");d.stroke=p&&p.fill;break}}f[0]&&c.setVisual("fromSymbol",f[0]),f[1]&&c.setVisual("toSymbol",f[1]),h[0]&&c.setVisual("fromSymbolSize",h[0]),h[1]&&c.setVisual("toSymbolSize",h[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(a){return a.get("autoCurveness")||null},createCurveness=function(a,t){var r=getAutoCurvenessParams(a),n=20,o=[];if(isNumber(r))n=r;else if(isArray$1(r)){a.__curvenessList=r;return}t>n&&(n=t);var s=n%2?n+2:n+3;o=[];for(var l=0;l<s;l++)o.push((l%2?l+1:l)/10*(l%2?-1:1));a.__curvenessList=o},getKeyOfEdges=function(a,t,r){var n=[a.id,a.dataIndex].join("."),o=[t.id,t.dataIndex].join(".");return[r.uid,n,o].join(KEY_DELIMITER)},getOppositeKey=function(a){var t=a.split(KEY_DELIMITER);return[t[0],t[2],t[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(a,t){var r=getKeyOfEdges(a.node1,a.node2,t);return t.__edgeMap[r]},getTotalLengthBetweenNodes=function(a,t){var r=getEdgeMapLengthWithKey(getKeyOfEdges(a.node1,a.node2,t),t),n=getEdgeMapLengthWithKey(getKeyOfEdges(a.node2,a.node1,t),t);return r+n},getEdgeMapLengthWithKey=function(a,t){var r=t.__edgeMap;return r[a]?r[a].length:0};function initCurvenessList(a){getAutoCurvenessParams(a)&&(a.__curvenessList=[],a.__edgeMap={},createCurveness(a))}function createEdgeMapForCurveness(a,t,r,n){if(getAutoCurvenessParams(r)){var o=getKeyOfEdges(a,t,r),s=r.__edgeMap,l=s[getOppositeKey(o)];s[o]&&!l?s[o].isForward=!0:l&&s[o]&&(l.isForward=!0,s[o].isForward=!1),s[o]=s[o]||[],s[o].push(n)}}function getCurvenessForEdge(a,t,r,n){var o=getAutoCurvenessParams(t),s=isArray$1(o);if(!o)return null;var l=getEdgeFromMap(a,t);if(!l)return null;for(var u=-1,c=0;c<l.length;c++)if(l[c]===r){u=c;break}var f=getTotalLengthBetweenNodes(a,t);createCurveness(t,f),a.lineStyle=a.lineStyle||{};var h=getKeyOfEdges(a.node1,a.node2,t),v=t.__curvenessList,d=s||f%2?0:1;if(l.isForward)return v[d+u];var p=getOppositeKey(h),g=getEdgeMapLengthWithKey(p,t),y=v[u+g+d];return n?s?o&&o[0]===0?(g+d)%2?y:-y:((g%2?0:1)+d)%2?y:-y:(g+d)%2?y:-y:v[u+g+d]}function simpleLayout(a){var t=a.coordinateSystem;if(!(t&&t.type!=="view")){var r=a.getGraph();r.eachNode(function(n){var o=n.getModel();n.setLayout([+o.get("x"),+o.get("y")])}),simpleLayoutEdge(r,a)}}function simpleLayoutEdge(a,t){a.eachEdge(function(r,n){var o=retrieve3(r.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(r,t,n,!0),0),s=clone$3(r.node1.getLayout()),l=clone$3(r.node2.getLayout()),u=[s,l];+o&&u.push([(s[0]+l[0])/2-(s[1]-l[1])*o,(s[1]+l[1])/2-(l[0]-s[0])*o]),r.setLayout(u)})}function graphSimpleLayout(a,t){a.eachSeriesByType("graph",function(r){var n=r.get("layout"),o=r.coordinateSystem;if(o&&o.type!=="view"){var s=r.getData(),l=[];each$f(o.dimensions,function(d){l=l.concat(s.mapDimensionsAll(d))});for(var u=0;u<s.count();u++){for(var c=[],f=!1,h=0;h<l.length;h++){var v=s.get(l[h],u);isNaN(v)||(f=!0),c.push(v)}f?s.setItemLayout(u,o.dataToPoint(c)):s.setItemLayout(u,[NaN,NaN])}simpleLayoutEdge(s.graph,r)}else(!n||n==="none")&&simpleLayout(r)})}function getNodeGlobalScale(a){var t=a.coordinateSystem;if(t.type!=="view")return 1;var r=a.option.nodeScaleRatio,n=t.scaleX,o=t.getZoom(),s=(o-1)*r+1;return s/n}function getSymbolSize(a){var t=a.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(a,t,r,n){var o=a.coordinateSystem;if(!(o&&o.type!=="view")){var s=o.getBoundingRect(),l=a.getData(),u=l.graph,c=s.width/2+s.x,f=s.height/2+s.y,h=Math.min(s.width,s.height)/2,v=l.count();if(l.setLayout({cx:c,cy:f}),!!v){if(r){var d=o.pointToData(n),p=d[0],g=d[1],y=[p-c,g-f];normalize$3(y,y),scale$2(y,y,h),r.setLayout([c+y[0],f+y[1]],!0);var _=a.get(["circular","rotateLabel"]);rotateNodeLabel(r,_,c,f)}_layoutNodesBasedOn[t](a,u,l,h,c,f,v),u.eachEdge(function(S,x){var T=retrieve3(S.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(S,a,x),0),b=clone$3(S.node1.getLayout()),C=clone$3(S.node2.getLayout()),w,M=(b[0]+C[0])/2,P=(b[1]+C[1])/2;+T&&(T*=3,w=[c*T+M*(1-T),f*T+P*(1-T)]),S.setLayout([b,C,w])})}}}var _layoutNodesBasedOn={value:function(a,t,r,n,o,s,l){var u=0,c=r.getSum("value"),f=Math.PI*2/(c||l);t.eachNode(function(h){var v=h.getValue("value"),d=f*(c?v:1)/2;u+=d,h.setLayout([n*Math.cos(u)+o,n*Math.sin(u)+s]),u+=d})},symbolSize:function(a,t,r,n,o,s,l){var u=0;_symbolRadiansHalf.length=l;var c=getNodeGlobalScale(a);t.eachNode(function(v){var d=getSymbolSize(v);isNaN(d)&&(d=2),d<0&&(d=0),d*=c;var p=Math.asin(d/2/n);isNaN(p)&&(p=PI$2/2),_symbolRadiansHalf[v.dataIndex]=p,u+=p*2});var f=(2*PI$2-u)/l/2,h=0;t.eachNode(function(v){var d=f+_symbolRadiansHalf[v.dataIndex];h+=d,(!v.getLayout()||!v.getLayout().fixed)&&v.setLayout([n*Math.cos(h)+o,n*Math.sin(h)+s]),h+=d})}};function rotateNodeLabel(a,t,r,n){var o=a.getGraphicEl();if(o){var s=a.getModel(),l=s.get(["label","rotate"])||0,u=o.getSymbolPath();if(t){var c=a.getLayout(),f=Math.atan2(c[1]-n,c[0]-r);f<0&&(f=Math.PI*2+f);var h=c[0]<r;h&&(f=f-Math.PI);var v=h?"left":"right";u.setTextConfig({rotation:-f,position:v,origin:"center"});var d=u.ensureState("emphasis");extend(d.textConfig||(d.textConfig={}),{position:v})}else u.setTextConfig({rotation:l*=Math.PI/180})}}function graphCircularLayout(a){a.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&circularLayout(t,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(a,t,r){for(var n=a,o=t,s=r.rect,l=s.width,u=s.height,c=[s.x+l/2,s.y+u/2],f=r.gravity==null?.1:r.gravity,h=0;h<n.length;h++){var v=n[h];v.p||(v.p=create$2(l*(Math.random()-.5)+c[0],u*(Math.random()-.5)+c[1])),v.pp=clone$3(v.p),v.edges=null}var d=r.friction==null?.6:r.friction,p=d,g,y;return{warmUp:function(){p=d*.8},setFixed:function(_){n[_].fixed=!0},setUnfixed:function(_){n[_].fixed=!1},beforeStep:function(_){g=_},afterStep:function(_){y=_},step:function(_){g&&g(n,o);for(var S=[],x=n.length,T=0;T<o.length;T++){var b=o[T];if(!b.ignoreForceLayout){var C=b.n1,w=b.n2;sub(S,w.p,C.p);var M=len(S)-b.d,P=w.w/(C.w+w.w);isNaN(P)&&(P=0),normalize$3(S,S),!C.fixed&&scaleAndAdd(C.p,C.p,S,P*M*p),!w.fixed&&scaleAndAdd(w.p,w.p,S,-(1-P)*M*p)}}for(var T=0;T<x;T++){var L=n[T];L.fixed||(sub(S,c,L.p),scaleAndAdd(L.p,L.p,S,f*p))}for(var T=0;T<x;T++)for(var C=n[T],E=T+1;E<x;E++){var w=n[E];sub(S,w.p,C.p);var M=len(S);M===0&&(set$1(S,Math.random()-.5,Math.random()-.5),M=1);var I=(C.rep+w.rep)/M/M;!C.fixed&&scaleAndAdd(C.pp,C.pp,S,I),!w.fixed&&scaleAndAdd(w.pp,w.pp,S,-I)}for(var R=[],T=0;T<x;T++){var L=n[T];L.fixed||(sub(R,L.p,L.pp),scaleAndAdd(L.p,L.p,R,p),copy$1(L.pp,L.p))}p=p*.992;var D=p<.01;y&&y(n,o,D),_&&_(D)}}}function graphForceLayout(a){a.eachSeriesByType("graph",function(t){var r=t.coordinateSystem;if(!(r&&r.type!=="view"))if(t.get("layout")==="force"){var n=t.preservedPoints||{},o=t.getGraph(),s=o.data,l=o.edgeData,u=t.getModel("force"),c=u.get("initLayout");t.preservedPoints?s.each(function(T){var b=s.getId(T);s.setItemLayout(T,n[b]||[NaN,NaN])}):!c||c==="none"?simpleLayout(t):c==="circular"&&circularLayout(t,"value");var f=s.getDataExtent("value"),h=l.getDataExtent("value"),v=u.get("repulsion"),d=u.get("edgeLength"),p=isArray$1(v)?v:[v,v],g=isArray$1(d)?d:[d,d];g=[g[1],g[0]];var y=s.mapArray("value",function(T,b){var C=s.getItemLayout(b),w=linearMap$2(T,f,p);return isNaN(w)&&(w=(p[0]+p[1])/2),{w,rep:w,fixed:s.getItemModel(b).get("fixed"),p:!C||isNaN(C[0])||isNaN(C[1])?null:C}}),_=l.mapArray("value",function(T,b){var C=o.getEdgeByIndex(b),w=linearMap$2(T,h,g);isNaN(w)&&(w=(g[0]+g[1])/2);var M=C.getModel(),P=retrieve3(C.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(C,t,b,!0),0);return{n1:y[C.node1.dataIndex],n2:y[C.node2.dataIndex],d:w,curveness:P,ignoreForceLayout:M.get("ignoreForceLayout")}}),S=r.getBoundingRect(),x=forceLayout(y,_,{rect:S,gravity:u.get("gravity"),friction:u.get("friction")});x.beforeStep(function(T,b){for(var C=0,w=T.length;C<w;C++)T[C].fixed&&copy$1(T[C].p,o.getNodeByIndex(C).getLayout())}),x.afterStep(function(T,b,C){for(var w=0,M=T.length;w<M;w++)T[w].fixed||o.getNodeByIndex(w).setLayout(T[w].p),n[s.getId(w)]=T[w].p;for(var w=0,M=b.length;w<M;w++){var P=b[w],L=o.getEdgeByIndex(w),E=P.n1.p,I=P.n2.p,R=L.getLayout();R=R?R.slice():[],R[0]=R[0]||[],R[1]=R[1]||[],copy$1(R[0],E),copy$1(R[1],I),+P.curveness&&(R[2]=[(E[0]+I[0])/2-(E[1]-I[1])*P.curveness,(E[1]+I[1])/2-(I[0]-E[0])*P.curveness]),L.setLayout(R)}}),t.forceLayout=x,t.preservedPoints=n,x.step()}else t.forceLayout=null})}function getViewRect$1(a,t,r){var n=createBoxLayoutReference(a,t),o=extend(a.getBoxLayoutParams(),{aspect:r}),s=getLayoutRect(o,n.refContainer);return applyPreserveAspect(a,s,r)}function createViewCoordSys(a,t){var r=[];return a.eachSeriesByType("graph",function(n){injectCoordSysByOption({targetModel:n,coordSysType:"view",coordSysProvider:o,isDefaultDataCoordSys:!0});function o(){var s=n.getData(),l=s.mapArray(function(g){var y=s.getItemModel(g);return[+y.get("x"),+y.get("y")]}),u=[],c=[];fromPoints(l,u,c),c[0]-u[0]===0&&(c[0]+=1,u[0]-=1),c[1]-u[1]===0&&(c[1]+=1,u[1]-=1);var f=(c[0]-u[0])/(c[1]-u[1]),h=getViewRect$1(n,t,f);isNaN(f)&&(u=[h.x,h.y],c=[h.x+h.width,h.y+h.height]);var v=c[0]-u[0],d=c[1]-u[1],p=new View(null,{api:t,ecModel:a});return p.zoomLimit=n.get("scaleLimit"),p.setBoundingRect(u[0],u[1],v,d),p.setViewRect(h.x,h.y,h.width,h.height),p.setCenter(n.get("center")),p.setZoom(n.get("zoom")),r.push(p),p}}),r}var straightLineProto=Line$1.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}();(function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t})(StraightLineShape);function isStraightLine(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var ECLinePath=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:tokens.color.neutral99,fill:null}},t.prototype.getDefaultShape=function(){return new StraightLineShape},t.prototype.buildPath=function(r,n){isStraightLine(n)?straightLineProto.buildPath.call(this,r,n):bezierCurveProto.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,r):bezierCurveProto.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,o=isStraightLine(n)?[n.x2-n.x1,n.y2-n.y1]:bezierCurveProto.tangentAt.call(this,r);return normalize$3(o,o)},t}(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(a){return"_"+a+"Type"}function makeSymbolTypeValue(a,t,r){var n=t.getItemVisual(r,a);if(!n||n==="none")return n;var o=t.getItemVisual(r,a+"Size"),s=t.getItemVisual(r,a+"Rotate"),l=t.getItemVisual(r,a+"Offset"),u=t.getItemVisual(r,a+"KeepAspect"),c=normalizeSymbolSize(o),f=normalizeSymbolOffset(l||0,c);return n+c+f+(s||"")+(u||"")}function createSymbol(a,t,r){var n=t.getItemVisual(r,a);if(!(!n||n==="none")){var o=t.getItemVisual(r,a+"Size"),s=t.getItemVisual(r,a+"Rotate"),l=t.getItemVisual(r,a+"Offset"),u=t.getItemVisual(r,a+"KeepAspect"),c=normalizeSymbolSize(o),f=normalizeSymbolOffset(l||0,c),h=createSymbol$1(n,-c[0]/2+f[0],-c[1]/2+f[1],c[0],c[1],null,u);return h.__specifiedRotation=s==null||isNaN(s)?void 0:+s*Math.PI/180||0,h.name=a,h}}function createLine(a){var t=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(t.shape,a),t}function setLinePoints(a,t){a.x1=t[0][0],a.y1=t[0][1],a.x2=t[1][0],a.y2=t[1][1],a.percent=1;var r=t[2];r?(a.cpx1=r[0],a.cpy1=r[1]):(a.cpx1=NaN,a.cpy1=NaN)}var Line=function(a){__extends(t,a);function t(r,n,o){var s=a.call(this)||this;return s._createLine(r,n,o),s}return t.prototype._createLine=function(r,n,o){var s=r.hostModel,l=r.getItemLayout(n),u=r.getItemVisual(n,"z2"),c=createLine(l);c.shape.percent=0,initProps(c,{z2:retrieve2(u,0),shape:{percent:1}},s,n),this.add(c),each$f(SYMBOL_CATEGORIES,function(f){var h=createSymbol(f,r,n);this.add(h),this[makeSymbolTypeKey(f)]=makeSymbolTypeValue(f,r,n)},this),this._updateCommonStl(r,n,o)},t.prototype.updateData=function(r,n,o){var s=r.hostModel,l=this.childOfName("line"),u=r.getItemLayout(n),c={shape:{}};setLinePoints(c.shape,u),updateProps$1(l,c,s,n),each$f(SYMBOL_CATEGORIES,function(f){var h=makeSymbolTypeValue(f,r,n),v=makeSymbolTypeKey(f);if(this[v]!==h){this.remove(this.childOfName(f));var d=createSymbol(f,r,n);this.add(d)}this[v]=h},this),this._updateCommonStl(r,n,o)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,o){var s=r.hostModel,l=this.childOfName("line"),u=o&&o.emphasisLineStyle,c=o&&o.blurLineStyle,f=o&&o.selectLineStyle,h=o&&o.labelStatesModels,v=o&&o.emphasisDisabled,d=o&&o.focus,p=o&&o.blurScope;if(!o||r.hasItemOption){var g=r.getItemModel(n),y=g.getModel("emphasis");u=y.getModel("lineStyle").getLineStyle(),c=g.getModel(["blur","lineStyle"]).getLineStyle(),f=g.getModel(["select","lineStyle"]).getLineStyle(),v=y.get("disabled"),d=y.get("focus"),p=y.get("blurScope"),h=getLabelStatesModels(g)}var _=r.getItemVisual(n,"style"),S=_.stroke;l.useStyle(_),l.style.fill=null,l.style.strokeNoScale=!0,l.ensureState("emphasis").style=u,l.ensureState("blur").style=c,l.ensureState("select").style=f,each$f(SYMBOL_CATEGORIES,function(w){var M=this.childOfName(w);if(M){M.setColor(S),M.style.opacity=_.opacity;for(var P=0;P<SPECIAL_STATES.length;P++){var L=SPECIAL_STATES[P],E=l.getState(L);if(E){var I=E.style||{},R=M.ensureState(L),D=R.style||(R.style={});I.stroke!=null&&(D[M.__isEmptyBrush?"stroke":"fill"]=I.stroke),I.opacity!=null&&(D.opacity=I.opacity)}}M.markRedraw()}},this);var x=s.getRawValue(n);setLabelStyle(this,h,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(w,M){return s.getFormattedLabel(w,M,r.dataType)}},inheritColor:S||tokens.color.neutral99,defaultOpacity:_.opacity,defaultText:(x==null?r.getName(n):isFinite(x)?round$4(x):x)+""});var T=this.getTextContent();if(T){var b=h.normal;T.__align=T.style.align,T.__verticalAlign=T.style.verticalAlign,T.__position=b.get("position")||"middle";var C=b.get("distance");isArray$1(C)||(C=[C,C]),T.__labelDistance=C}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,d,p,v)},t.prototype.highlight=function(){enterEmphasis(this)},t.prototype.downplay=function(){leaveEmphasis(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");setLinePoints(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),o=r.childOfName("toSymbol"),s=r.getTextContent();if(!n&&!o&&(!s||s.ignore))return;for(var l=1,u=this.parent;u;)u.scaleX&&(l/=u.scaleX),u=u.parent;var c=r.childOfName("line");if(!this.__dirty&&!c.__dirty)return;var f=c.shape.percent,h=c.pointAt(0),v=c.pointAt(f),d=sub([],v,h);normalize$3(d,d);function p(E,I){var R=E.__specifiedRotation;if(R==null){var D=c.tangentAt(I);E.attr("rotation",(I===1?-1:1)*Math.PI/2-Math.atan2(D[1],D[0]))}else E.attr("rotation",R)}if(n&&(n.setPosition(h),p(n,0),n.scaleX=n.scaleY=l*f,n.markRedraw()),o&&(o.setPosition(v),p(o,1),o.scaleX=o.scaleY=l*f,o.markRedraw()),s&&!s.ignore){s.x=s.y=0,s.originX=s.originY=0;var g=void 0,y=void 0,_=s.__labelDistance,S=_[0]*l,x=_[1]*l,T=f/2,b=c.tangentAt(T),C=[b[1],-b[0]],w=c.pointAt(T);C[1]>0&&(C[0]=-C[0],C[1]=-C[1]);var M=b[0]<0?-1:1;if(s.__position!=="start"&&s.__position!=="end"){var P=-Math.atan2(b[1],b[0]);v[0]<h[0]&&(P=Math.PI+P),s.rotation=P}var L=void 0;switch(s.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":L=-x,y="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":L=x,y="top";break;default:L=0,y="middle"}switch(s.__position){case"end":s.x=d[0]*S+v[0],s.y=d[1]*x+v[1],g=d[0]>.8?"left":d[0]<-.8?"right":"center",y=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":s.x=-d[0]*S+h[0],s.y=-d[1]*x+h[1],g=d[0]>.8?"right":d[0]<-.8?"left":"center",y=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":s.x=S*M+h[0],s.y=h[1]+L,g=b[0]<0?"right":"left",s.originX=-S*M,s.originY=-L;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":s.x=w[0],s.y=w[1]+L,g="center",s.originY=-L;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":s.x=-S*M+v[0],s.y=v[1]+L,g=b[0]>=0?"right":"left",s.originX=S*M,s.originY=-L;break}s.scaleX=s.scaleY=l,s.setStyle({verticalAlign:s.__verticalAlign||y,align:s.__align||g})}},t}(Group$3),LineDraw=function(){function a(t){this.group=new Group$3,this._LineCtor=t||Line}return a.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,o=n.group,s=n._lineData;n._lineData=t,s||o.removeAll();var l=makeSeriesScope$1(t);t.diff(s).add(function(u){r._doAdd(t,u,l)}).update(function(u,c){r._doUpdate(s,t,c,u,l)}).remove(function(u){o.remove(s.getItemGraphicEl(u))}).execute()},a.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},a.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=makeSeriesScope$1(t),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(u){!u.isGroup&&!isEffectObject(u)&&(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var s=r.getItemLayout(o);if(lineNeedsDraw(s)){var l=new this._LineCtor(r,o,this._seriesScope);l.traverse(n),this.group.add(l),r.setItemGraphicEl(o,l),this._progressiveEls.push(l)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(t){traverseElements(this._progressiveEls||this.group,t)},a.prototype._doAdd=function(t,r,n){var o=t.getItemLayout(r);if(lineNeedsDraw(o)){var s=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,s),this.group.add(s)}},a.prototype._doUpdate=function(t,r,n,o,s){var l=t.getItemGraphicEl(n);if(!lineNeedsDraw(r.getItemLayout(o))){this.group.remove(l);return}l?l.updateData(r,o,s):l=new this._LineCtor(r,o,s),r.setItemGraphicEl(o,l),this.group.add(l)},a}();function isEffectObject(a){return a.animators&&a.animators.length>0}function makeSeriesScope$1(a){var t=a.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:getLabelStatesModels(t)}}function isPointNaN(a){return isNaN(a[0])||isNaN(a[1])}function lineNeedsDraw(a){return a&&!isPointNaN(a[0])&&!isPointNaN(a[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(a,t,r){for(var n=a[0],o=a[1],s=a[2],l=1/0,u,c=r*r,f=.1,h=.1;h<=.9;h+=.1){v1[0]=quadraticAt(n[0],o[0],s[0],h),v1[1]=quadraticAt(n[1],o[1],s[1],h);var v=mathAbs(v2DistSquare(v1,t)-c);v<l&&(l=v,u=h)}for(var d=0;d<32;d++){var p=u+f;v2[0]=quadraticAt(n[0],o[0],s[0],u),v2[1]=quadraticAt(n[1],o[1],s[1],u),v3[0]=quadraticAt(n[0],o[0],s[0],p),v3[1]=quadraticAt(n[1],o[1],s[1],p);var v=v2DistSquare(v2,t)-c;if(mathAbs(v)<.01)break;var g=v2DistSquare(v3,t)-c;f/=2,v<0?g>=0?u=u+f:u=u-f:g>=0?u=u-f:u=u+f}return u}function adjustEdge(a,t){var r=[],n=quadraticSubdivide,o=[[],[],[]],s=[[],[]],l=[];t/=2,a.eachEdge(function(u,c){var f=u.getLayout(),h=u.getVisual("fromSymbol"),v=u.getVisual("toSymbol");f.__original||(f.__original=[clone$3(f[0]),clone$3(f[1])],f[2]&&f.__original.push(clone$3(f[2])));var d=f.__original;if(f[2]!=null){if(copy$1(o[0],d[0]),copy$1(o[1],d[2]),copy$1(o[2],d[1]),h&&h!=="none"){var p=getSymbolSize(u.node1),g=intersectCurveCircle(o,d[0],p*t);n(o[0][0],o[1][0],o[2][0],g,r),o[0][0]=r[3],o[1][0]=r[4],n(o[0][1],o[1][1],o[2][1],g,r),o[0][1]=r[3],o[1][1]=r[4]}if(v&&v!=="none"){var p=getSymbolSize(u.node2),g=intersectCurveCircle(o,d[1],p*t);n(o[0][0],o[1][0],o[2][0],g,r),o[1][0]=r[1],o[2][0]=r[2],n(o[0][1],o[1][1],o[2][1],g,r),o[1][1]=r[1],o[2][1]=r[2]}copy$1(f[0],o[0]),copy$1(f[1],o[2]),copy$1(f[2],o[1])}else{if(copy$1(s[0],d[0]),copy$1(s[1],d[1]),sub(l,s[1],s[0]),normalize$3(l,l),h&&h!=="none"){var p=getSymbolSize(u.node1);scaleAndAdd$1(s[0],s[0],l,p*t)}if(v&&v!=="none"){var p=getSymbolSize(u.node2);scaleAndAdd$1(s[1],s[1],l,-p*t)}copy$1(f[0],s[0]),copy$1(f[1],s[1])}})}var inner$c=makeInner();function getThumbnailBridge(a){if(a)return inner$c(a).bridge}function injectThumbnailBridge(a,t){a&&(inner$c(a).bridge=t)}function isViewCoordSys(a){return a.type==="view"}var GraphView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){var o=new SymbolDraw,s=new LineDraw,l=this.group,u=new Group$3;this._controller=new RoamController(n.getZr()),this._controllerHost={target:u},u.add(o.group),u.add(s.group),l.add(u),this._symbolDraw=o,this._lineDraw=s,this._mainGroup=u,this._firstRender=!0},t.prototype.render=function(r,n,o){var s=this,l=r.coordinateSystem,u=!1;this._model=r,this._api=o,this._active=!0;var c=this._getThumbnailInfo();c&&c.bridge.reset(o);var f=this._symbolDraw,h=this._lineDraw;if(isViewCoordSys(l)){var v={x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY};this._firstRender?this._mainGroup.attr(v):updateProps$1(this._mainGroup,v,r)}adjustEdge(r.getGraph(),getNodeGlobalScale(r));var d=r.getData();f.updateData(d);var p=r.getEdgeData();h.updateData(p),this._updateNodeAndLinkScale(),this._updateController(null,r,o),clearTimeout(this._layoutTimeout);var g=r.forceLayout,y=r.get(["force","layoutAnimation"]);g&&(u=!0,this._startForceLayoutIteration(g,o,y));var _=r.get("layout");d.graph.eachNode(function(b){var C=b.dataIndex,w=b.getGraphicEl(),M=b.getModel();if(w){w.off("drag").off("dragend");var P=M.get("draggable");P&&w.on("drag",function(E){switch(_){case"force":g.warmUp(),!s._layouting&&s._startForceLayoutIteration(g,o,y),g.setFixed(C),d.setItemLayout(C,[w.x,w.y]);break;case"circular":d.setItemLayout(C,[w.x,w.y]),b.setLayout({fixed:!0},!0),circularLayout(r,"symbolSize",b,[E.offsetX,E.offsetY]),s.updateLayout(r);break;case"none":default:d.setItemLayout(C,[w.x,w.y]),simpleLayoutEdge(r.getGraph(),r),s.updateLayout(r);break}}).on("dragend",function(){g&&g.setUnfixed(C)}),w.setDraggable(P,!!M.get("cursor"));var L=M.get(["emphasis","focus"]);L==="adjacency"&&(getECData(w).focus=b.getAdjacentDataIndices())}}),d.graph.eachEdge(function(b){var C=b.getGraphicEl(),w=b.getModel().get(["emphasis","focus"]);C&&w==="adjacency"&&(getECData(C).focus={edge:[b.dataIndex],node:[b.node1.dataIndex,b.node2.dataIndex]})});var S=r.get("layout")==="circular"&&r.get(["circular","rotateLabel"]),x=d.getLayout("cx"),T=d.getLayout("cy");d.graph.eachNode(function(b){rotateNodeLabel(b,S,x,T)}),this._firstRender=!1,u||this._renderThumbnail(r,o,this._symbolDraw,this._lineDraw)},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(r,n,o){var s=this,l=!1;(function u(){r.step(function(c){s.updateLayout(s._model),(c||!l)&&(l=!0,s._renderThumbnail(s._model,n,s._symbolDraw,s._lineDraw)),(s._layouting=!c)&&(o?s._layoutTimeout=setTimeout(u,16):u())})})()},t.prototype._updateController=function(r,n,o){var s=this._controller,l=this._controllerHost,u=n.coordinateSystem;if(!isViewCoordSys(u)){s.disable();return}s.enable(n.get("roam"),{api:o,zInfo:{component:n},triggerInfo:{roamTrigger:n.get("roamTrigger"),isInSelf:function(c,f,h){return u.containPoint([f,h])},isInClip:function(c,f,h){return!r||r.contain(f,h)}}}),l.zoomLimit=n.get("scaleLimit"),l.zoom=u.getZoom(),s.off("pan").off("zoom").on("pan",function(c){o.dispatchAction({seriesId:n.id,type:"graphRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){o.dispatchAction({seriesId:n.id,type:"graphRoam",zoom:c.scale,originX:c.originX,originY:c.originY})})},t.prototype.updateViewOnPan=function(r,n,o){this._active&&(updateViewOnPan(this._controllerHost,o.dx,o.dy),this._updateThumbnailWindow())},t.prototype.updateViewOnZoom=function(r,n,o){this._active&&(updateViewOnZoom(this._controllerHost,o.zoom,o.originX,o.originY),this._updateNodeAndLinkScale(),adjustEdge(r.getGraph(),getNodeGlobalScale(r)),this._lineDraw.updateLayout(),n.updateLabelLayout(),this._updateThumbnailWindow())},t.prototype._updateNodeAndLinkScale=function(){var r=this._model,n=r.getData(),o=getNodeGlobalScale(r);n.eachItemGraphicEl(function(s,l){s&&s.setSymbolScale(o)})},t.prototype.updateLayout=function(r){this._active&&(adjustEdge(r.getGraph(),getNodeGlobalScale(r)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout())},t.prototype.remove=function(){this._active=!1,clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove(),this._controller&&this._controller.disable()},t.prototype._getThumbnailInfo=function(){var r=this._model,n=r.coordinateSystem;if(n.type==="view"){var o=getThumbnailBridge(r);if(o)return{bridge:o,coordSys:n}}},t.prototype._updateThumbnailWindow=function(){var r=this._getThumbnailInfo();r&&r.bridge.updateWindow(r.coordSys.transform,this._api)},t.prototype._renderThumbnail=function(r,n,o,s){var l=this._getThumbnailInfo();if(l){var u=new Group$3,c=o.group.children(),f=s.group.children(),h=new Group$3,v=new Group$3;u.add(v),u.add(h);for(var d=0;d<c.length;d++){var p=c[d],g=p.children()[0],y=p.x,_=p.y,S=clone$4(g.shape),x=extend(S,{width:g.scaleX,height:g.scaleY,x:y-g.scaleX/2,y:_-g.scaleY/2}),T=clone$4(g.style),b=new g.constructor({shape:x,style:T,z2:151});v.add(b)}for(var d=0;d<f.length;d++){var p=f[d],C=p.children()[0],T=clone$4(C.style),x=clone$4(C.shape),w=new ECLinePath({style:T,shape:x,z2:151});h.add(w)}l.bridge.renderContent({api:n,roamType:r.get("roam"),viewportRect:null,group:u,targetTrans:l.coordSys.transform})}},t.type="graph",t}(ChartView);function generateNodeKey(a){return"_EC_"+a}var Graph=function(){function a(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return a.prototype.isDirected=function(){return this._directed},a.prototype.addNode=function(t,r){t=t==null?""+r:""+t;var n=this._nodesMap;if(!n[generateNodeKey(t)]){var o=new GraphNode(t,r);return o.hostGraph=this,this.nodes.push(o),n[generateNodeKey(t)]=o,o}},a.prototype.getNodeByIndex=function(t){var r=this.data.getRawIndex(t);return this.nodes[r]},a.prototype.getNodeById=function(t){return this._nodesMap[generateNodeKey(t)]},a.prototype.addEdge=function(t,r,n){var o=this._nodesMap,s=this._edgesMap;if(isNumber(t)&&(t=this.nodes[t]),isNumber(r)&&(r=this.nodes[r]),t instanceof GraphNode||(t=o[generateNodeKey(t)]),r instanceof GraphNode||(r=o[generateNodeKey(r)]),!(!t||!r)){var l=t.id+"-"+r.id,u=new GraphEdge(t,r,n);return u.hostGraph=this,this._directed&&(t.outEdges.push(u),r.inEdges.push(u)),t.edges.push(u),t!==r&&r.edges.push(u),this.edges.push(u),s[l]=u,u}},a.prototype.getEdgeByIndex=function(t){var r=this.edgeData.getRawIndex(t);return this.edges[r]},a.prototype.getEdge=function(t,r){t instanceof GraphNode&&(t=t.id),r instanceof GraphNode&&(r=r.id);var n=this._edgesMap;return this._directed?n[t+"-"+r]:n[t+"-"+r]||n[r+"-"+t]},a.prototype.eachNode=function(t,r){for(var n=this.nodes,o=n.length,s=0;s<o;s++)n[s].dataIndex>=0&&t.call(r,n[s],s)},a.prototype.eachEdge=function(t,r){for(var n=this.edges,o=n.length,s=0;s<o;s++)n[s].dataIndex>=0&&n[s].node1.dataIndex>=0&&n[s].node2.dataIndex>=0&&t.call(r,n[s],s)},a.prototype.breadthFirstTraverse=function(t,r,n,o){if(r instanceof GraphNode||(r=this._nodesMap[generateNodeKey(r)]),!!r){for(var s=n==="out"?"outEdges":n==="in"?"inEdges":"edges",l=0;l<this.nodes.length;l++)this.nodes[l].__visited=!1;if(!t.call(o,r,null))for(var u=[r];u.length;)for(var c=u.shift(),f=c[s],l=0;l<f.length;l++){var h=f[l],v=h.node1===c?h.node2:h.node1;if(!v.__visited){if(t.call(o,v,c))return;u.push(v),v.__visited=!0}}}},a.prototype.update=function(){for(var t=this.data,r=this.edgeData,n=this.nodes,o=this.edges,s=0,l=n.length;s<l;s++)n[s].dataIndex=-1;for(var s=0,l=t.count();s<l;s++)n[t.getRawIndex(s)].dataIndex=s;r.filterSelf(function(u){var c=o[r.getRawIndex(u)];return c.node1.dataIndex>=0&&c.node2.dataIndex>=0});for(var s=0,l=o.length;s<l;s++)o[s].dataIndex=-1;for(var s=0,l=r.count();s<l;s++)o[r.getRawIndex(s)].dataIndex=s},a.prototype.clone=function(){for(var t=new a(this._directed),r=this.nodes,n=this.edges,o=0;o<r.length;o++)t.addNode(r[o].id,r[o].dataIndex);for(var o=0;o<n.length;o++){var s=n[o];t.addEdge(s.node1.id,s.node2.id,s.dataIndex)}return t},a}(),GraphNode=function(){function a(t,r){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=r??-1}return a.prototype.degree=function(){return this.edges.length},a.prototype.inDegree=function(){return this.inEdges.length},a.prototype.outDegree=function(){return this.outEdges.length},a.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostGraph,n=r.data.getItemModel(this.dataIndex);return n.getModel(t)}},a.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},r=0;r<this.edges.length;r++){var n=this.edges[r];n.dataIndex<0||(t.edge.push(n.dataIndex),t.node.push(n.node1.dataIndex,n.node2.dataIndex))}return t},a.prototype.getTrajectoryDataIndices=function(){for(var t=createHashMap(),r=createHashMap(),n=0,o=this.edges.length;n<o;n++){var s=this.edges[n];if(!(s.dataIndex<0)){t.set(s.dataIndex,!0);for(var l=[s.node1],u=[s.node2],c=0;c<l.length;){var f=l[c];c++,r.set(f.dataIndex,!0);for(var h=f.inEdges,v=0,d=h.length,p=void 0,g=void 0;v<d;v++)p=h[v],g=p.dataIndex,g>=0&&!t.hasKey(g)&&(t.set(g,!0),l.push(p.node1))}for(c=0;c<u.length;){var y=u[c];c++,r.set(y.dataIndex,!0);for(var _=y.outEdges,v=0,S=_.length,x=void 0,T=void 0;v<S;v++)x=_[v],T=x.dataIndex,T>=0&&!t.hasKey(T)&&(t.set(T,!0),u.push(x.node2))}}}return{edge:t.keys(),node:r.keys()}},a}(),GraphEdge=function(){function a(t,r,n){this.dataIndex=-1,this.node1=t,this.node2=r,this.dataIndex=n??-1}return a.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostGraph,n=r.edgeData.getItemModel(this.dataIndex);return n.getModel(t)}},a.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},a.prototype.getTrajectoryDataIndices=function(){var t=createHashMap(),r=createHashMap();t.set(this.dataIndex,!0);for(var n=[this.node1],o=[this.node2],s=0;s<n.length;){var l=n[s];s++,r.set(l.dataIndex,!0);for(var u=l.inEdges,c=0,f=u.length,h=void 0,v=void 0;c<f;c++)h=l.inEdges[c],v=h.dataIndex,v>=0&&!t.hasKey(v)&&(t.set(v,!0),n.push(h.node1))}for(s=0;s<o.length;){var d=o[s];s++,r.set(d.dataIndex,!0);for(var p=d.outEdges,c=0,f=p.length,g=void 0,y=void 0;c<f;c++)g=d.outEdges[c],y=g.dataIndex,y>=0&&!t.hasKey(y)&&(t.set(y,!0),o.push(g.node2))}return{edge:t.keys(),node:r.keys()}},a}();function createGraphDataProxyMixin(a,t){return{getValue:function(r){var n=this[a][t];return n.getStore().get(n.getDimensionIndex(r||"value"),this.dataIndex)},setVisual:function(r,n){this.dataIndex>=0&&this[a][t].setItemVisual(this.dataIndex,r,n)},getVisual:function(r){return this[a][t].getItemVisual(this.dataIndex,r)},setLayout:function(r,n){this.dataIndex>=0&&this[a][t].setItemLayout(this.dataIndex,r,n)},getLayout:function(){return this[a][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[a][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[a][t].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));function createGraphFromNodeEdge(a,t,r,n,o){for(var s=new Graph(n),l=0;l<a.length;l++)s.addNode(retrieve(a[l].id,a[l].name,l),l);for(var u=[],c=[],f=0,l=0;l<t.length;l++){var h=t[l],v=h.source,d=h.target;s.addEdge(v,d,f)&&(c.push(h),u.push(retrieve(convertOptionIdName(h.id,null),v+" > "+d)),f++)}var p=r.get("coordinateSystem"),g;if(p==="cartesian2d"||p==="polar"||p==="matrix")g=createSeriesData(a,r);else{var y=CoordinateSystemManager.get(p),_=y?y.dimensions||[]:[];indexOf(_,"value")<0&&_.concat(["value"]);var S=prepareSeriesDataSchema(a,{coordDimensions:_,encodeDefine:r.getEncode()}).dimensions;g=new SeriesData(S,r),g.initData(a)}var x=new SeriesData(["value"],r);return x.initData(c,u),o&&o(g,x),linkSeriesData({mainData:g,struct:s,structAttr:"graph",datas:{node:g,edge:x},datasAttr:{node:"data",edge:"edgeData"}}),s.update(),s}var GraphSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.init=function(r){a.prototype.init.apply(this,arguments);var n=this;function o(){return n._categoriesData}this.legendVisualProvider=new LegendVisualProvider(o,o),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},t.prototype.mergeOption=function(r){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(r){a.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(r,"edgeLabel",["show"])},t.prototype.getInitialData=function(r,n){var o=r.edges||r.links||[],s=r.data||r.nodes||[],l=this;if(s&&o){initCurvenessList(this);var u=createGraphFromNodeEdge(s,o,this,!0,c);return each$f(u.edges,function(f){createEdgeMapForCurveness(f.node1,f.node2,this,f.dataIndex)},this),u.data}function c(f,h){f.wrapMethod("getItemModel",function(g){var y=l._categoriesModels,_=g.getShallow("category"),S=y[_];return S&&(S.parentModel=g.parentModel,g.parentModel=S),g});var v=Model.prototype.getModel;function d(g,y){var _=v.call(this,g,y);return _.resolveParentPath=p,_}h.wrapMethod("getItemModel",function(g){return g.resolveParentPath=p,g.getModel=d,g});function p(g){if(g&&(g[0]==="label"||g[1]==="label")){var y=g.slice();return g[0]==="label"?y[0]="edgeLabel":g[1]==="label"&&(y[1]="edgeLabel"),y}return g}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(r,n,o){if(o==="edge"){var s=this.getData(),l=this.getDataParams(r,o),u=s.graph.getEdgeByIndex(r),c=s.getName(u.node1.dataIndex),f=s.getName(u.node2.dataIndex),h=[];return c!=null&&h.push(c),f!=null&&h.push(f),createTooltipMarkup("nameValue",{name:h.join(" > "),value:l.value,noValue:l.value==null})}var v=defaultSeriesFormatTooltip({series:this,dataIndex:r,multipleSeries:n});return v},t.prototype._updateCategoriesData=function(){var r=map$1(this.option.categories||[],function(o){return o.value!=null?o:extend({value:0},o)}),n=new SeriesData(["value"],this);n.initData(r),this._categoriesData=n,this._categoriesModels=n.mapArray(function(o){return n.getItemModel(o)})},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.isAnimationEnabled=function(){return a.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:tokens.color.neutral50,width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:tokens.color.primary}}},t}(SeriesModel);function install$I(a){a.registerChartView(GraphView),a.registerSeriesModel(GraphSeriesModel),a.registerProcessor(categoryFilter),a.registerVisual(categoryVisual),a.registerVisual(graphEdgeVisual),a.registerLayout(graphSimpleLayout),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),a.registerLayout(graphForceLayout),a.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),a.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),a.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),a.registerAction({type:"graphRoam",event:"graphRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",query:t},function(o){var s=n.getViewOfSeriesModel(o);s&&(t.dx!=null&&t.dy!=null&&s.updateViewOnPan(o,n,t),t.zoom!=null&&t.originX!=null&&t.originY!=null&&s.updateViewOnZoom(o,n,t));var l=o.coordinateSystem,u=updateCenterAndZoomInAction(l,t,o.get("scaleLimit"));o.setCenter&&o.setCenter(u.center),o.setZoom&&o.setZoom(u.zoom)})})}var ChordPiece=function(a){__extends(t,a);function t(r,n,o){var s=a.call(this)||this;getECData(s).dataType="node",s.z2=2;var l=new ZRText;return s.setTextContent(l),s.updateData(r,n,o,!0),s}return t.prototype.updateData=function(r,n,o,s){var l=this,u=r.graph.getNodeByIndex(n),c=r.hostModel,f=u.getModel(),h=f.getModel("emphasis"),v=r.getItemLayout(n),d=extend(getSectorCornerRadius(f.getModel("itemStyle"),v,!0),v),p=this;if(isNaN(d.startAngle)){p.setShape(d);return}s?p.setShape(d):updateProps$1(p,{shape:d},c,n);var g=extend(getSectorCornerRadius(f.getModel("itemStyle"),v,!0),v);l.setShape(g),l.useStyle(r.getItemVisual(n,"style")),setStatesStylesFromModel(l,f),this._updateLabel(c,f,u),r.setItemGraphicEl(n,p),setStatesStylesFromModel(p,f,"itemStyle");var y=h.get("focus");toggleHoverEmphasis(this,y==="adjacency"?u.getAdjacentDataIndices():y,h.get("blurScope"),h.get("disabled"))},t.prototype._updateLabel=function(r,n,o){var s=this.getTextContent(),l=o.getLayout(),u=(l.startAngle+l.endAngle)/2,c=Math.cos(u),f=Math.sin(u),h=n.getModel("label");s.ignore=!h.get("show");var v=getLabelStatesModels(n),d=o.getVisual("style");setLabelStyle(s,v,{labelFetcher:{getFormattedLabel:function(x,T,b,C,w,M){return r.getFormattedLabel(x,T,"node",C,retrieve3(w,v.normal&&v.normal.get("formatter"),n.get("name")),M)}},labelDataIndex:o.dataIndex,defaultText:o.dataIndex+"",inheritColor:d.fill,defaultOpacity:d.opacity,defaultOutsidePosition:"startArc"});var p=h.get("position")||"outside",g=h.get("distance")||0,y;p==="outside"?y=l.r+g:y=(l.r+l.r0)/2,this.textConfig={inside:p!=="outside"};var _=p!=="outside"?h.get("align")||"center":c>0?"left":"right",S=p!=="outside"?h.get("verticalAlign")||"middle":f>0?"top":"bottom";s.attr({x:c*y+l.cx,y:f*y+l.cy,rotation:0,style:{align:_,verticalAlign:S}})},t}(Sector),ChordEdge=function(a){__extends(t,a);function t(r,n,o,s){var l=a.call(this)||this;return getECData(l).dataType="edge",l.updateData(r,n,o,s,!0),l}return t.prototype.buildPath=function(r,n){r.moveTo(n.s1[0],n.s1[1]);var o=.7,s=n.clockwise;r.arc(n.cx,n.cy,n.r,n.sStartAngle,n.sEndAngle,!s),r.bezierCurveTo((n.cx-n.s2[0])*o+n.s2[0],(n.cy-n.s2[1])*o+n.s2[1],(n.cx-n.t1[0])*o+n.t1[0],(n.cy-n.t1[1])*o+n.t1[1],n.t1[0],n.t1[1]),r.arc(n.cx,n.cy,n.r,n.tStartAngle,n.tEndAngle,!s),r.bezierCurveTo((n.cx-n.t2[0])*o+n.t2[0],(n.cy-n.t2[1])*o+n.t2[1],(n.cx-n.s1[0])*o+n.s1[0],(n.cy-n.s1[1])*o+n.s1[1],n.s1[0],n.s1[1]),r.closePath()},t.prototype.updateData=function(r,n,o,s,l){var u=r.hostModel,c=n.graph.getEdgeByIndex(o),f=c.getLayout(),h=c.node1.getModel(),v=n.getItemModel(c.dataIndex),d=v.getModel("lineStyle"),p=v.getModel("emphasis"),g=p.get("focus"),y=extend(getSectorCornerRadius(h.getModel("itemStyle"),f,!0),f),_=this;if(isNaN(y.sStartAngle)||isNaN(y.tStartAngle)){_.setShape(y);return}l?(_.setShape(y),applyEdgeFill(_,c,r,d)):(saveOldStyle(_),applyEdgeFill(_,c,r,d),updateProps$1(_,{shape:y},u,o)),toggleHoverEmphasis(this,g==="adjacency"?c.getAdjacentDataIndices():g,p.get("blurScope"),p.get("disabled")),setStatesStylesFromModel(_,v,"lineStyle"),n.setItemGraphicEl(c.dataIndex,_)},t}(Path);function applyEdgeFill(a,t,r,n){var o=t.node1,s=t.node2,l=a.style;a.setStyle(n.getLineStyle());var u=n.get("color");switch(u){case"source":l.fill=r.getItemVisual(o.dataIndex,"style").fill,l.decal=o.getVisual("style").decal;break;case"target":l.fill=r.getItemVisual(s.dataIndex,"style").fill,l.decal=s.getVisual("style").decal;break;case"gradient":var c=r.getItemVisual(o.dataIndex,"style").fill,f=r.getItemVisual(s.dataIndex,"style").fill;if(isString(c)&&isString(f)){var h=a.shape,v=(h.s1[0]+h.s2[0])/2,d=(h.s1[1]+h.s2[1])/2,p=(h.t1[0]+h.t2[0])/2,g=(h.t1[1]+h.t2[1])/2;l.fill=new LinearGradient(v,d,p,g,[{offset:0,color:c},{offset:1,color:f}],!0)}break}}var RADIAN$2=Math.PI/180,ChordView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){},t.prototype.render=function(r,n,o){var s=r.getData(),l=this._data,u=this.group,c=-r.get("startAngle")*RADIAN$2;if(s.diff(l).add(function(h){var v=s.getItemLayout(h);if(v){var d=new ChordPiece(s,h,c);getECData(d).dataIndex=h,u.add(d)}}).update(function(h,v){var d=l.getItemGraphicEl(v),p=s.getItemLayout(h);if(!p){d&&removeElementWithFadeOut(d,r,v);return}d?d.updateData(s,h,c):d=new ChordPiece(s,h,c),u.add(d)}).remove(function(h){var v=l.getItemGraphicEl(h);v&&removeElementWithFadeOut(v,r,h)}).execute(),!l){var f=r.get("center");this.group.scaleX=.01,this.group.scaleY=.01,this.group.originX=parsePercent(f[0],o.getWidth()),this.group.originY=parsePercent(f[1],o.getHeight()),initProps(this.group,{scaleX:1,scaleY:1},r)}this._data=s,this.renderEdges(r,c)},t.prototype.renderEdges=function(r,n){var o=r.getData(),s=r.getEdgeData(),l=this._edgeData,u=this.group;s.diff(l).add(function(c){var f=new ChordEdge(o,s,c,n);getECData(f).dataIndex=c,u.add(f)}).update(function(c,f){var h=l.getItemGraphicEl(f);h.updateData(o,s,c,n),u.add(h)}).remove(function(c){var f=l.getItemGraphicEl(c);f&&removeElementWithFadeOut(f,r,c)}).execute(),this._edgeData=s},t.prototype.dispose=function(){},t.type="chord",t}(ChartView),ChordSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.fillDataTextStyle(r.edges||r.links),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},t.prototype.mergeOption=function(r){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(r.edges||r.links)},t.prototype.getInitialData=function(r,n){var o=r.edges||r.links||[],s=r.data||r.nodes||[];if(s&&o){var l=createGraphFromNodeEdge(s,o,this,!0,u);return l.data}function u(c,f){var h=Model.prototype.getModel;function v(p,g){var y=h.call(this,p,g);return y.resolveParentPath=d,y}f.wrapMethod("getItemModel",function(p){return p.resolveParentPath=d,p.getModel=v,p});function d(p){if(p&&(p[0]==="label"||p[1]==="label")){var g=p.slice();return p[0]==="label"?g[0]="edgeLabel":p[1]==="label"&&(g[1]="edgeLabel"),g}return p}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(r,n,o){var s=this.getDataParams(r,o);if(o==="edge"){var l=this.getData(),u=l.graph.getEdgeByIndex(r),c=l.getName(u.node1.dataIndex),f=l.getName(u.node2.dataIndex),h=[];return c!=null&&h.push(c),f!=null&&h.push(f),createTooltipMarkup("nameValue",{name:h.join(" > "),value:s.value,noValue:s.value==null})}return createTooltipMarkup("nameValue",{name:s.name,value:s.value,noValue:s.value==null})},t.prototype.getDataParams=function(r,n){var o=a.prototype.getDataParams.call(this,r,n);if(n==="node"){var s=this.getData(),l=this.getGraph().getNodeByIndex(r);if(o.name==null&&(o.name=s.getName(r)),o.value==null){var u=l.getLayout().value;o.value=u}}return o},t.type="series.chord",t.defaultOption={z:2,coordinateSystem:"none",legendHoverLink:!0,colorBy:"data",left:0,top:0,right:0,bottom:0,width:null,height:null,center:["50%","50%"],radius:["70%","80%"],clockwise:!0,startAngle:90,endAngle:"auto",minAngle:0,padAngle:3,itemStyle:{borderRadius:[0,0,5,5]},lineStyle:{width:0,color:"source",opacity:.2},label:{show:!0,position:"outside",distance:5},emphasis:{focus:"adjacency",lineStyle:{opacity:.5}}},t}(SeriesModel),RADIAN$1=Math.PI/180;function chordCircularLayout(a,t){a.eachSeriesByType("chord",function(r){chordLayout(r,t)})}function chordLayout(a,t){var r=a.getData(),n=r.graph,o=a.getEdgeData(),s=o.count();if(s){var l=getCircleLayout(a,t),u=l.cx,c=l.cy,f=l.r,h=l.r0,v=Math.max((a.get("padAngle")||0)*RADIAN$1,0),d=Math.max((a.get("minAngle")||0)*RADIAN$1,0),p=-a.get("startAngle")*RADIAN$1,g=p+Math.PI*2,y=a.get("clockwise"),_=y?1:-1,S=[p,g];normalizeArcAngles(S,!y);var x=S[0],T=S[1],b=T-x,C=r.getSum("value")===0&&o.getSum("value")===0,w=[],M=0;n.eachEdge(function(B){var F=C?1:B.getValue("value");C&&(F>0||d)&&(M+=2);var G=B.node1.dataIndex,z=B.node2.dataIndex;w[G]=(w[G]||0)+F,w[z]=(w[z]||0)+F});var P=0;if(n.eachNode(function(B){var F=B.getValue("value");isNaN(F)||(w[B.dataIndex]=Math.max(F,w[B.dataIndex]||0)),!C&&(w[B.dataIndex]>0||d)&&M++,P+=w[B.dataIndex]||0}),!(M===0||P===0)){v*M>=Math.abs(b)&&(v=Math.max(0,(Math.abs(b)-d*M)/M)),(v+d)*M>=Math.abs(b)&&(d=(Math.abs(b)-v*M)/M);var L=(b-v*M*_)/P,E=0,I=0,R=0;n.eachNode(function(B){var F=w[B.dataIndex]||0,G=L*(P?F:1)*_;Math.abs(G)<d?E+=d-Math.abs(G):(I+=Math.abs(G)-d,R+=Math.abs(G)),B.setLayout({angle:G,value:F})});var D=!1;if(E>I){var O=E/I;n.eachNode(function(B){var F=B.getLayout().angle;Math.abs(F)>=d?B.setLayout({angle:F*O,ratio:O},!0):B.setLayout({angle:d,ratio:d===0?1:F/d},!0)})}else n.eachNode(function(B){if(!D){var F=B.getLayout().angle,G=Math.min(F/R,1),z=G*E;F-z<d&&(D=!0)}});var $=E;n.eachNode(function(B){if(!($<=0)){var F=B.getLayout().angle;if(F>d&&d>0){var G=D?1:Math.min(F/R,1),z=F-d,H=Math.min(z,Math.min($,E*G));$-=H,B.setLayout({angle:F-H,ratio:(F-H)/F},!0)}else d>0&&B.setLayout({angle:d,ratio:F===0?1:d/F},!0)}});var N=x,V=[];n.eachNode(function(B){var F=Math.max(B.getLayout().angle,d);B.setLayout({cx:u,cy:c,r0:h,r:f,startAngle:N,endAngle:N+F*_,clockwise:y},!0),V[B.dataIndex]=N,N+=(F+v)*_}),n.eachEdge(function(B){var F=C?1:B.getValue("value"),G=L*(P?F:1)*_,z=B.node1.dataIndex,H=V[z]||0,U=Math.abs((B.node1.getLayout().ratio||1)*G),Y=H+U*_,Z=[u+h*Math.cos(H),c+h*Math.sin(H)],J=[u+h*Math.cos(Y),c+h*Math.sin(Y)],ee=B.node2.dataIndex,K=V[ee]||0,X=Math.abs((B.node2.getLayout().ratio||1)*G),q=K+X*_,W=[u+h*Math.cos(K),c+h*Math.sin(K)],j=[u+h*Math.cos(q),c+h*Math.sin(q)];B.setLayout({s1:Z,s2:J,sStartAngle:H,sEndAngle:Y,t1:W,t2:j,tStartAngle:K,tEndAngle:q,cx:u,cy:c,r:h,value:F,clockwise:y}),V[z]=Y,V[ee]=q})}}}function install$H(a){a.registerChartView(ChordView),a.registerSeriesModel(ChordSeriesModel),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,chordCircularLayout),a.registerProcessor(dataFilter$1("chord"))}var PointerShape=function(){function a(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return a}(),PointerPath=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;return n.type="pointer",n}return t.prototype.getDefaultShape=function(){return new PointerShape},t.prototype.buildPath=function(r,n){var o=Math.cos,s=Math.sin,l=n.r,u=n.width,c=n.angle,f=n.x-o(c)*u*(u>=l/3?1:2),h=n.y-s(c)*u*(u>=l/3?1:2);c=n.angle-Math.PI/2,r.moveTo(f,h),r.lineTo(n.x+o(c)*u,n.y+s(c)*u),r.lineTo(n.x+o(n.angle)*l,n.y+s(n.angle)*l),r.lineTo(n.x-o(c)*u,n.y-s(c)*u),r.lineTo(f,h)},t}(Path);function parsePosition(a,t){var r=a.get("center"),n=t.getWidth(),o=t.getHeight(),s=Math.min(n,o),l=parsePercent(r[0],t.getWidth()),u=parsePercent(r[1],t.getHeight()),c=parsePercent(a.get("radius"),s/2);return{cx:l,cy:u,r:c}}function formatLabel(a,t){var r=a==null?"":a+"";return t&&(isString(t)?r=t.replace("{value}",r):isFunction(t)&&(r=t(a))),r}var GaugeView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){this.group.removeAll();var s=r.get(["axisLine","lineStyle","color"]),l=parsePosition(r,o);this._renderMain(r,n,o,s,l),this._data=r.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(r,n,o,s,l){var u=this.group,c=r.get("clockwise"),f=-r.get("startAngle")/180*Math.PI,h=-r.get("endAngle")/180*Math.PI,v=r.getModel("axisLine"),d=v.get("roundCap"),p=d?SausagePath:Sector,g=v.get("show"),y=v.getModel("lineStyle"),_=y.get("width"),S=[f,h];normalizeArcAngles(S,!c),f=S[0],h=S[1];for(var x=h-f,T=f,b=[],C=0;g&&C<s.length;C++){var w=Math.min(Math.max(s[C][0],0),1);h=f+x*w;var M=new p({shape:{startAngle:T,endAngle:h,cx:l.cx,cy:l.cy,clockwise:c,r0:l.r-_,r:l.r},silent:!0});M.setStyle({fill:s[C][1]}),M.setStyle(y.getLineStyle(["color","width"])),b.push(M),T=h}b.reverse(),each$f(b,function(L){return u.add(L)});var P=function(L){if(L<=0)return s[0][1];var E;for(E=0;E<s.length;E++)if(s[E][0]>=L&&(E===0?0:s[E-1][0])<L)return s[E][1];return s[E-1][1]};this._renderTicks(r,n,o,P,l,f,h,c,_),this._renderTitleAndDetail(r,n,o,P,l),this._renderAnchor(r,l),this._renderPointer(r,n,o,P,l,f,h,c,_)},t.prototype._renderTicks=function(r,n,o,s,l,u,c,f,h){for(var v=this.group,d=l.cx,p=l.cy,g=l.r,y=+r.get("min"),_=+r.get("max"),S=r.getModel("splitLine"),x=r.getModel("axisTick"),T=r.getModel("axisLabel"),b=r.get("splitNumber"),C=x.get("splitNumber"),w=parsePercent(S.get("length"),g),M=parsePercent(x.get("length"),g),P=u,L=(c-u)/b,E=L/C,I=S.getModel("lineStyle").getLineStyle(),R=x.getModel("lineStyle").getLineStyle(),D=S.get("distance"),O,$,N=0;N<=b;N++){if(O=Math.cos(P),$=Math.sin(P),S.get("show")){var V=D?D+h:h,B=new Line$1({shape:{x1:O*(g-V)+d,y1:$*(g-V)+p,x2:O*(g-w-V)+d,y2:$*(g-w-V)+p},style:I,silent:!0});I.stroke==="auto"&&B.setStyle({stroke:s(N/b)}),v.add(B)}if(T.get("show")){var V=T.get("distance")+D,F=formatLabel(round$4(N/b*(_-y)+y),T.get("formatter")),G=s(N/b),z=O*(g-w-V)+d,H=$*(g-w-V)+p,U=T.get("rotate"),Y=0;U==="radial"?(Y=-P+2*Math.PI,Y>Math.PI/2&&(Y+=Math.PI)):U==="tangential"?Y=-P-Math.PI/2:isNumber(U)&&(Y=U*Math.PI/180),Y===0?v.add(new ZRText({style:createTextStyle(T,{text:F,x:z,y:H,verticalAlign:$<-.8?"top":$>.8?"bottom":"middle",align:O<-.4?"left":O>.4?"right":"center"},{inheritColor:G}),silent:!0})):v.add(new ZRText({style:createTextStyle(T,{text:F,x:z,y:H,verticalAlign:"middle",align:"center"},{inheritColor:G}),silent:!0,originX:z,originY:H,rotation:Y}))}if(x.get("show")&&N!==b){var V=x.get("distance");V=V?V+h:h;for(var Z=0;Z<=C;Z++){O=Math.cos(P),$=Math.sin(P);var J=new Line$1({shape:{x1:O*(g-V)+d,y1:$*(g-V)+p,x2:O*(g-M-V)+d,y2:$*(g-M-V)+p},silent:!0,style:R});R.stroke==="auto"&&J.setStyle({stroke:s((N+Z/C)/b)}),v.add(J),P+=E}P-=E}else P+=L}},t.prototype._renderPointer=function(r,n,o,s,l,u,c,f,h){var v=this.group,d=this._data,p=this._progressEls,g=[],y=r.get(["pointer","show"]),_=r.getModel("progress"),S=_.get("show"),x=r.getData(),T=x.mapDimension("value"),b=+r.get("min"),C=+r.get("max"),w=[b,C],M=[u,c];function P(E,I){var R=x.getItemModel(E),D=R.getModel("pointer"),O=parsePercent(D.get("width"),l.r),$=parsePercent(D.get("length"),l.r),N=r.get(["pointer","icon"]),V=D.get("offsetCenter"),B=parsePercent(V[0],l.r),F=parsePercent(V[1],l.r),G=D.get("keepAspect"),z;return N?z=createSymbol$1(N,B-O/2,F-$,O,$,null,G):z=new PointerPath({shape:{angle:-Math.PI/2,width:O,r:$,x:B,y:F}}),z.rotation=-(I+Math.PI/2),z.x=l.cx,z.y=l.cy,z}function L(E,I){var R=_.get("roundCap"),D=R?SausagePath:Sector,O=_.get("overlap"),$=O?_.get("width"):h/x.count(),N=O?l.r-$:l.r-(E+1)*$,V=O?l.r:l.r-E*$,B=new D({shape:{startAngle:u,endAngle:I,cx:l.cx,cy:l.cy,clockwise:f,r0:N,r:V}});return O&&(B.z2=linearMap$2(x.get(T,E),[b,C],[100,0],!0)),B}(S||y)&&(x.diff(d).add(function(E){var I=x.get(T,E);if(y){var R=P(E,u);initProps(R,{rotation:-((isNaN(+I)?M[0]:linearMap$2(I,w,M,!0))+Math.PI/2)},r),v.add(R),x.setItemGraphicEl(E,R)}if(S){var D=L(E,u),O=_.get("clip");initProps(D,{shape:{endAngle:linearMap$2(I,w,M,O)}},r),v.add(D),setCommonECData(r.seriesIndex,x.dataType,E,D),g[E]=D}}).update(function(E,I){var R=x.get(T,E);if(y){var D=d.getItemGraphicEl(I),O=D?D.rotation:u,$=P(E,O);$.rotation=O,updateProps$1($,{rotation:-((isNaN(+R)?M[0]:linearMap$2(R,w,M,!0))+Math.PI/2)},r),v.add($),x.setItemGraphicEl(E,$)}if(S){var N=p[I],V=N?N.shape.endAngle:u,B=L(E,V),F=_.get("clip");updateProps$1(B,{shape:{endAngle:linearMap$2(R,w,M,F)}},r),v.add(B),setCommonECData(r.seriesIndex,x.dataType,E,B),g[E]=B}}).execute(),x.each(function(E){var I=x.getItemModel(E),R=I.getModel("emphasis"),D=R.get("focus"),O=R.get("blurScope"),$=R.get("disabled");if(y){var N=x.getItemGraphicEl(E),V=x.getItemVisual(E,"style"),B=V.fill;if(N instanceof ZRImage){var F=N.style;N.useStyle(extend({image:F.image,x:F.x,y:F.y,width:F.width,height:F.height},V))}else N.useStyle(V),N.type!=="pointer"&&N.setColor(B);N.setStyle(I.getModel(["pointer","itemStyle"]).getItemStyle()),N.style.fill==="auto"&&N.setStyle("fill",s(linearMap$2(x.get(T,E),w,[0,1],!0))),N.z2EmphasisLift=0,setStatesStylesFromModel(N,I),toggleHoverEmphasis(N,D,O,$)}if(S){var G=g[E];G.useStyle(x.getItemVisual(E,"style")),G.setStyle(I.getModel(["progress","itemStyle"]).getItemStyle()),G.z2EmphasisLift=0,setStatesStylesFromModel(G,I),toggleHoverEmphasis(G,D,O,$)}}),this._progressEls=g)},t.prototype._renderAnchor=function(r,n){var o=r.getModel("anchor"),s=o.get("show");if(s){var l=o.get("size"),u=o.get("icon"),c=o.get("offsetCenter"),f=o.get("keepAspect"),h=createSymbol$1(u,n.cx-l/2+parsePercent(c[0],n.r),n.cy-l/2+parsePercent(c[1],n.r),l,l,null,f);h.z2=o.get("showAbove")?1:0,h.setStyle(o.getModel("itemStyle").getItemStyle()),this.group.add(h)}},t.prototype._renderTitleAndDetail=function(r,n,o,s,l){var u=this,c=r.getData(),f=c.mapDimension("value"),h=+r.get("min"),v=+r.get("max"),d=new Group$3,p=[],g=[],y=r.isAnimationEnabled(),_=r.get(["pointer","showAbove"]);c.diff(this._data).add(function(S){p[S]=new ZRText({silent:!0}),g[S]=new ZRText({silent:!0})}).update(function(S,x){p[S]=u._titleEls[x],g[S]=u._detailEls[x]}).execute(),c.each(function(S){var x=c.getItemModel(S),T=c.get(f,S),b=new Group$3,C=s(linearMap$2(T,[h,v],[0,1],!0)),w=x.getModel("title");if(w.get("show")){var M=w.get("offsetCenter"),P=l.cx+parsePercent(M[0],l.r),L=l.cy+parsePercent(M[1],l.r),E=p[S];E.attr({z2:_?0:2,style:createTextStyle(w,{x:P,y:L,text:c.getName(S),align:"center",verticalAlign:"middle"},{inheritColor:C})}),b.add(E)}var I=x.getModel("detail");if(I.get("show")){var R=I.get("offsetCenter"),D=l.cx+parsePercent(R[0],l.r),O=l.cy+parsePercent(R[1],l.r),$=parsePercent(I.get("width"),l.r),N=parsePercent(I.get("height"),l.r),V=r.get(["progress","show"])?c.getItemVisual(S,"style").fill:C,E=g[S],B=I.get("formatter");E.attr({z2:_?0:2,style:createTextStyle(I,{x:D,y:O,text:formatLabel(T,B),width:isNaN($)?null:$,height:isNaN(N)?null:N,align:"center",verticalAlign:"middle"},{inheritColor:V})}),setLabelValueAnimation(E,{normal:I},T,function(G){return formatLabel(G,B)}),y&&animateLabelValue(E,S,c,r,{getFormattedLabel:function(G,z,H,U,Y,Z){return formatLabel(Z?Z.interpolatedValue:T,B)}}),b.add(E)}d.add(b)}),this.group.add(d),this._titleEls=p,this._detailEls=g},t.type="gauge",t}(ChartView),GaugeSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="itemStyle",r}return t.prototype.getInitialData=function(r,n){return createSeriesDataSimply(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,tokens.color.neutral10]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:tokens.color.axisTick,width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:tokens.color.axisTickMinor,width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:tokens.color.axisLabel,fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:tokens.color.neutral00,borderWidth:0,borderColor:tokens.color.theme[0]}},title:{show:!0,offsetCenter:[0,"20%"],color:tokens.color.secondary,fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:tokens.color.transparent,borderWidth:0,borderColor:tokens.color.neutral40,width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:tokens.color.primary,fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(SeriesModel);function install$G(a){a.registerChartView(GaugeView),a.registerSeriesModel(GaugeSeriesModel)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(a){__extends(t,a);function t(r,n){var o=a.call(this)||this,s=o,l=new Polyline$1,u=new ZRText;return s.setTextContent(u),o.setTextGuideLine(l),o.updateData(r,n,!0),o}return t.prototype.updateData=function(r,n,o){var s=this,l=r.hostModel,u=r.getItemModel(n),c=r.getItemLayout(n),f=u.getModel("emphasis"),h=u.get(opacityAccessPath$1);h=h??1,o||saveOldStyle(s),s.useStyle(r.getItemVisual(n,"style")),s.style.lineJoin="round",o?(s.setShape({points:c.points}),s.style.opacity=0,initProps(s,{style:{opacity:h}},l,n)):updateProps$1(s,{style:{opacity:h},shape:{points:c.points}},l,n),setStatesStylesFromModel(s,u),this._updateLabel(r,n),toggleHoverEmphasis(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},t.prototype._updateLabel=function(r,n){var o=this,s=this.getTextGuideLine(),l=o.getTextContent(),u=r.hostModel,c=r.getItemModel(n),f=r.getItemLayout(n),h=f.label,v=r.getItemVisual(n,"style"),d=v.fill;setLabelStyle(l,getLabelStatesModels(c),{labelFetcher:r.hostModel,labelDataIndex:n,defaultOpacity:v.opacity,defaultText:r.getName(n)},{normal:{align:h.textAlign,verticalAlign:h.verticalAlign}});var p=c.getModel("label"),g=p.get("color"),y=g==="inherit"?d:null;o.setTextConfig({local:!0,inside:!!h.inside,insideStroke:y,outsideFill:y});var _=h.linePoints;s.setShape({points:_}),o.textGuideLineConfig={anchor:_?new Point(_[0][0],_[0][1]):null},updateProps$1(l,{style:{x:h.x,y:h.y}},u,n),l.attr({rotation:h.rotation,originX:h.x,originY:h.y,z2:10}),setLabelLineStyle(o,getLabelLineStatesModels(c),{stroke:d})},t}(Polygon),FunnelView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.ignoreLabelLineUpdate=!0,r}return t.prototype.render=function(r,n,o){var s=r.getData(),l=this._data,u=this.group;s.diff(l).add(function(c){var f=new FunnelPiece(s,c);s.setItemGraphicEl(c,f),u.add(f)}).update(function(c,f){var h=l.getItemGraphicEl(f);h.updateData(s,c),u.add(h),s.setItemGraphicEl(c,h)}).remove(function(c){var f=l.getItemGraphicEl(c);removeElementWithFadeOut(f,r,c)}).execute(),this._data=s},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(ChartView),FunnelSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(r)},t.prototype.getInitialData=function(r,n){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},t.prototype._defaultLabelLine=function(r){defaultEmphasis(r,"labelLine",["show"]);var n=r.labelLine,o=r.emphasis.labelLine;n.show=n.show&&r.label.show,o.show=o.show&&r.emphasis.label.show},t.prototype.getDataParams=function(r){var n=this.getData(),o=a.prototype.getDataParams.call(this,r),s=n.mapDimension("value"),l=n.getSum(s);return o.percent=l?+(n.get(s,r)/l*100).toFixed(2):0,o.$vars.push("percent"),o},t.type="series.funnel",t.defaultOption={coordinateSystemUsage:"box",z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:65,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:tokens.color.neutral00,borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:tokens.color.primary}}},t}(SeriesModel);function getSortedIndices(a,t){for(var r=a.mapDimension("value"),n=a.mapArray(r,function(c){return c}),o=[],s=t==="ascending",l=0,u=a.count();l<u;l++)o[l]=l;return isFunction(t)?o.sort(t):t!=="none"&&o.sort(function(c,f){return s?n[c]-n[f]:n[f]-n[c]}),o}function labelLayout(a){var t=a.hostModel,r=t.get("orient");a.each(function(n){var o=a.getItemModel(n),s=o.getModel("label"),l=s.get("position"),u=o.getModel("labelLine"),c=a.getItemLayout(n),f=c.points,h=l==="inner"||l==="inside"||l==="center"||l==="insideLeft"||l==="insideRight",v,d,p,g;if(h)l==="insideLeft"?(d=(f[0][0]+f[3][0])/2+5,p=(f[0][1]+f[3][1])/2,v="left"):l==="insideRight"?(d=(f[1][0]+f[2][0])/2-5,p=(f[1][1]+f[2][1])/2,v="right"):(d=(f[0][0]+f[1][0]+f[2][0]+f[3][0])/4,p=(f[0][1]+f[1][1]+f[2][1]+f[3][1])/4,v="center"),g=[[d,p],[d,p]];else{var y=void 0,_=void 0,S=void 0,x=void 0,T=u.get("length");l==="left"?(y=(f[3][0]+f[0][0])/2,_=(f[3][1]+f[0][1])/2,S=y-T,d=S-5,v="right"):l==="right"?(y=(f[1][0]+f[2][0])/2,_=(f[1][1]+f[2][1])/2,S=y+T,d=S+5,v="left"):l==="top"?(y=(f[3][0]+f[0][0])/2,_=(f[3][1]+f[0][1])/2,x=_-T,p=x-5,v="center"):l==="bottom"?(y=(f[1][0]+f[2][0])/2,_=(f[1][1]+f[2][1])/2,x=_+T,p=x+5,v="center"):l==="rightTop"?(y=r==="horizontal"?f[3][0]:f[1][0],_=r==="horizontal"?f[3][1]:f[1][1],r==="horizontal"?(x=_-T,p=x-5,v="center"):(S=y+T,d=S+5,v="top")):l==="rightBottom"?(y=f[2][0],_=f[2][1],r==="horizontal"?(x=_+T,p=x+5,v="center"):(S=y+T,d=S+5,v="bottom")):l==="leftTop"?(y=f[0][0],_=r==="horizontal"?f[0][1]:f[1][1],r==="horizontal"?(x=_-T,p=x-5,v="center"):(S=y-T,d=S-5,v="right")):l==="leftBottom"?(y=r==="horizontal"?f[1][0]:f[3][0],_=r==="horizontal"?f[1][1]:f[2][1],r==="horizontal"?(x=_+T,p=x+5,v="center"):(S=y-T,d=S-5,v="right")):(y=(f[1][0]+f[2][0])/2,_=(f[1][1]+f[2][1])/2,r==="horizontal"?(x=_+T,p=x+5,v="center"):(S=y+T,d=S+5,v="left")),r==="horizontal"?(S=y,d=S):(x=_,p=x),g=[[y,_],[S,x]]}c.label={linePoints:g,x:d,y:p,verticalAlign:"middle",textAlign:v,inside:h}})}function funnelLayout(a,t){a.eachSeriesByType("funnel",function(r){var n=r.getData(),o=n.mapDimension("value"),s=r.get("sort"),l=createBoxLayoutReference(r,t),u=getLayoutRect(r.getBoxLayoutParams(),l.refContainer),c=r.get("orient"),f=u.width,h=u.height,v=getSortedIndices(n,s),d=u.x,p=u.y,g=c==="horizontal"?[parsePercent(r.get("minSize"),h),parsePercent(r.get("maxSize"),h)]:[parsePercent(r.get("minSize"),f),parsePercent(r.get("maxSize"),f)],y=n.getDataExtent(o),_=r.get("min"),S=r.get("max");_==null&&(_=Math.min(y[0],0)),S==null&&(S=y[1]);var x=r.get("funnelAlign"),T=r.get("gap"),b=c==="horizontal"?f:h,C=(b-T*(n.count()-1))/n.count(),w=function($,N){if(c==="horizontal"){var V=n.get(o,$)||0,B=linearMap$2(V,[_,S],g,!0),F=void 0;switch(x){case"top":F=p;break;case"center":F=p+(h-B)/2;break;case"bottom":F=p+(h-B);break}return[[N,F],[N,F+B]]}var G=n.get(o,$)||0,z=linearMap$2(G,[_,S],g,!0),H;switch(x){case"left":H=d;break;case"center":H=d+(f-z)/2;break;case"right":H=d+f-z;break}return[[H,N],[H+z,N]]};s==="ascending"&&(C=-C,T=-T,c==="horizontal"?d+=f:p+=h,v=v.reverse());for(var M=0;M<v.length;M++){var P=v[M],L=v[M+1],E=n.getItemModel(P);if(c==="horizontal"){var I=E.get(["itemStyle","width"]);I==null?I=C:(I=parsePercent(I,f),s==="ascending"&&(I=-I));var R=w(P,d),D=w(L,d+I);d+=I+T,n.setItemLayout(P,{points:R.concat(D.slice().reverse())})}else{var O=E.get(["itemStyle","height"]);O==null?O=C:(O=parsePercent(O,h),s==="ascending"&&(O=-O));var R=w(P,p),D=w(L,p+O);p+=O+T,n.setItemLayout(P,{points:R.concat(D.slice().reverse())})}}labelLayout(n)})}function install$F(a){a.registerChartView(FunnelView),a.registerSeriesModel(FunnelSeriesModel),a.registerLayout(funnelLayout),a.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$1=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r._dataGroup=new Group$3,r._initialized=!1,r}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(r,n,o,s){this._progressiveEls=null;var l=this._dataGroup,u=r.getData(),c=this._data,f=r.coordinateSystem,h=f.dimensions,v=makeSeriesScope(r);u.diff(c).add(d).update(p).remove(g).execute();function d(_){var S=addEl(u,l,_,h,f);updateElCommon(S,u,_,v)}function p(_,S){var x=c.getItemGraphicEl(S),T=createLinePoints(u,_,h,f);u.setItemGraphicEl(_,x),updateProps$1(x,{shape:{points:T}},r,_),saveOldStyle(x),updateElCommon(x,u,_,v)}function g(_){var S=c.getItemGraphicEl(_);l.remove(S)}if(!this._initialized){this._initialized=!0;var y=createGridClipShape$2(f,r,function(){setTimeout(function(){l.removeClipPath()})});l.setClipPath(y)}this._data=u},t.prototype.incrementalPrepareRender=function(r,n,o){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(r,n,o){for(var s=n.getData(),l=n.coordinateSystem,u=l.dimensions,c=makeSeriesScope(n),f=this._progressiveEls=[],h=r.start;h<r.end;h++){var v=addEl(s,this._dataGroup,h,u,l);v.incremental=!0,updateElCommon(v,s,h,c),f.push(v)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(ChartView);function createGridClipShape$2(a,t,r){var n=a.model,o=a.getRect(),s=new Rect$2({shape:{x:o.x,y:o.y,width:o.width,height:o.height}}),l=n.get("layout")==="horizontal"?"width":"height";return s.setShape(l,0),initProps(s,{shape:{width:o.width,height:o.height}},t,r),s}function createLinePoints(a,t,r,n){for(var o=[],s=0;s<r.length;s++){var l=r[s],u=a.get(a.mapDimension(l),t);isEmptyValue(u,n.getAxis(l).type)||o.push(n.dataToPoint(u,l))}return o}function addEl(a,t,r,n,o){var s=createLinePoints(a,r,n,o),l=new Polyline$1({shape:{points:s},z2:10});return t.add(l),a.setItemGraphicEl(r,l),l}function makeSeriesScope(a){var t=a.get("smooth",!0);return t===!0&&(t=DEFAULT_SMOOTH),t=numericToNumber(t),eqNaN(t)&&(t=0),{smooth:t}}function updateElCommon(a,t,r,n){a.useStyle(t.getItemVisual(r,"style")),a.style.fill=null,a.setShape("smooth",n.smooth);var o=t.getItemModel(r),s=o.getModel("emphasis");setStatesStylesFromModel(a,o,"lineStyle"),toggleHoverEmphasis(a,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function isEmptyValue(a,t){return t==="category"?a==null:a==null||isNaN(a)}var ParallelSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.getInitialData=function(r,n){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},t.prototype.getRawIndicesByActiveState=function(r){var n=this.coordinateSystem,o=this.getData(),s=[];return n.eachActiveState(o,function(l,u){r===l&&s.push(o.getRawIndex(u))}),s},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(SeriesModel);function makeDefaultEncode(a){var t=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(t){var r={};return each$f(t.dimensions,function(n){var o=convertDimNameToNumber(n);r[n]=o}),r}}function convertDimNameToNumber(a){return+a.replace("dim","")}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(a,t){var r=a.coordinateSystem,n={normal:a.get(["lineStyle","opacity"]),active:a.get("activeOpacity"),inactive:a.get("inactiveOpacity")};return{progress:function(o,s){r.eachActiveState(s,function(l,u){var c=n[l];if(l==="normal"&&s.hasItemOption){var f=s.getItemModel(u).get(opacityAccessPath,!0);f!=null&&(c=f)}var h=s.ensureUniqueItemVisual(u,"style");h.opacity=c},o.start,o.end)}}}};function parallelPreprocessor(a){createParallelIfNeeded(a),mergeAxisOptionFromParallel(a)}function createParallelIfNeeded(a){if(!a.parallel){var t=!1;each$f(a.series,function(r){r&&r.type==="parallel"&&(t=!0)}),t&&(a.parallel=[{}])}}function mergeAxisOptionFromParallel(a){var t=normalizeToArray(a.parallelAxis);each$f(t,function(r){if(isObject$3(r)){var n=r.parallelIndex||0,o=normalizeToArray(a.parallel)[n];o&&o.parallelAxisDefault&&merge(r,o.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){this._model=r,this._api=o,this._handlers||(this._handlers={},each$f(handlers$1,function(s,l){o.getZr().on(l,this._handlers[l]=bind$1(s,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",r.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(r,n){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(o,s){n.getZr().off(s,o)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(r){this._dispatchExpand(r)},t.prototype._dispatchExpand=function(r){r&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},r))},t.type="parallel",t}(ComponentView),handlers$1={mousedown:function(a){checkTrigger(this,"click")&&(this._mouseDownPoint=[a.offsetX,a.offsetY])},mouseup:function(a){var t=this._mouseDownPoint;if(checkTrigger(this,"click")&&t){var r=[a.offsetX,a.offsetY],n=Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2);if(n>CLICK_THRESHOLD)return;var o=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);o.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:o.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(a){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var t=this._model,r=t.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]),n=r.behavior;n==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(n==="none"?null:{axisExpandWindow:r.axisExpandWindow,animation:n==="jump"?null:{duration:0}})}}};function checkTrigger(a,t){var r=a._model;return r.get("axisExpandable")&&r.get("axisExpandTriggerOn")===t}var ParallelModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){a.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(r){var n=this.option;r&&merge(n,r,!0),this._initDimensions()},t.prototype.contains=function(r,n){var o=r.get("parallelIndex");return o!=null&&n.getComponent("parallel",o)===this},t.prototype.setAxisExpand=function(r){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(n){r.hasOwnProperty(n)&&(this.option[n]=r[n])},this)},t.prototype._initDimensions=function(){var r=this.dimensions=[],n=this.parallelAxisIndex=[],o=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(s){return(s.get("parallelIndex")||0)===this.componentIndex},this);each$f(o,function(s){r.push("dim"+s.get("dim")),n.push(s.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(ComponentModel),ParallelAxis=function(a){__extends(t,a);function t(r,n,o,s,l){var u=a.call(this,r,n,o)||this;return u.type=s||"value",u.axisIndex=l,u}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t}(Axis);function sliderMove(a,t,r,n,o,s){a=a||0;var l=r[1]-r[0];if(o!=null&&(o=restrict$1(o,[0,l])),s!=null&&(s=Math.max(s,o??0)),n==="all"){var u=Math.abs(t[1]-t[0]);u=restrict$1(u,[0,l]),o=s=restrict$1(u,[o,s]),n=0}t[0]=restrict$1(t[0],r),t[1]=restrict$1(t[1],r);var c=getSpanSign(t,n);t[n]+=a;var f=o||0,h=r.slice();c.sign<0?h[0]+=f:h[1]-=f,t[n]=restrict$1(t[n],h);var v;return v=getSpanSign(t,n),o!=null&&(v.sign!==c.sign||v.span<o)&&(t[1-n]=t[n]+c.sign*o),v=getSpanSign(t,n),s!=null&&v.span>s&&(t[1-n]=t[n]+v.sign*s),t}function getSpanSign(a,t){var r=a[t]-a[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function restrict$1(a,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,a))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round$1=round$4,PI$1=Math.PI,Parallel=function(){function a(t,r,n){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,r,n)}return a.prototype._init=function(t,r,n){var o=t.dimensions,s=t.parallelAxisIndex;each$a(o,function(l,u){var c=s[u],f=r.getComponent("parallelAxis",c),h=this._axesMap.set(l,new ParallelAxis(l,createScaleByModel$1(f),[0,0],f.get("type"),c)),v=h.type==="category";h.onBand=v&&f.get("boundaryGap"),h.inverse=f.get("inverse"),f.axis=h,h.model=f,h.coordinateSystem=f.coordinateSystem=this},this)},a.prototype.update=function(t,r){this._updateAxesFromSeries(this._model,t)},a.prototype.containPoint=function(t){var r=this._makeLayoutInfo(),n=r.axisBase,o=r.layoutBase,s=r.pixelDimIndex,l=t[1-s],u=t[s];return l>=n&&l<=n+r.axisLength&&u>=o&&u<=o+r.layoutLength},a.prototype.getModel=function(){return this._model},a.prototype._updateAxesFromSeries=function(t,r){r.eachSeries(function(n){if(t.contains(n,r)){var o=n.getData();each$a(this.dimensions,function(s){var l=this._axesMap.get(s);l.scale.unionExtentFromData(o,o.mapDimension(s)),niceScaleExtent(l.scale,l.model)},this)}},this)},a.prototype.resize=function(t,r){var n=createBoxLayoutReference(t,r).refContainer;this._rect=getLayoutRect(t.getBoxLayoutParams(),n),this._layoutAxes()},a.prototype.getRect=function(){return this._rect},a.prototype._makeLayoutInfo=function(){var t=this._model,r=this._rect,n=["x","y"],o=["width","height"],s=t.get("layout"),l=s==="horizontal"?0:1,u=r[o[l]],c=[0,u],f=this.dimensions.length,h=restrict(t.get("axisExpandWidth"),c),v=restrict(t.get("axisExpandCount")||0,[0,f]),d=t.get("axisExpandable")&&f>3&&f>v&&v>1&&h>0&&u>0,p=t.get("axisExpandWindow"),g;if(p)g=restrict(p[1]-p[0],c),p[1]=p[0]+g;else{g=restrict(h*(v-1),c);var y=t.get("axisExpandCenter")||mathFloor(f/2);p=[h*y-g/2],p[1]=p[0]+g}var _=(u-g)/(f-v);_<3&&(_=0);var S=[mathFloor(round$1(p[0]/h,1))+1,mathCeil(round$1(p[1]/h,1))-1],x=_/h*p[0];return{layout:s,pixelDimIndex:l,layoutBase:r[n[l]],layoutLength:u,axisBase:r[n[1-l]],axisLength:r[o[1-l]],axisExpandable:d,axisExpandWidth:h,axisCollapseWidth:_,axisExpandWindow:p,axisCount:f,winInnerIndices:S,axisExpandWindow0Pos:x}},a.prototype._layoutAxes=function(){var t=this._rect,r=this._axesMap,n=this.dimensions,o=this._makeLayoutInfo(),s=o.layout;r.each(function(l){var u=[0,o.axisLength],c=l.inverse?1:0;l.setExtent(u[c],u[1-c])}),each$a(n,function(l,u){var c=(o.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(u,o),f={horizontal:{x:c.position,y:o.axisLength},vertical:{x:0,y:c.position}},h={horizontal:PI$1/2,vertical:0},v=[f[s].x+t.x,f[s].y+t.y],d=h[s],p=create$1();rotate(p,p,d),translate(p,p,v),this._axesLayout[l]={position:v,rotation:d,transform:p,axisNameAvailableWidth:c.axisNameAvailableWidth,axisLabelShow:c.axisLabelShow,nameTruncateMaxWidth:c.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},a.prototype.getAxis=function(t){return this._axesMap.get(t)},a.prototype.dataToPoint=function(t,r){return this.axisCoordToPoint(this._axesMap.get(r).dataToCoord(t),r)},a.prototype.eachActiveState=function(t,r,n,o){n==null&&(n=0),o==null&&(o=t.count());var s=this._axesMap,l=this.dimensions,u=[],c=[];each$f(l,function(_){u.push(t.mapDimension(_)),c.push(s.get(_).model)});for(var f=this.hasAxisBrushed(),h=n;h<o;h++){var v=void 0;if(!f)v="normal";else{v="active";for(var d=t.getValues(u,h),p=0,g=l.length;p<g;p++){var y=c[p].getActiveState(d[p]);if(y==="inactive"){v="inactive";break}}}r(v,h)}},a.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,r=this._axesMap,n=!1,o=0,s=t.length;o<s;o++)r.get(t[o]).model.getActiveState()!=="normal"&&(n=!0);return n},a.prototype.axisCoordToPoint=function(t,r){var n=this._axesLayout[r];return applyTransform([t,0],n.transform)},a.prototype.getAxisLayout=function(t){return clone$4(this._axesLayout[t])},a.prototype.getSlidedAxisExpandWindow=function(t){var r=this._makeLayoutInfo(),n=r.pixelDimIndex,o=r.axisExpandWindow.slice(),s=o[1]-o[0],l=[0,r.axisExpandWidth*(r.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:o};var u=t[n]-r.layoutBase-r.axisExpandWindow0Pos,c,f="slide",h=r.axisCollapseWidth,v=this._model.get("axisExpandSlideTriggerArea"),d=v[0]!=null;if(h)d&&h&&u<s*v[0]?(f="jump",c=u-s*v[2]):d&&h&&u>s*(1-v[0])?(f="jump",c=u-s*(1-v[2])):(c=u-s*v[1])>=0&&(c=u-s*(1-v[1]))<=0&&(c=0),c*=r.axisExpandWidth/h,c?sliderMove(c,o,l,"all"):f="none";else{var p=o[1]-o[0],g=l[1]*u/p;o=[mathMax$2(0,g-p/2)],o[1]=mathMin$2(l[1],o[0]+p),o[0]=o[1]-p}return{axisExpandWindow:o,behavior:f}},a}();function restrict(a,t){return mathMin$2(mathMax$2(a,t[0]),t[1])}function layoutAxisWithoutExpand(a,t){var r=t.layoutLength/(t.axisCount-1);return{position:r*a,axisNameAvailableWidth:r,axisLabelShow:!0}}function layoutAxisWithExpand(a,t){var r=t.layoutLength,n=t.axisExpandWidth,o=t.axisCount,s=t.axisCollapseWidth,l=t.winInnerIndices,u,c=s,f=!1,h;return a<l[0]?(u=a*s,h=s):a<=l[1]?(u=t.axisExpandWindow0Pos+a*n-t.axisExpandWindow[0],c=n,f=!0):(u=r-(o-1-a)*s,h=s),{position:u,axisNameAvailableWidth:c,axisLabelShow:f,nameTruncateMaxWidth:h}}function createParallelCoordSys(a,t){var r=[];return a.eachComponent("parallel",function(n,o){var s=new Parallel(n,a,t);s.name="parallel_"+o,s.resize(n,t),n.coordinateSystem=s,s.model=n,r.push(s)}),a.eachSeries(function(n){if(n.get("coordinateSystem")==="parallel"){var o=n.getReferringComponents("parallel",SINGLE_REFERRING).models[0];n.coordinateSystem=o.coordinateSystem}}),r}var parallelCoordSysCreator={create:createParallelCoordSys},ParallelAxisModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.activeIntervals=[],r}return t.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(r){var n=this.activeIntervals=clone$4(r);if(n)for(var o=n.length-1;o>=0;o--)asc$2(n[o])},t.prototype.getActiveState=function(r){var n=this.activeIntervals;if(!n.length)return"normal";if(r==null||isNaN(+r))return"inactive";if(n.length===1){var o=n[0];if(o[0]<=r&&r<=o[1])return"active"}else for(var s=0,l=n.length;s<l;s++)if(n[s][0]<=r&&r<=n[s][1])return"active";return"inactive"},t}(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:tokens.color.backgroundTint,fill:tokens.color.borderTint},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(a){__extends(t,a);function t(r){var n=a.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=r,n.group=new Group$3,n._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(o,s){this._handlers[s]=bind$1(o,this)},n),n}return t.prototype.enableBrush=function(r){return this._brushType&&this._doDisableBrush(),r.brushType&&this._doEnableBrush(r),this},t.prototype._doEnableBrush=function(r){var n=this._zr;this._enableGlobalPan||take(n,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(o,s){n.on(s,o)}),this._brushType=r.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),r,!0)},t.prototype._doDisableBrush=function(){var r=this._zr;release(r,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(n,o){r.off(o,n)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(r){if(r&&r.length){var n=this._panels={};each$f(r,function(o){n[o.panelId]=clone$4(o)})}else this._panels=null;return this},t.prototype.mount=function(r){r=r||{},this._enableGlobalPan=r.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:r.x||0,y:r.y||0,rotation:r.rotation||0,scaleX:r.scaleX||1,scaleY:r.scaleY||1}),this._transform=n.getLocalTransform(),this},t.prototype.updateCovers=function(r){r=map$1(r,function(d){return merge(clone$4(DEFAULT_BRUSH_OPT),d,!0)});var n="\0-brush-index-",o=this._covers,s=this._covers=[],l=this,u=this._creatingCover;return new DataDiffer(o,r,f,c).add(h).update(h).remove(v).execute(),this;function c(d,p){return(d.id!=null?d.id:n+p)+"-"+d.brushType}function f(d,p){return c(d.__brushOption,p)}function h(d,p){var g=r[d];if(p!=null&&o[p]===u)s[d]=o[p];else{var y=s[d]=p!=null?(o[p].__brushOption=g,o[p]):endCreating(l,createCover(l,g));updateCoverAfterCreation(l,y)}}function v(d){o[d]!==u&&l.group.remove(o[d])}},t.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Eventful);function createCover(a,t){var r=coverRenderers[t.brushType].createCover(a,t);return r.__brushOption=t,updateZ$3(r,t),a.group.add(r),r}function endCreating(a,t){var r=getCoverRenderer(t);return r.endCreating&&(r.endCreating(a,t),updateZ$3(t,t.__brushOption)),t}function updateCoverShape(a,t){var r=t.__brushOption;getCoverRenderer(t).updateCoverShape(a,t,r.range,r)}function updateZ$3(a,t){var r=t.z;r==null&&(r=COVER_Z),a.traverse(function(n){n.z=r,n.z2=r})}function updateCoverAfterCreation(a,t){getCoverRenderer(t).updateCommon(a,t),updateCoverShape(a,t)}function getCoverRenderer(a){return coverRenderers[a.__brushOption.brushType]}function getPanelByPoint(a,t,r){var n=a._panels;if(!n)return BRUSH_PANEL_GLOBAL;var o,s=a._transform;return each$f(n,function(l){l.isTargetByCursor(t,r,s)&&(o=l)}),o}function getPanelByCover(a,t){var r=a._panels;if(!r)return BRUSH_PANEL_GLOBAL;var n=t.__brushOption.panelId;return n!=null?r[n]:BRUSH_PANEL_GLOBAL}function clearCovers(a){var t=a._covers,r=t.length;return each$f(t,function(n){a.group.remove(n)},a),t.length=0,!!r}function trigger(a,t){var r=map$1(a._covers,function(n){var o=n.__brushOption,s=clone$4(o.range);return{brushType:o.brushType,panelId:o.panelId,range:s}});a.trigger("brush",{areas:r,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function shouldShowCover(a){var t=a._track;if(!t.length)return!1;var r=t[t.length-1],n=t[0],o=r[0]-n[0],s=r[1]-n[1],l=mathPow(o*o+s*s,.5);return l>UNSELECT_THRESHOLD}function getTrackEnds(a){var t=a.length-1;return t<0&&(t=0),[a[0],a[t]]}function createBaseRectCover(a,t,r,n){var o=new Group$3;return o.add(new Rect$2({name:"main",style:makeStyle(r),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,a,t,o,["n","s","w","e"]),ondragend:curry$1(trigger,t,{isEnd:!0})})),each$f(n,function(s){o.add(new Rect$2({name:s.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,a,t,o,s),ondragend:curry$1(trigger,t,{isEnd:!0})}))}),o}function updateBaseRect(a,t,r,n){var o=n.brushStyle.lineWidth||0,s=mathMax$1(o,MIN_RESIZE_LINE_WIDTH),l=r[0][0],u=r[1][0],c=l-o/2,f=u-o/2,h=r[0][1],v=r[1][1],d=h-s+o/2,p=v-s+o/2,g=h-l,y=v-u,_=g+o,S=y+o;updateRectShape(a,t,"main",l,u,g,y),n.transformable&&(updateRectShape(a,t,"w",c,f,s,S),updateRectShape(a,t,"e",d,f,s,S),updateRectShape(a,t,"n",c,f,_,s),updateRectShape(a,t,"s",c,p,_,s),updateRectShape(a,t,"nw",c,f,s,s),updateRectShape(a,t,"ne",d,f,s,s),updateRectShape(a,t,"sw",c,p,s,s),updateRectShape(a,t,"se",d,p,s,s))}function updateCommon$1(a,t){var r=t.__brushOption,n=r.transformable,o=t.childAt(0);o.useStyle(makeStyle(r)),o.attr({silent:!n,cursor:n?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(s){var l=t.childOfName(s.join("")),u=s.length===1?getGlobalDirection1(a,s[0]):getGlobalDirection2(a,s);l&&l.attr({silent:!n,invisible:!n,cursor:n?CURSOR_MAP[u]+"-resize":null})})}function updateRectShape(a,t,r,n,o,s,l){var u=t.childOfName(r);u&&u.setShape(pointsToRect(clipByPanel(a,t,[[n,o],[n+s,o+l]])))}function makeStyle(a){return defaults({strokeNoScale:!0},a.brushStyle)}function formatRectRange(a,t,r,n){var o=[mathMin$1(a,r),mathMin$1(t,n)],s=[mathMax$1(a,r),mathMax$1(t,n)];return[[o[0],s[0]],[o[1],s[1]]]}function getTransform(a){return getTransform$1(a.group)}function getGlobalDirection1(a,t){var r={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},o=transformDirection(r[t],getTransform(a));return n[o]}function getGlobalDirection2(a,t){var r=[getGlobalDirection1(a,t[0]),getGlobalDirection1(a,t[1])];return(r[0]==="e"||r[0]==="w")&&r.reverse(),r.join("")}function driftRect(a,t,r,n,o,s){var l=r.__brushOption,u=a.toRectRange(l.range),c=toLocalDelta(t,o,s);each$f(n,function(f){var h=DIRECTION_MAP[f];u[h[0]][h[1]]+=c[h[0]]}),l.range=a.fromRectRange(formatRectRange(u[0][0],u[1][0],u[0][1],u[1][1])),updateCoverAfterCreation(t,r),trigger(t,{isEnd:!1})}function driftPolygon(a,t,r,n){var o=t.__brushOption.range,s=toLocalDelta(a,r,n);each$f(o,function(l){l[0]+=s[0],l[1]+=s[1]}),updateCoverAfterCreation(a,t),trigger(a,{isEnd:!1})}function toLocalDelta(a,t,r){var n=a.group,o=n.transformCoordToLocal(t,r),s=n.transformCoordToLocal(0,0);return[o[0]-s[0],o[1]-s[1]]}function clipByPanel(a,t,r){var n=getPanelByCover(a,t);return n&&n!==BRUSH_PANEL_GLOBAL?n.clipPath(r,a._transform):clone$4(r)}function pointsToRect(a){var t=mathMin$1(a[0][0],a[1][0]),r=mathMin$1(a[0][1],a[1][1]),n=mathMax$1(a[0][0],a[1][0]),o=mathMax$1(a[0][1],a[1][1]);return{x:t,y:r,width:n-t,height:o-r}}function resetCursor(a,t,r){if(!(!a._brushType||isOutsideZrArea(a,t.offsetX,t.offsetY))){var n=a._zr,o=a._covers,s=getPanelByPoint(a,t,r);if(!a._dragging)for(var l=0;l<o.length;l++){var u=o[l].__brushOption;if(s&&(s===BRUSH_PANEL_GLOBAL||u.panelId===s.panelId)&&coverRenderers[u.brushType].contain(o[l],r[0],r[1]))return}s&&n.setCursorStyle("crosshair")}}function preventDefault(a){var t=a.event;t.preventDefault&&t.preventDefault()}function mainShapeContain(a,t,r){return a.childOfName("main").contain(t,r)}function updateCoverByMouse(a,t,r,n){var o=a._creatingCover,s=a._creatingPanel,l=a._brushOption,u;if(a._track.push(r.slice()),shouldShowCover(a)||o){if(s&&!o){l.brushMode==="single"&&clearCovers(a);var c=clone$4(l);c.brushType=determineBrushType(c.brushType,s),c.panelId=s===BRUSH_PANEL_GLOBAL?null:s.panelId,o=a._creatingCover=createCover(a,c),a._covers.push(o)}if(o){var f=coverRenderers[determineBrushType(a._brushType,s)],h=o.__brushOption;h.range=f.getCreatingRange(clipByPanel(a,o,a._track)),n&&(endCreating(a,o),f.updateCommon(a,o)),updateCoverShape(a,o),u={isEnd:n}}}else n&&l.brushMode==="single"&&l.removeOnClick&&getPanelByPoint(a,t,r)&&clearCovers(a)&&(u={isEnd:n,removeOnClick:!0});return u}function determineBrushType(a,t){return a==="auto"?t.defaultBrushType:a}var pointerHandlers={mousedown:function(a){if(this._dragging)handleDragEnd(this,a);else if(!a.target||!a.target.draggable){preventDefault(a);var t=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var r=this._creatingPanel=getPanelByPoint(this,a,t);r&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(a){var t=a.offsetX,r=a.offsetY,n=this.group.transformCoordToLocal(t,r);if(resetCursor(this,a,n),this._dragging){preventDefault(a);var o=updateCoverByMouse(this,a,n,!1);o&&trigger(this,o)}},mouseup:function(a){handleDragEnd(this,a)}};function handleDragEnd(a,t){if(a._dragging){preventDefault(t);var r=t.offsetX,n=t.offsetY,o=a.group.transformCoordToLocal(r,n),s=updateCoverByMouse(a,t,o,!0);a._dragging=!1,a._track=[],a._creatingCover=null,s&&trigger(a,s)}}function isOutsideZrArea(a,t,r){var n=a._zr;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(a,t){function r(n){return n}return createBaseRectCover({toRectRange:r,fromRectRange:r},a,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var t=getTrackEnds(a);return formatRectRange(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(a,t,r,n){updateBaseRect(a,t,r,n)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(a,t){var r=new Group$3;return r.add(new Polyline$1({name:"main",style:makeStyle(t),silent:!0})),r},getCreatingRange:function(a){return a},endCreating:function(a,t){t.remove(t.childAt(0)),t.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,a,t),ondragend:curry$1(trigger,a,{isEnd:!0})}))},updateCoverShape:function(a,t,r,n){t.childAt(0).setShape({points:clipByPanel(a,t,r)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(a){return{createCover:function(t,r){return createBaseRectCover({toRectRange:function(n){var o=[n,[0,100]];return a&&o.reverse(),o},fromRectRange:function(n){return n[a]}},t,r,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(t){var r=getTrackEnds(t),n=mathMin$1(r[0][a],r[1][a]),o=mathMax$1(r[0][a],r[1][a]);return[n,o]},updateCoverShape:function(t,r,n,o){var s,l=getPanelByCover(t,r);if(l!==BRUSH_PANEL_GLOBAL&&l.getLinearBrushOtherExtent)s=l.getLinearBrushOtherExtent(a);else{var u=t._zr;s=[0,[u.getWidth(),u.getHeight()][1-a]]}var c=[n,s];a&&c.reverse(),updateBaseRect(t,r,c,o)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(a){return a=normalizeRect(a),function(t){return clipPointsByRect(t,a)}}function makeLinearBrushOtherExtent(a,t){return a=normalizeRect(a),function(r){var n=t??r,o=n?a.width:a.height,s=n?a.x:a.y;return[s,s+(o||0)]}}function makeRectIsTargetByCursor(a,t,r){var n=normalizeRect(a);return function(o,s){return n.contain(s[0],s[1])&&!onIrrelevantElement(o,t,r)}}function normalizeRect(a){return BoundingRect.create(a)}var ParallelAxisView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){a.prototype.init.apply(this,arguments),(this._brushController=new BrushController(n.getZr())).on("brush",bind$1(this._onBrush,this))},t.prototype.render=function(r,n,o,s){if(!fromAxisAreaSelect(r,n,s)){this.axisModel=r,this.api=o,this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!r.get("show")){var u=getCoordSysModel(r,n),c=u.coordinateSystem,f=r.getAreaSelectStyle(),h=f.width,v=r.axis.dim,d=c.getAxisLayout(v),p=extend({strokeContainThreshold:h},d),g=new AxisBuilder(r,o,p);g.build(),this._axisGroup.add(g.group),this._refreshBrushController(p,f,r,u,h,o),groupTransition(l,this._axisGroup,r)}}},t.prototype._refreshBrushController=function(r,n,o,s,l,u){var c=o.axis.getExtent(),f=c[1]-c[0],h=Math.min(30,Math.abs(f)*.1),v=BoundingRect.create({x:c[0],y:-l/2,width:f,height:l});v.x-=h,v.width+=2*h,this._brushController.mount({enableGlobalPan:!0,rotation:r.rotation,x:r.position[0],y:r.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(v),isTargetByCursor:makeRectIsTargetByCursor(v,u,s),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(v,0)}]).enableBrush({brushType:"lineX",brushStyle:n,removeOnClick:!0}).updateCovers(getCoverInfoList(o))},t.prototype._onBrush=function(r){var n=r.areas,o=this.axisModel,s=o.axis,l=map$1(n,function(u){return[s.coordToData(u.range[0],!0),s.coordToData(u.range[1],!0)]});(!o.option.realtime===r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:o.id,intervals:l})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(ComponentView);function fromAxisAreaSelect(a,t,r){return r&&r.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:r})[0]===a}function getCoverInfoList(a){var t=a.axis;return map$1(a.activeIntervals,function(r){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(r[0],!0),t.dataToCoord(r[1],!0)]}})}function getCoordSysModel(a,t){return t.getComponent("parallel",a.get("parallelIndex"))}var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(a){a.registerAction(actionInfo,function(t,r){r.eachComponent({mainType:"parallelAxis",query:t},function(n){n.axis.model.setActiveIntervals(t.intervals)})}),a.registerAction("parallelAxisExpand",function(t,r){r.eachComponent({mainType:"parallel",query:t},function(n){n.setAxisExpand(t)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$E(a){a.registerComponentView(ParallelView),a.registerComponentModel(ParallelModel),a.registerCoordinateSystem("parallel",parallelCoordSysCreator),a.registerPreprocessor(parallelPreprocessor),a.registerComponentModel(ParallelAxisModel),a.registerComponentView(ParallelAxisView),axisModelCreator(a,"parallel",ParallelAxisModel,defaultAxisOption),installParallelActions(a)}function install$D(a){use(install$E),a.registerChartView(ParallelView$1),a.registerSeriesModel(ParallelSeriesModel),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,parallelVisual)}var SankeyPathShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return a}(),SankeyPath=function(a){__extends(t,a);function t(r){return a.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new SankeyPathShape},t.prototype.buildPath=function(r,n){var o=n.extent;r.moveTo(n.x1,n.y1),r.bezierCurveTo(n.cpx1,n.cpy1,n.cpx2,n.cpy2,n.x2,n.y2),n.orient==="vertical"?(r.lineTo(n.x2+o,n.y2),r.bezierCurveTo(n.cpx2+o,n.cpy2,n.cpx1+o,n.cpy1,n.x1+o,n.y1)):(r.lineTo(n.x2,n.y2+o),r.bezierCurveTo(n.cpx2,n.cpy2+o,n.cpx1,n.cpy1+o,n.x1,n.y1+o)),r.closePath()},t.prototype.highlight=function(){enterEmphasis(this)},t.prototype.downplay=function(){leaveEmphasis(this)},t}(Path),SankeyView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new Group$3,r._focusAdjacencyDisabled=!1,r}return t.prototype.init=function(r,n){this._controller=new RoamController(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,n,o){var s=this,l=r.getGraph(),u=this._mainGroup,c=r.layoutInfo,f=c.width,h=c.height,v=r.getData(),d=r.getData("edge"),p=r.get("orient");this._model=r,u.removeAll(),u.x=c.x,u.y=c.y,this._updateViewCoordSys(r,o),updateController(r,o,u,this._controller,this._controllerHost,null),l.eachEdge(function(g){var y=new SankeyPath,_=getECData(y);_.dataIndex=g.dataIndex,_.seriesIndex=r.seriesIndex,_.dataType="edge";var S=g.getModel(),x=S.getModel("lineStyle"),T=x.get("curveness"),b=g.node1.getLayout(),C=g.node1.getModel(),w=C.get("localX"),M=C.get("localY"),P=g.node2.getLayout(),L=g.node2.getModel(),E=L.get("localX"),I=L.get("localY"),R=g.getLayout(),D,O,$,N,V,B,F,G;y.shape.extent=Math.max(1,R.dy),y.shape.orient=p,p==="vertical"?(D=(w!=null?w*f:b.x)+R.sy,O=(M!=null?M*h:b.y)+b.dy,$=(E!=null?E*f:P.x)+R.ty,N=I!=null?I*h:P.y,V=D,B=O*(1-T)+N*T,F=$,G=O*T+N*(1-T)):(D=(w!=null?w*f:b.x)+b.dx,O=(M!=null?M*h:b.y)+R.sy,$=E!=null?E*f:P.x,N=(I!=null?I*h:P.y)+R.ty,V=D*(1-T)+$*T,B=O,F=D*T+$*(1-T),G=N),y.setShape({x1:D,y1:O,x2:$,y2:N,cpx1:V,cpy1:B,cpx2:F,cpy2:G}),y.useStyle(x.getItemStyle()),applyCurveStyle(y.style,p,g);var z=""+S.get("value"),H=getLabelStatesModels(S,"edgeLabel");setLabelStyle(y,H,{labelFetcher:{getFormattedLabel:function(Z,J,ee,K,X,q){return r.getFormattedLabel(Z,J,"edge",K,retrieve3(X,H.normal&&H.normal.get("formatter"),z),q)}},labelDataIndex:g.dataIndex,defaultText:z}),y.setTextConfig({position:"inside"});var U=S.getModel("emphasis");setStatesStylesFromModel(y,S,"lineStyle",function(Z){var J=Z.getItemStyle();return applyCurveStyle(J,p,g),J}),u.add(y),d.setItemGraphicEl(g.dataIndex,y);var Y=U.get("focus");toggleHoverEmphasis(y,Y==="adjacency"?g.getAdjacentDataIndices():Y==="trajectory"?g.getTrajectoryDataIndices():Y,U.get("blurScope"),U.get("disabled"))}),l.eachNode(function(g){var y=g.getLayout(),_=g.getModel(),S=_.get("localX"),x=_.get("localY"),T=_.getModel("emphasis"),b=_.get(["itemStyle","borderRadius"])||0,C=new Rect$2({shape:{x:S!=null?S*f:y.x,y:x!=null?x*h:y.y,width:y.dx,height:y.dy,r:b},style:_.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(C,getLabelStatesModels(_),{labelFetcher:{getFormattedLabel:function(M,P){return r.getFormattedLabel(M,P,"node")}},labelDataIndex:g.dataIndex,defaultText:g.id}),C.disableLabelAnimation=!0,C.setStyle("fill",g.getVisual("color")),C.setStyle("decal",g.getVisual("style").decal),setStatesStylesFromModel(C,_),u.add(C),v.setItemGraphicEl(g.dataIndex,C),getECData(C).dataType="node";var w=T.get("focus");toggleHoverEmphasis(C,w==="adjacency"?g.getAdjacentDataIndices():w==="trajectory"?g.getTrajectoryDataIndices():w,T.get("blurScope"),T.get("disabled"))}),v.eachItemGraphicEl(function(g,y){var _=v.getItemModel(y);_.get("draggable")&&(g.drift=function(S,x){s._focusAdjacencyDisabled=!0,this.shape.x+=S,this.shape.y+=x,this.dirty(),o.dispatchAction({type:"dragNode",seriesId:r.id,dataIndex:v.getRawIndex(y),localX:this.shape.x/f,localY:this.shape.y/h})},g.ondragend=function(){s._focusAdjacencyDisabled=!1},g.draggable=!0,g.cursor="move")}),!this._data&&r.isAnimationEnabled()&&u.setClipPath(createGridClipShape$1(u.getBoundingRect(),r,function(){u.removeClipPath()})),this._data=r.getData()},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._updateViewCoordSys=function(r,n){var o=r.layoutInfo,s=o.width,l=o.height,u=r.coordinateSystem=new View(null,{api:n,ecModel:r.ecModel});u.zoomLimit=r.get("scaleLimit"),u.setBoundingRect(0,0,s,l),u.setCenter(r.get("center")),u.setZoom(r.get("zoom")),this._controllerHost.target.attr({x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY})},t.type="sankey",t}(ChartView);function applyCurveStyle(a,t,r){switch(a.fill){case"source":a.fill=r.node1.getVisual("color"),a.decal=r.node1.getVisual("style").decal;break;case"target":a.fill=r.node2.getVisual("color"),a.decal=r.node2.getVisual("style").decal;break;case"gradient":var n=r.node1.getVisual("color"),o=r.node2.getVisual("color");isString(n)&&isString(o)&&(a.fill=new LinearGradient(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:n,offset:0},{color:o,offset:1}]))}}function createGridClipShape$1(a,t,r){var n=new Rect$2({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return initProps(n,{shape:{width:a.width+20}},t,r),n}var SankeySeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){var o=r.edges||r.links||[],s=r.data||r.nodes||[],l=r.levels||[];this.levelModels=[];for(var u=this.levelModels,c=0;c<l.length;c++)l[c].depth!=null&&l[c].depth>=0&&(u[l[c].depth]=new Model(l[c],this,n));var f=createGraphFromNodeEdge(s,o,this,!0,h);return f.data;function h(v,d){v.wrapMethod("getItemModel",function(p,g){var y=p.parentModel,_=y.getData().getItemLayout(g);if(_){var S=_.depth,x=y.levelModels[S];x&&(p.parentModel=x)}return p}),d.wrapMethod("getItemModel",function(p,g){var y=p.parentModel,_=y.getGraph().getEdgeByIndex(g),S=_.node1.getLayout();if(S){var x=S.depth,T=y.levelModels[x];T&&(p.parentModel=T)}return p})}},t.prototype.setNodePosition=function(r,n){var o=this.option.data||this.option.nodes,s=o[r];s.localX=n[0],s.localY=n[1]},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(r,n,o){function s(p){return isNaN(p)||p==null}if(o==="edge"){var l=this.getDataParams(r,o),u=l.data,c=l.value,f=u.source+" -- "+u.target;return createTooltipMarkup("nameValue",{name:f,value:c,noValue:s(c)})}else{var h=this.getGraph().getNodeByIndex(r),v=h.getLayout().value,d=this.getDataParams(r,o).data.name;return createTooltipMarkup("nameValue",{name:d!=null?d+"":null,value:v,noValue:s(v)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(r,n){var o=a.prototype.getDataParams.call(this,r,n);if(o.value==null&&n==="node"){var s=this.getGraph().getNodeByIndex(r),l=s.getLayout().value;o.value=l}return o},t.type="series.sankey",t.layoutMode="box",t.defaultOption={z:2,coordinateSystemUsage:"box",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,roam:!1,roamTrigger:"global",center:null,zoom:1,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:tokens.color.neutral50,opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:tokens.color.primary}},animationEasing:"linear",animationDuration:1e3},t}(SeriesModel);function sankeyLayout(a,t){a.eachSeriesByType("sankey",function(r){var n=r.get("nodeWidth"),o=r.get("nodeGap"),s=createBoxLayoutReference(r,t).refContainer,l=getLayoutRect(r.getBoxLayoutParams(),s);r.layoutInfo=l;var u=l.width,c=l.height,f=r.getGraph(),h=f.nodes,v=f.edges;computeNodeValues(h);var d=filter(h,function(_){return _.getLayout().value===0}),p=d.length!==0?0:r.get("layoutIterations"),g=r.get("orient"),y=r.get("nodeAlign");layoutSankey(h,v,n,o,u,c,p,g,y)})}function layoutSankey(a,t,r,n,o,s,l,u,c){computeNodeBreadths(a,t,r,o,s,u,c),computeNodeDepths(a,t,s,o,n,l,u),computeEdgeDepths(a,u)}function computeNodeValues(a){each$f(a,function(t){var r=sum(t.outEdges,getEdgeValue),n=sum(t.inEdges,getEdgeValue),o=t.getValue()||0,s=Math.max(r,n,o);t.setLayout({value:s},!0)})}function computeNodeBreadths(a,t,r,n,o,s,l){for(var u=[],c=[],f=[],h=[],v=0,d=0;d<t.length;d++)u[d]=1;for(var d=0;d<a.length;d++)c[d]=a[d].inEdges.length,c[d]===0&&f.push(a[d]);for(var p=-1;f.length;){for(var g=0;g<f.length;g++){var y=f[g],_=y.hostGraph.data.getRawDataItem(y.dataIndex),S=_.depth!=null&&_.depth>=0;S&&_.depth>p&&(p=_.depth),y.setLayout({depth:S?_.depth:v},!0),s==="vertical"?y.setLayout({dy:r},!0):y.setLayout({dx:r},!0);for(var x=0;x<y.outEdges.length;x++){var T=y.outEdges[x],b=t.indexOf(T);u[b]=0;var C=T.node2,w=a.indexOf(C);--c[w]===0&&h.indexOf(C)<0&&h.push(C)}}++v,f=h,h=[]}for(var d=0;d<u.length;d++)if(u[d]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var M=p>v-1?p:v-1;l&&l!=="left"&&adjustNodeWithNodeAlign(a,l,s,M);var P=s==="vertical"?(o-r)/M:(n-r)/M;scaleNodeBreadths(a,P,s)}function isNodeDepth(a){var t=a.hostGraph.data.getRawDataItem(a.dataIndex);return t.depth!=null&&t.depth>=0}function adjustNodeWithNodeAlign(a,t,r,n){if(t==="right"){for(var o=[],s=a,l=0;s.length;){for(var u=0;u<s.length;u++){var c=s[u];c.setLayout({skNodeHeight:l},!0);for(var f=0;f<c.inEdges.length;f++){var h=c.inEdges[f];o.indexOf(h.node1)<0&&o.push(h.node1)}}s=o,o=[],++l}each$f(a,function(v){isNodeDepth(v)||v.setLayout({depth:Math.max(0,n-v.getLayout().skNodeHeight)},!0)})}else t==="justify"&&moveSinksRight(a,n)}function moveSinksRight(a,t){each$f(a,function(r){!isNodeDepth(r)&&!r.outEdges.length&&r.setLayout({depth:t},!0)})}function scaleNodeBreadths(a,t,r){each$f(a,function(n){var o=n.getLayout().depth*t;r==="vertical"?n.setLayout({y:o},!0):n.setLayout({x:o},!0)})}function computeNodeDepths(a,t,r,n,o,s,l){var u=prepareNodesByBreadth(a,l);initializeNodeDepth(u,t,r,n,o,l),resolveCollisions(u,o,r,n,l);for(var c=1;s>0;s--)c*=.99,relaxRightToLeft(u,c,l),resolveCollisions(u,o,r,n,l),relaxLeftToRight(u,c,l),resolveCollisions(u,o,r,n,l)}function prepareNodesByBreadth(a,t){var r=[],n=t==="vertical"?"y":"x",o=groupData(a,function(s){return s.getLayout()[n]});return o.keys.sort(function(s,l){return s-l}),each$f(o.keys,function(s){r.push(o.buckets.get(s))}),r}function initializeNodeDepth(a,t,r,n,o,s){var l=1/0;each$f(a,function(u){var c=u.length,f=0;each$f(u,function(v){f+=v.getLayout().value});var h=s==="vertical"?(n-(c-1)*o)/f:(r-(c-1)*o)/f;h<l&&(l=h)}),each$f(a,function(u){each$f(u,function(c,f){var h=c.getLayout().value*l;s==="vertical"?(c.setLayout({x:f},!0),c.setLayout({dx:h},!0)):(c.setLayout({y:f},!0),c.setLayout({dy:h},!0))})}),each$f(t,function(u){var c=+u.getValue()*l;u.setLayout({dy:c},!0)})}function resolveCollisions(a,t,r,n,o){var s=o==="vertical"?"x":"y";each$f(a,function(l){l.sort(function(y,_){return y.getLayout()[s]-_.getLayout()[s]});for(var u,c,f,h=0,v=l.length,d=o==="vertical"?"dx":"dy",p=0;p<v;p++)c=l[p],f=h-c.getLayout()[s],f>0&&(u=c.getLayout()[s]+f,o==="vertical"?c.setLayout({x:u},!0):c.setLayout({y:u},!0)),h=c.getLayout()[s]+c.getLayout()[d]+t;var g=o==="vertical"?n:r;if(f=h-t-g,f>0){u=c.getLayout()[s]-f,o==="vertical"?c.setLayout({x:u},!0):c.setLayout({y:u},!0),h=u;for(var p=v-2;p>=0;--p)c=l[p],f=c.getLayout()[s]+c.getLayout()[d]+t-h,f>0&&(u=c.getLayout()[s]-f,o==="vertical"?c.setLayout({x:u},!0):c.setLayout({y:u},!0)),h=c.getLayout()[s]}})}function relaxRightToLeft(a,t,r){each$f(a.slice().reverse(),function(n){each$f(n,function(o){if(o.outEdges.length){var s=sum(o.outEdges,weightedTarget,r)/sum(o.outEdges,getEdgeValue);if(isNaN(s)){var l=o.outEdges.length;s=l?sum(o.outEdges,centerTarget,r)/l:0}if(r==="vertical"){var u=o.getLayout().x+(s-center(o,r))*t;o.setLayout({x:u},!0)}else{var c=o.getLayout().y+(s-center(o,r))*t;o.setLayout({y:c},!0)}}})})}function weightedTarget(a,t){return center(a.node2,t)*a.getValue()}function centerTarget(a,t){return center(a.node2,t)}function weightedSource(a,t){return center(a.node1,t)*a.getValue()}function centerSource(a,t){return center(a.node1,t)}function center(a,t){return t==="vertical"?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function getEdgeValue(a){return a.getValue()}function sum(a,t,r){for(var n=0,o=a.length,s=-1;++s<o;){var l=+t(a[s],r);isNaN(l)||(n+=l)}return n}function relaxLeftToRight(a,t,r){each$f(a,function(n){each$f(n,function(o){if(o.inEdges.length){var s=sum(o.inEdges,weightedSource,r)/sum(o.inEdges,getEdgeValue);if(isNaN(s)){var l=o.inEdges.length;s=l?sum(o.inEdges,centerSource,r)/l:0}if(r==="vertical"){var u=o.getLayout().x+(s-center(o,r))*t;o.setLayout({x:u},!0)}else{var c=o.getLayout().y+(s-center(o,r))*t;o.setLayout({y:c},!0)}}})})}function computeEdgeDepths(a,t){var r=t==="vertical"?"x":"y";each$f(a,function(n){n.outEdges.sort(function(o,s){return o.node2.getLayout()[r]-s.node2.getLayout()[r]}),n.inEdges.sort(function(o,s){return o.node1.getLayout()[r]-s.node1.getLayout()[r]})}),each$f(a,function(n){var o=0,s=0;each$f(n.outEdges,function(l){l.setLayout({sy:o},!0),o+=l.getLayout().dy}),each$f(n.inEdges,function(l){l.setLayout({ty:s},!0),s+=l.getLayout().dy})})}function sankeyVisual(a){a.eachSeriesByType("sankey",function(t){var r=t.getGraph(),n=r.nodes,o=r.edges;if(n.length){var s=1/0,l=-1/0;each$f(n,function(u){var c=u.getLayout().value;c<s&&(s=c),c>l&&(l=c)}),each$f(n,function(u){var c=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[s,l],visual:t.get("color")}),f=c.mapValueToVisual(u.getLayout().value),h=u.getModel().get(["itemStyle","color"]);h!=null?(u.setVisual("color",h),u.setVisual("style",{fill:h})):(u.setVisual("color",f),u.setVisual("style",{fill:f}))})}o.length&&each$f(o,function(u){var c=u.getModel().get("lineStyle");u.setVisual("style",c)})})}function install$C(a){a.registerChartView(SankeyView),a.registerSeriesModel(SankeySeriesModel),a.registerLayout(sankeyLayout),a.registerVisual(sankeyVisual),a.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"sankey",query:t},function(n){n.setNodePosition(t.dataIndex,[t.localX,t.localY])})}),a.registerAction({type:"sankeyRoam",event:"sankeyRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",subType:"sankey",query:t},function(o){var s=o.coordinateSystem,l=updateCenterAndZoomInAction(s,t,o.get("scaleLimit"));o.setCenter(l.center),o.setZoom(l.zoom)})})}var WhiskerBoxCommonMixin=function(){function a(){}return a.prototype._hasEncodeRule=function(t){var r=this.getEncode();return r&&r.get(t)!=null},a.prototype.getInitialData=function(t,r){var n,o=r.getComponent("xAxis",this.get("xAxisIndex")),s=r.getComponent("yAxis",this.get("yAxisIndex")),l=o.get("type"),u=s.get("type"),c;l==="category"?(t.layout="horizontal",n=o.getOrdinalMeta(),c=!this._hasEncodeRule("x")):u==="category"?(t.layout="vertical",n=s.getOrdinalMeta(),c=!this._hasEncodeRule("y")):t.layout=t.layout||"horizontal";var f=["x","y"],h=t.layout==="horizontal"?0:1,v=this._baseAxisDim=f[h],d=f[1-h],p=[o,s],g=p[h].get("type"),y=p[1-h].get("type"),_=t.data;if(_&&c){var S=[];each$f(_,function(b,C){var w;isArray$1(b)?(w=b.slice(),b.unshift(C)):isArray$1(b.value)?(w=extend({},b),w.value=w.value.slice(),b.value.unshift(C)):w=b,S.push(w)}),t.data=S}var x=this.defaultValueDimensions,T=[{name:v,type:getDimensionTypeByAxis(g),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:getDimensionTypeByAxis(y),dimsDef:x.slice()}];return createSeriesDataSimply(this,{coordDimensions:T,dimensionsCount:x.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,T,this)})},a.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},a}(),BoxplotSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],r.visualDrawType="stroke",r}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:tokens.color.neutral00,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:tokens.color.shadow}},animationDuration:800},t}(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){var s=r.getData(),l=this.group,u=this._data;this._data||l.removeAll();var c=r.get("layout")==="horizontal"?1:0;s.diff(u).add(function(f){if(s.hasValue(f)){var h=s.getItemLayout(f),v=createNormalBox$1(h,s,f,c,!0);s.setItemGraphicEl(f,v),l.add(v)}}).update(function(f,h){var v=u.getItemGraphicEl(h);if(!s.hasValue(f)){l.remove(v);return}var d=s.getItemLayout(f);v?(saveOldStyle(v),updateNormalBoxData(d,v,s,f)):v=createNormalBox$1(d,s,f,c),l.add(v),s.setItemGraphicEl(f,v)}).remove(function(f){var h=u.getItemGraphicEl(f);h&&l.remove(h)}).execute(),this._data=s},t.prototype.remove=function(r){var n=this.group,o=this._data;this._data=null,o&&o.eachItemGraphicEl(function(s){s&&n.remove(s)})},t.type="boxplot",t}(ChartView),BoxPathShape=function(){function a(){}return a}(),BoxPath=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;return n.type="boxplotBoxPath",n}return t.prototype.getDefaultShape=function(){return new BoxPathShape},t.prototype.buildPath=function(r,n){var o=n.points,s=0;for(r.moveTo(o[s][0],o[s][1]),s++;s<4;s++)r.lineTo(o[s][0],o[s][1]);for(r.closePath();s<o.length;s++)r.moveTo(o[s][0],o[s][1]),s++,r.lineTo(o[s][0],o[s][1])},t}(Path);function createNormalBox$1(a,t,r,n,o){var s=a.ends,l=new BoxPath({shape:{points:o?transInit$1(s,n,a):s}});return updateNormalBoxData(a,l,t,r,o),l}function updateNormalBoxData(a,t,r,n,o){var s=r.hostModel,l=graphic[o?"initProps":"updateProps"];l(t,{shape:{points:a.ends}},s,n),t.useStyle(r.getItemVisual(n,"style")),t.style.strokeNoScale=!0,t.z2=100;var u=r.getItemModel(n),c=u.getModel("emphasis");setStatesStylesFromModel(t,u),toggleHoverEmphasis(t,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function transInit$1(a,t,r){return map$1(a,function(n){return n=n.slice(),n[t]=r.initBaseline,n})}var each$9=each$f;function boxplotLayout(a){var t=groupSeriesByAxis(a);each$9(t,function(r){var n=r.seriesModels;n.length&&(calculateBase(r),each$9(n,function(o,s){layoutSingleSeries(o,r.boxOffsetList[s],r.boxWidthList[s])}))})}function groupSeriesByAxis(a){var t=[],r=[];return a.eachSeriesByType("boxplot",function(n){var o=n.getBaseAxis(),s=indexOf(r,o);s<0&&(s=r.length,r[s]=o,t[s]={axis:o,seriesModels:[]}),t[s].seriesModels.push(n)}),t}function calculateBase(a){var t=a.axis,r=a.seriesModels,n=r.length,o=a.boxWidthList=[],s=a.boxOffsetList=[],l=[],u;if(t.type==="category")u=t.getBandWidth();else{var c=0;each$9(r,function(g){c=Math.max(c,g.getData().count())});var f=t.getExtent();u=Math.abs(f[1]-f[0])/c}each$9(r,function(g){var y=g.get("boxWidth");isArray$1(y)||(y=[y,y]),l.push([parsePercent(y[0],u)||0,parsePercent(y[1],u)||0])});var h=u*.8-2,v=h/n*.3,d=(h-v*(n-1))/n,p=d/2-h/2;each$9(r,function(g,y){s.push(p),p+=v+d,o.push(Math.min(Math.max(d,l[y][0]),l[y][1]))})}function layoutSingleSeries(a,t,r){var n=a.coordinateSystem,o=a.getData(),s=r/2,l=a.get("layout")==="horizontal"?0:1,u=1-l,c=["x","y"],f=o.mapDimension(c[l]),h=o.mapDimensionsAll(c[u]);if(f==null||h.length<5)return;for(var v=0;v<o.count();v++){var d=o.get(f,v),p=T(d,h[2],v),g=T(d,h[0],v),y=T(d,h[1],v),_=T(d,h[3],v),S=T(d,h[4],v),x=[];b(x,y,!1),b(x,_,!0),x.push(g,y,S,_),C(x,g),C(x,S),C(x,p),o.setItemLayout(v,{initBaseline:p[u],ends:x})}function T(w,M,P){var L=o.get(M,P),E=[];E[l]=w,E[u]=L;var I;return isNaN(w)||isNaN(L)?I=[NaN,NaN]:(I=n.dataToPoint(E),I[l]+=t),I}function b(w,M,P){var L=M.slice(),E=M.slice();L[l]+=s,E[l]-=s,P?w.push(L,E):w.push(E,L)}function C(w,M){var P=M.slice(),L=M.slice();P[l]-=s,L[l]+=s,w.push(P,L)}}function prepareBoxplotData(a,t){t=t||{};for(var r=[],n=[],o=t.boundIQR,s=o==="none"||o===0,l=0;l<a.length;l++){var u=asc$2(a[l].slice()),c=quantile(u,.25),f=quantile(u,.5),h=quantile(u,.75),v=u[0],d=u[u.length-1],p=(o??1.5)*(h-c),g=s?v:Math.max(v,c-p),y=s?d:Math.min(d,h+p),_=t.itemNameFormatter,S=isFunction(_)?_({value:l}):isString(_)?_.replace("{value}",l+""):l+"";r.push([S,g,c,f,h,y]);for(var x=0;x<u.length;x++){var T=u[x];if(T<g||T>y){var b=[S,T];n.push(b)}}}return{boxData:r,outliers:n}}var boxplotTransform={type:"echarts:boxplot",transform:function a(t){var r=t.upstream;if(r.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var n="";throwError(n)}var o=prepareBoxplotData(r.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:o.boxData},{data:o.outliers}]}};function install$B(a){a.registerSeriesModel(BoxplotSeriesModel),a.registerChartView(BoxplotView),a.registerLayout(boxplotLayout),a.registerTransform(boxplotTransform)}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];function getColor(a,t){return t.get(a>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(a,t){return t.get(a===0?dojiBorderColorQuery:a>0?positiveBorderColorQuery:negativeBorderColorQuery)}var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(a,t){if(!t.isSeriesFiltered(a)){var r=a.pipelineContext.large;return!r&&{progress:function(n,o){for(var s;(s=n.next())!=null;){var l=o.getItemModel(s),u=o.getItemLayout(s).sign,c=l.getItemStyle();c.fill=getColor(u,l),c.stroke=getBorderColor(u,l)||c.fill;var f=o.ensureUniqueItemVisual(s,"style");extend(f,c)}}}}}},SKIP_PROPS=["color","borderColor"],CandlestickView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(r),this._isLargeDraw?this._renderLarge(r):this._renderNormal(r)},t.prototype.incrementalPrepareRender=function(r,n,o){this._clear(),this._updateDrawMode(r)},t.prototype.incrementalRender=function(r,n,o,s){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(r,n):this._incrementalRenderNormal(r,n)},t.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(r){var n=r.getData(),o=this._data,s=this.group,l=n.getLayout("isSimpleBox"),u=r.get("clip",!0),c=r.coordinateSystem,f=c.getArea&&c.getArea();this._data||s.removeAll(),n.diff(o).add(function(h){if(n.hasValue(h)){var v=n.getItemLayout(h);if(u&&isNormalBoxClipped(f,v))return;var d=createNormalBox(v,h,!0);initProps(d,{shape:{points:v.ends}},r,h),setBoxCommon(d,n,h,l),s.add(d),n.setItemGraphicEl(h,d)}}).update(function(h,v){var d=o.getItemGraphicEl(v);if(!n.hasValue(h)){s.remove(d);return}var p=n.getItemLayout(h);if(u&&isNormalBoxClipped(f,p)){s.remove(d);return}d?(updateProps$1(d,{shape:{points:p.ends}},r,h),saveOldStyle(d)):d=createNormalBox(p),setBoxCommon(d,n,h,l),s.add(d),n.setItemGraphicEl(h,d)}).remove(function(h){var v=o.getItemGraphicEl(h);v&&s.remove(v)}).execute(),this._data=n},t.prototype._renderLarge=function(r){this._clear(),createLarge(r,this.group);var n=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;n?this.group.setClipPath(n):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(r,n){for(var o=n.getData(),s=o.getLayout("isSimpleBox"),l;(l=r.next())!=null;){var u=o.getItemLayout(l),c=createNormalBox(u);setBoxCommon(c,o,l,s),c.incremental=!0,this.group.add(c),this._progressiveEls.push(c)}},t.prototype._incrementalRenderLarge=function(r,n){createLarge(n,this.group,this._progressiveEls,!0)},t.prototype.remove=function(r){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(ChartView),NormalBoxPathShape=function(){function a(){}return a}(),NormalBoxPath=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;return n.type="normalCandlestickBox",n}return t.prototype.getDefaultShape=function(){return new NormalBoxPathShape},t.prototype.buildPath=function(r,n){var o=n.points;this.__simpleBox?(r.moveTo(o[4][0],o[4][1]),r.lineTo(o[6][0],o[6][1])):(r.moveTo(o[0][0],o[0][1]),r.lineTo(o[1][0],o[1][1]),r.lineTo(o[2][0],o[2][1]),r.lineTo(o[3][0],o[3][1]),r.closePath(),r.moveTo(o[4][0],o[4][1]),r.lineTo(o[5][0],o[5][1]),r.moveTo(o[6][0],o[6][1]),r.lineTo(o[7][0],o[7][1]))},t}(Path);function createNormalBox(a,t,r){var n=a.ends;return new NormalBoxPath({shape:{points:r?transInit(n,a):n},z2:100})}function isNormalBoxClipped(a,t){for(var r=!0,n=0;n<t.ends.length;n++)if(a.contain(t.ends[n][0],t.ends[n][1])){r=!1;break}return r}function setBoxCommon(a,t,r,n){var o=t.getItemModel(r);a.useStyle(t.getItemVisual(r,"style")),a.style.strokeNoScale=!0,a.__simpleBox=n,setStatesStylesFromModel(a,o);var s=t.getItemLayout(r).sign;each$f(a.states,function(u,c){var f=o.getModel(c),h=getColor(s,f),v=getBorderColor(s,f)||h,d=u.style||(u.style={});h&&(d.fill=h),v&&(d.stroke=v)});var l=o.getModel("emphasis");toggleHoverEmphasis(a,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function transInit(a,t){return map$1(a,function(r){return r=r.slice(),r[1]=t.initBaseline,r})}var LargeBoxPathShape=function(){function a(){}return a}(),LargeBoxPath=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;return n.type="largeCandlestickBox",n}return t.prototype.getDefaultShape=function(){return new LargeBoxPathShape},t.prototype.buildPath=function(r,n){for(var o=n.points,s=0;s<o.length;)if(this.__sign===o[s++]){var l=o[s++];r.moveTo(l,o[s++]),r.lineTo(l,o[s++])}else s+=3},t}(Path);function createLarge(a,t,r,n){var o=a.getData(),s=o.getLayout("largePoints"),l=new LargeBoxPath({shape:{points:s},__sign:1,ignoreCoarsePointer:!0});t.add(l);var u=new LargeBoxPath({shape:{points:s},__sign:-1,ignoreCoarsePointer:!0});t.add(u);var c=new LargeBoxPath({shape:{points:s},__sign:0,ignoreCoarsePointer:!0});t.add(c),setLargeStyle(1,l,a),setLargeStyle(-1,u,a),setLargeStyle(0,c,a),n&&(l.incremental=!0,u.incremental=!0),r&&r.push(l,u)}function setLargeStyle(a,t,r,n){var o=getBorderColor(a,r)||getColor(a,r),s=r.getModel("itemStyle").getItemStyle(SKIP_PROPS);t.useStyle(s),t.style.fill=null,t.style.stroke=o}var CandlestickSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],r}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(r,n,o){var s=n.getItemLayout(r);return s&&o.rect(s.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(SeriesModel);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);function candlestickPreprocessor(a){!a||!isArray$1(a.series)||each$f(a.series,function(t){isObject$3(t)&&t.type==="k"&&(t.type="candlestick")})}var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(a){var t=a.coordinateSystem,r=a.getData(),n=calculateCandleWidth(a,r),o=0,s=1,l=["x","y"],u=r.getDimensionIndex(r.mapDimension(l[o])),c=map$1(r.mapDimensionsAll(l[s]),r.getDimensionIndex,r),f=c[0],h=c[1],v=c[2],d=c[3];if(r.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),u<0||c.length<4)return;return{progress:a.pipelineContext.large?g:p};function p(y,_){for(var S,x=_.getStore();(S=y.next())!=null;){var T=x.get(u,S),b=x.get(f,S),C=x.get(h,S),w=x.get(v,S),M=x.get(d,S),P=Math.min(b,C),L=Math.max(b,C),E=V(P,T),I=V(L,T),R=V(w,T),D=V(M,T),O=[];B(O,I,0),B(O,E,1),O.push(G(D),G(I),G(R),G(E));var $=_.getItemModel(S),N=!!$.get(["itemStyle","borderColorDoji"]);_.setItemLayout(S,{sign:getSign(x,S,b,C,h,N),initBaseline:b>C?I[s]:E[s],ends:O,brushRect:F(w,M,T)})}function V(z,H){var U=[];return U[o]=H,U[s]=z,isNaN(H)||isNaN(z)?[NaN,NaN]:t.dataToPoint(U)}function B(z,H,U){var Y=H.slice(),Z=H.slice();Y[o]=subPixelOptimize(Y[o]+n/2,1,!1),Z[o]=subPixelOptimize(Z[o]-n/2,1,!0),U?z.push(Y,Z):z.push(Z,Y)}function F(z,H,U){var Y=V(z,U),Z=V(H,U);return Y[o]-=n/2,Z[o]-=n/2,{x:Y[0],y:Y[1],width:n,height:Z[1]-Y[1]}}function G(z){return z[o]=subPixelOptimize(z[o],1),z}}function g(y,_){for(var S=createFloat32Array(y.count*4),x=0,T,b=[],C=[],w,M=_.getStore(),P=!!a.get(["itemStyle","borderColorDoji"]);(w=y.next())!=null;){var L=M.get(u,w),E=M.get(f,w),I=M.get(h,w),R=M.get(v,w),D=M.get(d,w);if(isNaN(L)||isNaN(R)||isNaN(D)){S[x++]=NaN,x+=3;continue}S[x++]=getSign(M,w,E,I,h,P),b[o]=L,b[s]=R,T=t.dataToPoint(b,null,C),S[x++]=T?T[0]:NaN,S[x++]=T?T[1]:NaN,b[s]=D,T=t.dataToPoint(b,null,C),S[x++]=T?T[1]:NaN}_.setLayout("largePoints",S)}}};function getSign(a,t,r,n,o,s){var l;return r>n?l=-1:r<n?l=1:l=s?0:t>0?a.get(o,t-1)<=n?1:-1:1,l}function calculateCandleWidth(a,t){var r=a.getBaseAxis(),n,o=r.type==="category"?r.getBandWidth():(n=r.getExtent(),Math.abs(n[1]-n[0])/t.count()),s=parsePercent(retrieve2(a.get("barMaxWidth"),o),o),l=parsePercent(retrieve2(a.get("barMinWidth"),1),o),u=a.get("barWidth");return u!=null?parsePercent(u,o):Math.max(Math.min(o/2,s),l)}function install$A(a){a.registerChartView(CandlestickView),a.registerSeriesModel(CandlestickSeriesModel),a.registerPreprocessor(candlestickPreprocessor),a.registerVisual(candlestickVisual),a.registerLayout(candlestickLayout)}function updateRipplePath(a,t){var r=t.rippleEffectColor||t.color;a.eachChild(function(n){n.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?r:null,fill:t.brushType==="fill"?r:null}})})}var EffectSymbol=function(a){__extends(t,a);function t(r,n){var o=a.call(this)||this,s=new Symbol$1(r,n),l=new Group$3;return o.add(s),o.add(l),o.updateData(r,n),o}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(r){for(var n=r.symbolType,o=r.color,s=r.rippleNumber,l=this.childAt(1),u=0;u<s;u++){var c=createSymbol$1(n,-1,-1,2,2,o);c.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var f=-u/s*r.period+r.effectOffset;c.animate("",!0).when(r.period,{scaleX:r.rippleScale/2,scaleY:r.rippleScale/2}).delay(f).start(),c.animateStyle(!0).when(r.period,{opacity:0}).delay(f).start(),l.add(c)}updateRipplePath(l,r)},t.prototype.updateEffectAnimation=function(r){for(var n=this._effectCfg,o=this.childAt(1),s=["symbolType","period","rippleScale","rippleNumber"],l=0;l<s.length;l++){var u=s[l];if(n[u]!==r[u]){this.stopEffectAnimation(),this.startEffectAnimation(r);return}}updateRipplePath(o,r)},t.prototype.highlight=function(){enterEmphasis(this)},t.prototype.downplay=function(){leaveEmphasis(this)},t.prototype.getSymbolType=function(){var r=this.childAt(0);return r&&r.getSymbolType()},t.prototype.updateData=function(r,n){var o=this,s=r.hostModel;this.childAt(0).updateData(r,n);var l=this.childAt(1),u=r.getItemModel(n),c=r.getItemVisual(n,"symbol"),f=normalizeSymbolSize(r.getItemVisual(n,"symbolSize")),h=r.getItemVisual(n,"style"),v=h&&h.fill,d=u.getModel("emphasis");l.setScale(f),l.traverse(function(_){_.setStyle("fill",v)});var p=normalizeSymbolOffset(r.getItemVisual(n,"symbolOffset"),f);p&&(l.x=p[0],l.y=p[1]);var g=r.getItemVisual(n,"symbolRotate");l.rotation=(g||0)*Math.PI/180||0;var y={};y.showEffectOn=s.get("showEffectOn"),y.rippleScale=u.get(["rippleEffect","scale"]),y.brushType=u.get(["rippleEffect","brushType"]),y.period=u.get(["rippleEffect","period"])*1e3,y.effectOffset=n/r.count(),y.z=s.getShallow("z")||0,y.zlevel=s.getShallow("zlevel")||0,y.symbolType=c,y.color=v,y.rippleEffectColor=u.get(["rippleEffect","color"]),y.rippleNumber=u.get(["rippleEffect","number"]),y.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(y):this.startEffectAnimation(y),this._effectCfg=y):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(_){_==="emphasis"?y.showEffectOn!=="render"&&o.startEffectAnimation(y):_==="normal"&&y.showEffectOn!=="render"&&o.stopEffectAnimation()}),this._effectCfg=y,toggleHoverEmphasis(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},t.prototype.fadeOut=function(r){r&&r()},t}(Group$3),EffectScatterView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},t.prototype.render=function(r,n,o){var s=r.getData(),l=this._symbolDraw;l.updateData(s,{clipShape:this._getClipShape(r)}),this.group.add(l.group)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,o=n&&n.getArea&&n.getArea();return r.get("clip",!0)?o:null},t.prototype.updateTransform=function(r,n,o){var s=r.getData();this.group.dirty();var l=pointsLayout("").reset(r,n,o);l.progress&&l.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(r){var n=r.coordinateSystem;n&&n.getRoamTransform&&(this.group.transform=clone$2(n.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(ChartView),EffectScatterSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return createSeriesData(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(r,n,o){return o.point(n.getItemLayout(r))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(SeriesModel);function install$z(a){a.registerChartView(EffectScatterView),a.registerSeriesModel(EffectScatterSeriesModel),a.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(a){__extends(t,a);function t(r,n,o){var s=a.call(this)||this;return s.add(s.createLine(r,n,o)),s._updateEffectSymbol(r,n),s}return t.prototype.createLine=function(r,n,o){return new Line(r,n,o)},t.prototype._updateEffectSymbol=function(r,n){var o=r.getItemModel(n),s=o.getModel("effect"),l=s.get("symbolSize"),u=s.get("symbol");isArray$1(l)||(l=[l,l]);var c=r.getItemVisual(n,"style"),f=s.get("color")||c&&c.stroke,h=this.childAt(1);this._symbolType!==u&&(this.remove(h),h=createSymbol$1(u,-.5,-.5,1,1,f),h.z2=100,h.culling=!0,this.add(h)),h&&(h.setStyle("shadowColor",f),h.setStyle(s.getItemStyle(["color"])),h.scaleX=l[0],h.scaleY=l[1],h.setColor(f),this._symbolType=u,this._symbolScale=l,this._updateEffectAnimation(r,s,n))},t.prototype._updateEffectAnimation=function(r,n,o){var s=this.childAt(1);if(s){var l=r.getItemLayout(o),u=n.get("period")*1e3,c=n.get("loop"),f=n.get("roundTrip"),h=n.get("constantSpeed"),v=retrieve(n.get("delay"),function(p){return p/r.count()*u/3});if(s.ignore=!0,this._updateAnimationPoints(s,l),h>0&&(u=this._getLineLength(s)/h*1e3),u!==this._period||c!==this._loop||f!==this._roundTrip){s.stopAnimation();var d=void 0;isFunction(v)?d=v(o):d=v,s.__t>0&&(d=-u*s.__t),this._animateSymbol(s,u,d,c,f)}this._period=u,this._loop=c,this._roundTrip=f}},t.prototype._animateSymbol=function(r,n,o,s,l){if(n>0){r.__t=0;var u=this,c=r.animate("",s).when(l?n*2:n,{__t:l?2:1}).delay(o).during(function(){u._updateSymbolPosition(r)});s||c.done(function(){u.remove(r)}),c.start()}},t.prototype._getLineLength=function(r){return dist$1(r.__p1,r.__cp1)+dist$1(r.__cp1,r.__p2)},t.prototype._updateAnimationPoints=function(r,n){r.__p1=n[0],r.__p2=n[1],r.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},t.prototype.updateData=function(r,n,o){this.childAt(0).updateData(r,n,o),this._updateEffectSymbol(r,n)},t.prototype._updateSymbolPosition=function(r){var n=r.__p1,o=r.__p2,s=r.__cp1,l=r.__t<1?r.__t:2-r.__t,u=[r.x,r.y],c=u.slice(),f=quadraticAt$1,h=quadraticDerivativeAt;u[0]=f(n[0],s[0],o[0],l),u[1]=f(n[1],s[1],o[1],l);var v=r.__t<1?h(n[0],s[0],o[0],l):h(o[0],s[0],n[0],1-l),d=r.__t<1?h(n[1],s[1],o[1],l):h(o[1],s[1],n[1],1-l);r.rotation=-Math.atan2(d,v)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=dist$1(c,u)*1.05,l===1&&(u[0]=c[0]+(u[0]-c[0])/2,u[1]=c[1]+(u[1]-c[1])/2)):r.__lastT===1?r.scaleY=2*dist$1(n,u):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=u[0],r.y=u[1]},t.prototype.updateLayout=function(r,n){this.childAt(0).updateLayout(r,n);var o=r.getItemModel(n).getModel("effect");this._updateEffectAnimation(r,o,n)},t}(Group$3),Polyline=function(a){__extends(t,a);function t(r,n,o){var s=a.call(this)||this;return s._createPolyline(r,n,o),s}return t.prototype._createPolyline=function(r,n,o){var s=r.getItemLayout(n),l=new Polyline$1({shape:{points:s}});this.add(l),this._updateCommonStl(r,n,o)},t.prototype.updateData=function(r,n,o){var s=r.hostModel,l=this.childAt(0),u={shape:{points:r.getItemLayout(n)}};updateProps$1(l,u,s,n),this._updateCommonStl(r,n,o)},t.prototype._updateCommonStl=function(r,n,o){var s=this.childAt(0),l=r.getItemModel(n),u=o&&o.emphasisLineStyle,c=o&&o.focus,f=o&&o.blurScope,h=o&&o.emphasisDisabled;if(!o||r.hasItemOption){var v=l.getModel("emphasis");u=v.getModel("lineStyle").getLineStyle(),h=v.get("disabled"),c=v.get("focus"),f=v.get("blurScope")}s.useStyle(r.getItemVisual(n,"style")),s.style.fill=null,s.style.strokeNoScale=!0;var d=s.ensureState("emphasis");d.style=u,toggleHoverEmphasis(this,c,f,h)},t.prototype.updateLayout=function(r,n){var o=this.childAt(0);o.setShape("points",r.getItemLayout(n))},t}(Group$3),EffectPolyline=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return t.prototype.createLine=function(r,n,o){return new Polyline(r,n,o)},t.prototype._updateAnimationPoints=function(r,n){this._points=n;for(var o=[0],s=0,l=1;l<n.length;l++){var u=n[l-1],c=n[l];s+=dist$1(u,c),o.push(s)}if(s===0){this._length=0;return}for(var l=0;l<o.length;l++)o[l]/=s;this._offsets=o,this._length=s},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(r){var n=r.__t<1?r.__t:2-r.__t,o=this._points,s=this._offsets,l=o.length;if(s){var u=this._lastFrame,c;if(n<this._lastFramePercent){var f=Math.min(u+1,l-1);for(c=f;c>=0&&!(s[c]<=n);c--);c=Math.min(c,l-2)}else{for(c=u;c<l&&!(s[c]>n);c++);c=Math.min(c-1,l-2)}var h=(n-s[c])/(s[c+1]-s[c]),v=o[c],d=o[c+1];r.x=v[0]*(1-h)+h*d[0],r.y=v[1]*(1-h)+h*d[1];var p=r.__t<1?d[0]-v[0]:v[0]-d[0],g=r.__t<1?d[1]-v[1]:v[1]-d[1];r.rotation=-Math.atan2(g,p)-Math.PI/2,this._lastFrame=c,this._lastFramePercent=n,r.ignore=!1}},t}(EffectLine),LargeLinesPathShape=function(){function a(){this.polyline=!1,this.curveness=0,this.segs=[]}return a}(),LargeLinesPath=function(a){__extends(t,a);function t(r){var n=a.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:tokens.color.neutral99,fill:null}},t.prototype.getDefaultShape=function(){return new LargeLinesPathShape},t.prototype.buildPath=function(r,n){var o=n.segs,s=n.curveness,l;if(n.polyline)for(l=this._off;l<o.length;){var u=o[l++];if(u>0){r.moveTo(o[l++],o[l++]);for(var c=1;c<u;c++)r.lineTo(o[l++],o[l++])}}else for(l=this._off;l<o.length;){var f=o[l++],h=o[l++],v=o[l++],d=o[l++];if(r.moveTo(f,h),s>0){var p=(f+v)/2-(h-d)*s,g=(h+d)/2-(v-f)*s;r.quadraticCurveTo(p,g,v,d)}else r.lineTo(v,d)}this.incremental&&(this._off=l,this.notClear=!0)},t.prototype.findDataIndex=function(r,n){var o=this.shape,s=o.segs,l=o.curveness,u=this.style.lineWidth;if(o.polyline)for(var c=0,f=0;f<s.length;){var h=s[f++];if(h>0)for(var v=s[f++],d=s[f++],p=1;p<h;p++){var g=s[f++],y=s[f++];if(containStroke$4(v,d,g,y,u,r,n))return c}c++}else for(var c=0,f=0;f<s.length;){var v=s[f++],d=s[f++],g=s[f++],y=s[f++];if(l>0){var _=(v+g)/2-(d-y)*l,S=(d+y)/2-(g-v)*l;if(containStroke$2(v,d,_,S,g,y,u,r,n))return c}else if(containStroke$4(v,d,g,y,u,r,n))return c;c++}return-1},t.prototype.contain=function(r,n){var o=this.transformCoordToLocal(r,n),s=this.getBoundingRect();if(r=o[0],n=o[1],s.contain(r,n)){var l=this.hoverDataIdx=this.findDataIndex(r,n);return l>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,o=n.segs,s=1/0,l=1/0,u=-1/0,c=-1/0,f=0;f<o.length;){var h=o[f++],v=o[f++];s=Math.min(h,s),u=Math.max(h,u),l=Math.min(v,l),c=Math.max(v,c)}r=this._rect=new BoundingRect(s,l,u,c)}return r},t}(Path),LargeLineDraw=function(){function a(){this.group=new Group$3}return a.prototype.updateData=function(t){this._clear();var r=this._create();r.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(r,t)},a.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},a.prototype.incrementalUpdate=function(t,r){var n=this._newAdded[0],o=r.getLayout("linesPoints"),s=n&&n.shape.segs;if(s&&s.length<2e4){var l=s.length,u=new Float32Array(l+o.length);u.set(s),u.set(o,l),n.setShape({segs:u})}else{this._newAdded=[];var c=this._create();c.incremental=!0,c.setShape({segs:o}),this._setCommon(c,r),c.__startIndex=t.start}},a.prototype.remove=function(){this._clear()},a.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},a.prototype._create=function(){var t=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},a.prototype._setCommon=function(t,r,n){var o=r.hostModel;t.setShape({polyline:o.get("polyline"),curveness:o.get(["lineStyle","curveness"])}),t.useStyle(o.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var s=r.getVisual("style");s&&s.stroke&&t.setStyle("stroke",s.stroke),t.setStyle("fill",null);var l=getECData(t);l.seriesIndex=o.seriesIndex,t.on("mousemove",function(u){l.dataIndex=null;var c=t.hoverDataIdx;c>0&&(l.dataIndex=c+t.__startIndex)})},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(a){var t=a.coordinateSystem;if(t){var r=a.get("polyline"),n=a.pipelineContext.large;return{progress:function(o,s){var l=[];if(n){var u=void 0,c=o.end-o.start;if(r){for(var f=0,h=o.start;h<o.end;h++)f+=a.getLineCoordsCount(h);u=new Float32Array(c+f*2)}else u=new Float32Array(c*4);for(var v=0,d=[],h=o.start;h<o.end;h++){var p=a.getLineCoords(h,l);r&&(u[v++]=p);for(var g=0;g<p;g++)d=t.dataToPoint(l[g],!1,d),u[v++]=d[0],u[v++]=d[1]}s.setLayout("linesPoints",u)}else for(var h=o.start;h<o.end;h++){var y=s.getItemModel(h),p=a.getLineCoords(h,l),_=[];if(r)for(var S=0;S<p;S++)_.push(t.dataToPoint(l[S]));else{_[0]=t.dataToPoint(l[0]),_[1]=t.dataToPoint(l[1]);var x=y.get(["lineStyle","curveness"]);+x&&(_[2]=[(_[0][0]+_[1][0])/2-(_[0][1]-_[1][1])*x,(_[0][1]+_[1][1])/2-(_[1][0]-_[0][0])*x])}s.setItemLayout(h,_)}}}}}},LinesView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){var s=r.getData(),l=this._updateLineDraw(s,r),u=r.get("zlevel"),c=r.get(["effect","trailLength"]),f=o.getZr(),h=f.painter.getType()==="svg";h||f.painter.getLayer(u).clear(!0),this._lastZlevel!=null&&!h&&f.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&c>0&&(h||f.configLayer(u,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(c/10+.9,1),0)})),l.updateData(s);var v=r.get("clip",!0)&&createClipPath(r.coordinateSystem,!1,r);v?this.group.setClipPath(v):this.group.removeClipPath(),this._lastZlevel=u,this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,o){var s=r.getData(),l=this._updateLineDraw(s,r);l.incrementalPrepareUpdate(s),this._clearLayer(o),this._finished=!1},t.prototype.incrementalRender=function(r,n,o){this._lineDraw.incrementalUpdate(r,n.getData()),this._finished=r.end===n.getData().count()},t.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},t.prototype.updateTransform=function(r,n,o){var s=r.getData(),l=r.pipelineContext;if(!this._finished||l.large||l.progressiveRender)return{update:!0};var u=linesLayout.reset(r,n,o);u.progress&&u.progress({start:0,end:s.count(),count:s.count()},s),this._lineDraw.updateLayout(),this._clearLayer(o)},t.prototype._updateLineDraw=function(r,n){var o=this._lineDraw,s=this._showEffect(n),l=!!n.get("polyline"),u=n.pipelineContext,c=u.large;return(!o||s!==this._hasEffet||l!==this._isPolyline||c!==this._isLargeDraw)&&(o&&o.remove(),o=this._lineDraw=c?new LargeLineDraw:new LineDraw(l?s?EffectPolyline:Polyline:s?EffectLine:Line),this._hasEffet=s,this._isPolyline=l,this._isLargeDraw=c),this.group.add(o.group),o},t.prototype._showEffect=function(r){return!!r.get(["effect","show"])},t.prototype._clearLayer=function(r){var n=r.getZr(),o=n.painter.getType()==="svg";!o&&this._lastZlevel!=null&&n.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(r,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},t.prototype.dispose=function(r,n){this.remove(r,n)},t.type="lines",t}(ChartView),Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(a){var t=a.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(a.data=map$1(t,function(r){var n=[r[0].coord,r[1].coord],o={coords:n};return r[0].name&&(o.fromName=r[0].name),r[1].name&&(o.toName=r[1].name),mergeAll([o,r[0],r[1]])}))}var LinesSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.init=function(r){r.data=r.data||[],compatEc2(r);var n=this._processFlatCoordsArray(r.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(r.data=new Float32Array(n.count)),a.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(r){if(compatEc2(r),r.data){var n=this._processFlatCoordsArray(r.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(r.data=new Float32Array(n.count))}a.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(r){var n=this._processFlatCoordsArray(r.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,n.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),r.data=new Float32Array(n.count)),this.getRawData().appendData(r.data)},t.prototype._getCoordsFromItemModel=function(r){var n=this.getData().getItemModel(r),o=n.option instanceof Array?n.option:n.getShallow("coords");return o},t.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},t.prototype.getLineCoords=function(r,n){if(this._flatCoordsOffset){for(var o=this._flatCoordsOffset[r*2],s=this._flatCoordsOffset[r*2+1],l=0;l<s;l++)n[l]=n[l]||[],n[l][0]=this._flatCoords[o+l*2],n[l][1]=this._flatCoords[o+l*2+1];return s}else{for(var u=this._getCoordsFromItemModel(r),l=0;l<u.length;l++)n[l]=n[l]||[],n[l][0]=u[l][0],n[l][1]=u[l][1];return u.length}},t.prototype._processFlatCoordsArray=function(r){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),isNumber(r[0])){for(var o=r.length,s=new Uint32Arr(o),l=new Float64Arr(o),u=0,c=0,f=0,h=0;h<o;){f++;var v=r[h++];s[c++]=u+n,s[c++]=v;for(var d=0;d<v;d++){var p=r[h++],g=r[h++];l[u++]=p,l[u++]=g}}return{flatCoordsOffset:new Uint32Array(s.buffer,0,c),flatCoords:l,count:f}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},t.prototype.getInitialData=function(r,n){var o=new SeriesData(["value"],this);return o.hasItemOption=!1,o.initData(r.data,[],function(s,l,u,c){if(s instanceof Array)return NaN;o.hasItemOption=!0;var f=s.value;if(f!=null)return f instanceof Array?f[c]:f}),o},t.prototype.formatTooltip=function(r,n,o){var s=this.getData(),l=s.getItemModel(r),u=l.get("name");if(u)return u;var c=l.get("fromName"),f=l.get("toName"),h=[];return c!=null&&h.push(c),f!=null&&h.push(f),createTooltipMarkup("nameValue",{name:h.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var r=this.getModel("effect"),n=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&n>0?n+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(SeriesModel);function normalize(a){return a instanceof Array||(a=[a,a]),a}var linesVisual={seriesType:"lines",reset:function(a){var t=normalize(a.get("symbol")),r=normalize(a.get("symbolSize")),n=a.getData();n.setVisual("fromSymbol",t&&t[0]),n.setVisual("toSymbol",t&&t[1]),n.setVisual("fromSymbolSize",r&&r[0]),n.setVisual("toSymbolSize",r&&r[1]);function o(s,l){var u=s.getItemModel(l),c=normalize(u.getShallow("symbol",!0)),f=normalize(u.getShallow("symbolSize",!0));c[0]&&s.setItemVisual(l,"fromSymbol",c[0]),c[1]&&s.setItemVisual(l,"toSymbol",c[1]),f[0]&&s.setItemVisual(l,"fromSymbolSize",f[0]),f[1]&&s.setItemVisual(l,"toSymbolSize",f[1])}return{dataEach:n.hasItemOption?o:null}}};function install$y(a){a.registerChartView(LinesView),a.registerSeriesModel(LinesSeriesModel),a.registerLayout(linesLayout),a.registerVisual(linesVisual)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function a(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=platformApi.createCanvas();this.canvas=t}return a.prototype.update=function(t,r,n,o,s,l){var u=this._getBrush(),c=this._getGradient(s,"inRange"),f=this._getGradient(s,"outOfRange"),h=this.pointSize+this.blurSize,v=this.canvas,d=v.getContext("2d"),p=t.length;v.width=r,v.height=n;for(var g=0;g<p;++g){var y=t[g],_=y[0],S=y[1],x=y[2],T=o(x);d.globalAlpha=T,d.drawImage(u,_-h,S-h)}if(!v.width||!v.height)return v;for(var b=d.getImageData(0,0,v.width,v.height),C=b.data,w=0,M=C.length,P=this.minOpacity,L=this.maxOpacity,E=L-P;w<M;){var T=C[w+3]/256,I=Math.floor(T*(GRADIENT_LEVELS-1))*4;if(T>0){var R=l(T)?c:f;T>0&&(T=T*E+P),C[w++]=R[I],C[w++]=R[I+1],C[w++]=R[I+2],C[w++]=R[I+3]*T*256}else w+=4}return d.putImageData(b,0,0),v},a.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),r=this.pointSize+this.blurSize,n=r*2;t.width=n,t.height=n;var o=t.getContext("2d");return o.clearRect(0,0,n,n),o.shadowOffsetX=n,o.shadowBlur=this.blurSize,o.shadowColor=tokens.color.neutral99,o.beginPath(),o.arc(-r,r,this.pointSize,0,Math.PI*2,!0),o.closePath(),o.fill(),t},a.prototype._getGradient=function(t,r){for(var n=this._gradientPixels,o=n[r]||(n[r]=new Uint8ClampedArray(256*4)),s=[0,0,0,0],l=0,u=0;u<256;u++)t[r](u/255,!0,s),o[l++]=s[0],o[l++]=s[1],o[l++]=s[2],o[l++]=s[3];return o},a}();function getIsInPiecewiseRange(a,t,r){var n=a[1]-a[0];t=map$1(t,function(l){return{interval:[(l.interval[0]-a[0])/n,(l.interval[1]-a[0])/n]}});var o=t.length,s=0;return function(l){var u;for(u=s;u<o;u++){var c=t[u].interval;if(c[0]<=l&&l<=c[1]){s=u;break}}if(u===o)for(u=s-1;u>=0;u--){var c=t[u].interval;if(c[0]<=l&&l<=c[1]){s=u;break}}return u>=0&&u<o&&r[u]}}function getIsInContinuousRange(a,t){var r=a[1]-a[0];return t=[(t[0]-a[0])/r,(t[1]-a[0])/r],function(n){return n>=t[0]&&n<=t[1]}}function isGeoCoordSys(a){var t=a.dimensions;return t[0]==="lng"&&t[1]==="lat"}var HeatmapView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){var s;n.eachComponent("visualMap",function(u){u.eachTargetSeries(function(c){c===r&&(s=u)})}),this._progressiveEls=null,this.group.removeAll();var l=r.coordinateSystem;l.type==="cartesian2d"||l.type==="calendar"||l.type==="matrix"?this._renderOnGridLike(r,o,0,r.getData().count()):isGeoCoordSys(l)&&this._renderOnGeo(l,r,s,o)},t.prototype.incrementalPrepareRender=function(r,n,o){this.group.removeAll()},t.prototype.incrementalRender=function(r,n,o,s){var l=n.coordinateSystem;l&&(isGeoCoordSys(l)?this.render(n,o,s):(this._progressiveEls=[],this._renderOnGridLike(n,s,r.start,r.end,!0)))},t.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},t.prototype._renderOnGridLike=function(r,n,o,s,l){var u=r.coordinateSystem,c=isCoordinateSystemType(u,"cartesian2d"),f=isCoordinateSystemType(u,"matrix"),h,v,d,p;if(c){var g=u.getAxis("x"),y=u.getAxis("y");h=g.getBandWidth()+.5,v=y.getBandWidth()+.5,d=g.scale.getExtent(),p=y.scale.getExtent()}for(var _=this.group,S=r.getData(),x=r.getModel(["emphasis","itemStyle"]).getItemStyle(),T=r.getModel(["blur","itemStyle"]).getItemStyle(),b=r.getModel(["select","itemStyle"]).getItemStyle(),C=r.get(["itemStyle","borderRadius"]),w=getLabelStatesModels(r),M=r.getModel("emphasis"),P=M.get("focus"),L=M.get("blurScope"),E=M.get("disabled"),I=c||f?[S.mapDimension("x"),S.mapDimension("y"),S.mapDimension("value")]:[S.mapDimension("time"),S.mapDimension("value")],R=o;R<s;R++){var D=void 0,O=S.getItemVisual(R,"style");if(c){var $=S.get(I[0],R),N=S.get(I[1],R);if(isNaN(S.get(I[2],R))||isNaN($)||isNaN(N)||$<d[0]||$>d[1]||N<p[0]||N>p[1])continue;var V=u.dataToPoint([$,N]);D=new Rect$2({shape:{x:V[0]-h/2,y:V[1]-v/2,width:h,height:v},style:O})}else if(f){var B=u.dataToLayout([S.get(I[0],R),S.get(I[1],R)]).rect;if(eqNaN(B.x))continue;D=new Rect$2({z2:1,shape:B,style:O})}else{if(isNaN(S.get(I[1],R)))continue;var F=u.dataToLayout([S.get(I[0],R)]),B=F.contentRect||F.rect;if(eqNaN(B.x)||eqNaN(B.y))continue;D=new Rect$2({z2:1,shape:B,style:O})}if(S.hasItemOption){var G=S.getItemModel(R),z=G.getModel("emphasis");x=z.getModel("itemStyle").getItemStyle(),T=G.getModel(["blur","itemStyle"]).getItemStyle(),b=G.getModel(["select","itemStyle"]).getItemStyle(),C=G.get(["itemStyle","borderRadius"]),P=z.get("focus"),L=z.get("blurScope"),E=z.get("disabled"),w=getLabelStatesModels(G)}D.shape.r=C;var H=r.getRawValue(R),U="-";H&&H[2]!=null&&(U=H[2]+""),setLabelStyle(D,w,{labelFetcher:r,labelDataIndex:R,defaultOpacity:O.opacity,defaultText:U}),D.ensureState("emphasis").style=x,D.ensureState("blur").style=T,D.ensureState("select").style=b,toggleHoverEmphasis(D,P,L,E),D.incremental=l,l&&(D.states.emphasis.hoverLayer=!0),_.add(D),S.setItemGraphicEl(R,D),this._progressiveEls&&this._progressiveEls.push(D)}},t.prototype._renderOnGeo=function(r,n,o,s){var l=o.targetVisuals.inRange,u=o.targetVisuals.outOfRange,c=n.getData(),f=this._hmLayer||this._hmLayer||new HeatmapLayer;f.blurSize=n.get("blurSize"),f.pointSize=n.get("pointSize"),f.minOpacity=n.get("minOpacity"),f.maxOpacity=n.get("maxOpacity");var h=r.getViewRect().clone(),v=r.getRoamTransform();h.applyTransform(v);var d=Math.max(h.x,0),p=Math.max(h.y,0),g=Math.min(h.width+h.x,s.getWidth()),y=Math.min(h.height+h.y,s.getHeight()),_=g-d,S=y-p,x=[c.mapDimension("lng"),c.mapDimension("lat"),c.mapDimension("value")],T=c.mapArray(x,function(M,P,L){var E=r.dataToPoint([M,P]);return E[0]-=d,E[1]-=p,E.push(L),E}),b=o.getExtent(),C=o.type==="visualMap.continuous"?getIsInContinuousRange(b,o.option.range):getIsInPiecewiseRange(b,o.getPieceList(),o.option.selected);f.update(T,_,S,l.color.getNormalizer(),{inRange:l.color.getColorMapper(),outOfRange:u.color.getColorMapper()},C);var w=new ZRImage({style:{width:_,height:S,x:d,y:p,image:f.canvas},silent:!0});this.group.add(w)},t.type="heatmap",t}(ChartView),HeatmapSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){return createSeriesData(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var r=CoordinateSystemManager.get(this.get("coordinateSystem"));if(r&&r.dimensions)return r.dimensions[0]==="lng"&&r.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar","matrix"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:tokens.color.primary}}},t}(SeriesModel);function install$x(a){a.registerChartView(HeatmapView),a.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){var s=this.group,l=r.getData(),u=this._data,c=r.coordinateSystem,f=c.getBaseAxis(),h=f.isHorizontal(),v=c.master.getRect(),d={ecSize:{width:o.getWidth(),height:o.getHeight()},seriesModel:r,coordSys:c,coordSysExtent:[[v.x,v.x+v.width],[v.y,v.y+v.height]],isHorizontal:h,valueDim:LAYOUT_ATTRS[+h],categoryDim:LAYOUT_ATTRS[1-+h]};l.diff(u).add(function(g){if(l.hasValue(g)){var y=getItemModel(l,g),_=getSymbolMeta(l,g,y,d),S=createBar(l,d,_);l.setItemGraphicEl(g,S),s.add(S),updateCommon(S,d,_)}}).update(function(g,y){var _=u.getItemGraphicEl(y);if(!l.hasValue(g)){s.remove(_);return}var S=getItemModel(l,g),x=getSymbolMeta(l,g,S,d),T=getShapeStr(l,x);_&&T!==_.__pictorialShapeStr&&(s.remove(_),l.setItemGraphicEl(g,null),_=null),_?updateBar(_,d,x):_=createBar(l,d,x,!0),l.setItemGraphicEl(g,_),_.__pictorialSymbolMeta=x,s.add(_),updateCommon(_,d,x)}).remove(function(g){var y=u.getItemGraphicEl(g);y&&removeBar(u,g,y.__pictorialSymbolMeta.animationModel,y)}).execute();var p=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;return p?s.setClipPath(p):s.removeClipPath(),this._data=l,this.group},t.prototype.remove=function(r,n){var o=this.group,s=this._data;r.get("animation")?s&&s.eachItemGraphicEl(function(l){removeBar(s,getECData(l).dataIndex,r,l)}):o.removeAll()},t.type="pictorialBar",t}(ChartView);function getSymbolMeta(a,t,r,n){var o=a.getItemLayout(t),s=r.get("symbolRepeat"),l=r.get("symbolClip"),u=r.get("symbolPosition")||"start",c=r.get("symbolRotate"),f=(c||0)*Math.PI/180||0,h=r.get("symbolPatternSize")||2,v=r.isAnimationEnabled(),d={dataIndex:t,layout:o,itemModel:r,symbolType:a.getItemVisual(t,"symbol")||"circle",style:a.getItemVisual(t,"style"),symbolClip:l,symbolRepeat:s,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:h,rotation:f,animationModel:v?r:null,hoverScale:v&&r.get(["emphasis","scale"]),z2:r.getShallow("z",!0)||0};prepareBarLength(r,s,o,n,d),prepareSymbolSize(a,t,o,s,l,d.boundingLength,d.pxSign,h,n,d),prepareLineWidth(r,d.symbolScale,f,n,d);var p=d.symbolSize,g=normalizeSymbolOffset(r.get("symbolOffset"),p);return prepareLayoutInfo(r,p,o,s,l,g,u,d.valueLineWidth,d.boundingLength,d.repeatCutLength,n,d),d}function prepareBarLength(a,t,r,n,o){var s=n.valueDim,l=a.get("symbolBoundingData"),u=n.coordSys.getOtherAxis(n.coordSys.getBaseAxis()),c=u.toGlobalCoord(u.dataToCoord(0)),f=1-+(r[s.wh]<=0),h;if(isArray$1(l)){var v=[convertToCoordOnAxis(u,l[0])-c,convertToCoordOnAxis(u,l[1])-c];v[1]<v[0]&&v.reverse(),h=v[f]}else l!=null?h=convertToCoordOnAxis(u,l)-c:t?h=n.coordSysExtent[s.index][f]-c:h=r[s.wh];o.boundingLength=h,t&&(o.repeatCutLength=r[s.wh]);var d=s.xy==="x",p=u.inverse;o.pxSign=d&&!p||!d&&p?h>=0?1:-1:h>0?1:-1}function convertToCoordOnAxis(a,t){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(t)))}function prepareSymbolSize(a,t,r,n,o,s,l,u,c,f){var h=c.valueDim,v=c.categoryDim,d=Math.abs(r[v.wh]),p=a.getItemVisual(t,"symbolSize"),g;isArray$1(p)?g=p.slice():p==null?g=["100%","100%"]:g=[p,p],g[v.index]=parsePercent(g[v.index],d),g[h.index]=parsePercent(g[h.index],n?d:Math.abs(s)),f.symbolSize=g;var y=f.symbolScale=[g[0]/u,g[1]/u];y[h.index]*=(c.isHorizontal?-1:1)*l}function prepareLineWidth(a,t,r,n,o){var s=a.get(BAR_BORDER_WIDTH_QUERY)||0;s&&(pathForLineWidth.attr({scaleX:t[0],scaleY:t[1],rotation:r}),pathForLineWidth.updateTransform(),s/=pathForLineWidth.getLineScale(),s*=t[n.valueDim.index]),o.valueLineWidth=s||0}function prepareLayoutInfo(a,t,r,n,o,s,l,u,c,f,h,v){var d=h.categoryDim,p=h.valueDim,g=v.pxSign,y=Math.max(t[p.index]+u,0),_=y;if(n){var S=Math.abs(c),x=retrieve(a.get("symbolMargin"),"15%")+"",T=!1;x.lastIndexOf("!")===x.length-1&&(T=!0,x=x.slice(0,x.length-1));var b=parsePercent(x,t[p.index]),C=Math.max(y+b*2,0),w=T?0:b*2,M=isNumeric(n),P=M?n:toIntTimes((S+w)/C),L=S-P*y;b=L/2/(T?P:Math.max(P-1,1)),C=y+b*2,w=T?0:b*2,!M&&n!=="fixed"&&(P=f?toIntTimes((Math.abs(f)+w)/C):0),_=P*C-w,v.repeatTimes=P,v.symbolMargin=b}var E=g*(_/2),I=v.pathPosition=[];I[d.index]=r[d.wh]/2,I[p.index]=l==="start"?E:l==="end"?c-E:c/2,s&&(I[0]+=s[0],I[1]+=s[1]);var R=v.bundlePosition=[];R[d.index]=r[d.xy],R[p.index]=r[p.xy];var D=v.barRectShape=extend({},r);D[p.wh]=g*Math.max(Math.abs(r[p.wh]),Math.abs(I[p.index]+E)),D[d.wh]=r[d.wh];var O=v.clipShape={};O[d.xy]=-r[d.xy],O[d.wh]=h.ecSize[d.wh],O[p.xy]=0,O[p.wh]=r[p.wh]}function createPath(a){var t=a.symbolPatternSize,r=createSymbol$1(a.symbolType,-t/2,-t/2,t,t);return r.attr({culling:!0}),r.type!=="image"&&r.setStyle({strokeNoScale:!0}),r}function createOrUpdateRepeatSymbols(a,t,r,n){var o=a.__pictorialBundle,s=r.symbolSize,l=r.valueLineWidth,u=r.pathPosition,c=t.valueDim,f=r.repeatTimes||0,h=0,v=s[t.valueDim.index]+l+r.symbolMargin*2;for(eachPath(a,function(y){y.__pictorialAnimationIndex=h,y.__pictorialRepeatTimes=f,h<f?updateAttr(y,null,g(h),r,n):updateAttr(y,null,{scaleX:0,scaleY:0},r,n,function(){o.remove(y)}),h++});h<f;h++){var d=createPath(r);d.__pictorialAnimationIndex=h,d.__pictorialRepeatTimes=f,o.add(d);var p=g(h);updateAttr(d,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},r,n)}function g(y){var _=u.slice(),S=r.pxSign,x=y;return(r.symbolRepeatDirection==="start"?S>0:S<0)&&(x=f-1-y),_[c.index]=v*(x-f/2+.5)+u[c.index],{x:_[0],y:_[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation}}}function createOrUpdateSingleSymbol(a,t,r,n){var o=a.__pictorialBundle,s=a.__pictorialMainPath;s?updateAttr(s,null,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation},r,n):(s=a.__pictorialMainPath=createPath(r),o.add(s),updateAttr(s,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:0,scaleY:0,rotation:r.rotation},{scaleX:r.symbolScale[0],scaleY:r.symbolScale[1]},r,n))}function createOrUpdateBarRect(a,t,r){var n=extend({},t.barRectShape),o=a.__pictorialBarRect;o?updateAttr(o,null,{shape:n},t,r):(o=a.__pictorialBarRect=new Rect$2({z2:2,shape:n,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),o.disableMorphing=!0,a.add(o))}function createOrUpdateClip(a,t,r,n){if(r.symbolClip){var o=a.__pictorialClipPath,s=extend({},r.clipShape),l=t.valueDim,u=r.animationModel,c=r.dataIndex;if(o)updateProps$1(o,{shape:s},u,c);else{s[l.wh]=0,o=new Rect$2({shape:s}),a.__pictorialBundle.setClipPath(o),a.__pictorialClipPath=o;var f={};f[l.wh]=r.clipShape[l.wh],graphic[n?"updateProps":"initProps"](o,{shape:f},u,c)}}}function getItemModel(a,t){var r=a.getItemModel(t);return r.getAnimationDelayParams=getAnimationDelayParams,r.isAnimationEnabled=isAnimationEnabled,r}function getAnimationDelayParams(a){return{index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(a,t,r,n){var o=new Group$3,s=new Group$3;return o.add(s),o.__pictorialBundle=s,s.x=r.bundlePosition[0],s.y=r.bundlePosition[1],r.symbolRepeat?createOrUpdateRepeatSymbols(o,t,r):createOrUpdateSingleSymbol(o,t,r),createOrUpdateBarRect(o,r,n),createOrUpdateClip(o,t,r,n),o.__pictorialShapeStr=getShapeStr(a,r),o.__pictorialSymbolMeta=r,o}function updateBar(a,t,r){var n=r.animationModel,o=r.dataIndex,s=a.__pictorialBundle;updateProps$1(s,{x:r.bundlePosition[0],y:r.bundlePosition[1]},n,o),r.symbolRepeat?createOrUpdateRepeatSymbols(a,t,r,!0):createOrUpdateSingleSymbol(a,t,r,!0),createOrUpdateBarRect(a,r,!0),createOrUpdateClip(a,t,r,!0)}function removeBar(a,t,r,n){var o=n.__pictorialBarRect;o&&o.removeTextContent();var s=[];eachPath(n,function(l){s.push(l)}),n.__pictorialMainPath&&s.push(n.__pictorialMainPath),n.__pictorialClipPath&&(r=null),each$f(s,function(l){removeElement(l,{scaleX:0,scaleY:0},r,t,function(){n.parent&&n.parent.remove(n)})}),a.setItemGraphicEl(t,null)}function getShapeStr(a,t){return[a.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function eachPath(a,t,r){each$f(a.__pictorialBundle.children(),function(n){n!==a.__pictorialBarRect&&t.call(r,n)})}function updateAttr(a,t,r,n,o,s){t&&a.attr(t),n.symbolClip&&!o?r&&a.attr(r):r&&graphic[o?"updateProps":"initProps"](a,r,n.animationModel,n.dataIndex,s)}function updateCommon(a,t,r){var n=r.dataIndex,o=r.itemModel,s=o.getModel("emphasis"),l=s.getModel("itemStyle").getItemStyle(),u=o.getModel(["blur","itemStyle"]).getItemStyle(),c=o.getModel(["select","itemStyle"]).getItemStyle(),f=o.getShallow("cursor"),h=s.get("focus"),v=s.get("blurScope"),d=s.get("scale");eachPath(a,function(y){if(y instanceof ZRImage){var _=y.style;y.useStyle(extend({image:_.image,x:_.x,y:_.y,width:_.width,height:_.height},r.style))}else y.useStyle(r.style);var S=y.ensureState("emphasis");S.style=l,d&&(S.scaleX=y.scaleX*1.1,S.scaleY=y.scaleY*1.1),y.ensureState("blur").style=u,y.ensureState("select").style=c,f&&(y.cursor=f),y.z2=r.z2});var p=t.valueDim.posDesc[+(r.boundingLength>0)],g=a.__pictorialBarRect;g.ignoreClip=!0,setLabelStyle(g,getLabelStatesModels(o),{labelFetcher:t.seriesModel,labelDataIndex:n,defaultText:getDefaultLabel(t.seriesModel.getData(),n),inheritColor:r.style.fill,defaultOpacity:r.style.opacity,defaultOutsidePosition:p}),toggleHoverEmphasis(a,h,v,s.get("disabled"))}function toIntTimes(a){var t=Math.round(a);return Math.abs(a-t)<1e-4?t:Math.ceil(a)}var PictorialBarSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r.defaultSymbol="roundRect",r}return t.prototype.getInitialData=function(r){return r.stack=null,a.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:tokens.color.primary}}}),t}(BaseBarSeriesModel);function install$w(a){a.registerChartView(PictorialBarView),a.registerSeriesModel(PictorialBarSeriesModel),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,curry$1(layout$2,"pictorialBar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r._layers=[],r}return t.prototype.render=function(r,n,o){var s=r.getData(),l=this,u=this.group,c=r.getLayerSeries(),f=s.getLayout("layoutInfo"),h=f.rect,v=f.boundaryGap;u.x=0,u.y=h.y+v[0];function d(_){return _.name}var p=new DataDiffer(this._layersSeries||[],c,d,d),g=[];p.add(bind$1(y,this,"add")).update(bind$1(y,this,"update")).remove(bind$1(y,this,"remove")).execute();function y(_,S,x){var T=l._layers;if(_==="remove"){u.remove(T[S]);return}for(var b=[],C=[],w,M=c[S].indices,P=0;P<M.length;P++){var L=s.getItemLayout(M[P]),E=L.x,I=L.y0,R=L.y;b.push(E,I),C.push(E,I+R),w=s.getItemVisual(M[P],"style")}var D,O=s.getItemLayout(M[0]),$=r.getModel("label"),N=$.get("margin"),V=r.getModel("emphasis");if(_==="add"){var B=g[S]=new Group$3;D=new ECPolygon({shape:{points:b,stackedOnPoints:C,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),B.add(D),u.add(B),r.isAnimationEnabled()&&D.setClipPath(createGridClipShape(D.getBoundingRect(),r,function(){D.removeClipPath()}))}else{var B=T[x];D=B.childAt(0),u.add(B),g[S]=B,updateProps$1(D,{shape:{points:b,stackedOnPoints:C}},r),saveOldStyle(D)}setLabelStyle(D,getLabelStatesModels(r),{labelDataIndex:M[P-1],defaultText:s.getName(M[P-1]),inheritColor:w.fill},{normal:{verticalAlign:"middle"}}),D.setTextConfig({position:null,local:!0});var F=D.getTextContent();F&&(F.x=O.x-N,F.y=O.y0+O.y/2),D.useStyle(w),s.setItemGraphicEl(S,D),setStatesStylesFromModel(D,r),toggleHoverEmphasis(D,V.get("focus"),V.get("blurScope"),V.get("disabled"))}this._layersSeries=c,this._layers=g},t.type="themeRiver",t}(ChartView);function createGridClipShape(a,t,r){var n=new Rect$2({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return initProps(n,{shape:{x:a.x-50,width:a.width+100,height:a.height+20}},t,r),n}var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},t.prototype.fixData=function(r){var n=r.length,o={},s=groupData(r,function(d){return o.hasOwnProperty(d[0]+"")||(o[d[0]+""]=-1),d[2]}),l=[];s.buckets.each(function(d,p){l.push({name:p,dataList:d})});for(var u=l.length,c=0;c<u;++c){for(var f=l[c].name,h=0;h<l[c].dataList.length;++h){var v=l[c].dataList[h][0]+"";o[v]=c}for(var v in o)o.hasOwnProperty(v)&&o[v]!==c&&(o[v]=c,r[n]=[v,0,f],n++)}return r},t.prototype.getInitialData=function(r,n){for(var o=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],s=o.get("type"),l=filter(r.data,function(g){return g[2]!==void 0}),u=this.fixData(l||[]),c=[],f=this.nameMap=createHashMap(),h=0,v=0;v<u.length;++v)c.push(u[v][DATA_NAME_INDEX]),f.get(u[v][DATA_NAME_INDEX])||(f.set(u[v][DATA_NAME_INDEX],h),h++);var d=prepareSeriesDataSchema(u,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(s)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,p=new SeriesData(d,this);return p.initData(u),p},t.prototype.getLayerSeries=function(){for(var r=this.getData(),n=r.count(),o=[],s=0;s<n;++s)o[s]=s;var l=r.mapDimension("single"),u=groupData(o,function(f){return r.get("name",f)}),c=[];return u.buckets.each(function(f,h){f.sort(function(v,d){return r.get(l,v)-r.get(l,d)}),c.push({name:h,indices:f})}),c},t.prototype.getAxisTooltipData=function(r,n,o){isArray$1(r)||(r=r?[r]:[]);for(var s=this.getData(),l=this.getLayerSeries(),u=[],c=l.length,f,h=0;h<c;++h){for(var v=Number.MAX_VALUE,d=-1,p=l[h].indices.length,g=0;g<p;++g){var y=s.get(r[0],l[h].indices[g]),_=Math.abs(y-n);_<=v&&(f=y,v=_,d=l[h].indices[g])}u.push(d)}return{dataIndices:u,nestestValue:f}},t.prototype.formatTooltip=function(r,n,o){var s=this.getData(),l=s.getName(r),u=s.get(s.mapDimension("value"),r);return createTooltipMarkup("nameValue",{name:l,value:u})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(SeriesModel);function themeRiverLayout(a,t){a.eachSeriesByType("themeRiver",function(r){var n=r.getData(),o=r.coordinateSystem,s={},l=o.getRect();s.rect=l;var u=r.get("boundaryGap"),c=o.getAxis();if(s.boundaryGap=u,c.orient==="horizontal"){u[0]=parsePercent(u[0],l.height),u[1]=parsePercent(u[1],l.height);var f=l.height-u[0]-u[1];doThemeRiverLayout(n,r,f)}else{u[0]=parsePercent(u[0],l.width),u[1]=parsePercent(u[1],l.width);var h=l.width-u[0]-u[1];doThemeRiverLayout(n,r,h)}n.setLayout("layoutInfo",s)})}function doThemeRiverLayout(a,t,r){if(a.count())for(var n=t.coordinateSystem,o=t.getLayerSeries(),s=a.mapDimension("single"),l=a.mapDimension("value"),u=map$1(o,function(_){return map$1(_.indices,function(S){var x=n.dataToPoint(a.get(s,S));return x[1]=a.get(l,S),x})}),c=computeBaseline(u),f=c.y0,h=r/c.max,v=o.length,d=o[0].indices.length,p,g=0;g<d;++g){p=f[g]*h,a.setItemLayout(o[0].indices[g],{layerIndex:0,x:u[0][g][0],y0:p,y:u[0][g][1]*h});for(var y=1;y<v;++y)p+=u[y-1][g][1]*h,a.setItemLayout(o[y].indices[g],{layerIndex:y,x:u[y][g][0],y0:p,y:u[y][g][1]*h})}}function computeBaseline(a){for(var t=a.length,r=a[0].length,n=[],o=[],s=0,l=0;l<r;++l){for(var u=0,c=0;c<t;++c)u+=a[c][l][1];u>s&&(s=u),n.push(u)}for(var f=0;f<r;++f)o[f]=(s-n[f])/2;s=0;for(var h=0;h<r;++h){var v=n[h]+o[h];v>s&&(s=v)}return{y0:o,max:s}}function install$v(a){a.registerChartView(ThemeRiverView),a.registerSeriesModel(ThemeRiverSeriesModel),a.registerLayout(themeRiverLayout),a.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(a){__extends(t,a);function t(r,n,o,s){var l=a.call(this)||this;l.z2=DEFAULT_SECTOR_Z,l.textConfig={inside:!0},getECData(l).seriesIndex=n.seriesIndex;var u=new ZRText({z2:DEFAULT_TEXT_Z,silent:r.getModel().get(["label","silent"])});return l.setTextContent(u),l.updateData(!0,r,n,o,s),l}return t.prototype.updateData=function(r,n,o,s,l){this.node=n,n.piece=this,o=o||this._seriesModel,s=s||this._ecModel;var u=this;getECData(u).dataIndex=n.dataIndex;var c=n.getModel(),f=c.getModel("emphasis"),h=n.getLayout(),v=extend({},h);v.label=null;var d=n.getVisual("style");d.lineJoin="bevel";var p=n.getVisual("decal");p&&(d.decal=createOrUpdatePatternFromDecal(p,l));var g=getSectorCornerRadius(c.getModel("itemStyle"),v,!0);extend(v,g),each$f(SPECIAL_STATES,function(x){var T=u.ensureState(x),b=c.getModel([x,"itemStyle"]);T.style=b.getItemStyle();var C=getSectorCornerRadius(b,v);C&&(T.shape=C)}),r?(u.setShape(v),u.shape.r=h.r0,initProps(u,{shape:{r:h.r}},o,n.dataIndex)):(updateProps$1(u,{shape:v},o),saveOldStyle(u)),u.useStyle(d),this._updateLabel(o);var y=c.getShallow("cursor");y&&u.attr("cursor",y),this._seriesModel=o||this._seriesModel,this._ecModel=s||this._ecModel;var _=f.get("focus"),S=_==="relative"?concatArray(n.getAncestorsIndices(),n.getDescendantIndices()):_==="ancestor"?n.getAncestorsIndices():_==="descendant"?n.getDescendantIndices():_;toggleHoverEmphasis(this,S,f.get("blurScope"),f.get("disabled"))},t.prototype._updateLabel=function(r){var n=this,o=this.node.getModel(),s=o.getModel("label"),l=this.node.getLayout(),u=l.endAngle-l.startAngle,c=(l.startAngle+l.endAngle)/2,f=Math.cos(c),h=Math.sin(c),v=this,d=v.getTextContent(),p=this.node.dataIndex,g=s.get("minAngle")/180*Math.PI,y=s.get("show")&&!(g!=null&&Math.abs(u)<g);d.ignore=!y,each$f(DISPLAY_STATES,function(S){var x=S==="normal"?o.getModel("label"):o.getModel([S,"label"]),T=S==="normal",b=T?d:d.ensureState(S),C=r.getFormattedLabel(p,S);T&&(C=C||n.node.name),b.style=createTextStyle(x,{},null,S!=="normal",!0),C&&(b.style.text=C);var w=x.get("show");w!=null&&!T&&(b.ignore=!w);var M=_(x,"position"),P=T?v:v.states[S],L=P.style.fill;P.textConfig={outsideFill:x.get("color")==="inherit"?L:null,inside:M!=="outside"};var E,I=_(x,"distance")||0,R=_(x,"align"),D=_(x,"rotate"),O=Math.PI*.5,$=Math.PI*1.5,N=normalizeRadian(D==="tangential"?Math.PI/2-c:c),V=N>O&&!isRadianAroundZero(N-O)&&N<$;M==="outside"?(E=l.r+I,R=V?"right":"left"):!R||R==="center"?(u===2*Math.PI&&l.r0===0?E=0:E=(l.r+l.r0)/2,R="center"):R==="left"?(E=l.r0+I,R=V?"right":"left"):R==="right"&&(E=l.r-I,R=V?"left":"right"),b.style.align=R,b.style.verticalAlign=_(x,"verticalAlign")||"middle",b.x=E*f+l.cx,b.y=E*h+l.cy;var B=0;D==="radial"?B=normalizeRadian(-c)+(V?Math.PI:0):D==="tangential"?B=normalizeRadian(Math.PI/2-c)+(V?Math.PI:0):isNumber(D)&&(B=D*Math.PI/180),b.rotation=normalizeRadian(B)});function _(S,x){var T=S.get(x);return T??s.get(x)}d.dirtyStyle()},t}(Sector),ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(a){a.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"sunburst",query:t},n);function n(o,s){var l=retrieveTargetInfo(t,[ROOT_TO_NODE_ACTION],o);if(l){var u=o.getViewRoot();u&&(t.direction=aboveViewRoot(u,l.node)?"rollUp":"drillDown"),o.resetViewRoot(l.node)}}}),a.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(t,r,n){t=extend({},t),r.eachComponent({mainType:"series",subType:"sunburst",query:t},o);function o(s){var l=retrieveTargetInfo(t,[HIGHLIGHT_ACTION],s);l&&(t.dataIndex=l.node.dataIndex)}n.dispatchAction(extend(t,{type:"highlight"}))}),a.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(t,r,n){t=extend({},t),n.dispatchAction(extend(t,{type:"downplay"}))})}var SunburstView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o,s){var l=this;this.seriesModel=r,this.api=o,this.ecModel=n;var u=r.getData(),c=u.tree.root,f=r.getViewRoot(),h=this.group,v=r.get("renderLabelForZeroData"),d=[];f.eachNode(function(x){d.push(x)});var p=this._oldChildren||[];g(d,p),S(c,f),this._initEvents(),this._oldChildren=d;function g(x,T){if(x.length===0&&T.length===0)return;new DataDiffer(T,x,b,b).add(C).update(C).remove(curry$1(C,null)).execute();function b(w){return w.getId()}function C(w,M){var P=w==null?null:x[w],L=M==null?null:T[M];y(P,L)}}function y(x,T){if(!v&&x&&!x.getValue()&&(x=null),x!==c&&T!==c){if(T&&T.piece)x?(T.piece.updateData(!1,x,r,n,o),u.setItemGraphicEl(x.dataIndex,T.piece)):_(T);else if(x){var b=new SunburstPiece(x,r,n,o);h.add(b),u.setItemGraphicEl(x.dataIndex,b)}}}function _(x){x&&x.piece&&(h.remove(x.piece),x.piece=null)}function S(x,T){T.depth>0?(l.virtualPiece?l.virtualPiece.updateData(!1,x,r,n,o):(l.virtualPiece=new SunburstPiece(x,r,n,o),h.add(l.virtualPiece)),T.piece.off("click"),l.virtualPiece.on("click",function(b){l._rootToNode(T.parentNode)})):l.virtualPiece&&(h.remove(l.virtualPiece),l.virtualPiece=null)}},t.prototype._initEvents=function(){var r=this;this.group.off("click"),this.group.on("click",function(n){var o=!1,s=r.seriesModel.getViewRoot();s.eachNode(function(l){if(!o&&l.piece&&l.piece===n.target){var u=l.getModel().get("nodeClick");if(u==="rootToNode")r._rootToNode(l);else if(u==="link"){var c=l.getModel(),f=c.get("link");if(f){var h=c.get("target",!0)||"_blank";windowOpen(f,h)}}o=!0}})})},t.prototype._rootToNode=function(r){r!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:r})},t.prototype.containPoint=function(r,n){var o=n.getData(),s=o.getItemLayout(0);if(s){var l=r[0]-s.cx,u=r[1]-s.cy,c=Math.sqrt(l*l+u*u);return c<=s.r&&c>=s.r0}},t.type="sunburst",t}(ChartView),SunburstSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r,n){var o={name:r.name,children:r.data};completeTreeValue(o);var s=this._levelModels=map$1(r.levels||[],function(c){return new Model(c,this,n)},this),l=Tree.createTree(o,this,u);function u(c){c.wrapMethod("getItemModel",function(f,h){var v=l.getNodeByDataIndex(h),d=s[v.depth];return d&&(f.parentModel=d),f})}return l.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(r){var n=a.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(r);return n.treePathInfo=wrapTreePathInfo(o,this),n},t.prototype.getLevelModel=function(r){return this._levelModels&&this._levelModels[r.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var n=this.getRawData().tree.root;(!r||r!==n&&!n.contains(r))&&(this._viewRoot=n)},t.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(SeriesModel);function completeTreeValue(a){var t=0;each$f(a.children,function(n){completeTreeValue(n);var o=n.value;isArray$1(o)&&(o=o[0]),t+=o});var r=a.value;isArray$1(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=t),r<0&&(r=0),isArray$1(a.value)?a.value[0]=r:a.value=r}var RADIAN=Math.PI/180;function sunburstLayout(a,t,r){t.eachSeriesByType(a,function(n){var o=n.get("center"),s=n.get("radius");isArray$1(s)||(s=[0,s]),isArray$1(o)||(o=[o,o]);var l=r.getWidth(),u=r.getHeight(),c=Math.min(l,u),f=parsePercent(o[0],l),h=parsePercent(o[1],u),v=parsePercent(s[0],c/2),d=parsePercent(s[1],c/2),p=-n.get("startAngle")*RADIAN,g=n.get("minAngle")*RADIAN,y=n.getData().tree.root,_=n.getViewRoot(),S=_.depth,x=n.get("sort");x!=null&&initChildren(_,x);var T=0;each$f(_.children,function(N){!isNaN(N.getValue())&&T++});var b=_.getValue(),C=Math.PI/(b||T)*2,w=_.depth>0,M=_.height-(w?-1:1),P=(d-v)/(M||1),L=n.get("clockwise"),E=n.get("stillShowZeroSum"),I=L?1:-1,R=function(N,V){if(N){var B=V;if(N!==y){var F=N.getValue(),G=b===0&&E?C:F*C;G<g&&(G=g),B=V+I*G;var z=N.depth-S-(w?-1:1),H=v+P*z,U=v+P*(z+1),Y=n.getLevelModel(N);if(Y){var Z=Y.get("r0",!0),J=Y.get("r",!0),ee=Y.get("radius",!0);ee!=null&&(Z=ee[0],J=ee[1]),Z!=null&&(H=parsePercent(Z,c/2)),J!=null&&(U=parsePercent(J,c/2))}N.setLayout({angle:G,startAngle:V,endAngle:B,clockwise:L,cx:f,cy:h,r0:H,r:U})}if(N.children&&N.children.length){var K=0;each$f(N.children,function(X){K+=R(X,V+K)})}return B-V}};if(w){var D=v,O=v+P,$=Math.PI*2;y.setLayout({angle:$,startAngle:p,endAngle:p+$,clockwise:L,cx:f,cy:h,r0:D,r:O})}R(_,p)})}function initChildren(a,t){var r=a.children||[];a.children=sort(r,t),r.length&&each$f(a.children,function(n){initChildren(n,t)})}function sort(a,t){if(isFunction(t)){var r=map$1(a,function(o,s){var l=o.getValue();return{params:{depth:o.depth,height:o.height,dataIndex:o.dataIndex,getValue:function(){return l}},index:s}});return r.sort(function(o,s){return t(o.params,s.params)}),map$1(r,function(o){return a[o.index]})}else{var n=t==="asc";return a.sort(function(o,s){var l=(o.getValue()-s.getValue())*(n?1:-1);return l===0?(o.dataIndex-s.dataIndex)*(n?-1:1):l})}}function sunburstVisual(a){var t={};function r(n,o,s){if(n.depth===0)return tokens.color.neutral50;for(var l=n;l&&l.depth>1;)l=l.parentNode;var u=o.getColorFromPalette(l.name||l.dataIndex+"",t);return n.depth>1&&isString(u)&&(u=lift(u,(n.depth-1)/(s-1)*.5)),u}a.eachSeriesByType("sunburst",function(n){var o=n.getData(),s=o.tree;s.eachNode(function(l){var u=l.getModel(),c=u.getModel("itemStyle").getItemStyle();c.fill||(c.fill=r(l,n,s.root.height));var f=o.ensureUniqueItemVisual(l.dataIndex,"style");extend(f,c)})})}function install$u(a){a.registerChartView(SunburstView),a.registerSeriesModel(SunburstSeriesModel),a.registerLayout(curry$1(sunburstLayout,"sunburst")),a.registerProcessor(curry$1(dataFilter$1,"sunburst")),a.registerVisual(sunburstVisual),installSunburstAction(a)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,n){return createSeriesData(null,this)},t.prototype.getDataParams=function(r,n,o){var s=a.prototype.getDataParams.call(this,r,n);return o&&(s.info=customInnerStore(o).info),s},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(SeriesModel);function dataToCoordSize$3(a,t){return t=t||[0,0],map$1(["x","y"],function(r,n){var o=this.getAxis(r),s=t[n],l=a[n]/2;return o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(s-l)-o.dataToCoord(s+l))},this)}function cartesianPrepareCustom(a){var t=a.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return a.dataToPoint(r)},size:bind$1(dataToCoordSize$3,a)}}}function dataToCoordSize$2(a,t){return t=t||[0,0],map$1([0,1],function(r){var n=t[r],o=a[r]/2,s=[],l=[];return s[r]=n-o,l[r]=n+o,s[1-r]=l[1-r]=t[1-r],Math.abs(this.dataToPoint(s)[r]-this.dataToPoint(l)[r])},this)}function geoPrepareCustom(a){var t=a.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:a.getZoom()},api:{coord:function(r){return a.dataToPoint(r)},size:bind$1(dataToCoordSize$2,a)}}}function dataToCoordSize$1(a,t){var r=this.getAxis(),n=t instanceof Array?t[0]:t,o=(a instanceof Array?a[0]:a)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(n-o)-r.dataToCoord(n+o))}function singlePrepareCustom(a){var t=a.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return a.dataToPoint(r)},size:bind$1(dataToCoordSize$1,a)}}}function dataToCoordSize(a,t){return t=t||[0,0],map$1(["Radius","Angle"],function(r,n){var o="get"+r+"Axis",s=this[o](),l=t[n],u=a[n]/2,c=s.type==="category"?s.getBandWidth():Math.abs(s.dataToCoord(l-u)-s.dataToCoord(l+u));return r==="Angle"&&(c=c*Math.PI/180),c},this)}function polarPrepareCustom(a){var t=a.getRadiusAxis(),r=a.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:n[1],r0:n[0]},api:{coord:function(o){var s=t.dataToRadius(o[0]),l=r.dataToAngle(o[1]),u=a.coordToPoint([s,l]);return u.push(s,l*Math.PI/180),u},size:bind$1(dataToCoordSize,a)}}}function calendarPrepareCustom(a){var t=a.getRect(),r=a.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(n,o){return a.dataToPoint(n,o)},layout:function(n,o){return a.dataToLayout(n,o)}}}}function matrixPrepareCustom(a){var t=a.getRect();return{coordSys:{type:"matrix",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r,n){return a.dataToPoint(r,n)},layout:function(r,n){return a.dataToLayout(r,n)}}}}function isEC4CompatibleStyle(a,t,r,n){return a&&(a.legacy||a.legacy!==!1&&!r&&!n&&t!=="tspan"&&(t==="text"||hasOwn(a,"text")))}function convertFromEC4CompatibleStyle(a,t,r){var n=a,o,s,l;if(t==="text")l=n;else{l={},hasOwn(n,"text")&&(l.text=n.text),hasOwn(n,"rich")&&(l.rich=n.rich),hasOwn(n,"textFill")&&(l.fill=n.textFill),hasOwn(n,"textStroke")&&(l.stroke=n.textStroke),hasOwn(n,"fontFamily")&&(l.fontFamily=n.fontFamily),hasOwn(n,"fontSize")&&(l.fontSize=n.fontSize),hasOwn(n,"fontStyle")&&(l.fontStyle=n.fontStyle),hasOwn(n,"fontWeight")&&(l.fontWeight=n.fontWeight),s={type:"text",style:l,silent:!0},o={};var u=hasOwn(n,"textPosition");r?o.position=u?n.textPosition:"inside":u&&(o.position=n.textPosition),hasOwn(n,"textPosition")&&(o.position=n.textPosition),hasOwn(n,"textOffset")&&(o.offset=n.textOffset),hasOwn(n,"textRotation")&&(o.rotation=n.textRotation),hasOwn(n,"textDistance")&&(o.distance=n.textDistance)}return convertEC4CompatibleRichItem(l,a),each$f(l.rich,function(c){convertEC4CompatibleRichItem(c,c)}),{textConfig:o,textContent:s}}function convertEC4CompatibleRichItem(a,t){t&&(t.font=t.textFont||t.font,hasOwn(t,"textStrokeWidth")&&(a.lineWidth=t.textStrokeWidth),hasOwn(t,"textAlign")&&(a.align=t.textAlign),hasOwn(t,"textVerticalAlign")&&(a.verticalAlign=t.textVerticalAlign),hasOwn(t,"textLineHeight")&&(a.lineHeight=t.textLineHeight),hasOwn(t,"textWidth")&&(a.width=t.textWidth),hasOwn(t,"textHeight")&&(a.height=t.textHeight),hasOwn(t,"textBackgroundColor")&&(a.backgroundColor=t.textBackgroundColor),hasOwn(t,"textPadding")&&(a.padding=t.textPadding),hasOwn(t,"textBorderColor")&&(a.borderColor=t.textBorderColor),hasOwn(t,"textBorderWidth")&&(a.borderWidth=t.textBorderWidth),hasOwn(t,"textBorderRadius")&&(a.borderRadius=t.textBorderRadius),hasOwn(t,"textBoxShadowColor")&&(a.shadowColor=t.textBoxShadowColor),hasOwn(t,"textBoxShadowBlur")&&(a.shadowBlur=t.textBoxShadowBlur),hasOwn(t,"textBoxShadowOffsetX")&&(a.shadowOffsetX=t.textBoxShadowOffsetX),hasOwn(t,"textBoxShadowOffsetY")&&(a.shadowOffsetY=t.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(a,t,r){var n=a;n.textPosition=n.textPosition||r.position||"inside",r.offset!=null&&(n.textOffset=r.offset),r.rotation!=null&&(n.textRotation=r.rotation),r.distance!=null&&(n.textDistance=r.distance);var o=n.textPosition.indexOf("inside")>=0,s=a.fill||tokens.color.neutral99;convertToEC4RichItem(n,t);var l=n.textFill==null;return o?l&&(n.textFill=r.insideFill||tokens.color.neutral00,!n.textStroke&&r.insideStroke&&(n.textStroke=r.insideStroke),!n.textStroke&&(n.textStroke=s),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(l&&(n.textFill=a.fill||r.outsideFill||tokens.color.neutral00),!n.textStroke&&r.outsideStroke&&(n.textStroke=r.outsideStroke)),n.text=t.text,n.rich=t.rich,each$f(t.rich,function(u){convertToEC4RichItem(u,u)}),n}function convertToEC4RichItem(a,t){t&&(hasOwn(t,"fill")&&(a.textFill=t.fill),hasOwn(t,"stroke")&&(a.textStroke=t.fill),hasOwn(t,"lineWidth")&&(a.textStrokeWidth=t.lineWidth),hasOwn(t,"font")&&(a.font=t.font),hasOwn(t,"fontStyle")&&(a.fontStyle=t.fontStyle),hasOwn(t,"fontWeight")&&(a.fontWeight=t.fontWeight),hasOwn(t,"fontSize")&&(a.fontSize=t.fontSize),hasOwn(t,"fontFamily")&&(a.fontFamily=t.fontFamily),hasOwn(t,"align")&&(a.textAlign=t.align),hasOwn(t,"verticalAlign")&&(a.textVerticalAlign=t.verticalAlign),hasOwn(t,"lineHeight")&&(a.textLineHeight=t.lineHeight),hasOwn(t,"width")&&(a.textWidth=t.width),hasOwn(t,"height")&&(a.textHeight=t.height),hasOwn(t,"backgroundColor")&&(a.textBackgroundColor=t.backgroundColor),hasOwn(t,"padding")&&(a.textPadding=t.padding),hasOwn(t,"borderColor")&&(a.textBorderColor=t.borderColor),hasOwn(t,"borderWidth")&&(a.textBorderWidth=t.borderWidth),hasOwn(t,"borderRadius")&&(a.textBorderRadius=t.borderRadius),hasOwn(t,"shadowColor")&&(a.textBoxShadowColor=t.shadowColor),hasOwn(t,"shadowBlur")&&(a.textBoxShadowBlur=t.shadowBlur),hasOwn(t,"shadowOffsetX")&&(a.textBoxShadowOffsetX=t.shadowOffsetX),hasOwn(t,"shadowOffsetY")&&(a.textBoxShadowOffsetY=t.shadowOffsetY),hasOwn(t,"textShadowColor")&&(a.textShadowColor=t.textShadowColor),hasOwn(t,"textShadowBlur")&&(a.textShadowBlur=t.textShadowBlur),hasOwn(t,"textShadowOffsetX")&&(a.textShadowOffsetX=t.textShadowOffsetX),hasOwn(t,"textShadowOffsetY")&&(a.textShadowOffsetY=t.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(a,t){return a[t]=1,a},{});TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(a,t,r,n,o){var s=a+"Animation",l=getAnimationConfig(a,n,o)||{},u=transitionInnerStore(t).userDuring;return l.duration>0&&(l.during=u?bind$1(duringCall,{el:t,userDuring:u}):null,l.setToFinal=!0,l.scope=a),extend(l,r[s]),l}function applyUpdateTransition(a,t,r,n){n=n||{};var o=n.dataIndex,s=n.isInit,l=n.clearStyle,u=r.isAnimationEnabled(),c=transitionInnerStore(a),f=t.style;c.userDuring=t.during;var h={},v={};if(prepareTransformAllPropsFinal(a,t,v),a.type==="compound")for(var d=a.shape.paths,p=t.shape.paths,g=0;g<p.length;g++){var y=p[g];prepareShapeOrExtraAllPropsFinal("shape",y,d[g])}else prepareShapeOrExtraAllPropsFinal("shape",t,v),prepareShapeOrExtraAllPropsFinal("extra",t,v);if(!s&&u&&(prepareTransformTransitionFrom(a,t,h),prepareShapeOrExtraTransitionFrom("shape",a,t,h),prepareShapeOrExtraTransitionFrom("extra",a,t,h),prepareStyleTransitionFrom(a,t,f,h)),v.style=f,applyPropsDirectly(a,v,l),applyMiscProps(a,t),u)if(s){var _={};each$f(ELEMENT_ANIMATABLE_PROPS,function(x){var T=x?t[x]:t;T&&T.enterFrom&&(x&&(_[x]=_[x]||{}),extend(x?_[x]:_,T.enterFrom))});var S=getElementAnimationConfig("enter",a,t,r,o);S.duration>0&&a.animateFrom(_,S)}else applyPropsTransition(a,t,o||0,r,h);updateLeaveTo(a,t),f?a.dirty():a.markRedraw()}function updateLeaveTo(a,t){for(var r=transitionInnerStore(a).leaveToProps,n=0;n<ELEMENT_ANIMATABLE_PROPS.length;n++){var o=ELEMENT_ANIMATABLE_PROPS[n],s=o?t[o]:t;s&&s.leaveTo&&(r||(r=transitionInnerStore(a).leaveToProps={}),o&&(r[o]=r[o]||{}),extend(o?r[o]:r,s.leaveTo))}}function applyLeaveTransition(a,t,r,n){if(a){var o=a.parent,s=transitionInnerStore(a).leaveToProps;if(s){var l=getElementAnimationConfig("update",a,t,r,0);l.done=function(){o&&o.remove(a)},a.animateTo(s,l)}else o&&o.remove(a)}}function isTransitionAll(a){return a==="all"}function applyPropsDirectly(a,t,r){var n=t.style;if(!a.isGroup&&n){if(r){a.useStyle({});for(var o=a.animators,s=0;s<o.length;s++){var l=o[s];l.targetName==="style"&&l.changeTarget(a.style)}}a.setStyle(n)}t&&(t.style=null,t&&a.attr(t),t.style=n)}function applyPropsTransition(a,t,r,n,o){if(o){var s=getElementAnimationConfig("update",a,t,n,r);s.duration>0&&a.animateFrom(o,s)}}function applyMiscProps(a,t){hasOwn(t,"silent")&&(a.silent=t.silent),hasOwn(t,"ignore")&&(a.ignore=t.ignore),a instanceof Displayable&&hasOwn(t,"invisible")&&(a.invisible=t.invisible),a instanceof Path&&hasOwn(t,"autoBatch")&&(a.autoBatch=t.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(a,t){return tmpDuringScope.el[a]=t,this},getTransform:function(a){return tmpDuringScope.el[a]},setShape:function(a,t){var r=tmpDuringScope.el,n=r.shape||(r.shape={});return n[a]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(a){var t=tmpDuringScope.el.shape;if(t)return t[a]},setStyle:function(a,t){var r=tmpDuringScope.el,n=r.style;return n&&(n[a]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(a){var t=tmpDuringScope.el.style;if(t)return t[a]},setExtra:function(a,t){var r=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return r[a]=t,this},getExtra:function(a){var t=tmpDuringScope.el.extra;if(t)return t[a]}};function duringCall(){var a=this,t=a.el;if(t){var r=transitionInnerStore(t).userDuring,n=a.userDuring;if(r!==n){a.el=a.userDuring=null;return}tmpDuringScope.el=t,n(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(a,t,r,n){var o=r[a];if(o){var s=t[a],l;if(s){var u=r.transition,c=o.transition;if(c)if(!l&&(l=n[a]={}),isTransitionAll(c))extend(l,s);else for(var f=normalizeToArray(c),h=0;h<f.length;h++){var v=f[h],d=s[v];l[v]=d}else if(isTransitionAll(u)||indexOf(u,a)>=0){!l&&(l=n[a]={});for(var p=keys(s),h=0;h<p.length;h++){var v=p[h],d=s[v];isNonStyleTransitionEnabled(o[v],d)&&(l[v]=d)}}}}}function prepareShapeOrExtraAllPropsFinal(a,t,r){var n=t[a];if(n)for(var o=r[a]={},s=keys(n),l=0;l<s.length;l++){var u=s[l];o[u]=cloneValue(n[u])}}function prepareTransformTransitionFrom(a,t,r){for(var n=t.transition,o=isTransitionAll(n)?TRANSFORMABLE_PROPS:normalizeToArray(n||[]),s=0;s<o.length;s++){var l=o[s];if(!(l==="style"||l==="shape"||l==="extra")){var u=a[l];r[l]=u}}}function prepareTransformAllPropsFinal(a,t,r){for(var n=0;n<LEGACY_TRANSFORM_PROPS.length;n++){var o=LEGACY_TRANSFORM_PROPS[n],s=LEGACY_TRANSFORM_PROPS_MAP[o],l=t[o];l&&(r[s[0]]=l[0],r[s[1]]=l[1])}for(var n=0;n<TRANSFORMABLE_PROPS.length;n++){var u=TRANSFORMABLE_PROPS[n];t[u]!=null&&(r[u]=t[u])}}function prepareStyleTransitionFrom(a,t,r,n){if(r){var o=a.style,s;if(o){var l=r.transition,u=t.transition;if(l&&!isTransitionAll(l)){var c=normalizeToArray(l);!s&&(s=n.style={});for(var f=0;f<c.length;f++){var h=c[f],v=o[h];s[h]=v}}else if(a.getAnimationStyleProps&&(isTransitionAll(u)||isTransitionAll(l)||indexOf(u,"style")>=0)){var d=a.getAnimationStyleProps(),p=d?d.style:null;if(p){!s&&(s=n.style={});for(var g=keys(r),f=0;f<g.length;f++){var h=g[f];if(p[h]){var v=o[h];s[h]=v}}}}}}}function isNonStyleTransitionEnabled(a,t){return isArrayLike(a)?a!==t:a!=null&&isFinite(a)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(a){a.stopAnimation("keyframe"),a.attr(getStateToRestore(a))}function applyKeyframeAnimation(a,t,r){if(!(!r.isAnimationEnabled()||!t)){if(isArray$1(t)){each$f(t,function(u){applyKeyframeAnimation(a,u,r)});return}var n=t.keyframes,o=t.duration;if(r&&o==null){var s=getAnimationConfig("enter",r,0);o=s&&s.duration}if(!(!n||!o)){var l=getStateToRestore(a);each$f(ELEMENT_ANIMATABLE_PROPS,function(u){if(!(u&&!a[u])){var c;n.sort(function(f,h){return f.percent-h.percent}),each$f(n,function(f){var h=a.animators,v=u?f[u]:f;if(v){var d=keys(v);if(u||(d=filter(d,function(y){return indexOf(KEYFRAME_EXCLUDE_KEYS,y)<0})),!!d.length){c||(c=a.animate(u,t.loop,!0),c.scope="keyframe");for(var p=0;p<h.length;p++)h[p]!==c&&h[p].targetName===c.targetName&&h[p].stopTracks(d);u&&(l[u]=l[u]||{});var g=u?l[u]:l;each$f(d,function(y){g[y]=((u?a[u]:a)||{})[y]}),c.whenWithKeys(o*f.percent,v,d,f.easing)}}}),c&&c.delay(t.delay||0).duration(o).start(t.easing)}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom,matrix:matrixPrepareCustom};function isPath(a){return a instanceof Path}function isDisplayable(a){return a instanceof Displayable}function copyElement(a,t){t.copyTransform(a),isDisplayable(t)&&isDisplayable(a)&&(t.setStyle(a.style),t.z=a.z,t.z2=a.z2,t.zlevel=a.zlevel,t.invisible=a.invisible,t.ignore=a.ignore,isPath(t)&&isPath(a)&&t.setShape(a.shape))}var CustomChartView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o,s){this._progressiveEls=null;var l=this._data,u=r.getData(),c=this.group,f=makeRenderItem(r,u,n,o);l||c.removeAll(),u.diff(l).add(function(v){createOrUpdateItem(o,null,v,f(v,s),r,c,u)}).remove(function(v){var d=l.getItemGraphicEl(v);d&&applyLeaveTransition(d,customInnerStore(d).option,r)}).update(function(v,d){var p=l.getItemGraphicEl(d);createOrUpdateItem(o,p,v,f(v,s),r,c,u)}).execute();var h=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;h?c.setClipPath(h):c.removeClipPath(),this._data=u},t.prototype.incrementalPrepareRender=function(r,n,o){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,n,o,s,l){var u=n.getData(),c=makeRenderItem(n,u,o,s),f=this._progressiveEls=[];function h(p){p.isGroup||(p.incremental=!0,p.ensureState("emphasis").hoverLayer=!0)}for(var v=r.start;v<r.end;v++){var d=createOrUpdateItem(null,null,v,c(v,l),n,this.group,u);d&&(d.traverse(h),f.push(d))}},t.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,n,o,s){var l=n.element;if(l==null||o.name===l)return!0;for(;(o=o.__hostTarget||o.parent)&&o!==this.group;)if(o.name===l)return!0;return!1},t.type="custom",t}(ChartView);function createEl$1(a){var t=a.type,r;if(t==="path"){var n=a.shape,o=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,s=getPathData(n);r=makePath(s,null,o,n.layout||"center"),customInnerStore(r).customPathData=s}else if(t==="image")r=new ZRImage({}),customInnerStore(r).customImagePath=a.style.image;else if(t==="text")r=new ZRText({});else if(t==="group")r=new Group$3;else if(t==="compoundPath"){var n=a.shape;if(!n||!n.paths){var l="";throwError(l)}var u=map$1(n.paths,function(h){if(h.type==="path")return makePath(h.shape.pathData,h,null);var v=getShapeClass(h.type);if(!v){var d="";throwError(d)}return new v});r=new CompoundPath({shape:{paths:u}})}else{var c=getShapeClass(t);if(!c){var l="";throwError(l)}r=new c}return customInnerStore(r).customGraphicType=t,r.name=a.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function updateElNormal(a,t,r,n,o,s,l){stopPreviousKeyframeAnimationAndRestore(t);var u=o&&o.normal.cfg;u&&t.setTextConfig(u),n&&n.transition==null&&(n.transition=DEFAULT_TRANSITION);var c=n&&n.style;if(c){if(t.type==="text"){var f=c;hasOwn(f,"textFill")&&(f.fill=f.textFill),hasOwn(f,"textStroke")&&(f.stroke=f.textStroke)}var h=void 0,v=isPath(t)?c.decal:null;a&&v&&(v.dirty=!0,h=createOrUpdatePatternFromDecal(v,a)),c.__decalPattern=h}if(isDisplayable(t)&&c){var h=c.__decalPattern;h&&(c.decal=h)}applyUpdateTransition(t,n,s,{dataIndex:r,isInit:l,clearStyle:!0}),applyKeyframeAnimation(t,n.keyframeAnimation,s)}function updateElOnState(a,t,r,n,o){var s=t.isGroup?null:t,l=o&&o[a].cfg;if(s){var u=s.ensureState(a);if(n===!1){var c=s.getState(a);c&&(c.style=null)}else u.style=n||null;l&&(u.textConfig=l),setDefaultStateProxy(s)}}function updateZ$2(a,t,r){if(!a.isGroup){var n=a,o=r.currentZ,s=r.currentZLevel;n.z=o,n.zlevel=s;var l=t.z2;l!=null&&(n.z2=l||0);for(var u=0;u<STATES.length;u++)updateZForEachState(n,t,STATES[u])}}function updateZForEachState(a,t,r){var n=r===NORMAL,o=n?t:retrieveStateOption(t,r),s=o?o.z2:null,l;s!=null&&(l=n?a:a.ensureState(r),l.z2=s||0)}function makeRenderItem(a,t,r,n){var o=a.get("renderItem");if(typeof o=="string"){var s=getCustomSeries(o);s&&(o=s)}var l=a.coordinateSystem,u={};l&&(u=l.prepareCustoms?l.prepareCustoms(l):prepareCustoms[l.type](l));for(var c=defaults({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:C,style:M,ordinalRawValue:w,styleEmphasis:P,visual:I,barLayout:R,currentSeriesIndices:D,font:O},u.api||{}),f={context:{},seriesId:a.id,seriesName:a.name,seriesIndex:a.seriesIndex,coordSys:u.coordSys,dataInsideLength:t.count(),encode:wrapEncodeDef(a.getData()),itemPayload:a.get("itemPayload")||{}},h,v,d={},p={},g={},y={},_=0;_<STATES.length;_++){var S=STATES[_];g[S]=a.getModel(PATH_ITEM_STYLE[S]),y[S]=a.getModel(PATH_LABEL[S])}function x($){return $===h?v||(v=t.getItemModel($)):t.getItemModel($)}function T($,N){return t.hasItemOption?$===h?d[N]||(d[N]=x($).getModel(PATH_ITEM_STYLE[N])):x($).getModel(PATH_ITEM_STYLE[N]):g[N]}function b($,N){return t.hasItemOption?$===h?p[N]||(p[N]=x($).getModel(PATH_LABEL[N])):x($).getModel(PATH_LABEL[N]):y[N]}return function($,N){return h=$,v=null,d={},p={},o&&o(defaults({dataIndexInside:$,dataIndex:t.getRawIndex($),actionType:N?N.type:null},f),c)};function C($,N){return N==null&&(N=h),t.getStore().get(t.getDimensionIndex($||0),N)}function w($,N){N==null&&(N=h),$=$||0;var V=t.getDimensionInfo($);if(!V){var B=t.getDimensionIndex($);return B>=0?t.getStore().get(B,N):void 0}var F=t.get(V.name,N),G=V&&V.ordinalMeta;return G?G.categories[F]:F}function M($,N){N==null&&(N=h);var V=t.getItemVisual(N,"style"),B=V&&V.fill,F=V&&V.opacity,G=T(N,NORMAL).getItemStyle();B!=null&&(G.fill=B),F!=null&&(G.opacity=F);var z={inheritColor:isString(B)?B:tokens.color.neutral99},H=b(N,NORMAL),U=createTextStyle(H,null,z,!1,!0);U.text=H.getShallow("show")?retrieve2(a.getFormattedLabel(N,NORMAL),getDefaultLabel(t,N)):null;var Y=createTextConfig(H,z,!1);return E($,G),G=convertToEC4StyleForCustomSerise(G,U,Y),$&&L(G,$),G.legacy=!0,G}function P($,N){N==null&&(N=h);var V=T(N,EMPHASIS).getItemStyle(),B=b(N,EMPHASIS),F=createTextStyle(B,null,null,!0,!0);F.text=B.getShallow("show")?retrieve3(a.getFormattedLabel(N,EMPHASIS),a.getFormattedLabel(N,NORMAL),getDefaultLabel(t,N)):null;var G=createTextConfig(B,null,!0);return E($,V),V=convertToEC4StyleForCustomSerise(V,F,G),$&&L(V,$),V.legacy=!0,V}function L($,N){for(var V in N)hasOwn(N,V)&&($[V]=N[V])}function E($,N){$&&($.textFill&&(N.textFill=$.textFill),$.textPosition&&(N.textPosition=$.textPosition))}function I($,N){if(N==null&&(N=h),hasOwn(STYLE_VISUAL_TYPE,$)){var V=t.getItemVisual(N,"style");return V?V[STYLE_VISUAL_TYPE[$]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,$))return t.getItemVisual(N,$)}function R($){if(l.type==="cartesian2d"){var N=l.getBaseAxis();return getLayoutOnAxis(defaults({axis:N},$))}}function D(){return r.getCurrentSeriesIndices()}function O($){return getFont($,r)}}function wrapEncodeDef(a){var t={};return each$f(a.dimensions,function(r){var n=a.getDimensionInfo(r);if(!n.isExtraCoord){var o=n.coordDim,s=t[o]=t[o]||[];s[n.coordDimIndex]=a.getDimensionIndex(r)}}),t}function createOrUpdateItem(a,t,r,n,o,s,l){if(!n){s.remove(t);return}var u=doCreateOrUpdateEl(a,t,r,n,o,s);return u&&l.setItemGraphicEl(r,u),u&&toggleHoverEmphasis(u,n.focus,n.blurScope,n.emphasisDisabled),u}function doCreateOrUpdateEl(a,t,r,n,o,s){var l=-1,u=t;t&&doesElNeedRecreate(t,n,o)&&(l=indexOf(s.childrenRef(),t),t=null);var c=!t,f=t;f?f.clearStates():(f=createEl$1(n),u&&copyElement(u,f)),n.morph===!1?f.disableMorphing=!0:f.disableMorphing&&(f.disableMorphing=!1),n.tooltipDisabled&&(f.tooltipDisabled=!0),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(f,r,n,o,c,attachedTxInfoTmp),doCreateOrUpdateClipPath(f,r,n,o,c),updateElNormal(a,f,r,n,attachedTxInfoTmp,o,c),hasOwn(n,"info")&&(customInnerStore(f).info=n.info);for(var h=0;h<STATES.length;h++){var v=STATES[h];if(v!==NORMAL){var d=retrieveStateOption(n,v),p=retrieveStyleOptionOnState(n,d,v);updateElOnState(v,f,d,p,attachedTxInfoTmp)}}return updateZ$2(f,n,o),n.type==="group"&&mergeChildren(a,f,r,n,o),l>=0?s.replaceAt(f,l):s.add(f),f}function doesElNeedRecreate(a,t,r){var n=customInnerStore(a),o=t.type,s=t.shape,l=t.style;return r.isUniversalTransitionEnabled()||o!=null&&o!==n.customGraphicType||o==="path"&&hasOwnPathData(s)&&getPathData(s)!==n.customPathData||o==="image"&&hasOwn(l,"image")&&l.image!==n.customImagePath}function doCreateOrUpdateClipPath(a,t,r,n,o){var s=r.clipPath;if(s===!1)a&&a.getClipPath()&&a.removeClipPath();else if(s){var l=a.getClipPath();l&&doesElNeedRecreate(l,s,n)&&(l=null),l||(l=createEl$1(s),a.setClipPath(l)),updateElNormal(null,l,t,s,null,n,o)}}function doCreateOrUpdateAttachedTx(a,t,r,n,o,s){if(!(a.isGroup||a.type==="compoundPath")){processTxInfo(r,null,s),processTxInfo(r,EMPHASIS,s);var l=s.normal.conOpt,u=s.emphasis.conOpt,c=s.blur.conOpt,f=s.select.conOpt;if(l!=null||u!=null||f!=null||c!=null){var h=a.getTextContent();if(l===!1)h&&a.removeTextContent();else{l=s.normal.conOpt=l||{type:"text"},h?h.clearStates():(h=createEl$1(l),a.setTextContent(h)),updateElNormal(null,h,t,l,null,n,o);for(var v=l&&l.style,d=0;d<STATES.length;d++){var p=STATES[d];if(p!==NORMAL){var g=s[p].conOpt;updateElOnState(p,h,g,retrieveStyleOptionOnState(l,g,p),null)}}v?h.dirty():h.markRedraw()}}}}function processTxInfo(a,t,r){var n=t?retrieveStateOption(a,t):a,o=t?retrieveStyleOptionOnState(a,n,EMPHASIS):a.style,s=a.type,l=n?n.textConfig:null,u=a.textContent,c=u?t?retrieveStateOption(u,t):u:null;if(o&&(r.isLegacy||isEC4CompatibleStyle(o,s,!!l,!!c))){r.isLegacy=!0;var f=convertFromEC4CompatibleStyle(o,s,!t);!l&&f.textConfig&&(l=f.textConfig),!c&&f.textContent&&(c=f.textContent)}if(!t&&c){var h=c;!h.type&&(h.type="text")}var v=t?r[t]:r.normal;v.cfg=l,v.conOpt=c}function retrieveStateOption(a,t){return t?a?a[t]:null:a}function retrieveStyleOptionOnState(a,t,r){var n=t&&t.style;return n==null&&r===EMPHASIS&&a&&(n=a.styleEmphasis),n}function mergeChildren(a,t,r,n,o){var s=n.children,l=s?s.length:0,u=n.$mergeChildren,c=u==="byName"||n.diffChildrenByName,f=u===!1;if(!(!l&&!c&&!f)){if(c){diffGroupChildren({api:a,oldChildren:t.children()||[],newChildren:s||[],dataIndex:r,seriesModel:o,group:t});return}f&&t.removeAll();for(var h=0;h<l;h++){var v=s[h],d=t.childAt(h);v?(v.ignore==null&&(v.ignore=!1),doCreateOrUpdateEl(a,d,r,v,o,t)):d.ignore=!0}for(var p=t.childCount()-1;p>=h;p--){var g=t.childAt(p);removeChildFromGroup(t,g,o)}}}function removeChildFromGroup(a,t,r){t&&applyLeaveTransition(t,customInnerStore(a).option,r)}function diffGroupChildren(a){new DataDiffer(a.oldChildren,a.newChildren,getKey,getKey,a).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(a,t){var r=a&&a.name;return r??GROUP_DIFF_PREFIX+t}function processAddUpdate(a,t){var r=this.context,n=a!=null?r.newChildren[a]:null,o=t!=null?r.oldChildren[t]:null;doCreateOrUpdateEl(r.api,o,r.dataIndex,n,r.seriesModel,r.group)}function processRemove(a){var t=this.context,r=t.oldChildren[a];r&&applyLeaveTransition(r,customInnerStore(r).option,t.seriesModel)}function getPathData(a){return a&&(a.pathData||a.d)}function hasOwnPathData(a){return a&&(hasOwn(a,"pathData")||hasOwn(a,"d"))}function install$t(a){a.registerChartView(CustomChartView),a.registerSeriesModel(CustomSeriesModel)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(t,r,n,o){var s=r.get("value"),l=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!o&&this._lastValue===s&&this._lastStatus===l)){this._lastValue=s,this._lastStatus=l;var u=this._group,c=this._handle;if(!l||l==="hide"){u&&u.hide(),c&&c.hide();return}u&&u.show(),c&&c.show();var f={};this.makeElOption(f,s,t,r,n);var h=f.graphicKey;h!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=h;var v=this._moveAnimation=this.determineAnimation(t,r);if(!u)u=this._group=new Group$3,this.createPointerEl(u,f,t,r),this.createLabelEl(u,f,t,r),n.getZr().add(u);else{var d=curry$1(updateProps,r,v);this.updatePointerEl(u,f,d),this.updateLabelEl(u,f,d,r)}updateMandatoryProps(u,r,!0),this._renderHandle(s)}},a.prototype.remove=function(t){this.clear(t)},a.prototype.dispose=function(t){this.clear(t)},a.prototype.determineAnimation=function(t,r){var n=r.get("animation"),o=t.axis,s=o.type==="category",l=r.get("snap");if(!l&&!s)return!1;if(n==="auto"||n==null){var u=this.animationThreshold;if(s&&o.getBandWidth()>u)return!0;if(l){var c=getAxisInfo$1(t).seriesDataCount,f=o.getExtent();return Math.abs(f[0]-f[1])/c>u}return!1}return n===!0},a.prototype.makeElOption=function(t,r,n,o,s){},a.prototype.createPointerEl=function(t,r,n,o){var s=r.pointer;if(s){var l=inner$b(t).pointerEl=new graphic[s.type](clone$1(r.pointer));t.add(l)}},a.prototype.createLabelEl=function(t,r,n,o){if(r.label){var s=inner$b(t).labelEl=new ZRText(clone$1(r.label));t.add(s),updateLabelShowHide(s,o)}},a.prototype.updatePointerEl=function(t,r,n){var o=inner$b(t).pointerEl;o&&r.pointer&&(o.setStyle(r.pointer.style),n(o,{shape:r.pointer.shape}))},a.prototype.updateLabelEl=function(t,r,n,o){var s=inner$b(t).labelEl;s&&(s.setStyle(r.label.style),n(s,{x:r.label.x,y:r.label.y}),updateLabelShowHide(s,o))},a.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),o=this._handle,s=r.getModel("handle"),l=r.get("status");if(!s.get("show")||!l||l==="hide"){o&&n.remove(o),this._handle=null;return}var u;this._handle||(u=!0,o=this._handle=createIcon(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(f){stop(f.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),n.add(o)),updateMandatoryProps(o,r,!1),o.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var c=s.get("size");isArray$1(c)||(c=[c,c]),o.scaleX=c[0]/2,o.scaleY=c[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,u)}},a.prototype._moveHandleToValue=function(t,r){updateProps(this._axisPointerModel,!r&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(n){this._dragging=!0;var o=this.updateHandleTransform(getHandleTransProps(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=o,n.stopAnimation(),n.attr(getHandleTransProps(o)),inner$b(n).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,o=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),o&&r.remove(o),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},a}();function updateProps(a,t,r,n){propsEqual(inner$b(r).lastProp,n)||(inner$b(r).lastProp=n,t?updateProps$1(r,n,a):(r.stopAnimation(),r.attr(n)))}function propsEqual(a,t){if(isObject$3(a)&&isObject$3(t)){var r=!0;return each$f(t,function(n,o){r=r&&propsEqual(a[o],n)}),!!r}else return a===t}function updateLabelShowHide(a,t){a[t.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function updateMandatoryProps(a,t,r){var n=t.get("z"),o=t.get("zlevel");a&&a.traverse(function(s){s.type!=="group"&&(n!=null&&(s.z=n),o!=null&&(s.zlevel=o),s.silent=r)})}function buildElStyle(a){var t=a.get("type"),r=a.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function buildLabelElOption(a,t,r,n,o){var s=r.get("value"),l=getValueLabel(s,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),u=r.getModel("label"),c=normalizeCssArray(u.get("padding")||0),f=u.getFont(),h=getBoundingRect(l,f),v=o.position,d=h.width+c[1]+c[3],p=h.height+c[0]+c[2],g=o.align;g==="right"&&(v[0]-=d),g==="center"&&(v[0]-=d/2);var y=o.verticalAlign;y==="bottom"&&(v[1]-=p),y==="middle"&&(v[1]-=p/2),confineInContainer(v,d,p,n);var _=u.get("backgroundColor");(!_||_==="auto")&&(_=t.get(["axisLine","lineStyle","color"])),a.label={x:v[0],y:v[1],style:createTextStyle(u,{text:l,font:f,fill:u.getTextColor(),padding:c,backgroundColor:_}),z2:10}}function confineInContainer(a,t,r,n){var o=n.getWidth(),s=n.getHeight();a[0]=Math.min(a[0]+t,o)-t,a[1]=Math.min(a[1]+r,s)-r,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function getValueLabel(a,t,r,n,o){a=t.scale.parse(a);var s=t.scale.getLabel({value:a},{precision:o.precision}),l=o.formatter;if(l){var u={value:getAxisRawValue(t,{value:a}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};each$f(n,function(c){var f=r.getSeriesByIndex(c.seriesIndex),h=c.dataIndexInside,v=f&&f.getDataParams(h);v&&u.seriesData.push(v)}),isString(l)?s=l.replace("{value}",s):isFunction(l)&&(s=l(u))}return s}function getTransformedPosition(a,t,r){var n=create$1();return rotate(n,n,r.rotation),translate(n,n,r.position),applyTransform([a.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function buildCartesianSingleLabelElOption(a,t,r,n,o,s){var l=AxisBuilder.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=o.get(["label","margin"]),buildLabelElOption(t,n,o,s,{position:getTransformedPosition(n.axis,a,r),align:l.textAlign,verticalAlign:l.textVerticalAlign})}function makeLineShape(a,t,r){return r=r||0,{x1:a[r],y1:a[1-r],x2:t[r],y2:t[1-r]}}function makeRectShape(a,t,r){return r=r||0,{x:a[r],y:a[1-r],width:t[r],height:t[1-r]}}function makeSectorShape(a,t,r,n,o,s){return{cx:a,cy:t,r0:r,r:n,startAngle:o,endAngle:s,clockwise:!0}}var CartesianAxisPointer=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,o,s,l){var u=o.axis,c=u.grid,f=s.get("type"),h=getCartesian(c,u).getOtherAxis(u).getGlobalExtent(),v=u.toGlobalCoord(u.dataToCoord(n,!0));if(f&&f!=="none"){var d=buildElStyle(s),p=pointerShapeBuilder$2[f](u,v,h);p.style=d,r.graphicKey=p.type,r.pointer=p}var g=layout$1(c.getRect(),o);buildCartesianSingleLabelElOption(n,r,g,o,s,l)},t.prototype.getHandleTransform=function(r,n,o){var s=layout$1(n.axis.grid.getRect(),n,{labelInside:!1});s.labelMargin=o.get(["handle","margin"]);var l=getTransformedPosition(n.axis,r,s);return{x:l[0],y:l[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,o,s){var l=o.axis,u=l.grid,c=l.getGlobalExtent(!0),f=getCartesian(u,l).getOtherAxis(l).getGlobalExtent(),h=l.dim==="x"?0:1,v=[r.x,r.y];v[h]+=n[h],v[h]=Math.min(c[1],v[h]),v[h]=Math.max(c[0],v[h]);var d=(f[1]+f[0])/2,p=[d,d];p[h]=v[h];var g=[{verticalAlign:"middle"},{align:"center"}];return{x:v[0],y:v[1],rotation:r.rotation,cursorPoint:p,tooltipOption:g[h]}},t}(BaseAxisPointer);function getCartesian(a,t){var r={};return r[t.dim+"AxisIndex"]=t.index,a.getCartesian(r)}var pointerShapeBuilder$2={line:function(a,t,r){var n=makeLineShape([t,r[0]],[t,r[1]],getAxisDimIndex(a));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(a,t,r){var n=Math.max(1,a.getBandWidth()),o=r[1]-r[0];return{type:"Rect",shape:makeRectShape([t-n/2,r[0]],[n,o],getAxisDimIndex(a))}}};function getAxisDimIndex(a){return a.dim==="x"?0:1}var AxisPointerModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:tokens.color.border,width:1,type:"dashed"},shadowStyle:{color:tokens.color.shadowTint},label:{show:!0,formatter:null,precision:"auto",margin:3,color:tokens.color.neutral00,padding:[5,7,5,7],backgroundColor:tokens.color.accent60,borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:tokens.color.accent40,throttle:40}},t}(ComponentModel),inner$a=makeInner(),each$8=each$f;function register(a,t,r){if(!env.node){var n=t.getZr();inner$a(n).records||(inner$a(n).records={}),initGlobalListeners(n,t);var o=inner$a(n).records[a]||(inner$a(n).records[a]={});o.handler=r}}function initGlobalListeners(a,t){if(inner$a(a).initialized)return;inner$a(a).initialized=!0,r("click",curry$1(doEnter,"click")),r("mousemove",curry$1(doEnter,"mousemove")),r("globalout",onLeave);function r(n,o){a.on(n,function(s){var l=makeDispatchAction$1(t);each$8(inner$a(a).records,function(u){u&&o(u,s,l.dispatchAction)}),dispatchTooltipFinally(l.pendings,t)})}}function dispatchTooltipFinally(a,t){var r=a.showTip.length,n=a.hideTip.length,o;r?o=a.showTip[r-1]:n&&(o=a.hideTip[n-1]),o&&(o.dispatchAction=null,t.dispatchAction(o))}function onLeave(a,t,r){a.handler("leave",null,r)}function doEnter(a,t,r,n){t.handler(a,r,n)}function makeDispatchAction$1(a){var t={showTip:[],hideTip:[]},r=function(n){var o=t[n.type];o?o.push(n):(n.dispatchAction=r,a.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function unregister(a,t){if(!env.node){var r=t.getZr(),n=(inner$a(r).records||{})[a];n&&(inner$a(r).records[a]=null)}}var AxisPointerView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){var s=n.getComponent("tooltip"),l=r.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";register("axisPointer",o,function(u,c,f){l!=="none"&&(u==="leave"||l.indexOf(u)>=0)&&f({type:"updateAxisPointer",currTrigger:u,x:c&&c.offsetX,y:c&&c.offsetY})})},t.prototype.remove=function(r,n){unregister("axisPointer",n)},t.prototype.dispose=function(r,n){unregister("axisPointer",n)},t.type="axisPointer",t}(ComponentView);function findPointFromSeries(a,t){var r=[],n=a.seriesIndex,o;if(n==null||!(o=t.getSeriesByIndex(n)))return{point:[]};var s=o.getData(),l=queryDataIndex(s,a);if(l==null||l<0||isArray$1(l))return{point:[]};var u=s.getItemGraphicEl(l),c=o.coordinateSystem;if(o.getTooltipPosition)r=o.getTooltipPosition(l)||[];else if(c&&c.dataToPoint)if(a.isStacked){var f=c.getBaseAxis(),h=c.getOtherAxis(f),v=h.dim,d=f.dim,p=v==="x"||v==="radius"?1:0,g=s.mapDimension(d),y=[];y[p]=s.get(g,l),y[1-p]=s.get(s.getCalculationInfo("stackResultDimension"),l),r=c.dataToPoint(y)||[]}else r=c.dataToPoint(s.getValues(map$1(c.dimensions,function(S){return s.mapDimension(S)}),l))||[];else if(u){var _=u.getBoundingRect().clone();_.applyTransform(u.transform),r=[_.x+_.width/2,_.y+_.height/2]}return{point:r,el:u}}var inner$9=makeInner();function axisTrigger(a,t,r){var n=a.currTrigger,o=[a.x,a.y],s=a,l=a.dispatchAction||bind$1(r.dispatchAction,r),u=t.getComponent("axisPointer").coordSysAxesInfo;if(u){illegalPoint(o)&&(o=findPointFromSeries({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},t).point);var c=illegalPoint(o),f=s.axesInfo,h=u.axesInfo,v=n==="leave"||illegalPoint(o),d={},p={},g={list:[],map:{}},y={showPointer:curry$1(showPointer,p),showTooltip:curry$1(showTooltip,g)};each$f(u.coordSysMap,function(S,x){var T=c||S.containPoint(o);each$f(u.coordSysAxesInfo[x],function(b,C){var w=b.axis,M=findInputAxisInfo(f,b);if(!v&&T&&(!f||M)){var P=M&&M.value;P==null&&!c&&(P=w.pointToData(o)),P!=null&&processOnAxis(b,P,y,!1,d)}})});var _={};return each$f(h,function(S,x){var T=S.linkGroup;T&&!p[x]&&each$f(T.axesInfo,function(b,C){var w=p[C];if(b!==S&&w){var M=w.value;T.mapper&&(M=S.axis.scale.parse(T.mapper(M,makeMapperParam(b),makeMapperParam(S)))),_[S.key]=M}})}),each$f(_,function(S,x){processOnAxis(h[x],S,y,!0,d)}),updateModelActually(p,h,d),dispatchTooltipActually(g,o,a,l),dispatchHighDownActually(h,l,r),d}}function processOnAxis(a,t,r,n,o){var s=a.axis;if(!(s.scale.isBlank()||!s.containData(t))){if(!a.involveSeries){r.showPointer(a,t);return}var l=buildPayloadsBySeries(t,a),u=l.payloadBatch,c=l.snapToValue;u[0]&&o.seriesIndex==null&&extend(o,u[0]),!n&&a.snap&&s.containData(c)&&c!=null&&(t=c),r.showPointer(a,t,u),r.showTooltip(a,l,c)}}function buildPayloadsBySeries(a,t){var r=t.axis,n=r.dim,o=a,s=[],l=Number.MAX_VALUE,u=-1;return each$f(t.seriesModels,function(c,f){var h=c.getData().mapDimensionsAll(n),v,d;if(c.getAxisTooltipData){var p=c.getAxisTooltipData(h,a,r);d=p.dataIndices,v=p.nestestValue}else{if(d=c.indicesOfNearest(n,h[0],a,r.type==="category"?.5:null),!d.length)return;v=c.getData().get(h[0],d[0])}if(!(v==null||!isFinite(v))){var g=a-v,y=Math.abs(g);y<=l&&((y<l||g>=0&&u<0)&&(l=y,u=g,o=v,s.length=0),each$f(d,function(_){s.push({seriesIndex:c.seriesIndex,dataIndexInside:_,dataIndex:c.getData().getRawIndex(_)})}))}}),{payloadBatch:s,snapToValue:o}}function showPointer(a,t,r,n){a[t.key]={value:r,payloadBatch:n}}function showTooltip(a,t,r,n){var o=r.payloadBatch,s=t.axis,l=s.model,u=t.axisPointerModel;if(!(!t.triggerTooltip||!o.length)){var c=t.coordSys.model,f=makeKey(c),h=a.map[f];h||(h=a.map[f]={coordSysId:c.id,coordSysIndex:c.componentIndex,coordSysType:c.type,coordSysMainType:c.mainType,dataByAxis:[]},a.list.push(h)),h.dataByAxis.push({axisDim:s.dim,axisIndex:l.componentIndex,axisType:l.type,axisId:l.id,value:n,valueLabelOpt:{precision:u.get(["label","precision"]),formatter:u.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function updateModelActually(a,t,r){var n=r.axesInfo=[];each$f(t,function(o,s){var l=o.axisPointerModel.option,u=a[s];u?(!o.useHandle&&(l.status="show"),l.value=u.value,l.seriesDataIndices=(u.payloadBatch||[]).slice()):!o.useHandle&&(l.status="hide"),l.status==="show"&&n.push({axisDim:o.axis.dim,axisIndex:o.axis.model.componentIndex,value:l.value})})}function dispatchTooltipActually(a,t,r,n){if(illegalPoint(t)||!a.list.length){n({type:"hideTip"});return}var o=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:a.list})}function dispatchHighDownActually(a,t,r){var n=r.getZr(),o="axisPointerLastHighlights",s=inner$9(n)[o]||{},l=inner$9(n)[o]={};each$f(a,function(f,h){var v=f.axisPointerModel.option;v.status==="show"&&f.triggerEmphasis&&each$f(v.seriesDataIndices,function(d){var p=d.seriesIndex+" | "+d.dataIndex;l[p]=d})});var u=[],c=[];each$f(s,function(f,h){!l[h]&&c.push(f)}),each$f(l,function(f,h){!s[h]&&u.push(f)}),c.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:c}),u.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:u})}function findInputAxisInfo(a,t){for(var r=0;r<(a||[]).length;r++){var n=a[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function makeMapperParam(a){var t=a.axis.model,r={},n=r.axisDim=a.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function illegalPoint(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function install$s(a){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),a.registerComponentModel(AxisPointerModel),a.registerComponentView(AxisPointerView),a.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!isArray$1(r)&&(t.axisPointer.link=[r])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=collect(t,r)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$r(a){use(install$Q),use(install$s)}var PolarAxisPointer=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,o,s,l){var u=o.axis;u.dim==="angle"&&(this.animationThreshold=Math.PI/18);var c=u.polar,f=c.getOtherAxis(u),h=f.getExtent(),v=u.dataToCoord(n),d=s.get("type");if(d&&d!=="none"){var p=buildElStyle(s),g=pointerShapeBuilder$1[d](u,c,v,h);g.style=p,r.graphicKey=g.type,r.pointer=g}var y=s.get(["label","margin"]),_=getLabelPosition(n,o,s,c,y);buildLabelElOption(r,o,s,l,_)},t}(BaseAxisPointer);function getLabelPosition(a,t,r,n,o){var s=t.axis,l=s.dataToCoord(a),u=n.getAngleAxis().getExtent()[0];u=u/180*Math.PI;var c=n.getRadiusAxis().getExtent(),f,h,v;if(s.dim==="radius"){var d=create$1();rotate(d,d,u),translate(d,d,[n.cx,n.cy]),f=applyTransform([l,-o],d);var p=t.getModel("axisLabel").get("rotate")||0,g=AxisBuilder.innerTextLayout(u,p*Math.PI/180,-1);h=g.textAlign,v=g.textVerticalAlign}else{var y=c[1];f=n.coordToPoint([y+o,l]);var _=n.cx,S=n.cy;h=Math.abs(f[0]-_)/y<.3?"center":f[0]>_?"left":"right",v=Math.abs(f[1]-S)/y<.3?"middle":f[1]>S?"top":"bottom"}return{position:f,align:h,verticalAlign:v}}var pointerShapeBuilder$1={line:function(a,t,r,n){return a.dim==="angle"?{type:"Line",shape:makeLineShape(t.coordToPoint([n[0],r]),t.coordToPoint([n[1],r]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r}}},shadow:function(a,t,r,n){var o=Math.max(1,a.getBandWidth()),s=Math.PI/180;return a.dim==="angle"?{type:"Sector",shape:makeSectorShape(t.cx,t.cy,n[0],n[1],(-r-o/2)*s,(-r+o/2)*s)}:{type:"Sector",shape:makeSectorShape(t.cx,t.cy,r-o/2,r+o/2,0,Math.PI*2)}}},PolarModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.findAxisModel=function(r){var n,o=this.ecModel;return o.eachComponent(r,function(s){s.getCoordSysModel()===this&&(n=s)},this),n},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(ComponentModel),PolarAxisModel=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},t.type="polarAxis",t}(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="angleAxis",t}(PolarAxisModel),RadiusAxisModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="radiusAxis",t}(PolarAxisModel),RadiusAxis=function(a){__extends(t,a);function t(r,n){return a.call(this,"radius",r,n)||this}return t.prototype.pointToData=function(r,n){return this.polar.pointToData(r,n)[this.dim==="radius"?0:1]},t}(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=function(a){__extends(t,a);function t(r,n){return a.call(this,"angle",r,n||[0,360])||this}return t.prototype.pointToData=function(r,n){return this.polar.pointToData(r,n)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var r=this,n=r.getLabelModel(),o=r.scale,s=o.getExtent(),l=o.count();if(s[1]-s[0]<1)return 0;var u=s[0],c=r.dataToCoord(u+1)-r.dataToCoord(u),f=Math.abs(c),h=getBoundingRect(u==null?"":u+"",n.getFont(),"center","top"),v=Math.max(h.height,7),d=v/f;isNaN(d)&&(d=1/0);var p=Math.max(0,Math.floor(d)),g=inner$8(r.model),y=g.lastAutoInterval,_=g.lastTickCount;return y!=null&&_!=null&&Math.abs(y-p)<=1&&Math.abs(_-l)<=1&&y>p?p=y:(g.lastTickCount=l,g.lastAutoInterval=p),p},t}(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=function(){function a(t){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return a.prototype.containPoint=function(t){var r=this.pointToCoord(t);return this._radiusAxis.contain(r[0])&&this._angleAxis.contain(r[1])},a.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},a.prototype.getAxis=function(t){var r="_"+t+"Axis";return this[r]},a.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},a.prototype.getAxesByScale=function(t){var r=[],n=this._angleAxis,o=this._radiusAxis;return n.scale.type===t&&r.push(n),o.scale.type===t&&r.push(o),r},a.prototype.getAngleAxis=function(){return this._angleAxis},a.prototype.getRadiusAxis=function(){return this._radiusAxis},a.prototype.getOtherAxis=function(t){var r=this._angleAxis;return t===r?this._radiusAxis:r},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},a.prototype.getTooltipAxes=function(t){var r=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[r],otherAxes:[this.getOtherAxis(r)]}},a.prototype.dataToPoint=function(t,r,n){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],r),this._angleAxis.dataToAngle(t[1],r)],n)},a.prototype.pointToData=function(t,r,n){n=n||[];var o=this.pointToCoord(t);return n[0]=this._radiusAxis.radiusToData(o[0],r),n[1]=this._angleAxis.angleToData(o[1],r),n},a.prototype.pointToCoord=function(t){var r=t[0]-this.cx,n=t[1]-this.cy,o=this.getAngleAxis(),s=o.getExtent(),l=Math.min(s[0],s[1]),u=Math.max(s[0],s[1]);o.inverse?l=u-360:u=l+360;var c=Math.sqrt(r*r+n*n);r/=c,n/=c;for(var f=Math.atan2(-n,r)/Math.PI*180,h=f<l?1:-1;f<l||f>u;)f+=h*360;return[c,f]},a.prototype.coordToPoint=function(t,r){r=r||[];var n=t[0],o=t[1]/180*Math.PI;return r[0]=Math.cos(o)*n+this.cx,r[1]=-Math.sin(o)*n+this.cy,r},a.prototype.getArea=function(){var t=this.getAngleAxis(),r=this.getRadiusAxis(),n=r.getExtent().slice();n[0]>n[1]&&n.reverse();var o=t.getExtent(),s=Math.PI/180,l=1e-4;return{cx:this.cx,cy:this.cy,r0:n[0],r:n[1],startAngle:-o[0]*s,endAngle:-o[1]*s,clockwise:t.inverse,contain:function(u,c){var f=u-this.cx,h=c-this.cy,v=f*f+h*h,d=this.r,p=this.r0;return d!==p&&v-l<=d*d&&v+l>=p*p},x:this.cx-n[1],y:this.cy-n[1],width:n[1]*2,height:n[1]*2}},a.prototype.convertToPixel=function(t,r,n){var o=getCoordSys$3(r);return o===this?this.dataToPoint(n):null},a.prototype.convertFromPixel=function(t,r,n){var o=getCoordSys$3(r);return o===this?this.pointToData(n):null},a}();function getCoordSys$3(a){var t=a.seriesModel,r=a.polarModel;return r&&r.coordinateSystem||t&&t.coordinateSystem}function resizePolar(a,t,r){var n=t.get("center"),o=createBoxLayoutReference(t,r).refContainer;a.cx=parsePercent(n[0],o.width)+o.x,a.cy=parsePercent(n[1],o.height)+o.y;var s=a.getRadiusAxis(),l=Math.min(o.width,o.height)/2,u=t.get("radius");u==null?u=[0,"100%"]:isArray$1(u)||(u=[0,u]);var c=[parsePercent(u[0],l),parsePercent(u[1],l)];s.inverse?s.setExtent(c[1],c[0]):s.setExtent(c[0],c[1])}function updatePolarScale(a,t){var r=this,n=r.getAngleAxis(),o=r.getRadiusAxis();if(n.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),a.eachSeries(function(u){if(u.coordinateSystem===r){var c=u.getData();each$f(getDataDimensionsOnAxis(c,"radius"),function(f){o.scale.unionExtentFromData(c,f)}),each$f(getDataDimensionsOnAxis(c,"angle"),function(f){n.scale.unionExtentFromData(c,f)})}}),niceScaleExtent(n.scale,n.model),niceScaleExtent(o.scale,o.model),n.type==="category"&&!n.onBand){var s=n.getExtent(),l=360/n.scale.count();n.inverse?s[1]+=l:s[1]-=l,n.setExtent(s[0],s[1])}}function isAngleAxisModel(a){return a.mainType==="angleAxis"}function setAxis(a,t){var r;if(a.type=t.get("type"),a.scale=createScaleByModel$1(t),a.onBand=t.get("boundaryGap")&&a.type==="category",a.inverse=t.get("inverse"),isAngleAxisModel(t)){a.inverse=a.inverse!==t.get("clockwise");var n=t.get("startAngle"),o=(r=t.get("endAngle"))!==null&&r!==void 0?r:n+(a.inverse?-360:360);a.setExtent(n,o)}t.axis=a,a.model=t}var polarCreator={dimensions:polarDimensions,create:function(a,t){var r=[];return a.eachComponent("polar",function(n,o){var s=new Polar(o+"");s.update=updatePolarScale;var l=s.getRadiusAxis(),u=s.getAngleAxis(),c=n.findAxisModel("radiusAxis"),f=n.findAxisModel("angleAxis");setAxis(l,c),setAxis(u,f),resizePolar(s,n,t),r.push(s),n.coordinateSystem=s,s.model=n}),a.eachSeries(function(n){if(n.get("coordinateSystem")==="polar"){var o=n.getReferringComponents("polar",SINGLE_REFERRING).models[0];n.coordinateSystem=o.coordinateSystem}}),r}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(a,t,r){t[1]>t[0]&&(t=t.slice().reverse());var n=a.coordToPoint([t[0],r]),o=a.coordToPoint([t[1],r]);return{x1:n[0],y1:n[1],x2:o[0],y2:o[1]}}function getRadiusIdx(a){var t=a.getRadiusAxis();return t.inverse?0:1}function fixAngleOverlap(a){var t=a[0],r=a[a.length-1];t&&r&&Math.abs(Math.abs(t.coord-r.coord)-360)<1e-4&&a.pop()}var AngleAxisView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="PolarAxisPointer",r}return t.prototype.render=function(r,n){if(this.group.removeAll(),!!r.get("show")){var o=r.axis,s=o.polar,l=s.getRadiusAxis().getExtent(),u=o.getTicksCoords({breakTicks:"none"}),c=o.getMinorTicksCoords(),f=map$1(o.getViewLabels(),function(h){h=clone$4(h);var v=o.scale,d=v.type==="ordinal"?v.getRawOrdinalNumber(h.tickValue):h.tickValue;return h.coord=o.dataToCoord(d),h});fixAngleOverlap(f),fixAngleOverlap(u),each$f(elementList,function(h){r.get([h,"show"])&&(!o.scale.isBlank()||h==="axisLine")&&angelAxisElementsBuilders[h](this.group,r,s,u,c,l,f)},this)}},t.type="angleAxis",t}(AxisView),angelAxisElementsBuilders={axisLine:function(a,t,r,n,o,s){var l=t.getModel(["axisLine","lineStyle"]),u=r.getAngleAxis(),c=Math.PI/180,f=u.getExtent(),h=getRadiusIdx(r),v=h?0:1,d,p=Math.abs(f[1]-f[0])===360?"Circle":"Arc";s[v]===0?d=new graphic[p]({shape:{cx:r.cx,cy:r.cy,r:s[h],startAngle:-f[0]*c,endAngle:-f[1]*c,clockwise:u.inverse},style:l.getLineStyle(),z2:1,silent:!0}):d=new Ring({shape:{cx:r.cx,cy:r.cy,r:s[h],r0:s[v]},style:l.getLineStyle(),z2:1,silent:!0}),d.style.fill=null,a.add(d)},axisTick:function(a,t,r,n,o,s){var l=t.getModel("axisTick"),u=(l.get("inside")?-1:1)*l.get("length"),c=s[getRadiusIdx(r)],f=map$1(n,function(h){return new Line$1({shape:getAxisLineShape(r,[c,c+u],h.coord)})});a.add(mergePath(f,{style:defaults(l.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(a,t,r,n,o,s){if(o.length){for(var l=t.getModel("axisTick"),u=t.getModel("minorTick"),c=(l.get("inside")?-1:1)*u.get("length"),f=s[getRadiusIdx(r)],h=[],v=0;v<o.length;v++)for(var d=0;d<o[v].length;d++)h.push(new Line$1({shape:getAxisLineShape(r,[f,f+c],o[v][d].coord)}));a.add(mergePath(h,{style:defaults(u.getModel("lineStyle").getLineStyle(),defaults(l.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(a,t,r,n,o,s,l){var u=t.getCategories(!0),c=t.getModel("axisLabel"),f=c.get("margin"),h=t.get("triggerEvent");each$f(l,function(v,d){var p=c,g=v.tickValue,y=s[getRadiusIdx(r)],_=r.coordToPoint([y+f,v.coord]),S=r.cx,x=r.cy,T=Math.abs(_[0]-S)/y<.3?"center":_[0]>S?"left":"right",b=Math.abs(_[1]-x)/y<.3?"middle":_[1]>x?"top":"bottom";if(u&&u[g]){var C=u[g];isObject$3(C)&&C.textStyle&&(p=new Model(C.textStyle,c,c.ecModel))}var w=new ZRText({silent:AxisBuilder.isLabelSilent(t),style:createTextStyle(p,{x:_[0],y:_[1],fill:p.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:v.formattedLabel,align:T,verticalAlign:b})});if(a.add(w),setTooltipConfig({el:w,componentModel:t,itemName:v.formattedLabel,formatterParamsExtra:{isTruncated:function(){return w.isTruncated},value:v.rawLabel,tickIndex:d}}),h){var M=AxisBuilder.makeAxisEventDataBase(t);M.targetType="axisLabel",M.value=v.rawLabel,getECData(w).eventData=M}},this)},splitLine:function(a,t,r,n,o,s){var l=t.getModel("splitLine"),u=l.getModel("lineStyle"),c=u.get("color"),f=0;c=c instanceof Array?c:[c];for(var h=[],v=0;v<n.length;v++){var d=f++%c.length;h[d]=h[d]||[],h[d].push(new Line$1({shape:getAxisLineShape(r,s,n[v].coord)}))}for(var v=0;v<h.length;v++)a.add(mergePath(h[v],{style:defaults({stroke:c[v%c.length]},u.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(a,t,r,n,o,s){if(o.length){for(var l=t.getModel("minorSplitLine"),u=l.getModel("lineStyle"),c=[],f=0;f<o.length;f++)for(var h=0;h<o[f].length;h++)c.push(new Line$1({shape:getAxisLineShape(r,s,o[f][h].coord)}));a.add(mergePath(c,{style:u.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(a,t,r,n,o,s){if(n.length){var l=t.getModel("splitArea"),u=l.getModel("areaStyle"),c=u.get("color"),f=0;c=c instanceof Array?c:[c];for(var h=[],v=Math.PI/180,d=-n[0].coord*v,p=Math.min(s[0],s[1]),g=Math.max(s[0],s[1]),y=t.get("clockwise"),_=1,S=n.length;_<=S;_++){var x=_===S?n[0].coord:n[_].coord,T=f++%c.length;h[T]=h[T]||[],h[T].push(new Sector({shape:{cx:r.cx,cy:r.cy,r0:p,r:g,startAngle:d,endAngle:-x*v,clockwise:y},silent:!0})),d=-x*v}for(var _=0;_<h.length;_++)a.add(mergePath(h[_],{style:defaults({fill:c[_%c.length]},u.getAreaStyle()),silent:!0}))}}},selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="PolarAxisPointer",r}return t.prototype.render=function(r,n,o){if(this.group.removeAll(),!!r.get("show")){var s=this._axisGroup,l=this._axisGroup=new Group$3;this.group.add(l);var u=r.axis,c=u.polar,f=c.getAngleAxis(),h=u.getTicksCoords(),v=u.getMinorTicksCoords(),d=f.getExtent()[0],p=u.getExtent(),g=layoutAxis(c,r,d),y=new AxisBuilder(r,o,g);y.build(),l.add(y.group),groupTransition(s,l,r),each$f(selfBuilderAttrs$1,function(_){r.get([_,"show"])&&!u.scale.isBlank()&&axisElementBuilders$1[_](this.group,r,c,d,p,h,v)},this)}},t.type="radiusAxis",t}(AxisView),axisElementBuilders$1={splitLine:function(a,t,r,n,o,s){var l=t.getModel("splitLine"),u=l.getModel("lineStyle"),c=u.get("color"),f=0,h=r.getAngleAxis(),v=Math.PI/180,d=h.getExtent(),p=Math.abs(d[1]-d[0])===360?"Circle":"Arc";c=c instanceof Array?c:[c];for(var g=[],y=0;y<s.length;y++){var _=f++%c.length;g[_]=g[_]||[],g[_].push(new graphic[p]({shape:{cx:r.cx,cy:r.cy,r:Math.max(s[y].coord,0),startAngle:-d[0]*v,endAngle:-d[1]*v,clockwise:h.inverse}}))}for(var y=0;y<g.length;y++)a.add(mergePath(g[y],{style:defaults({stroke:c[y%c.length],fill:null},u.getLineStyle()),silent:!0}))},minorSplitLine:function(a,t,r,n,o,s,l){if(l.length){for(var u=t.getModel("minorSplitLine"),c=u.getModel("lineStyle"),f=[],h=0;h<l.length;h++)for(var v=0;v<l[h].length;v++)f.push(new Circle({shape:{cx:r.cx,cy:r.cy,r:l[h][v].coord}}));a.add(mergePath(f,{style:defaults({fill:null},c.getLineStyle()),silent:!0}))}},splitArea:function(a,t,r,n,o,s){if(s.length){var l=t.getModel("splitArea"),u=l.getModel("areaStyle"),c=u.get("color"),f=0;c=c instanceof Array?c:[c];for(var h=[],v=s[0].coord,d=1;d<s.length;d++){var p=f++%c.length;h[p]=h[p]||[],h[p].push(new Sector({shape:{cx:r.cx,cy:r.cy,r0:v,r:s[d].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),v=s[d].coord}for(var d=0;d<h.length;d++)a.add(mergePath(h[d],{style:defaults({fill:c[d%c.length]},u.getAreaStyle()),silent:!0}))}}};function layoutAxis(a,t,r){return{position:[a.cx,a.cy],rotation:r/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}function getSeriesStackId(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function getAxisKey(a,t){return t.dim+a.model.componentIndex}function barLayoutPolar(a,t,r){var n={},o=calRadialBar(filter(t.getSeriesByType(a),function(s){return!t.isSeriesFiltered(s)&&s.coordinateSystem&&s.coordinateSystem.type==="polar"}));t.eachSeriesByType(a,function(s){if(s.coordinateSystem.type==="polar"){var l=s.getData(),u=s.coordinateSystem,c=u.getBaseAxis(),f=getAxisKey(u,c),h=getSeriesStackId(s),v=o[f][h],d=v.offset,p=v.width,g=u.getOtherAxis(c),y=s.coordinateSystem.cx,_=s.coordinateSystem.cy,S=s.get("barMinHeight")||0,x=s.get("barMinAngle")||0;n[h]=n[h]||[];for(var T=l.mapDimension(g.dim),b=l.mapDimension(c.dim),C=isDimensionStacked(l,T),w=c.dim!=="radius"||!s.get("roundCap",!0),M=g.model,P=M.get("startValue"),L=g.dataToCoord(P||0),E=0,I=l.count();E<I;E++){var R=l.get(T,E),D=l.get(b,E),O=R>=0?"p":"n",$=L;C&&(n[h][D]||(n[h][D]={p:L,n:L}),$=n[h][D][O]);var N=void 0,V=void 0,B=void 0,F=void 0;if(g.dim==="radius"){var G=g.dataToCoord(R)-L,z=c.dataToCoord(D);Math.abs(G)<S&&(G=(G<0?-1:1)*S),N=$,V=$+G,B=z-d,F=B-p,C&&(n[h][D][O]=V)}else{var H=g.dataToCoord(R,w)-L,U=c.dataToCoord(D);Math.abs(H)<x&&(H=(H<0?-1:1)*x),N=U+d,V=N+p,B=$,F=$+H,C&&(n[h][D][O]=F)}l.setItemLayout(E,{cx:y,cy:_,r0:N,r:V,startAngle:-B*Math.PI/180,endAngle:-F*Math.PI/180,clockwise:B>=F})}}})}function calRadialBar(a){var t={};each$f(a,function(n,o){var s=n.getData(),l=n.coordinateSystem,u=l.getBaseAxis(),c=getAxisKey(l,u),f=u.getExtent(),h=u.type==="category"?u.getBandWidth():Math.abs(f[1]-f[0])/s.count(),v=t[c]||{bandWidth:h,remainedWidth:h,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=v.stacks;t[c]=v;var p=getSeriesStackId(n);d[p]||v.autoWidthCount++,d[p]=d[p]||{width:0,maxWidth:0};var g=parsePercent(n.get("barWidth"),h),y=parsePercent(n.get("barMaxWidth"),h),_=n.get("barGap"),S=n.get("barCategoryGap");g&&!d[p].width&&(g=Math.min(v.remainedWidth,g),d[p].width=g,v.remainedWidth-=g),y&&(d[p].maxWidth=y),_!=null&&(v.gap=_),S!=null&&(v.categoryGap=S)});var r={};return each$f(t,function(n,o){r[o]={};var s=n.stacks,l=n.bandWidth,u=parsePercent(n.categoryGap,l),c=parsePercent(n.gap,1),f=n.remainedWidth,h=n.autoWidthCount,v=(f-u)/(h+(h-1)*c);v=Math.max(v,0),each$f(s,function(y,_){var S=y.maxWidth;S&&S<v&&(S=Math.min(S,f),y.width&&(S=Math.min(S,y.width)),f-=S,y.width=S,h--)}),v=(f-u)/(h+(h-1)*c),v=Math.max(v,0);var d=0,p;each$f(s,function(y,_){y.width||(y.width=v),p=y,d+=y.width*(1+c)}),p&&(d-=p.width*c);var g=-d/2;each$f(s,function(y,_){r[o][_]=r[o][_]||{offset:g,width:y.width},g+=y.width*(1+c)})}),r}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="polar",t}(ComponentView);function install$q(a){use(install$s),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),a.registerCoordinateSystem("polar",polarCreator),a.registerComponentModel(PolarModel),a.registerComponentView(PolarView),axisModelCreator(a,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(a,"radius",RadiusAxisModel,radiusAxisExtraOption),a.registerComponentView(AngleAxisView),a.registerComponentView(RadiusAxisView),a.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout(a,t){t=t||{};var r=a.coordinateSystem,n=a.axis,o={},s=n.position,l=n.orient,u=r.getRect(),c=[u.x,u.x+u.width,u.y,u.y+u.height],f={horizontal:{top:c[2],bottom:c[3]},vertical:{left:c[0],right:c[1]}};o.position=[l==="vertical"?f.vertical[s]:c[0],l==="horizontal"?f.horizontal[s]:c[3]];var h={horizontal:0,vertical:1};o.rotation=Math.PI/2*h[l];var v={top:-1,bottom:1,right:1,left:-1};o.labelDirection=o.tickDirection=o.nameDirection=v[s],a.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),retrieve(t.labelInside,a.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var d=a.get(["axisLabel","rotate"]);return o.labelRotate=s==="top"?-d:d,o.z2=1,o}var selfBuilderAttrs=["splitArea","splitLine","breakArea"],SingleAxisView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="SingleAxisPointer",r}return t.prototype.render=function(r,n,o,s){var l=this.group;l.removeAll();var u=this._axisGroup;this._axisGroup=new Group$3;var c=layout(r),f=new AxisBuilder(r,o,c);f.build(),l.add(this._axisGroup),l.add(f.group),each$f(selfBuilderAttrs,function(h){r.get([h,"show"])&&axisElementBuilders[h](this,this.group,this._axisGroup,r,o)},this),groupTransition(u,this._axisGroup,r),a.prototype.render.call(this,r,n,o,s)},t.prototype.remove=function(){rectCoordAxisHandleRemove(this)},t.type="singleAxis",t}(AxisView),axisElementBuilders={splitLine:function(a,t,r,n,o){var s=n.axis;if(!s.scale.isBlank()){var l=n.getModel("splitLine"),u=l.getModel("lineStyle"),c=u.get("color");c=c instanceof Array?c:[c];for(var f=u.get("width"),h=n.coordinateSystem.getRect(),v=s.isHorizontal(),d=[],p=0,g=s.getTicksCoords({tickModel:l,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),y=[],_=[],S=0;S<g.length;++S){var x=s.toGlobalCoord(g[S].coord);v?(y[0]=x,y[1]=h.y,_[0]=x,_[1]=h.y+h.height):(y[0]=h.x,y[1]=x,_[0]=h.x+h.width,_[1]=x);var T=new Line$1({shape:{x1:y[0],y1:y[1],x2:_[0],y2:_[1]},silent:!0});subPixelOptimizeLine(T.shape,f);var b=p++%c.length;d[b]=d[b]||[],d[b].push(T)}for(var C=u.getLineStyle(["color"]),S=0;S<d.length;++S)t.add(mergePath(d[S],{style:defaults({stroke:c[S%c.length]},C),silent:!0}))}},splitArea:function(a,t,r,n,o){rectCoordAxisBuildSplitArea(a,r,n,n)},breakArea:function(a,t,r,n,o){var s=getAxisBreakHelper(),l=n.axis.scale;s&&l.type!=="ordinal"&&s.rectCoordBuildBreakAxis(t,a,n,n.coordinateSystem.getRect(),o)}},SingleAxisModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}},jitter:0,jitterOverlap:!0,jitterMargin:2},t}(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=function(a){__extends(t,a);function t(r,n,o,s,l){var u=a.call(this,r,n,o)||this;return u.type=s||"value",u.position=l||"bottom",u}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.pointToData=function(r,n){return this.coordinateSystem.pointToData(r)[0]},t}(Axis),singleDimensions=["single"],Single=function(){function a(t,r,n){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=t,this._init(t,r,n)}return a.prototype._init=function(t,r,n){var o=this.dimension,s=new SingleAxis(o,createScaleByModel$1(t),[0,0],t.get("type"),t.get("position")),l=s.type==="category";s.onBand=l&&t.get("boundaryGap"),s.inverse=t.get("inverse"),s.orient=t.get("orient"),t.axis=s,s.model=t,s.coordinateSystem=this,this._axis=s},a.prototype.update=function(t,r){t.eachSeries(function(n){if(n.coordinateSystem===this){var o=n.getData();each$f(o.mapDimensionsAll(this.dimension),function(s){this._axis.scale.unionExtentFromData(o,s)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},a.prototype.resize=function(t,r){var n=createBoxLayoutReference(t,r).refContainer;this._rect=getLayoutRect(t.getBoxLayoutParams(),n),this._adjustAxis()},a.prototype.getRect=function(){return this._rect},a.prototype._adjustAxis=function(){var t=this._rect,r=this._axis,n=r.isHorizontal(),o=n?[0,t.width]:[0,t.height],s=r.inverse?1:0;r.setExtent(o[s],o[1-s]),this._updateAxisTransform(r,n?t.x:t.y)},a.prototype._updateAxisTransform=function(t,r){var n=t.getExtent(),o=n[0]+n[1],s=t.isHorizontal();t.toGlobalCoord=s?function(l){return l+r}:function(l){return o-l+r},t.toLocalCoord=s?function(l){return l-r}:function(l){return o-l+r}},a.prototype.getAxis=function(){return this._axis},a.prototype.getBaseAxis=function(){return this._axis},a.prototype.getAxes=function(){return[this._axis]},a.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},a.prototype.containPoint=function(t){var r=this.getRect(),n=this.getAxis(),o=n.orient;return o==="horizontal"?n.contain(n.toLocalCoord(t[0]))&&t[1]>=r.y&&t[1]<=r.y+r.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=r.y&&t[0]<=r.y+r.height},a.prototype.pointToData=function(t,r,n){n=n||[];var o=this.getAxis();return n[0]=o.coordToData(o.toLocalCoord(t[o.orient==="horizontal"?0:1])),n},a.prototype.dataToPoint=function(t,r,n){var o=this.getAxis(),s=this.getRect();n=n||[];var l=o.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),n[l]=o.toGlobalCoord(o.dataToCoord(+t)),n[1-l]=l===0?s.y+s.height/2:s.x+s.width/2,n},a.prototype.convertToPixel=function(t,r,n){var o=getCoordSys$2(r);return o===this?this.dataToPoint(n):null},a.prototype.convertFromPixel=function(t,r,n){var o=getCoordSys$2(r);return o===this?this.pointToData(n):null},a}();function getCoordSys$2(a){var t=a.seriesModel,r=a.singleAxisModel;return r&&r.coordinateSystem||t&&t.coordinateSystem}function create(a,t){var r=[];return a.eachComponent("singleAxis",function(n,o){var s=new Single(n,a,t);s.name="single_"+o,s.resize(n,t),n.coordinateSystem=s,r.push(s)}),a.eachSeries(function(n){if(n.get("coordinateSystem")==="singleAxis"){var o=n.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];n.coordinateSystem=o&&o.coordinateSystem}}),r}var singleCreator={create,dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,o,s,l){var u=o.axis,c=u.coordinateSystem,f=getGlobalExtent(c,1-getPointDimIndex(u)),h=c.dataToPoint(n)[0],v=s.get("type");if(v&&v!=="none"){var d=buildElStyle(s),p=pointerShapeBuilder[v](u,h,f);p.style=d,r.graphicKey=p.type,r.pointer=p}var g=layout(o);buildCartesianSingleLabelElOption(n,r,g,o,s,l)},t.prototype.getHandleTransform=function(r,n,o){var s=layout(n,{labelInside:!1});s.labelMargin=o.get(["handle","margin"]);var l=getTransformedPosition(n.axis,r,s);return{x:l[0],y:l[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,o,s){var l=o.axis,u=l.coordinateSystem,c=getPointDimIndex(l),f=getGlobalExtent(u,c),h=[r.x,r.y];h[c]+=n[c],h[c]=Math.min(f[1],h[c]),h[c]=Math.max(f[0],h[c]);var v=getGlobalExtent(u,1-c),d=(v[1]+v[0])/2,p=[d,d];return p[c]=h[c],{x:h[0],y:h[1],rotation:r.rotation,cursorPoint:p,tooltipOption:{verticalAlign:"middle"}}},t}(BaseAxisPointer),pointerShapeBuilder={line:function(a,t,r){var n=makeLineShape([t,r[0]],[t,r[1]],getPointDimIndex(a));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(a,t,r){var n=a.getBandWidth(),o=r[1]-r[0];return{type:"Rect",shape:makeRectShape([t-n/2,r[0]],[n,o],getPointDimIndex(a))}}};function getPointDimIndex(a){return a.isHorizontal()?0:1}function getGlobalExtent(a,t){var r=a.getRect();return[r[XY$1[t]],r[XY$1[t]]+r[WH$1[t]]]}var SingleView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="single",t}(ComponentView);function install$p(a){use(install$s),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),a.registerComponentView(SingleView),a.registerComponentView(SingleAxisView),a.registerComponentModel(SingleAxisModel),axisModelCreator(a,"single",SingleAxisModel,SingleAxisModel.defaultOption),a.registerCoordinateSystem("single",singleCreator)}var CalendarModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n,o){var s=getLayoutParams(r);a.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(r,s)},t.prototype.mergeOption=function(r){a.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,r)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.layoutMode="box",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:tokens.color.axisLine,width:1,type:"solid"}},itemStyle:{color:tokens.color.neutral00,borderWidth:1,borderColor:tokens.color.neutral10},dayLabel:{show:!0,firstDay:0,position:"start",margin:tokens.size.s,color:tokens.color.secondary},monthLabel:{show:!0,position:"start",margin:tokens.size.s,align:"center",formatter:null,color:tokens.color.secondary},yearLabel:{show:!0,position:null,margin:tokens.size.xl,formatter:null,color:tokens.color.quaternary,fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(ComponentModel);function mergeAndNormalizeLayoutParams$1(a,t){var r=a.cellSize,n;isArray$1(r)?n=r:n=a.cellSize=[r,r],n.length===1&&(n[1]=n[0]);var o=map$1([0,1],function(s){return sizeCalculable(t,s)&&(n[s]="auto"),n[s]!=null&&n[s]!=="auto"});mergeLayoutParam(a,t,{type:"box",ignoreSize:o})}var CalendarView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){var s=this.group;s.removeAll();var l=r.coordinateSystem,u=l.getRangeInfo(),c=l.getOrient(),f=n.getLocaleModel();this._renderDayRect(r,u,s),this._renderLines(r,u,c,s),this._renderYearText(r,u,c,s),this._renderMonthText(r,f,c,s),this._renderWeekText(r,f,u,c,s)},t.prototype._renderDayRect=function(r,n,o){for(var s=r.coordinateSystem,l=r.getModel("itemStyle").getItemStyle(),u=s.getCellWidth(),c=s.getCellHeight(),f=n.start.time;f<=n.end.time;f=s.getNextNDay(f,1).time){var h=s.dataToCalendarLayout([f],!1).tl,v=new Rect$2({shape:{x:h[0],y:h[1],width:u,height:c},cursor:"default",style:l});o.add(v)}},t.prototype._renderLines=function(r,n,o,s){var l=this,u=r.coordinateSystem,c=r.getModel(["splitLine","lineStyle"]).getLineStyle(),f=r.get(["splitLine","show"]),h=c.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var v=n.start,d=0;v.time<=n.end.time;d++){g(v.formatedDate),d===0&&(v=u.getDateInfo(n.start.y+"-"+n.start.m));var p=v.date;p.setMonth(p.getMonth()+1),v=u.getDateInfo(p)}g(u.getNextNDay(n.end.time,1).formatedDate);function g(y){l._firstDayOfMonth.push(u.getDateInfo(y)),l._firstDayPoints.push(u.dataToCalendarLayout([y],!1).tl);var _=l._getLinePointsOfOneWeek(r,y,o);l._tlpoints.push(_[0]),l._blpoints.push(_[_.length-1]),f&&l._drawSplitline(_,c,s)}f&&this._drawSplitline(l._getEdgesPoints(l._tlpoints,h,o),c,s),f&&this._drawSplitline(l._getEdgesPoints(l._blpoints,h,o),c,s)},t.prototype._getEdgesPoints=function(r,n,o){var s=[r[0].slice(),r[r.length-1].slice()],l=o==="horizontal"?0:1;return s[0][l]=s[0][l]-n/2,s[1][l]=s[1][l]+n/2,s},t.prototype._drawSplitline=function(r,n,o){var s=new Polyline$1({z2:20,shape:{points:r},style:n});o.add(s)},t.prototype._getLinePointsOfOneWeek=function(r,n,o){for(var s=r.coordinateSystem,l=s.getDateInfo(n),u=[],c=0;c<7;c++){var f=s.getNextNDay(l.time,c),h=s.dataToCalendarLayout([f.time],!1);u[2*f.day]=h.tl,u[2*f.day+1]=h[o==="horizontal"?"bl":"tr"]}return u},t.prototype._formatterLabel=function(r,n){return isString(r)&&r?formatTplSimple(r,n):isFunction(r)?r(n):n.nameMap},t.prototype._yearTextPositionControl=function(r,n,o,s,l){var u=n[0],c=n[1],f=["center","bottom"];s==="bottom"?(c+=l,f=["center","top"]):s==="left"?u-=l:s==="right"?(u+=l,f=["center","top"]):c-=l;var h=0;return(s==="left"||s==="right")&&(h=Math.PI/2),{rotation:h,x:u,y:c,style:{align:f[0],verticalAlign:f[1]}}},t.prototype._renderYearText=function(r,n,o,s){var l=r.getModel("yearLabel");if(l.get("show")){var u=l.get("margin"),c=l.get("position");c||(c=o!=="horizontal"?"top":"left");var f=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],h=(f[0][0]+f[1][0])/2,v=(f[0][1]+f[1][1])/2,d=o==="horizontal"?0:1,p={top:[h,f[d][1]],bottom:[h,f[1-d][1]],left:[f[1-d][0],v],right:[f[d][0],v]},g=n.start.y;+n.end.y>+n.start.y&&(g=g+"-"+n.end.y);var y=l.get("formatter"),_={start:n.start.y,end:n.end.y,nameMap:g},S=this._formatterLabel(y,_),x=new ZRText({z2:30,style:createTextStyle(l,{text:S}),silent:l.get("silent")});x.attr(this._yearTextPositionControl(x,p[c],o,c,u)),s.add(x)}},t.prototype._monthTextPositionControl=function(r,n,o,s,l){var u="left",c="top",f=r[0],h=r[1];return o==="horizontal"?(h=h+l,n&&(u="center"),s==="start"&&(c="bottom")):(f=f+l,n&&(c="middle"),s==="start"&&(u="right")),{x:f,y:h,align:u,verticalAlign:c}},t.prototype._renderMonthText=function(r,n,o,s){var l=r.getModel("monthLabel");if(l.get("show")){var u=l.get("nameMap"),c=l.get("margin"),f=l.get("position"),h=l.get("align"),v=[this._tlpoints,this._blpoints];(!u||isString(u))&&(u&&(n=getLocaleModel(u)||n),u=n.get(["time","monthAbbr"])||[]);var d=f==="start"?0:1,p=o==="horizontal"?0:1;c=f==="start"?-c:c;for(var g=h==="center",y=l.get("silent"),_=0;_<v[d].length-1;_++){var S=v[d][_].slice(),x=this._firstDayOfMonth[_];if(g){var T=this._firstDayPoints[_];S[p]=(T[p]+v[0][_+1][p])/2}var b=l.get("formatter"),C=u[+x.m-1],w={yyyy:x.y,yy:(x.y+"").slice(2),MM:x.m,M:+x.m,nameMap:C},M=this._formatterLabel(b,w),P=new ZRText({z2:30,style:extend(createTextStyle(l,{text:M}),this._monthTextPositionControl(S,g,o,f,c)),silent:y});s.add(P)}}},t.prototype._weekTextPositionControl=function(r,n,o,s,l){var u="center",c="middle",f=r[0],h=r[1],v=o==="start";return n==="horizontal"?(f=f+s+(v?1:-1)*l[0]/2,u=v?"right":"left"):(h=h+s+(v?1:-1)*l[1]/2,c=v?"bottom":"top"),{x:f,y:h,align:u,verticalAlign:c}},t.prototype._renderWeekText=function(r,n,o,s,l){var u=r.getModel("dayLabel");if(u.get("show")){var c=r.coordinateSystem,f=u.get("position"),h=u.get("nameMap"),v=u.get("margin"),d=c.getFirstDayOfWeek();if(!h||isString(h)){h&&(n=getLocaleModel(h)||n);var p=n.get(["time","dayOfWeekShort"]);h=p||map$1(n.get(["time","dayOfWeekAbbr"]),function(w){return w[0]})}var g=c.getNextNDay(o.end.time,7-o.lweek).time,y=[c.getCellWidth(),c.getCellHeight()];v=parsePercent(v,Math.min(y[1],y[0])),f==="start"&&(g=c.getNextNDay(o.start.time,-(7+o.fweek)).time,v=-v);for(var _=u.get("silent"),S=0;S<7;S++){var x=c.getNextNDay(g,S),T=c.dataToCalendarLayout([x.time],!1).center,b=S;b=Math.abs((S+d)%7);var C=new ZRText({z2:30,style:extend(createTextStyle(u,{text:h[b]}),this._weekTextPositionControl(T,s,f,v,y)),silent:_});l.add(C)}}},t.type="calendar",t}(ComponentView),PROXIMATE_ONE_DAY=864e5,Calendar=function(){function a(t,r,n){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=t,this._update(r,n)}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(t){t=parseDate(t);var r=t.getFullYear(),n=t.getMonth()+1,o=n<10?"0"+n:""+n,s=t.getDate(),l=s<10?"0"+s:""+s,u=t.getDay();return u=Math.abs((u+7-this.getFirstDayOfWeek())%7),{y:r+"",m:o,d:l,day:u,time:t.getTime(),formatedDate:r+"-"+o+"-"+l,date:t}},a.prototype.getNextNDay=function(t,r){return r=r||0,r===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+r),this.getDateInfo(t))},a.prototype._update=function(t,r){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,o=["width","height"],s=this._model.getCellSize().slice(),l=this._model.getBoxLayoutParams(),u=this._orient==="horizontal"?[n,7]:[7,n];each$f([0,1],function(v){h(s,v)&&(l[o[v]]=s[v]*u[v])});var c={width:r.getWidth(),height:r.getHeight()},f=this._rect=getLayoutRect(l,c);each$f([0,1],function(v){h(s,v)||(s[v]=f[o[v]]/u[v])});function h(v,d){return v[d]!=null&&v[d]!=="auto"}this._sw=s[0],this._sh=s[1]},a.prototype.dataToPoint=function(t,r,n){n=n||[],isArray$1(t)&&(t=t[0]),r==null&&(r=!0);var o=this.getDateInfo(t),s=this._rangeInfo,l=o.formatedDate;if(r&&!(o.time>=s.start.time&&o.time<s.end.time+PROXIMATE_ONE_DAY))return n[0]=n[1]=NaN,n;var u=o.day,c=this._getRangeInfo([s.start.time,l]).nthWeek;return this._orient==="vertical"?(n[0]=this._rect.x+u*this._sw+this._sw/2,n[1]=this._rect.y+c*this._sh+this._sh/2):(n[0]=this._rect.x+c*this._sw+this._sw/2,n[1]=this._rect.y+u*this._sh+this._sh/2),n},a.prototype.pointToData=function(t){var r=this.pointToDate(t);return r&&r.time},a.prototype.dataToLayout=function(t,r,n){n=n||{};var o=n.rect=n.rect||{},s=n.contentRect=n.contentRect||{},l=this.dataToPoint(t,r);return o.x=l[0]-this._sw/2,o.y=l[1]-this._sh/2,o.width=this._sw,o.height=this._sh,BoundingRect.copy(s,o),expandOrShrinkRect(s,this._lineWidth/2,!0,!0),n},a.prototype.dataToCalendarLayout=function(t,r){var n=this.dataToPoint(t,r);return{center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},a.prototype.pointToDate=function(t){var r=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,r-1,o):this._getDateByWeeksAndDay(r,n-1,o)},a.prototype.convertToPixel=function(t,r,n){var o=getCoordSys$1(r);return o===this?o.dataToPoint(n):null},a.prototype.convertToLayout=function(t,r,n){var o=getCoordSys$1(r);return o===this?o.dataToLayout(n):null},a.prototype.convertFromPixel=function(t,r,n){var o=getCoordSys$1(r);return o===this?o.pointToData(n):null},a.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var t=this._model.get("range"),r;if(isArray$1(t)&&t.length===1&&(t=t[0]),isArray$1(t))r=t;else{var n=t.toString();if(/^\d{4}$/.test(n)&&(r=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var o=this.getDateInfo(n),s=o.date;s.setMonth(s.getMonth()+1);var l=this.getNextNDay(s,-1);r=[o.formatedDate,l.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(r=[n,n])}if(!r)return t;var u=this._getRangeInfo(r);return u.start.time>u.end.time&&r.reverse(),r},a.prototype._getRangeInfo=function(t){var r=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],n;r[0].time>r[1].time&&(n=!0,r.reverse());var o=Math.floor(r[1].time/PROXIMATE_ONE_DAY)-Math.floor(r[0].time/PROXIMATE_ONE_DAY)+1,s=new Date(r[0].time),l=s.getDate(),u=r[1].date.getDate();s.setDate(l+o-1);var c=s.getDate();if(c!==u)for(var f=s.getTime()-r[1].time>0?1:-1;(c=s.getDate())!==u&&(s.getTime()-r[1].time)*f>0;)o-=f,s.setDate(c-f);var h=Math.floor((o+r[0].day+6)/7),v=n?-h+1:h-1;return n&&r.reverse(),{range:[r[0].formatedDate,r[1].formatedDate],start:r[0],end:r[1],allDay:o,weeks:h,nthWeek:v,fweek:r[0].day,lweek:r[1].day}},a.prototype._getDateByWeeksAndDay=function(t,r,n){var o=this._getRangeInfo(n);if(t>o.weeks||t===0&&r<o.fweek||t===o.weeks&&r>o.lweek)return null;var s=(t-1)*7-o.fweek+r,l=new Date(o.start.time);return l.setDate(+o.start.d+s),this.getDateInfo(l)},a.create=function(t,r){var n=[];return t.eachComponent("calendar",function(o){var s=new a(o,t,r);n.push(s),o.coordinateSystem=s}),t.eachComponent(function(o,s){injectCoordSysByOption({targetModel:s,coordSysType:"calendar",coordSysProvider:simpleCoordSysInjectionProvider})}),n},a.dimensions=["time","value"],a}();function getCoordSys$1(a){var t=a.calendarModel,r=a.seriesModel,n=t?t.coordinateSystem:r?r.coordinateSystem:null;return n}function install$o(a){a.registerComponentModel(CalendarModel),a.registerComponentView(CalendarView),a.registerCoordinateSystem("calendar",Calendar)}var MatrixCellLayoutInfoType={level:1,leaf:2,nonLeaf:3},MatrixClampOption={none:0,all:1,body:2,corner:3};function coordDataToAllCellLevelLayout(a,t,r){var n=t[XY$2[r]].getCell(a);return!n&&isNumber(a)&&a<0&&(n=t[XY$2[1-r]].getUnitLayoutInfo(r,Math.round(a))),n}function resetXYLocatorRange(a){var t=a||[];return t[0]=t[0]||[],t[1]=t[1]||[],t[0][0]=t[0][1]=t[1][0]=t[1][1]=NaN,t}function parseCoordRangeOption(a,t,r,n,o){parseCoordRangeOptionOnOneDim(a[0],t,o,r,n,0),parseCoordRangeOptionOnOneDim(a[1],t,o,r,n,1)}function parseCoordRangeOptionOnOneDim(a,t,r,n,o,s){a[0]=1/0,a[1]=-1/0;var l=n[s],u=isArray$1(l)?l:[l],c=u.length,f=!!r;if(c>=1?(parseCoordRangeOptionOnOneDimOnePart(a,t,u,f,o,s,0),c>1&&parseCoordRangeOptionOnOneDimOnePart(a,t,u,f,o,s,c-1)):a[0]=a[1]=NaN,f){var h=-o[XY$2[1-s]].getLocatorCount(s),v=o[XY$2[s]].getLocatorCount(s)-1;r===MatrixClampOption.body?h=mathMax$a(0,h):r===MatrixClampOption.corner&&(v=mathMin$a(-1,v)),v<h&&(h=v=NaN),eqNaN(a[0])&&(a[0]=h),eqNaN(a[1])&&(a[1]=v),a[0]=mathMax$a(mathMin$a(a[0],v),h),a[1]=mathMax$a(mathMin$a(a[1],v),h)}}function parseCoordRangeOptionOnOneDimOnePart(a,t,r,n,o,s,l){var u=coordDataToAllCellLevelLayout(r[l],o,s);if(!u){a[0]=a[1]=NaN;return}var c=u.id[XY$2[s]],f=c,h=cellLayoutInfoToDimCell(u);h&&(f+=h.span[XY$2[s]]-1),a[0]=mathMin$a(a[0],c,f),a[1]=mathMax$a(a[1],c,f)}function isXYLocatorRangeInvalidOnDim(a,t){return eqNaN(a[t][0])||eqNaN(a[t][1])}function resolveXYLocatorRangeByCellMerge(a,t,r,n){t=t||_tmpOutMergedMarkList;for(var o=0;o<n;o++)t[o]=!1;for(;;){for(var s=!1,o=0;o<n;o++){var l=r[o];!t[o]&&l.cellMergeOwner&&expandXYLocatorRangeIfIntersect(a,l.locatorRange)&&(t[o]=!0,s=!0)}if(!s)break}}var _tmpOutMergedMarkList=[];function expandXYLocatorRangeIfIntersect(a,t){return!locatorRangeIntersectOneDim(a[0],t[0])||!locatorRangeIntersectOneDim(a[1],t[1])?!1:(a[0][0]=mathMin$a(a[0][0],t[0][0]),a[0][1]=mathMax$a(a[0][1],t[0][1]),a[1][0]=mathMin$a(a[1][0],t[1][0]),a[1][1]=mathMax$a(a[1][1],t[1][1]),!0)}function locatorRangeIntersectOneDim(a,t){return a[1]>=t[0]&&a[0]<=t[1]}function fillIdSpanFromLocatorRange(a,t){a.id.set(t[0][0],t[1][0]),a.span.set(t[0][1]-a.id.x+1,t[1][1]-a.id.y+1)}function cloneXYLocatorRange(a,t){a[0][0]=t[0][0],a[0][1]=t[0][1],a[1][0]=t[1][0],a[1][1]=t[1][1]}function xyLocatorRangeToRectOneDim(a,t,r,n){var o=coordDataToAllCellLevelLayout(t[n][0],r,n),s=coordDataToAllCellLevelLayout(t[n][1],r,n);a[XY$2[n]]=a[WH$2[n]]=NaN,o&&s&&(a[XY$2[n]]=o.xy,a[WH$2[n]]=s.xy+s.wh-o.xy)}function setDimXYValue(a,t,r,n){return a[XY$2[t]]=r,a[XY$2[1-t]]=n,a}function cellLayoutInfoToDimCell(a){return a&&(a.type===MatrixCellLayoutInfoType.leaf||a.type===MatrixCellLayoutInfoType.nonLeaf)?a:null}function createNaNRectLike(){return{x:NaN,y:NaN,width:NaN,height:NaN}}var MatrixDim=function(){function a(t,r){this._cells=[],this._levels=[],this.dim=t,this.dimIdx=t==="x"?0:1,this._model=r,this._uniqueValueGen=createUniqueValueGenerator(t);var n=r.get("data",!0);n!=null&&!isArray$1(n)&&(n=[]),n?this._initByDimModelData(n):this._initBySeriesData()}return a.prototype._initByDimModelData=function(t){var r=this,n=r._cells,o=r._levels,s=[],l=0;r._leavesCount=u(t,0,0),c();return;function u(f,h,v){var d=0;return f&&each$f(f,function(p,g){var y;isString(p)?y={value:p}:isObject$3(p)?(y=p,p.value!=null&&!isString(p.value)&&(y={value:null})):y={value:null};var _={type:MatrixCellLayoutInfoType.nonLeaf,ordinal:NaN,level:v,firstLeafLocator:h,id:new Point,span:setDimXYValue(new Point,r.dimIdx,1,1),option:y,xy:NaN,wh:NaN,dim:r,rect:createNaNRectLike()};l++,(s[h]||(s[h]=[])).push(_),o[v]||(o[v]={type:MatrixCellLayoutInfoType.level,xy:NaN,wh:NaN,option:null,id:new Point,dim:r});var S=u(y.children,h,v+1),x=Math.max(1,S);_.span[XY$2[r.dimIdx]]=x,d+=x,h+=x}),d}function c(){for(var f=[];n.length<l;)for(var h=0;h<s.length;h++){var v=s[h].pop();if(v){v.ordinal=f.length;var d=v.option.value;f.push(d),n.push(v),r._uniqueValueGen.calcDupBase(d)}}r._uniqueValueGen.ensureValueUnique(f,n);var p=r._ordinalMeta=new OrdinalMeta({categories:f,needCollect:!1,deduplication:!1});r._scale=new OrdinalScale({ordinalMeta:p});for(var g=0;g<r._leavesCount;g++){var y=r._cells[g];y.type=MatrixCellLayoutInfoType.leaf,y.span[XY$2[1-r.dimIdx]]=r._levels.length-y.level}r._initCellsId(),r._initLevelIdOptions()}},a.prototype._initBySeriesData=function(){var t=this;t._leavesCount=0,t._levels=[{type:MatrixCellLayoutInfoType.level,xy:NaN,wh:NaN,option:null,id:new Point,dim:t}],t._initLevelIdOptions();var r=t._ordinalMeta=new OrdinalMeta({needCollect:!0,deduplication:!0,onCollect:function(n,o){var s=t._cells[o]={type:MatrixCellLayoutInfoType.leaf,ordinal:o,level:0,firstLeafLocator:o,id:new Point,span:setDimXYValue(new Point,t.dimIdx,1,1),option:{value:n+""},xy:NaN,wh:NaN,dim:t,rect:createNaNRectLike()};t._leavesCount++,t._setCellId(s)}});t._scale=new OrdinalScale({ordinalMeta:r})},a.prototype._setCellId=function(t){var r=this._levels.length,n=this.dimIdx;setDimXYValue(t.id,n,t.firstLeafLocator,t.level-r)},a.prototype._initCellsId=function(){var t=this._levels.length,r=this.dimIdx;each$f(this._cells,function(n){setDimXYValue(n.id,r,n.firstLeafLocator,n.level-t)})},a.prototype._initLevelIdOptions=function(){var t=this._levels.length,r=this.dimIdx,n=this._model.get("levels",!0);n=isArray$1(n)?n:[],each$f(this._levels,function(o,s){setDimXYValue(o.id,r,0,s-t),o.option=n[s]})},a.prototype.shouldShow=function(){return!!this._model.getShallow("show",!0)},a.prototype.resetLayoutIterator=function(t,r,n,o){if(t=t||new ListIterator,r===this.dimIdx){var s=this._leavesCount,l=n!=null?Math.max(0,n):0;o=o!=null?Math.min(o,s):s,t.reset(this._cells,l,l+o)}else{var s=this._levels.length,l=n!=null?Math.max(0,n+s):0;o=o!=null?Math.min(o,s):s,t.reset(this._levels,l,l+o)}return t},a.prototype.resetCellIterator=function(t){return(t||new ListIterator).reset(this._cells,0)},a.prototype.resetLevelIterator=function(t){return(t||new ListIterator).reset(this._levels,0)},a.prototype.getLayout=function(t,r,n){var o=this.getUnitLayoutInfo(r,n);t[XY$2[r]]=o?o.xy:NaN,t[WH$2[r]]=o?o.wh:NaN},a.prototype.getUnitLayoutInfo=function(t,r){return t===this.dimIdx?r<this._leavesCount?this._cells[r]:void 0:this._levels[r+this._levels.length]},a.prototype.getCell=function(t){var r=this._scale.parse(t);return eqNaN(r)?void 0:this._cells[r]},a.prototype.getLocatorCount=function(t){return t===this.dimIdx?this._leavesCount:this._levels.length},a.prototype.getOrdinalMeta=function(){return this._ordinalMeta},a}();function createUniqueValueGenerator(a){var t=a.toUpperCase(),r=new RegExp("^"+t+"([0-9]+)$"),n=0;function o(u){var c;u!=null&&(c=u.match(r))&&(n=mathMax$a(n,+c[1]+1))}function s(){return""+t+n++}function l(u,c){for(var f=createHashMap(),h=0;h<u.length;h++){var v=u[h];(v==null||f.get(v)!=null)&&(u[h]=v=s(),c[h].option=defaults({value:v},c[h].option)),f.set(v,!0)}}return{calcDupBase:o,ensureValueUnique:l}}var MatrixBodyCorner=function(){function a(t,r,n){this._model=r,this._dims=n,this._kind=t,this._cellMergeOwnerList=[]}return a.prototype._ensureCellMap=function(){var t=this,r=t._cellMap;return r||(r=t._cellMap=createHashMap(),n()),r;function n(){var s=[],l=t._model.getShallow("data");l&&!isArray$1(l)&&(l=null),each$f(l,function(g,y){if(!(!isObject$3(g)||!isArray$1(g.coord))){var _=resetXYLocatorRange([]),S=null;if(parseCoordRangeOption(_,S,g.coord,t._dims,g.coordClamp?MatrixClampOption[t._kind]:MatrixClampOption.none),!(isXYLocatorRangeInvalidOnDim(_,0)||isXYLocatorRangeInvalidOnDim(_,1))){var x=g&&g.mergeCells,T={id:new Point,span:new Point,locatorRange:_,option:g,cellMergeOwner:x};fillIdSpanFromLocatorRange(T,_),s.push(T)}}});for(var u=[],c=0;c<s.length;c++){var f=s[c];if(f.cellMergeOwner){var h=f.locatorRange;resolveXYLocatorRangeByCellMerge(h,u,s,c);for(var v=0;v<c;v++)u[v]&&(s[v].cellMergeOwner=!1);if(h[0][0]!==f.id.x||h[1][0]!==f.id.y){f.cellMergeOwner=!1;var d=extend({},f.option);d.coord=null;var p={id:new Point,span:new Point,locatorRange:h,option:d,cellMergeOwner:!0};fillIdSpanFromLocatorRange(p,h),s.push(p)}}}each$f(s,function(g){var y=o(g.id.x,g.id.y);if(g.cellMergeOwner&&(y.cellMergeOwner=!0,y.span=g.span,y.locatorRange=g.locatorRange,y.spanRect=createNaNRectLike(),t._cellMergeOwnerList.push(y)),!(!g.cellMergeOwner&&!g.option))for(var _=0;_<g.span.y;_++)for(var S=0;S<g.span.x;S++){var x=o(g.id.x+S,g.id.y+_);x.option=g.option,g.cellMergeOwner&&(x.inSpanOf=y)}})}function o(s,l){var u=makeCellMapKey(s,l),c=r.get(u);return c||(c=r.set(u,{id:new Point(s,l),option:null,inSpanOf:null,span:null,spanRect:null,locatorRange:null,cellMergeOwner:!1})),c}},a.prototype.getCell=function(t){return this._ensureCellMap().get(makeCellMapKey(t[0],t[1]))},a.prototype.travelExistingCells=function(t){this._ensureCellMap().each(t)},a.prototype.expandRangeByCellMerge=function(t){if(!isXYLocatorRangeInvalidOnDim(t,0)&&!isXYLocatorRangeInvalidOnDim(t,1)&&t[0][0]===t[0][1]&&t[1][0]===t[1][1]){_tmpERBCMLocator[0]=t[0][0],_tmpERBCMLocator[1]=t[1][0];var r=this.getCell(_tmpERBCMLocator),n=r&&r.inSpanOf;if(n){cloneXYLocatorRange(t,n.locatorRange);return}}var o=this._cellMergeOwnerList;resolveXYLocatorRangeByCellMerge(t,null,o,o.length)},a}(),_tmpERBCMLocator=[];function makeCellMapKey(a,t){return a+"|"+t}var defaultLabelOption={show:!0,color:tokens.color.secondary,overflow:"break",lineOverflow:"truncate",padding:[2,3,2,3],distance:0};function makeDefaultCellItemStyleOption(a){return{color:"none",borderWidth:1,borderColor:a?"none":tokens.color.borderTint}}var defaultDimOption={show:!0,label:defaultLabelOption,itemStyle:makeDefaultCellItemStyleOption(!1),silent:void 0,dividerLineStyle:{width:1,color:tokens.color.border}},defaultBodyOption={label:defaultLabelOption,itemStyle:makeDefaultCellItemStyleOption(!1),silent:void 0},defaultCornerOption={label:defaultLabelOption,itemStyle:makeDefaultCellItemStyleOption(!0),silent:void 0},defaultMatrixOption={z:-50,left:"10%",top:"10%",right:"10%",bottom:"10%",x:defaultDimOption,y:defaultDimOption,body:defaultBodyOption,corner:defaultCornerOption,backgroundStyle:{color:"none",borderColor:tokens.color.axisLine,borderWidth:1}},MatrixModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){var r=this._dimModels={x:new MatrixDimensionModel(this.get("x",!0)||{}),y:new MatrixDimensionModel(this.get("y",!0)||{})};r.x.option.type=r.y.option.type="category";var n=r.x.dim=new MatrixDim("x",r.x),o=r.y.dim=new MatrixDim("y",r.y),s={x:n,y:o};this._body=new MatrixBodyCorner("body",new Model(this.getShallow("body")),s),this._corner=new MatrixBodyCorner("corner",new Model(this.getShallow("corner")),s)},t.prototype.getDimensionModel=function(r){return this._dimModels[r]},t.prototype.getBody=function(){return this._body},t.prototype.getCorner=function(){return this._corner},t.type="matrix",t.layoutMode="box",t.defaultOption=defaultMatrixOption,t}(ComponentModel),MatrixDimensionModel=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.getOrdinalMeta=function(){return this.dim.getOrdinalMeta()},t}(Model),round=Math.round,Z2_BACKGROUND=0,Z2_OUTER_BORDER=99,Z2_BODY_CORNER_CELL_DEFAULT={normal:25,special:100},Z2_DIMENSION_CELL_DEFAULT={normal:50,special:125},MatrixView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n){this.group.removeAll();var o=this.group,s=r.coordinateSystem,l=s.getRect(),u=r.getDimensionModel("x"),c=r.getDimensionModel("y"),f=u.dim,h=c.dim;renderDimensionCells(o,r,n),createBodyAndCorner(o,r,f,h,n);var v=r.getShallow("borderZ2",!0),d=retrieve2(v,Z2_OUTER_BORDER),p=d-1,g=r.getModel("backgroundStyle").getItemStyle(["borderWidth"]);g.lineWidth=0;var y=r.getModel("backgroundStyle").getItemStyle(["color","decal","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]);y.fill="none";var _=createMatrixRect(l.clone(),g,Z2_BACKGROUND),S=createMatrixRect(l.clone(),y,d);_.silent=!0,S.silent=!0,o.add(_),o.add(S);var x=f.getUnitLayoutInfo(0,0),T=h.getUnitLayoutInfo(1,0);x&&T&&(f.shouldShow()&&o.add(createMatrixLine({x1:l.x,y1:T.xy,x2:l.x+l.width,y2:T.xy},u.getModel("dividerLineStyle").getLineStyle(),p)),h.shouldShow()&&o.add(createMatrixLine({x1:x.xy,y1:l.y,x2:x.xy,y2:l.y+l.height},c.getModel("dividerLineStyle").getLineStyle(),p)))},t.type="matrix",t}(ComponentView);function renderDimensionCells(a,t,r){n(0),n(1);function n(o){var s=t.getDimensionModel(XY$2[o]),l=s.dim;if(l.shouldShow())for(var u=s.getModel("itemStyle"),c=s.getModel("label"),f=t.getShallow("tooltip",!0),h=[],v=l.resetCellIterator();v.next();){var d=v.item,p={};BoundingRect.copy(p,d.rect),set$1(h,d.id.x,d.id.y),createMatrixCell(h,t,a,r,d.option,u,c,s,p,d.option.value,Z2_DIMENSION_CELL_DEFAULT,f)}}}function createBodyAndCorner(a,t,r,n,o){s("body",t.getBody(),r,n),r.shouldShow()&&n.shouldShow()&&s("corner",t.getCorner(),n,r);function s(l,u,c,f){var h=new Model(t.getShallow(l,!0)),v=h.getModel("itemStyle"),d=h.getModel("label"),p=new ListIterator,g=new ListIterator,y=[],_=t.getShallow("tooltip",!0);for(f.resetLayoutIterator(g,1);g.next();)for(c.resetLayoutIterator(p,0);p.next();){var S=p.item,x=g.item;set$1(y,S.id.x,x.id.y);var T=u.getCell(y);if(!(T&&T.inSpanOf&&T.inSpanOf!==T)){var b={};T&&T.span?BoundingRect.copy(b,T.spanRect):(S.dim.getLayout(b,0,y[0]),x.dim.getLayout(b,1,y[1]));var C=T?T.option:null;createMatrixCell(y,t,a,o,C,v,d,h,b,C?C.value:null,Z2_BODY_CORNER_CELL_DEFAULT,_)}}}}function createMatrixCell(a,t,r,n,o,s,l,u,c,f,h,v){var d;_tmpCellItemStyleModel.option=o?o.itemStyle:null,_tmpCellItemStyleModel.parentModel=s,_tmpCellModel.option=o,_tmpCellModel.parentModel=u;var p=retrieve2(_tmpCellModel.getShallow("z2"),o&&o.itemStyle?h.special:h.normal),g=v&&v.show,y=createMatrixRect(c,_tmpCellItemStyleModel.getItemStyle(),p);r.add(y);var _=_tmpCellModel.get("cursor");_!=null&&y.attr("cursor",_);var S;if(f!=null){var x=f+"";if(_tmpCellLabelModel.option=o?o.label:null,_tmpCellLabelModel.parentModel=l,_tmpCellLabelModel.ecModel=n,setLabelStyle(y,{normal:_tmpCellLabelModel},{defaultText:x,autoOverflowArea:!0,layoutRect:clone$4(y.shape)}),S=y.getTextContent(),S){S.z2=p+1;var T=S.style;if(T&&T.overflow&&T.overflow!=="none"&&T.lineOverflow){var b={};BoundingRect.copy(b,c),expandOrShrinkRect(b,(((d=y.style)===null||d===void 0?void 0:d.lineWidth)||0)/2,!0,!0),y.updateInnerText(),S.getLocalTransform(_tmpInnerTextTrans),invert(_tmpInnerTextTrans,_tmpInnerTextTrans),BoundingRect.applyTransform(b,b,_tmpInnerTextTrans),S.setClipPath(new Rect$2({shape:b}))}}setTooltipConfig({el:y,componentModel:t,itemName:x,itemTooltipOption:v,formatterParamsExtra:{xyLocator:a.slice()}})}if(S){var C=_tmpCellLabelModel.get("silent");C==null&&(C=!g),S.silent=C,S.ignoreHostSilent=!0}var w=_tmpCellModel.get("silent");w==null&&(w=!y.style||y.style.fill==="none"||!y.style.fill),y.silent=w,clearTmpModel(_tmpCellModel),clearTmpModel(_tmpCellItemStyleModel),clearTmpModel(_tmpCellLabelModel)}var _tmpCellModel=new Model,_tmpCellItemStyleModel=new Model,_tmpCellLabelModel=new Model,_tmpInnerTextTrans=[];function createMatrixRect(a,t,r){var n=t.lineWidth;if(n){var o=a.x+a.width,s=a.y+a.height;a.x=subPixelOptimize$1(a.x,n,!0),a.y=subPixelOptimize$1(a.y,n,!0),a.width=subPixelOptimize$1(o,n,!0)-a.x,a.height=subPixelOptimize$1(s,n,!0)-a.y}return new Rect$2({shape:a,style:t,z2:r})}function createMatrixLine(a,t,r){var n=t.lineWidth;return n&&(round(a.x1*2)===round(a.x2*2)&&(a.x1=a.x2=subPixelOptimize$1(a.x1,n,!0)),round(a.y1*2)===round(a.y2*2)&&(a.y1=a.y2=subPixelOptimize$1(a.y1,n,!0))),new Line$1({shape:a,style:t,silent:!0,z2:r})}var Matrix=function(){function a(t,r,n){this.dimensions=a.dimensions,this.type="matrix",this._model=t;var o=this._dimModels={x:t.getDimensionModel("x"),y:t.getDimensionModel("y")};this._dims={x:o.x.dim,y:o.y.dim},this._resize(t,n)}return a.getDimensionsInfo=function(){return[{name:"x",type:"ordinal"},{name:"y",type:"ordinal"},{name:"value"}]},a.create=function(t,r){var n=[];return t.eachComponent("matrix",function(o){var s=new a(o,t,r);n.push(s),o.coordinateSystem=s}),t.eachComponent(function(o,s){injectCoordSysByOption({targetModel:s,coordSysType:"matrix",coordSysProvider:simpleCoordSysInjectionProvider})}),n},a.prototype.getRect=function(){return this._rect},a.prototype._resize=function(t,r){var n=this._dims,o=this._dimModels,s=this._rect=getLayoutRect(t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()});layOutUnitsOnDimension(o,n,s,0),layOutUnitsOnDimension(o,n,s,1),layOutDimCellsRestInfoByUnit(0,n),layOutDimCellsRestInfoByUnit(1,n),layOutBodyCornerCellMerge(this._model.getBody(),n),layOutBodyCornerCellMerge(this._model.getCorner(),n)},a.prototype.dataToPoint=function(t,r,n){return n=n||[],this.dataToLayout(t,r,_dtpOutDataToLayout),n[0]=_dtpOutDataToLayout.rect.x+_dtpOutDataToLayout.rect.width/2,n[1]=_dtpOutDataToLayout.rect.y+_dtpOutDataToLayout.rect.height/2,n},a.prototype.dataToLayout=function(t,r,n){var o=this._dims;n=n||{};var s=n.rect=n.rect||{};s.x=s.y=s.width=s.height=NaN;var l=n.matrixXYLocatorRange=resetXYLocatorRange(n.matrixXYLocatorRange);return isArray$1(t)&&(parseCoordRangeOption(l,null,t,o,retrieve2(r&&r.clamp,MatrixClampOption.none)),(!r||!r.ignoreMergeCells)&&((!r||r.clamp!==MatrixClampOption.corner)&&this._model.getBody().expandRangeByCellMerge(l),(!r||r.clamp!==MatrixClampOption.body)&&this._model.getCorner().expandRangeByCellMerge(l)),xyLocatorRangeToRectOneDim(s,l,o,0),xyLocatorRangeToRectOneDim(s,l,o,1)),n},a.prototype.pointToData=function(t,r,n){var o=this._dims;return pointToDataOneDimPrepareCtx(_tmpCtxPointToData,0,o,t,r&&r.clamp),pointToDataOneDimPrepareCtx(_tmpCtxPointToData,1,o,t,r&&r.clamp),n=n||[],n[0]=n[1]=NaN,_tmpCtxPointToData.y===CtxPointToDataAreaType.inCorner&&_tmpCtxPointToData.x===CtxPointToDataAreaType.inBody?pointToDataOnlyHeaderFillOut(_tmpCtxPointToData,n,0,o):_tmpCtxPointToData.x===CtxPointToDataAreaType.inCorner&&_tmpCtxPointToData.y===CtxPointToDataAreaType.inBody?pointToDataOnlyHeaderFillOut(_tmpCtxPointToData,n,1,o):(pointToDataBodyCornerFillOut(_tmpCtxPointToData,n,0,o),pointToDataBodyCornerFillOut(_tmpCtxPointToData,n,1,o)),n},a.prototype.convertToPixel=function(t,r,n,o){var s=getCoordSys(r);return s===this?s.dataToPoint(n,o):void 0},a.prototype.convertToLayout=function(t,r,n,o){var s=getCoordSys(r);return s===this?s.dataToLayout(n,o):void 0},a.prototype.convertFromPixel=function(t,r,n,o){var s=getCoordSys(r);return s===this?s.pointToData(n,o):void 0},a.prototype.containPoint=function(t){return this._rect.contain(t[0],t[1])},a.dimensions=["x","y","value"],a}(),_dtpOutDataToLayout={rect:createNaNRectLike()},_ptdLevelIt=new ListIterator,_ptdDimCellIt=new ListIterator;function layOutUnitsOnDimension(a,t,r,n){for(var o=1-n,s=t[XY$2[n]],l=t[XY$2[o]],u=l.shouldShow(),c=s.resetCellIterator();c.next();)c.item.wh=c.item.xy=NaN;for(var f=l.resetLayoutIterator(null,n);f.next();)f.item.wh=f.item.xy=NaN;for(var h=r[WH$2[n]],v=s.getLocatorCount(n)+l.getLocatorCount(n),d=new Model,p=l.resetLevelIterator();p.next();)d.option=p.item.option,d.parentModel=a[XY$2[o]],_(p.item,u?d.get("levelSize"):0);for(var g=new Model,y=s.resetCellIterator();y.next();)y.item.type===MatrixCellLayoutInfoType.leaf&&(g.option=y.item.option,g.parentModel=void 0,_(y.item,g.get("size")));function _(M,P){var L=parseSizeOption(P,n,r);eqNaN(L)||(M.wh=confineSize(L,h),h=confineSize(h-M.wh),v--)}var S=v?h/v:0,x=!v&&h>=1,T=r[XY$2[n]],b=s.getLocatorCount(n)-1,C=new ListIterator;for(l.resetLayoutIterator(C,n);C.next();)w(C.item);for(s.resetLayoutIterator(C,n);C.next();)w(C.item);function w(M){eqNaN(M.wh)&&(M.wh=S),M.xy=T,M.id[XY$2[n]]===b&&!x&&(M.wh=r[XY$2[n]]+r[WH$2[n]]-M.xy),T+=M.wh}}function layOutDimCellsRestInfoByUnit(a,t){for(var r=t[XY$2[a]].resetCellIterator();r.next();){var n=r.item;layOutRectOneDimBasedOnUnit(n.rect,a,n.id,n.span,t),layOutRectOneDimBasedOnUnit(n.rect,1-a,n.id,n.span,t),n.type===MatrixCellLayoutInfoType.nonLeaf&&(n.xy=n.rect[XY$2[a]],n.wh=n.rect[WH$2[a]])}}function layOutBodyCornerCellMerge(a,t){a.travelExistingCells(function(r){var n=r.span;if(n){var o=r.spanRect,s=r.id;layOutRectOneDimBasedOnUnit(o,0,s,n,t),layOutRectOneDimBasedOnUnit(o,1,s,n,t)}})}function layOutRectOneDimBasedOnUnit(a,t,r,n,o){a[WH$2[t]]=0;var s=r[XY$2[t]],l=s<0?o[XY$2[1-t]]:o[XY$2[t]],u=l.getUnitLayoutInfo(t,r[XY$2[t]]);if(a[XY$2[t]]=u.xy,a[WH$2[t]]=u.wh,n[XY$2[t]]>1){var c=l.getUnitLayoutInfo(t,r[XY$2[t]]+n[XY$2[t]]-1);a[WH$2[t]]=c.xy+c.wh-u.xy}}function parseSizeOption(a,t,r){var n=parsePositionSizeOption(a,r[WH$2[t]]);return confineSize(n,r[WH$2[t]])}function confineSize(a,t){return Math.max(Math.min(a,retrieve2(t,1/0)),0)}function getCoordSys(a){var t=a.matrixModel,r=a.seriesModel,n=t?t.coordinateSystem:r?r.coordinateSystem:null;return n}var CtxPointToDataAreaType={inBody:1,inCorner:2,outside:3},_tmpCtxPointToData={x:null,y:null,point:[]};function pointToDataOneDimPrepareCtx(a,t,r,n,o){var s=r[XY$2[t]],l=r[XY$2[1-t]],u=s.getUnitLayoutInfo(t,s.getLocatorCount(t)-1),c=s.getUnitLayoutInfo(t,0),f=l.getUnitLayoutInfo(t,-l.getLocatorCount(t)),h=l.shouldShow()?l.getUnitLayoutInfo(t,-1):null,v=a.point[t]=n[t];if(!c&&!h){a[XY$2[t]]=CtxPointToDataAreaType.outside;return}if(o===MatrixClampOption.body){c?(a[XY$2[t]]=CtxPointToDataAreaType.inBody,v=mathMin$a(u.xy+u.wh,mathMax$a(c.xy,v)),a.point[t]=v):a[XY$2[t]]=CtxPointToDataAreaType.outside;return}else if(o===MatrixClampOption.corner){h?(a[XY$2[t]]=CtxPointToDataAreaType.inCorner,v=mathMin$a(h.xy+h.wh,mathMax$a(f.xy,v)),a.point[t]=v):a[XY$2[t]]=CtxPointToDataAreaType.outside;return}var d=c?c.xy:h?h.xy+h.wh:NaN,p=f?f.xy:d,g=u?u.xy+u.wh:d;if(v<p){if(!o){a[XY$2[t]]=CtxPointToDataAreaType.outside;return}v=p}else if(v>g){if(!o){a[XY$2[t]]=CtxPointToDataAreaType.outside;return}v=g}a.point[t]=v,a[XY$2[t]]=d<=v&&v<=g?CtxPointToDataAreaType.inBody:p<=v&&v<=d?CtxPointToDataAreaType.inCorner:CtxPointToDataAreaType.outside}function pointToDataOnlyHeaderFillOut(a,t,r,n){var o=1-r;if(a[XY$2[r]]!==CtxPointToDataAreaType.outside)for(n[XY$2[r]].resetCellIterator(_ptdDimCellIt);_ptdDimCellIt.next();){var s=_ptdDimCellIt.item;if(isCoordInRect(a.point[r],s.rect,r)&&isCoordInRect(a.point[o],s.rect,o)){t[r]=s.ordinal,t[o]=s.id[XY$2[o]];return}}}function pointToDataBodyCornerFillOut(a,t,r,n){if(a[XY$2[r]]!==CtxPointToDataAreaType.outside){var o=a[XY$2[r]]===CtxPointToDataAreaType.inCorner?n[XY$2[1-r]]:n[XY$2[r]];for(o.resetLayoutIterator(_ptdLevelIt,r);_ptdLevelIt.next();)if(isCoordInLayoutInfo(a.point[r],_ptdLevelIt.item)){t[r]=_ptdLevelIt.item.id[XY$2[r]];return}}}function isCoordInLayoutInfo(a,t){return t.xy<=a&&a<=t.xy+t.wh}function isCoordInRect(a,t,r){return t[XY$2[r]]<=a&&a<=t[XY$2[r]]+t[WH$2[r]]}function install$n(a){a.registerComponentModel(MatrixModel),a.registerComponentView(MatrixView),a.registerCoordinateSystem("matrix",Matrix)}function setKeyInfoToNewElOption(a,t){var r=a.existing;if(t.id=a.keyInfo.id,!t.type&&r&&(t.type=r.type),t.parentId==null){var n=t.parentOption;n?t.parentId=n.id:r&&(t.parentId=r.parentId)}t.parentOption=null}function isSetLoc(a,t){var r;return each$f(t,function(n){a[n]!=null&&a[n]!=="auto"&&(r=!0)}),r}function mergeNewElOptionToExist(a,t,r){var n=extend({},r),o=a[t],s=r.$action||"merge";s==="merge"?o?(merge(o,n,!0),mergeLayoutParam(o,n,{ignoreSize:!0}),copyLayoutParams(r,o),copyTransitionInfo(r,o),copyTransitionInfo(r,o,"shape"),copyTransitionInfo(r,o,"style"),copyTransitionInfo(r,o,"extra"),r.clipPath=o.clipPath):a[t]=n:s==="replace"?a[t]=n:s==="remove"&&o&&(a[t]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(a,t,r){if(r&&(!a[r]&&t[r]&&(a[r]={}),a=a[r],t=t[r]),!(!a||!t))for(var n=r?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,o=0;o<n.length;o++){var s=n[o];a[s]==null&&t[s]!=null&&(a[s]=t[s])}}function setLayoutInfoToExist(a,t){if(a&&(a.hv=t.hv=[isSetLoc(t,["left","right"]),isSetLoc(t,["top","bottom"])],a.type==="group")){var r=a,n=t;r.width==null&&(r.width=n.width=0),r.height==null&&(r.height=n.height=0)}}var GraphicComponentModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.preventAutoZ=!0,r}return t.prototype.mergeOption=function(r,n){var o=this.option.elements;this.option.elements=null,a.prototype.mergeOption.call(this,r,n),this.option.elements=o},t.prototype.optionUpdated=function(r,n){var o=this.option,s=(n?o:r).elements,l=o.elements=n?[]:o.elements,u=[];this._flatten(s,u,null);var c=mappingToExists(l,u,"normalMerge"),f=this._elOptionsToUpdate=[];each$f(c,function(h,v){var d=h.newOption;d&&(f.push(d),setKeyInfoToNewElOption(h,d),mergeNewElOptionToExist(l,v,d),setLayoutInfoToExist(l[v],d))},this),o.elements=filter(l,function(h){return h&&delete h.$action,h!=null})},t.prototype._flatten=function(r,n,o){each$f(r,function(s){if(s){o&&(s.parentOption=o),n.push(s);var l=s.children;l&&l.length&&this._flatten(l,n,s),delete s.children}},this)},t.prototype.useElOptionsToUpdate=function(){var r=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,r},t.type="graphic",t.defaultOption={elements:[]},t}(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$3,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this._elMap=createHashMap()},t.prototype.render=function(r,n,o){r!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=r,this._updateElements(r),this._relocate(r,o)},t.prototype._updateElements=function(r){var n=r.useElOptionsToUpdate();if(n){var o=this._elMap,s=this.group,l=r.get("z"),u=r.get("zlevel");each$f(n,function(c){var f=convertOptionIdName(c.id,null),h=f!=null?o.get(f):null,v=convertOptionIdName(c.parentId,null),d=v!=null?o.get(v):s,p=c.type,g=c.style;p==="text"&&g&&c.hv&&c.hv[1]&&(g.textVerticalAlign=g.textBaseline=g.verticalAlign=g.align=null);var y=c.textContent,_=c.textConfig;if(g&&isEC4CompatibleStyle(g,p,!!_,!!y)){var S=convertFromEC4CompatibleStyle(g,p,!0);!_&&S.textConfig&&(_=c.textConfig=S.textConfig),!y&&S.textContent&&(y=S.textContent)}var x=getCleanedElOption(c),T=c.$action||"merge",b=T==="merge",C=T==="replace";if(b){var w=!h,M=h;w?M=createEl(f,d,c.type,o):(M&&(inner$7(M).isNew=!1),stopPreviousKeyframeAnimationAndRestore(M)),M&&(applyUpdateTransition(M,x,r,{isInit:w}),updateCommonAttrs(M,c,l,u))}else if(C){removeEl$1(h,c,o,r);var P=createEl(f,d,c.type,o);P&&(applyUpdateTransition(P,x,r,{isInit:!0}),updateCommonAttrs(P,c,l,u))}else T==="remove"&&(updateLeaveTo(h,c),removeEl$1(h,c,o,r));var L=o.get(f);if(L&&y)if(b){var E=L.getTextContent();E?E.attr(y):L.setTextContent(new ZRText(y))}else C&&L.setTextContent(new ZRText(y));if(L){var I=c.clipPath;if(I){var R=I.type,D=void 0,w=!1;if(b){var O=L.getClipPath();w=!O||inner$7(O).type!==R,D=w?newEl(R):O}else C&&(w=!0,D=newEl(R));L.setClipPath(D),applyUpdateTransition(D,I,r,{isInit:w}),applyKeyframeAnimation(D,I.keyframeAnimation,r)}var $=inner$7(L);L.setTextConfig(_),$.option=c,setEventData(L,r,c),setTooltipConfig({el:L,componentModel:r,itemName:L.name,itemTooltipOption:c.tooltip}),applyKeyframeAnimation(L,c.keyframeAnimation,r)}})}},t.prototype._relocate=function(r,n){for(var o=r.option.elements,s=this.group,l=this._elMap,u=n.getWidth(),c=n.getHeight(),f=["x","y"],h=0;h<o.length;h++){var v=o[h],d=convertOptionIdName(v.id,null),p=d!=null?l.get(d):null;if(!(!p||!p.isGroup)){var g=p.parent,y=g===s,_=inner$7(p),S=inner$7(g);_.width=parsePercent(_.option.width,y?u:S.width)||0,_.height=parsePercent(_.option.height,y?c:S.height)||0}}for(var h=o.length-1;h>=0;h--){var v=o[h],d=convertOptionIdName(v.id,null),p=d!=null?l.get(d):null;if(p){var g=p.parent,S=inner$7(g),x=g===s?{width:u,height:c}:{width:S.width,height:S.height},T={},b=positionElement(p,v,x,null,{hv:v.hv,boundingMode:v.bounding},T);if(!inner$7(p).isNew&&b){for(var C=v.transition,w={},M=0;M<f.length;M++){var P=f[M],L=T[P];C&&(isTransitionAll(C)||indexOf(C,P)>=0)?w[P]=L:p[P]=L}updateProps$1(p,w,r,0)}else p.attr(T)}}},t.prototype._clear=function(){var r=this,n=this._elMap;n.each(function(o){removeEl$1(o,inner$7(o).option,n,r._lastGraphicModel)}),this._elMap=createHashMap()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(ComponentView);function newEl(a){var t=hasOwn(nonShapeGraphicElements,a)?nonShapeGraphicElements[a]:getShapeClass(a),r=new t({});return inner$7(r).type=a,r}function createEl(a,t,r,n){var o=newEl(r);return t.add(o),n.set(a,o),inner$7(o).id=a,inner$7(o).isNew=!0,o}function removeEl$1(a,t,r,n){var o=a&&a.parent;o&&(a.type==="group"&&a.traverse(function(s){removeEl$1(s,t,r,n)}),applyLeaveTransition(a,t,n),r.removeKey(inner$7(a).id))}function updateCommonAttrs(a,t,r,n){a.isGroup||each$f([["cursor",Displayable.prototype.cursor],["zlevel",n||0],["z",r||0],["z2",0]],function(o){var s=o[0];hasOwn(t,s)?a[s]=retrieve2(t[s],o[1]):a[s]==null&&(a[s]=o[1])}),each$f(keys(t),function(o){if(o.indexOf("on")===0){var s=t[o];a[o]=isFunction(s)?s:null}}),hasOwn(t,"draggable")&&(a.draggable=t.draggable),t.name!=null&&(a.name=t.name),t.id!=null&&(a.id=t.id)}function getCleanedElOption(a){return a=extend({},a),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(t){delete a[t]}),a}function setEventData(a,t,r){var n=getECData(a).eventData;!a.silent&&!a.ignore&&!n&&(n=getECData(a).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:a.name}),n&&(n.info=r.info)}function install$m(a){a.registerComponentModel(GraphicComponentModel),a.registerComponentView(GraphicComponentView),a.registerPreprocessor(function(t){var r=t.graphic;isArray$1(r)?!r[0]||!r[0].elements?t.graphic=[{elements:r}]:t.graphic=[t.graphic[0]]:r&&!r.elements&&(t.graphic=[{elements:[r]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(a){var t=a.get("coordinateSystem");return indexOf(SERIES_COORDS,t)>=0}function getAxisMainType(a){return a+"Axis"}function findEffectedDataZooms(a,t){var r=createHashMap(),n=[],o=createHashMap();a.eachComponent({mainType:"dataZoom",query:t},function(h){o.get(h.uid)||u(h)});var s;do s=!1,a.eachComponent("dataZoom",l);while(s);function l(h){!o.get(h.uid)&&c(h)&&(u(h),s=!0)}function u(h){o.set(h.uid,!0),n.push(h),f(h)}function c(h){var v=!1;return h.eachTargetAxis(function(d,p){var g=r.get(d);g&&g[p]&&(v=!0)}),v}function f(h){h.eachTargetAxis(function(v,d){(r.get(v)||r.set(v,[]))[d]=!0})}return n}function collectReferCoordSysModelInfo(a){var t=a.ecModel,r={infoList:[],infoMap:createHashMap()};return a.eachTargetAxis(function(n,o){var s=t.getComponent(getAxisMainType(n),o);if(s){var l=s.getCoordSysModel();if(l){var u=l.uid,c=r.infoMap.get(u);c||(c={model:l,axisModels:[]},r.infoList.push(c),r.infoMap.set(u,c)),c.axisModels.push(s)}}}),r}var DataZoomAxisInfo=function(){function a(){this.indexList=[],this.indexMap=[]}return a.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},a}(),DataZoomModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r._autoThrottle=!0,r._noTarget=!0,r._rangePropMode=["percent","percent"],r}return t.prototype.init=function(r,n,o){var s=retrieveRawOption(r);this.settledOption=s,this.mergeDefaultAndTheme(r,o),this._doInit(s)},t.prototype.mergeOption=function(r){var n=retrieveRawOption(r);merge(this.option,r,!0),merge(this.settledOption,n,!0),this._doInit(n)},t.prototype._doInit=function(r){var n=this.option;this._setDefaultThrottle(r),this._updateRangeUse(r);var o=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(s,l){this._rangePropMode[l]==="value"&&(n[s[0]]=o[s[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var r=this.get("orient",!0),n=this._targetAxisInfoMap=createHashMap(),o=this._fillSpecifiedTargetAxis(n);o?this._orient=r||this._makeAutoOrientByTargetAxis():(this._orient=r||"horizontal",this._fillAutoTargetAxisByOrient(n,this._orient)),this._noTarget=!0,n.each(function(s){s.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(r){var n=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(o){var s=this.getReferringComponents(getAxisMainType(o),MULTIPLE_REFERRING);if(s.specified){n=!0;var l=new DataZoomAxisInfo;each$f(s.models,function(u){l.add(u.componentIndex)}),r.set(o,l)}},this),n},t.prototype._fillAutoTargetAxisByOrient=function(r,n){var o=this.ecModel,s=!0;if(s){var l=n==="vertical"?"y":"x",u=o.findComponents({mainType:l+"Axis"});c(u,l)}if(s){var u=o.findComponents({mainType:"singleAxis",filter:function(h){return h.get("orient",!0)===n}});c(u,"single")}function c(f,h){var v=f[0];if(v){var d=new DataZoomAxisInfo;if(d.add(v.componentIndex),r.set(h,d),s=!1,h==="x"||h==="y"){var p=v.getReferringComponents("grid",SINGLE_REFERRING).models[0];p&&each$f(f,function(g){v.componentIndex!==g.componentIndex&&p===g.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&d.add(g.componentIndex)})}}}s&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(f){if(s){var h=o.findComponents({mainType:getAxisMainType(f),filter:function(d){return d.get("type",!0)==="category"}});if(h[0]){var v=new DataZoomAxisInfo;v.add(h[0].componentIndex),r.set(f,v),s=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var r;return this.eachTargetAxis(function(n){!r&&(r=n)},this),r==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(r){if(r.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var n=this.ecModel.option;this.option.throttle=n.animation&&n.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(r){var n=this._rangePropMode,o=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(s,l){var u=r[s[0]]!=null,c=r[s[1]]!=null;u&&!c?n[l]="percent":!u&&c?n[l]="value":o?n[l]=o[l]:u&&(n[l]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var r;return this.eachTargetAxis(function(n,o){r==null&&(r=this.ecModel.getComponent(getAxisMainType(n),o))},this),r},t.prototype.eachTargetAxis=function(r,n){this._targetAxisInfoMap.each(function(o,s){each$f(o.indexList,function(l){r.call(n,s,l)})})},t.prototype.getAxisProxy=function(r,n){var o=this.getAxisModel(r,n);if(o)return o.__dzAxisProxy},t.prototype.getAxisModel=function(r,n){var o=this._targetAxisInfoMap.get(r);if(o&&o.indexMap[n])return this.ecModel.getComponent(getAxisMainType(r),n)},t.prototype.setRawRange=function(r){var n=this.option,o=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(s){(r[s[0]]!=null||r[s[1]]!=null)&&(n[s[0]]=o[s[0]]=r[s[0]],n[s[1]]=o[s[1]]=r[s[1]])},this),this._updateRangeUse(r)},t.prototype.setCalculatedRange=function(r){var n=this.option;each$f(["start","startValue","end","endValue"],function(o){n[o]=r[o]})},t.prototype.getPercentRange=function(){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataPercentWindow()},t.prototype.getValueRange=function(r,n){if(r==null&&n==null){var o=this.findRepresentativeAxisProxy();if(o)return o.getDataValueWindow()}else return this.getAxisProxy(r,n).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(r){if(r)return r.__dzAxisProxy;for(var n,o=this._targetAxisInfoMap.keys(),s=0;s<o.length;s++)for(var l=o[s],u=this._targetAxisInfoMap.get(l),c=0;c<u.indexList.length;c++){var f=this.getAxisProxy(l,u.indexList[c]);if(f.hostedBy(this))return f;n||(n=f)}return n},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(ComponentModel);function retrieveRawOption(a){var t={};return each$f(["start","end","startValue","endValue","throttle"],function(r){a.hasOwnProperty(r)&&(t[r]=a[r])}),t}var SelectDataZoomModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.select",t}(DataZoomModel),DataZoomView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o,s){this.dataZoomModel=r,this.ecModel=n,this.api=o},t.type="dataZoom",t}(ComponentView),SelectDataZoomView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.select",t}(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=function(){function a(t,r,n,o){this._dimName=t,this._axisIndex=r,this.ecModel=o,this._dataZoomModel=n}return a.prototype.hostedBy=function(t){return this._dataZoomModel===t},a.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},a.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},a.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(r){if(isCoordSupported(r)){var n=getAxisMainType(this._dimName),o=r.getReferringComponents(n,SINGLE_REFERRING).models[0];o&&this._axisIndex===o.componentIndex&&t.push(r)}},this),t},a.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},a.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},a.prototype.calculateDataWindow=function(t){var r=this._dataExtent,n=this.getAxisModel(),o=n.axis.scale,s=this._dataZoomModel.getRangePropMode(),l=[0,100],u=[],c=[],f;each$7(["start","end"],function(d,p){var g=t[d],y=t[d+"Value"];s[p]==="percent"?(g==null&&(g=l[p]),y=o.parse(linearMap$2(g,l,r))):(f=!0,y=y==null?r[p]:o.parse(y),g=linearMap$2(y,r,l)),c[p]=y==null||isNaN(y)?r[p]:y,u[p]=g==null||isNaN(g)?l[p]:g}),asc$1(c),asc$1(u);var h=this._minMaxSpan;f?v(c,u,r,l,!1):v(u,c,l,r,!0);function v(d,p,g,y,_){var S=_?"Span":"ValueSpan";sliderMove(0,d,g,"all",h["min"+S],h["max"+S]);for(var x=0;x<2;x++)p[x]=linearMap$2(d[x],g,y,!0),_&&(p[x]=o.parse(p[x]))}return{valueWindow:c,percentWindow:u}},a.prototype.reset=function(t){if(t===this._dataZoomModel){var r=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,r),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},a.prototype.filterData=function(t,r){if(t!==this._dataZoomModel)return;var n=this._dimName,o=this.getTargetSeriesModels(),s=t.get("filterMode"),l=this._valueWindow;if(s==="none")return;each$7(o,function(c){var f=c.getData(),h=f.mapDimensionsAll(n);if(h.length){if(s==="weakFilter"){var v=f.getStore(),d=map$1(h,function(p){return f.getDimensionIndex(p)},f);f.filterSelf(function(p){for(var g,y,_,S=0;S<h.length;S++){var x=v.get(d[S],p),T=!isNaN(x),b=x<l[0],C=x>l[1];if(T&&!b&&!C)return!0;T&&(_=!0),b&&(g=!0),C&&(y=!0)}return _&&g&&y})}else each$7(h,function(p){if(s==="empty")c.setData(f=f.map(p,function(y){return u(y)?y:NaN}));else{var g={};g[p]=l,f.selectRange(g)}});each$7(h,function(p){f.setApproximateExtent(l,p)})}});function u(c){return c>=l[0]&&c<=l[1]}},a.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},r=this._dataZoomModel,n=this._dataExtent;each$7(["min","max"],function(o){var s=r.get(o+"Span"),l=r.get(o+"ValueSpan");l!=null&&(l=this.getAxisModel().axis.scale.parse(l)),l!=null?s=linearMap$2(n[0]+l,n,[0,100],!0):s!=null&&(l=linearMap$2(s,[0,100],n,!0)-n[0]),t[o+"Span"]=s,t[o+"ValueSpan"]=l},this)},a.prototype._setAxisModel=function(){var t=this.getAxisModel(),r=this._percentWindow,n=this._valueWindow;if(r){var o=getPixelPrecision(n,[0,500]);o=Math.min(o,20);var s=t.axis.scale.rawExtentInfo;r[0]!==0&&s.setDeterminedMinMax("min",+n[0].toFixed(o)),r[1]!==100&&s.setDeterminedMinMax("max",+n[1].toFixed(o)),s.freeze()}},a}();function calculateDataExtent(a,t,r){var n=[1/0,-1/0];each$7(r,function(l){unionAxisExtentFromData(n,l.getData(),t)});var o=a.getAxisModel(),s=ensureScaleRawExtentInfo(o.axis.scale,o,n).calculate();return[s.min,s.max]}var dataZoomProcessor={getTargetSeries:function(a){function t(o){a.eachComponent("dataZoom",function(s){s.eachTargetAxis(function(l,u){var c=a.getComponent(getAxisMainType(l),u);o(l,u,c,s)})})}t(function(o,s,l,u){l.__dzAxisProxy=null});var r=[];t(function(o,s,l,u){l.__dzAxisProxy||(l.__dzAxisProxy=new AxisProxy(o,s,u,a),r.push(l.__dzAxisProxy))});var n=createHashMap();return each$f(r,function(o){each$f(o.getTargetSeriesModels(),function(s){n.set(s.uid,s)})}),n},overallReset:function(a,t){a.eachComponent("dataZoom",function(r){r.eachTargetAxis(function(n,o){r.getAxisProxy(n,o).reset(r)}),r.eachTargetAxis(function(n,o){r.getAxisProxy(n,o).filterData(r,t)})}),a.eachComponent("dataZoom",function(r){var n=r.findRepresentativeAxisProxy();if(n){var o=n.getDataPercentWindow(),s=n.getDataValueWindow();r.setCalculatedRange({start:o[0],end:o[1],startValue:s[0],endValue:s[1]})}})}};function installDataZoomAction(a){a.registerAction("dataZoom",function(t,r){var n=findEffectedDataZooms(r,t);each$f(n,function(o){o.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var installed$1=!1;function installCommon$1(a){installed$1||(installed$1=!0,a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),installDataZoomAction(a),a.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$l(a){a.registerComponentModel(SelectDataZoomModel),a.registerComponentView(SelectDataZoomView),installCommon$1(a)}var ToolboxFeature=function(){function a(){}return a}(),features={};function registerFeature(a,t){features[a]=t}function getFeature(a){return features[a]}var ToolboxModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var r=this.ecModel;each$f(this.option.feature,function(n,o){var s=getFeature(o);s&&(s.getDefaultOption&&(s.defaultOption=s.getDefaultOption(r)),merge(n,s.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:tokens.color.border,borderRadius:0,borderWidth:0,padding:tokens.size.m,itemSize:15,itemGap:tokens.size.s,showTitle:!0,iconStyle:{borderColor:tokens.color.accent50,color:"none"},emphasis:{iconStyle:{borderColor:tokens.color.accent50}},tooltip:{show:!1,position:"bottom"}},t}(ComponentModel);function makeBackground(a,t){var r=normalizeCssArray(t.get("padding")),n=t.getItemStyle(["color","opacity"]);n.fill=t.get("backgroundColor");var o=new Rect$2({shape:{x:a.x-r[3],y:a.y-r[0],width:a.width+r[1]+r[3],height:a.height+r[0]+r[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1});return o}var ToolboxView=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.render=function(r,n,o,s){var l=this.group;if(l.removeAll(),!r.get("show"))return;var u=+r.get("itemSize"),c=r.get("orient")==="vertical",f=r.get("feature")||{},h=this._features||(this._features={}),v=[];each$f(f,function(x,T){v.push(T)}),new DataDiffer(this._featureNames||[],v).add(d).update(d).remove(curry$1(d,null)).execute(),this._featureNames=v;function d(x,T){var b=v[x],C=v[T],w=f[b],M=new Model(w,r,r.ecModel),P;if(s&&s.newTitle!=null&&s.featureName===b&&(w.title=s.newTitle),b&&!C){if(isUserFeatureName(b))P={onclick:M.option.onclick,featureName:b};else{var L=getFeature(b);if(!L)return;P=new L}h[b]=P}else if(P=h[C],!P)return;P.uid=getUID("toolbox-feature"),P.model=M,P.ecModel=n,P.api=o;var E=P instanceof ToolboxFeature;if(!b&&C){E&&P.dispose&&P.dispose(n,o);return}if(!M.get("show")||E&&P.unusable){E&&P.remove&&P.remove(n,o);return}p(M,P,b),M.setIconStatus=function(I,R){var D=this.option,O=this.iconPaths;D.iconStatus=D.iconStatus||{},D.iconStatus[I]=R,O[I]&&(R==="emphasis"?enterEmphasis:leaveEmphasis)(O[I])},P instanceof ToolboxFeature&&P.render&&P.render(M,n,o,s)}function p(x,T,b){var C=x.getModel("iconStyle"),w=x.getModel(["emphasis","iconStyle"]),M=T instanceof ToolboxFeature&&T.getIcons?T.getIcons():x.get("icon"),P=x.get("title")||{},L,E;isString(M)?(L={},L[b]=M):L=M,isString(P)?(E={},E[b]=P):E=P;var I=x.iconPaths={};each$f(L,function(R,D){var O=createIcon(R,{},{x:-u/2,y:-u/2,width:u,height:u});O.setStyle(C.getItemStyle());var $=O.ensureState("emphasis");$.style=w.getItemStyle();var N=new ZRText({style:{text:E[D],align:w.get("textAlign"),borderRadius:w.get("textBorderRadius"),padding:w.get("textPadding"),fill:null,font:getFont({fontStyle:w.get("textFontStyle"),fontFamily:w.get("textFontFamily"),fontSize:w.get("textFontSize"),fontWeight:w.get("textFontWeight")},n)},ignore:!0});O.setTextContent(N),setTooltipConfig({el:O,componentModel:r,itemName:D,formatterParamsExtra:{title:E[D]}}),O.__title=E[D],O.on("mouseover",function(){var V=w.getItemStyle(),B=c?r.get("right")==null&&r.get("left")!=="right"?"right":"left":r.get("bottom")==null&&r.get("top")!=="bottom"?"bottom":"top";N.setStyle({fill:w.get("textFill")||V.fill||V.stroke||tokens.color.neutral99,backgroundColor:w.get("textBackgroundColor")}),O.setTextConfig({position:w.get("textPosition")||B}),N.ignore=!r.get("showTitle"),o.enterEmphasis(this)}).on("mouseout",function(){x.get(["iconStatus",D])!=="emphasis"&&o.leaveEmphasis(this),N.hide()}),(x.get(["iconStatus",D])==="emphasis"?enterEmphasis:leaveEmphasis)(O),l.add(O),O.on("click",bind$1(T.onclick,T,n,o,D)),I[D]=O})}var g=createBoxLayoutReference(r,o).refContainer,y=r.getBoxLayoutParams(),_=r.get("padding"),S=getLayoutRect(y,g,_);box(r.get("orient"),l,r.get("itemGap"),S.width,S.height),positionElement(l,y,g,_),l.add(makeBackground(l.getBoundingRect(),r)),c||l.eachChild(function(x){var T=x.__title,b=x.ensureState("emphasis"),C=b.textConfig||(b.textConfig={}),w=x.getTextContent(),M=w&&w.ensureState("emphasis");if(M&&!isFunction(M)&&T){var P=M.style||(M.style={}),L=getBoundingRect(T,ZRText.makeFont(P)),E=x.x+l.x,I=x.y+l.y+u,R=!1;I+L.height>o.getHeight()&&(C.position="top",R=!0);var D=R?-5-L.height:u+10;E+L.width/2>o.getWidth()?(C.position=["100%",D],P.align="right"):E-L.width/2<0&&(C.position=[0,D],P.align="left")}})},t.prototype.updateView=function(r,n,o,s){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.updateView&&l.updateView(l.model,n,o,s)})},t.prototype.remove=function(r,n){each$f(this._features,function(o){o instanceof ToolboxFeature&&o.remove&&o.remove(r,n)}),this.group.removeAll()},t.prototype.dispose=function(r,n){each$f(this._features,function(o){o instanceof ToolboxFeature&&o.dispose&&o.dispose(r,n)})},t.type="toolbox",t}(ComponentView);function isUserFeatureName(a){return a.indexOf("my")===0}var SaveAsImage=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.onclick=function(r,n){var o=this.model,s=o.get("name")||r.get("title.0.text")||"echarts",l=n.getZr().painter.getType()==="svg",u=l?"svg":o.get("type",!0)||"png",c=n.getConnectedDataURL({type:u,backgroundColor:o.get("backgroundColor",!0)||r.get("backgroundColor")||tokens.color.neutral00,connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")}),f=env.browser;if(typeof MouseEvent=="function"&&(f.newEdge||!f.ie&&!f.edge)){var h=document.createElement("a");h.download=s+"."+u,h.target="_blank",h.href=c;var v=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});h.dispatchEvent(v)}else if(window.navigator.msSaveOrOpenBlob||l){var d=c.split(","),p=d[0].indexOf("base64")>-1,g=l?decodeURIComponent(d[1]):d[1];p&&(g=window.atob(g));var y=s+"."+u;if(window.navigator.msSaveOrOpenBlob){for(var _=g.length,S=new Uint8Array(_);_--;)S[_]=g.charCodeAt(_);var x=new Blob([S]);window.navigator.msSaveOrOpenBlob(x,y)}else{var T=document.createElement("iframe");document.body.appendChild(T);var b=T.contentWindow,C=b.document;C.open("image/svg+xml","replace"),C.write(g),C.close(),b.focus(),C.execCommand("SaveAs",!0,y),document.body.removeChild(T)}}else{var w=o.get("lang"),M='<body style="margin:0;"><img src="'+c+'" style="max-width:100%;" title="'+(w&&w[0]||"")+'" /></body>',P=window.open();P.document.write(M),P.document.title=s}},t.getDefaultOption=function(r){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:r.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:tokens.color.neutral00,name:"",excludeComponents:["toolbox"],lang:r.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},t}(ToolboxFeature),INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.getIcons=function(){var r=this.model,n=r.get("icon"),o={};return each$f(r.get("type"),function(s){n[s]&&(o[s]=n[s])}),o},t.getDefaultOption=function(r){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:r.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},t.prototype.onclick=function(r,n,o){var s=this.model,l=s.get(["seriesIndex",o]);if(seriesOptGenreator[o]){var u={series:[]},c=function(v){var d=v.subType,p=v.id,g=seriesOptGenreator[o](d,p,v,s);g&&(defaults(g,v.option),u.series.push(g));var y=v.coordinateSystem;if(y&&y.type==="cartesian2d"&&(o==="line"||o==="bar")){var _=y.getAxesByScale("ordinal")[0];if(_){var S=_.dim,x=S+"Axis",T=v.getReferringComponents(x,SINGLE_REFERRING).models[0],b=T.componentIndex;u[x]=u[x]||[];for(var C=0;C<=b;C++)u[x][b]=u[x][b]||{};u[x][b].boundaryGap=o==="bar"}}};each$f(radioTypes,function(v){indexOf(v,o)>=0&&each$f(v,function(d){s.setIconStatus(d,"normal")})}),s.setIconStatus(o,"emphasis"),r.eachComponent({mainType:"series",query:l==null?null:{seriesIndex:l}},c);var f,h=o;o==="stack"&&(f=merge({stack:s.option.title.tiled,tiled:s.option.title.stack},s.option.title),s.get(["iconStatus",o])!=="emphasis"&&(h="tiled")),n.dispatchAction({type:"changeMagicType",currentType:h,newOption:u,newTitle:f,featureName:"magicType"})}},t}(ToolboxFeature),seriesOptGenreator={line:function(a,t,r,n){if(a==="bar")return merge({id:t,type:"line",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(a,t,r,n){if(a==="line")return merge({id:t,type:"bar",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(a,t,r,n){var o=r.get("stack")===INNER_STACK_KEYWORD;if(a==="line"||a==="bar")return n.setIconStatus("stack",o?"normal":"emphasis"),merge({id:t,stack:o?"":INNER_STACK_KEYWORD},n.get(["option","stack"])||{},!0)}};registerAction$1({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,t){t.mergeOption(a.newOption)});var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(a){var t={},r=[],n=[];return a.eachRawSeries(function(o){var s=o.coordinateSystem;if(s&&(s.type==="cartesian2d"||s.type==="polar")){var l=s.getBaseAxis();if(l.type==="category"){var u=l.dim+"_"+l.index;t[u]||(t[u]={categoryAxis:l,valueAxis:s.getOtherAxis(l),series:[]},n.push({axisDim:l.dim,axisIndex:l.index})),t[u].series.push(o)}else r.push(o)}else r.push(o)}),{seriesGroupByCategoryAxis:t,other:r,meta:n}}function assembleSeriesWithCategoryAxis(a){var t=[];return each$f(a,function(r,n){var o=r.categoryAxis,s=r.valueAxis,l=s.dim,u=[" "].concat(map$1(r.series,function(p){return p.name})),c=[o.model.getCategories()];each$f(r.series,function(p){var g=p.getRawData();c.push(p.getRawData().mapArray(g.mapDimension(l),function(y){return y}))});for(var f=[u.join(ITEM_SPLITER)],h=0;h<c[0].length;h++){for(var v=[],d=0;d<c.length;d++)v.push(c[d][h]);f.push(v.join(ITEM_SPLITER))}t.push(f.join(`
`))}),t.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(a){return map$1(a,function(t){var r=t.getRawData(),n=[t.name],o=[];return r.each(r.dimensions,function(){for(var s=arguments.length,l=arguments[s-1],u=r.getName(l),c=0;c<s-1;c++)o[c]=arguments[c];n.push((u?u+ITEM_SPLITER:"")+o.join(ITEM_SPLITER))}),n.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(a){var t=groupSeries(a);return{value:filter([assembleSeriesWithCategoryAxis(t.seriesGroupByCategoryAxis),assembleOtherSeries(t.other)],function(r){return!!r.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:t.meta}}function trim(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(a){var t=a.slice(0,a.indexOf(`
`));if(t.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(a){for(var t=a.split(/\n+/g),r=trim(t.shift()).split(itemSplitRegex),n=[],o=map$1(r,function(c){return{name:c,data:[]}}),s=0;s<t.length;s++){var l=trim(t[s]).split(itemSplitRegex);n.push(l.shift());for(var u=0;u<l.length;u++)o[u]&&(o[u].data[s]=l[u])}return{series:o,categories:n}}function parseListContents(a){for(var t=a.split(/\n+/g),r=trim(t.shift()),n=[],o=0;o<t.length;o++){var s=trim(t[o]);if(s){var l=s.split(itemSplitRegex),u="",c=void 0,f=!1;isNaN(l[0])?(f=!0,u=l[0],l=l.slice(1),n[o]={name:u,value:[]},c=n[o].value):c=n[o]=[];for(var h=0;h<l.length;h++)c.push(+l[h]);c.length===1&&(f?n[o].value=c[0]:n[o]=c[0])}}return{name:r,data:n}}function parseContents(a,t){var r=a.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),n={series:[]};return each$f(r,function(o,s){if(isTSVFormat(o)){var l=parseTSVContents(o),u=t[s],c=u.axisDim+"Axis";u&&(n[c]=n[c]||[],n[c][u.axisIndex]={data:l.categories},n.series=n.series.concat(l.series))}else{var l=parseListContents(o);n.series.push(l)}}),n}var DataView=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.onclick=function(r,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var o=n.getDom(),s=this.model;this._dom&&o.removeChild(this._dom);var l=document.createElement("div");l.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",l.style.backgroundColor=s.get("backgroundColor")||tokens.color.neutral00;var u=document.createElement("h4"),c=s.get("lang")||[];u.innerHTML=c[0]||s.get("title"),u.style.cssText="margin:10px 20px",u.style.color=s.get("textColor");var f=document.createElement("div"),h=document.createElement("textarea");f.style.cssText="overflow:auto";var v=s.get("optionToContent"),d=s.get("contentToOption"),p=getContentFromModel(r);if(isFunction(v)){var g=v(n.getOption());isString(g)?f.innerHTML=g:isDom(g)&&f.appendChild(g)}else{h.readOnly=s.get("readOnly");var y=h.style;y.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",y.color=s.get("textColor"),y.borderColor=s.get("textareaBorderColor"),y.backgroundColor=s.get("textareaColor"),h.value=p.value,f.appendChild(h)}var _=p.meta,S=document.createElement("div");S.style.cssText="position:absolute;bottom:5px;left:0;right:0";var x="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",T=document.createElement("div"),b=document.createElement("div");x+=";background-color:"+s.get("buttonColor"),x+=";color:"+s.get("buttonTextColor");var C=this;function w(){o.removeChild(l),C._dom=null}addEventListener(T,"click",w),addEventListener(b,"click",function(){if(d==null&&v!=null||d!=null&&v==null){w();return}var M;try{isFunction(d)?M=d(f,n.getOption()):M=parseContents(h.value,_)}catch(P){throw w(),new Error("Data view format error "+P)}M&&n.dispatchAction({type:"changeDataView",newOption:M}),w()}),T.innerHTML=c[1],b.innerHTML=c[2],b.style.cssText=T.style.cssText=x,!s.get("readOnly")&&S.appendChild(b),S.appendChild(T),l.appendChild(u),l.appendChild(f),l.appendChild(S),f.style.height=o.clientHeight-80+"px",o.appendChild(l),this._dom=l},t.prototype.remove=function(r,n){this._dom&&n.getDom().removeChild(this._dom)},t.prototype.dispose=function(r,n){this.remove(r,n)},t.getDefaultOption=function(r){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:r.getLocaleModel().get(["toolbox","dataView","title"]),lang:r.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:tokens.color.background,textColor:tokens.color.primary,textareaColor:tokens.color.background,textareaBorderColor:tokens.color.border,buttonColor:tokens.color.accent50,buttonTextColor:tokens.color.neutral00};return n},t}(ToolboxFeature);function tryMergeDataOption(a,t){return map$1(a,function(r,n){var o=t&&t[n];if(isObject$3(o)&&!isArray$1(o)){var s=isObject$3(r)&&!isArray$1(r);s||(r={value:r});var l=o.name!=null&&r.name==null;return r=defaults(r,o),l&&delete r.name,r}else return r})}registerAction$1({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,t){var r=[];each$f(a.newOption.series,function(n){var o=t.getSeriesByName(n.name)[0];if(!o)r.push(extend({type:"scatter"},n));else{var s=o.get("data");r.push({name:n.name,data:tryMergeDataOption(n.data,s)})}}),t.mergeOption(defaults({series:r},a.newOption))});var each$6=each$f,inner$6=makeInner();function push(a,t){var r=getStoreSnapshots(a);each$6(t,function(n,o){for(var s=r.length-1;s>=0;s--){var l=r[s];if(l[o])break}if(s<0){var u=a.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(u){var c=u.getPercentRange();r[0][o]={dataZoomId:o,start:c[0],end:c[1]}}}}),r.push(t)}function pop(a){var t=getStoreSnapshots(a),r=t[t.length-1];t.length>1&&t.pop();var n={};return each$6(r,function(o,s){for(var l=t.length-1;l>=0;l--)if(o=t[l][s],o){n[s]=o;break}}),n}function clear(a){inner$6(a).snapshots=null}function count(a){return getStoreSnapshots(a).length}function getStoreSnapshots(a){var t=inner$6(a);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var RestoreOption=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.onclick=function(r,n){clear(r),n.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(r){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:r.getLocaleModel().get(["toolbox","restore","title"])};return n},t}(ToolboxFeature);registerAction$1({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,t){t.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function a(t,r,n){var o=this;this._targetInfoList=[];var s=parseFinder(r,t);each$f(targetInfoBuilders,function(l,u){(!n||!n.include||indexOf(n.include,u)>=0)&&l(s,o._targetInfoList)})}return a.prototype.setOutputRanges=function(t,r){return this.matchOutputRanges(t,r,function(n,o,s){if((n.coordRanges||(n.coordRanges=[])).push(o),!n.coordRange){n.coordRange=o;var l=coordConvert[n.brushType](0,s,o);n.__rangeOffset={offset:diffProcessor[n.brushType](l.values,n.range,[1,1]),xyMinMax:l.xyMinMax}}}),t},a.prototype.matchOutputRanges=function(t,r,n){each$f(t,function(o){var s=this.findTargetInfo(o,r);s&&s!==!0&&each$f(s.coordSyses,function(l){var u=coordConvert[o.brushType](1,l,o.range,!0);n(o,u.values,l,r)})},this)},a.prototype.setInputRanges=function(t,r){each$f(t,function(n){var o=this.findTargetInfo(n,r);if(n.range=n.range||[],o&&o!==!0){n.panelId=o.panelId;var s=coordConvert[n.brushType](0,o.coordSys,n.coordRange),l=n.__rangeOffset;n.range=l?diffProcessor[n.brushType](s.values,l.offset,getScales(s.xyMinMax,l.xyMinMax)):s.values}},this)},a.prototype.makePanelOpts=function(t,r){return map$1(this._targetInfoList,function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:r?r(n):null,clipPath:makeRectPanelClipPath(o),isTargetByCursor:makeRectIsTargetByCursor(o,t,n.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(o)}})},a.prototype.controlSeries=function(t,r,n){var o=this.findTargetInfo(t,n);return o===!0||o&&indexOf(o.coordSyses,r.coordinateSystem)>=0},a.prototype.findTargetInfo=function(t,r){for(var n=this._targetInfoList,o=parseFinder(r,t),s=0;s<n.length;s++){var l=n[s],u=t.panelId;if(u){if(l.panelId===u)return l}else for(var c=0;c<targetInfoMatchers.length;c++)if(targetInfoMatchers[c](o,l))return l}return!0},a}();function formatMinMax(a){return a[0]>a[1]&&a.reverse(),a}function parseFinder(a,t){return parseFinder$1(a,t,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(a,t){var r=a.xAxisModels,n=a.yAxisModels,o=a.gridModels,s=createHashMap(),l={},u={};!r&&!n&&!o||(each$f(r,function(c){var f=c.axis.grid.model;s.set(f.id,f),l[f.id]=!0}),each$f(n,function(c){var f=c.axis.grid.model;s.set(f.id,f),u[f.id]=!0}),each$f(o,function(c){s.set(c.id,c),l[c.id]=!0,u[c.id]=!0}),s.each(function(c){var f=c.coordinateSystem,h=[];each$f(f.getCartesians(),function(v,d){(indexOf(r,v.getAxis("x").model)>=0||indexOf(n,v.getAxis("y").model)>=0)&&h.push(v)}),t.push({panelId:"grid--"+c.id,gridModel:c,coordSysModel:c,coordSys:h[0],coordSyses:h,getPanelRect:panelRectBuilders.grid,xAxisDeclared:l[c.id],yAxisDeclared:u[c.id]})}))},geo:function(a,t){each$f(a.geoModels,function(r){var n=r.coordinateSystem;t.push({panelId:"geo--"+r.id,geoModel:r,coordSysModel:r,coordSys:n,coordSyses:[n],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(a,t){var r=a.xAxisModel,n=a.yAxisModel,o=a.gridModel;return!o&&r&&(o=r.axis.grid.model),!o&&n&&(o=n.axis.grid.model),o&&o===t.gridModel},function(a,t){var r=a.geoModel;return r&&r===t.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,t=a.getBoundingRect().clone();return t.applyTransform(getTransform$1(a)),t}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(a,t,r,n){var o=a?t.pointToData([r[0][0],r[1][0]],n):t.dataToPoint([r[0][0],r[1][0]],n),s=a?t.pointToData([r[0][1],r[1][1]],n):t.dataToPoint([r[0][1],r[1][1]],n),l=[formatMinMax([o[0],s[0]]),formatMinMax([o[1],s[1]])];return{values:l,xyMinMax:l}},polygon:function(a,t,r,n){var o=[[1/0,-1/0],[1/0,-1/0]],s=map$1(r,function(l){var u=a?t.pointToData(l,n):t.dataToPoint(l,n);return o[0][0]=Math.min(o[0][0],u[0]),o[1][0]=Math.min(o[1][0],u[1]),o[0][1]=Math.max(o[0][1],u[0]),o[1][1]=Math.max(o[1][1],u[1]),u});return{values:s,xyMinMax:o}}};function axisConvert(a,t,r,n){var o=r.getAxis(["x","y"][a]),s=formatMinMax(map$1([0,1],function(u){return t?o.coordToData(o.toLocalCoord(n[u]),!0):o.toGlobalCoord(o.dataToCoord(n[u]))})),l=[];return l[a]=s,l[1-a]=[NaN,NaN],{values:s,xyMinMax:l}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(a,t,r){return[[a[0][0]-r[0]*t[0][0],a[0][1]-r[0]*t[0][1]],[a[1][0]-r[1]*t[1][0],a[1][1]-r[1]*t[1][1]]]},polygon:function(a,t,r){return map$1(a,function(n,o){return[n[0]-r[0]*t[o][0],n[1]-r[1]*t[o][1]]})}};function axisDiffProcessor(a,t,r,n){return[t[0]-n[a]*r[0],t[1]-n[a]*r[1]]}function getScales(a,t){var r=getSize(a),n=getSize(t),o=[r[0]/n[0],r[1]/n[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function getSize(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.render=function(r,n,o,s){this._brushController||(this._brushController=new BrushController(o.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(r,n,this,s,o),updateBackBtnStatus(r,n)},t.prototype.onclick=function(r,n,o){handlers[o].call(this)},t.prototype.remove=function(r,n){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(r,n){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(r){var n=r.areas;if(!r.isEnd||!n.length)return;var o={},s=this.ecModel;this._brushController.updateCovers([]);var l=new BrushTargetManager(makeAxisFinder(this.model),s,{include:["grid"]});l.matchOutputRanges(n,s,function(f,h,v){if(v.type==="cartesian2d"){var d=f.brushType;d==="rect"?(u("x",v,h[0]),u("y",v,h[1])):u({lineX:"x",lineY:"y"}[d],v,h)}}),push(s,o),this._dispatchZoomAction(o);function u(f,h,v){var d=h.getAxis(f),p=d.model,g=c(f,p,s),y=g.findRepresentativeAxisProxy(p).getMinMaxSpan();(y.minValueSpan!=null||y.maxValueSpan!=null)&&(v=sliderMove(0,v.slice(),d.scale.getExtent(),0,y.minValueSpan,y.maxValueSpan)),g&&(o[g.id]={dataZoomId:g.id,startValue:v[0],endValue:v[1]})}function c(f,h,v){var d;return v.eachComponent({mainType:"dataZoom",subType:"select"},function(p){var g=p.getAxisModel(f,h.componentIndex);g&&(d=p)}),d}},t.prototype._dispatchZoomAction=function(r){var n=[];each$5(r,function(o,s){n.push(clone$4(o))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},t.getDefaultOption=function(r){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:r.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:tokens.color.backgroundTint}};return n},t}(ToolboxFeature),handlers={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(a){var t={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function updateBackBtnStatus(a,t){a.setIconStatus("back",count(t)>1?"emphasis":"normal")}function updateZoomBtnStatus(a,t,r,n,o){var s=r._isZoomActive;n&&n.type==="takeGlobalCursor"&&(s=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),r._isZoomActive=s,a.setIconStatus("zoom",s?"emphasis":"normal");var l=new BrushTargetManager(makeAxisFinder(a),t,{include:["grid"]}),u=l.makePanelOpts(o,function(c){return c.xAxisDeclared&&!c.yAxisDeclared?"lineX":!c.xAxisDeclared&&c.yAxisDeclared?"lineY":"rect"});r._brushController.setPanels(u).enableBrush(s&&u.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(a){var t=a.getComponent("toolbox",0),r=["feature","dataZoom"];if(!t||t.get(r)==null)return;var n=t.getModel(r),o=[],s=makeAxisFinder(n),l=parseFinder$1(a,s);each$5(l.xAxisModels,function(c){return u(c,"xAxis","xAxisIndex")}),each$5(l.yAxisModels,function(c){return u(c,"yAxis","yAxisIndex")});function u(c,f,h){var v=c.componentIndex,d={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+f+v};d[h]=v,o.push(d)}return o});function install$k(a){a.registerComponentModel(ToolboxModel),a.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$l)}var TooltipModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,displayTransition:!0,enterable:!1,backgroundColor:tokens.color.neutral00,shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,defaultBorderColor:tokens.color.border,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:tokens.color.borderShade,width:1,type:"dashed",textStyle:{}}},textStyle:{color:tokens.color.tertiary,fontSize:14}},t}(ComponentModel);function shouldTooltipConfine(a){var t=a.get("confine");return t!=null?!!t:a.get("renderMode")==="richText"}function testStyle(a){if(env.domSupported){for(var t=document.documentElement.style,r=0,n=a.length;r<n;r++)if(a[r]in t)return a[r]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(a,t){if(!a)return t;t=toCamelCase(t,!0);var r=a.indexOf(t);return a=r===-1?t:"-"+a.slice(0,r)+"-"+t,a.toLowerCase()}function getComputedStyle(a,t){var r=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return r?r[t]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function assembleArrow(a,t,r){if(!isString(r)||r==="inside")return"";var n=a.get("backgroundColor"),o=a.get("borderWidth");t=convertToColorString(t);var s=mirrorPos(r),l=Math.max(Math.round(o)*1.5,6),u="",c=CSS_TRANSFORM_VENDOR+":",f;indexOf(["left","right"],s)>-1?(u+="top:50%",c+="translateY(-50%) rotate("+(f=s==="left"?-225:-45)+"deg)"):(u+="left:50%",c+="translateX(-50%) rotate("+(f=s==="top"?225:45)+"deg)");var h=f*Math.PI/180,v=l+o,d=v*Math.abs(Math.cos(h))+v*Math.abs(Math.sin(h)),p=Math.round(((d-Math.SQRT2*o)/2+Math.SQRT2*o-(d-v)/2)*100)/100;u+=";"+s+":-"+p+"px";var g=t+" solid "+o+"px;",y=["position:absolute;width:"+l+"px;height:"+l+"px;z-index:-1;",u+";"+c+";","border-bottom:"+g,"border-right:"+g,"background-color:"+n+";"];return'<div style="'+y.join("")+'"></div>'}function assembleTransition(a,t,r){var n="cubic-bezier(0.23,1,0.32,1)",o="",s="";return r&&(o=" "+a/2+"s "+n,s="opacity"+o+",visibility"+o),t||(o=" "+a+"s "+n,s+=(s.length?",":"")+(env.transformSupported?""+CSS_TRANSFORM_VENDOR+o:",left"+o+",top"+o)),CSS_TRANSITION_VENDOR+":"+s}function assembleTransform(a,t,r){var n=a.toFixed(0)+"px",o=t.toFixed(0)+"px";if(!env.transformSupported)return r?"top:"+o+";left:"+n+";":[["top",o],["left",n]];var s=env.transform3dSupported,l="translate"+(s?"3d":"")+"("+n+","+o+(s?",0":"")+")";return r?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+l+";":[["top",0],["left",0],[TRANSFORM_VENDOR,l]]}function assembleFont(a){var t=[],r=a.get("fontSize"),n=a.getTextColor();n&&t.push("color:"+n),t.push("font:"+a.getFont());var o=retrieve2(a.get("lineHeight"),Math.round(r*3/2));r&&t.push("line-height:"+o+"px");var s=a.get("textShadowColor"),l=a.get("textShadowBlur")||0,u=a.get("textShadowOffsetX")||0,c=a.get("textShadowOffsetY")||0;return s&&l&&t.push("text-shadow:"+u+"px "+c+"px "+l+"px "+s),each$f(["decoration","align"],function(f){var h=a.get(f);h&&t.push("text-"+f+":"+h)}),t.join(";")}function assembleCssText(a,t,r,n){var o=[],s=a.get("transitionDuration"),l=a.get("backgroundColor"),u=a.get("shadowBlur"),c=a.get("shadowColor"),f=a.get("shadowOffsetX"),h=a.get("shadowOffsetY"),v=a.getModel("textStyle"),d=getPaddingFromTooltipModel(a,"html"),p=f+"px "+h+"px "+u+"px "+c;return o.push("box-shadow:"+p),t&&s>0&&o.push(assembleTransition(s,r,n)),l&&o.push("background-color:"+l),each$f(["width","color","radius"],function(g){var y="border-"+g,_=toCamelCase(y),S=a.get(_);S!=null&&o.push(y+":"+S+(g==="color"?"":"px"))}),o.push(assembleFont(v)),d!=null&&o.push("padding:"+normalizeCssArray(d).join("px ")+"px"),o.join(";")+";"}function makeStyleCoord$1(a,t,r,n,o){var s=t&&t.painter;if(r){var l=s&&s.getViewportRoot();l&&transformLocalCoord(a,l,r,n,o)}else{a[0]=n,a[1]=o;var u=s&&s.getViewportRootOffset();u&&(a[0]+=u.offsetLeft,a[1]+=u.offsetTop)}a[2]=a[0]/t.getWidth(),a[3]=a[1]/t.getHeight()}var TooltipHTMLContent=function(){function a(t,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var o=this._zr=t.getZr(),s=r.appendTo,l=s&&(isString(s)?document.querySelector(s):isDom(s)?s:isFunction(s)&&s(t.getDom()));makeStyleCoord$1(this._styleCoord,o,l,t.getWidth()/2,t.getHeight()/2),(l||t.getDom()).appendChild(n),this._api=t,this._container=l;var u=this;n.onmouseenter=function(){u._enterable&&(clearTimeout(u._hideTimeout),u._show=!0),u._inContent=!0},n.onmousemove=function(c){if(c=c||window.event,!u._enterable){var f=o.handler,h=o.painter.getViewportRoot();normalizeEvent(h,c,!0),f.dispatch("mousemove",c)}},n.onmouseleave=function(){u._inContent=!1,u._enterable&&u._show&&u.hideLater(u._hideDelay)}}return a.prototype.update=function(t){if(!this._container){var r=this._api.getDom(),n=getComputedStyle(r,"position"),o=r.style;o.position!=="absolute"&&n!=="absolute"&&(o.position="relative")}var s=t.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this._enableDisplayTransition=t.get("displayTransition")&&t.get("transitionDuration")>0,this.el.className=t.get("className")||""},a.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,o=n.style,s=this._styleCoord;n.innerHTML?o.cssText=gCssText+assembleCssText(t,!this._firstShow,this._longHide,this._enableDisplayTransition)+assembleTransform(s[0],s[1],!0)+("border-color:"+convertToColorString(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):o.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(t,r,n,o,s){var l=this.el;if(t==null){l.innerHTML="";return}var u="";if(isString(s)&&n.get("trigger")==="item"&&!shouldTooltipConfine(n)&&(u=assembleArrow(n,o,s)),isString(t))l.innerHTML=t+u;else if(t){l.innerHTML="",isArray$1(t)||(t=[t]);for(var c=0;c<t.length;c++)isDom(t[c])&&t[c].parentNode!==l&&l.appendChild(t[c]);if(u&&l.childNodes.length){var f=document.createElement("div");f.innerHTML=u,l.appendChild(f)}}},a.prototype.setEnterable=function(t){this._enterable=t},a.prototype.getSize=function(){var t=this.el;return t?[t.offsetWidth,t.offsetHeight]:[0,0]},a.prototype.moveTo=function(t,r){if(this.el){var n=this._styleCoord;if(makeStyleCoord$1(n,this._zr,this._container,t,r),n[0]!=null&&n[1]!=null){var o=this.el.style,s=assembleTransform(n[0],n[1]);each$f(s,function(l){o[l[0]]=l[1]})}}},a.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},a.prototype.hide=function(){var t=this,r=this.el.style;this._enableDisplayTransition?(r.visibility="hidden",r.opacity="0"):r.display="none",env.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},a.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),t)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this._zr;transformLocalCoordClear(t&&t.painter&&t.painter.getViewportRoot(),this._container);var r=this.el;if(r){r.onmouseenter=r.onmousemove=r.onmouseleave=null;var n=r.parentNode;n&&n.removeChild(r)}this.el=this._container=null},a}(),TooltipRichContent=function(){function a(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),makeStyleCoord(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return a.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized(),this._alwaysShowContent=r},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(t,r,n,o,s){var l=this;isObject$3(t)&&throwError(""),this.el&&this._zr.remove(this.el);var u=n.getModel("textStyle");this.el=new ZRText({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:o,textShadowColor:u.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(f){l.el.style[f]=n.get(f)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(f){l.el.style[f]=u.get(f)||0}),this._zr.add(this.el);var c=this;this.el.on("mouseover",function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0}),this.el.on("mouseout",function(){c._enterable&&c._show&&c.hideLater(c._hideDelay),c._inContent=!1})},a.prototype.setEnterable=function(t){this._enterable=t},a.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=calcShadowOuterSize(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},a.prototype.moveTo=function(t,r){var n=this.el;if(n){var o=this._styleCoord;makeStyleCoord(o,this._zr,t,r),t=o[0],r=o[1];var s=n.style,l=mathMaxWith0(s.borderWidth||0),u=calcShadowOuterSize(s);n.x=t+l+u.left,n.y=r+l+u.top,n.markRedraw()}},a.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),t)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this._zr.remove(this.el)},a}();function mathMaxWith0(a){return Math.max(0,a)}function calcShadowOuterSize(a){var t=mathMaxWith0(a.shadowBlur||0),r=mathMaxWith0(a.shadowOffsetX||0),n=mathMaxWith0(a.shadowOffsetY||0);return{left:mathMaxWith0(t-r),right:mathMaxWith0(t+r),top:mathMaxWith0(t-n),bottom:mathMaxWith0(t+n)}}function makeStyleCoord(a,t,r,n){a[0]=r,a[1]=n,a[2]=a[0]/t.getWidth(),a[3]=a[1]/t.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(env.node||!n.getDom())){var o=r.getComponent("tooltip"),s=this._renderMode=getTooltipRenderMode(o.get("renderMode"));this._tooltipContent=s==="richText"?new TooltipRichContent(n):new TooltipHTMLContent(n,{appendTo:o.get("appendToBody",!0)?"body":o.get("appendTo",!0)})}},t.prototype.render=function(r,n,o){if(!(env.node||!o.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=o;var s=this._tooltipContent;s.update(r),s.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");register("itemTooltip",this._api,bind$1(function(o,s,l){n!=="none"&&(n.indexOf(o)>=0?this._tryShow(s,l):o==="leave"&&this._hide(l))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,o=this._api,s=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var l=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!o.isDisposed()&&l.manuallyShowTip(r,n,o,{x:l._lastX,y:l._lastY,dataByCoordSys:l._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,o,s){if(!(s.from===this.uid||env.node||!o.getDom())){var l=makeDispatchAction(s,o);this._ticket="";var u=s.dataByCoordSys,c=findComponentReference(s,n,o);if(c){var f=c.el.getBoundingRect().clone();f.applyTransform(c.el.transform),this._tryShow({offsetX:f.x+f.width/2,offsetY:f.y+f.height/2,target:c.el,position:s.position,positionDefault:"bottom"},l)}else if(s.tooltip&&s.x!=null&&s.y!=null){var h=proxyRect;h.x=s.x,h.y=s.y,h.update(),getECData(h).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:h},l)}else if(u)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:u,tooltipOption:s.tooltipOption},l);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,o,s))return;var v=findPointFromSeries(s,n),d=v.point[0],p=v.point[1];d!=null&&p!=null&&this._tryShow({offsetX:d,offsetY:p,target:v.el,position:s.position,positionDefault:"bottom"},l)}else s.x!=null&&s.y!=null&&(o.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:o.getZr().findHover(s.x,s.y).target},l))}},t.prototype.manuallyHideTip=function(r,n,o,s){var l=this._tooltipContent;this._tooltipModel&&l.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(makeDispatchAction(s,o))},t.prototype._manuallyAxisShowTip=function(r,n,o,s){var l=s.seriesIndex,u=s.dataIndex,c=n.getComponent("axisPointer").coordSysAxesInfo;if(!(l==null||u==null||c==null)){var f=n.getSeriesByIndex(l);if(f){var h=f.getData(),v=buildTooltipModel([h.getItemModel(u),f,(f.coordinateSystem||{}).model],this._tooltipModel);if(v.get("trigger")==="axis")return o.dispatchAction({type:"updateAxisPointer",seriesIndex:l,dataIndex:u,position:s.position}),!0}}},t.prototype._tryShow=function(r,n){var o=r.target,s=this._tooltipModel;if(s){this._lastX=r.offsetX,this._lastY=r.offsetY;var l=r.dataByCoordSys;if(l&&l.length)this._showAxisTooltip(l,r);else if(o){var u=getECData(o);if(u.ssrType==="legend")return;this._lastDataByCoordSys=null;var c,f;findEventDispatcher(o,function(h){if(h.tooltipDisabled)return c=f=null,!0;c||f||(getECData(h).dataIndex!=null?c=h:getECData(h).tooltipConfig!=null&&(f=h))},!0),c?this._showSeriesItemTooltip(r,c,n):f?this._showComponentItemTooltip(r,f,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var o=r.get("showDelay");n=bind$1(n,this),clearTimeout(this._showTimout),o>0?this._showTimout=setTimeout(n,o):n()},t.prototype._showAxisTooltip=function(r,n){var o=this._ecModel,s=this._tooltipModel,l=[n.offsetX,n.offsetY],u=buildTooltipModel([n.tooltipOption],s),c=this._renderMode,f=[],h=createTooltipMarkup("section",{blocks:[],noHeader:!0}),v=[],d=new TooltipMarkupStyleCreator;each$f(r,function(x){each$f(x.dataByAxis,function(T){var b=o.getComponent(T.axisDim+"Axis",T.axisIndex),C=T.value;if(!(!b||C==null)){var w=getValueLabel(C,b.axis,o,T.seriesDataIndices,T.valueLabelOpt),M=createTooltipMarkup("section",{header:w,noHeader:!trim$1(w),sortBlocks:!0,blocks:[]});h.blocks.push(M),each$f(T.seriesDataIndices,function(P){var L=o.getSeriesByIndex(P.seriesIndex),E=P.dataIndexInside,I=L.getDataParams(E);if(!(I.dataIndex<0)){I.axisDim=T.axisDim,I.axisIndex=T.axisIndex,I.axisType=T.axisType,I.axisId=T.axisId,I.axisValue=getAxisRawValue(b.axis,{value:C}),I.axisValueLabel=w,I.marker=d.makeTooltipMarker("item",convertToColorString(I.color),c);var R=normalizeTooltipFormatResult(L.formatTooltip(E,!0,null)),D=R.frag;if(D){var O=buildTooltipModel([L],s).get("valueFormatter");M.blocks.push(O?extend({valueFormatter:O},D):D)}R.text&&v.push(R.text),f.push(I)}})}})}),h.blocks.reverse(),v.reverse();var p=n.position,g=u.get("order"),y=buildTooltipMarkup(h,d,c,g,o.get("useUTC"),u.get("textStyle"));y&&v.unshift(y);var _=c==="richText"?`

`:"<br/>",S=v.join(_);this._showOrMove(u,function(){this._updateContentNotChangedOnAxis(r,f)?this._updatePosition(u,p,l[0],l[1],this._tooltipContent,f):this._showTooltipContent(u,S,f,Math.random()+"",l[0],l[1],p,null,d)})},t.prototype._showSeriesItemTooltip=function(r,n,o){var s=this._ecModel,l=getECData(n),u=l.seriesIndex,c=s.getSeriesByIndex(u),f=l.dataModel||c,h=l.dataIndex,v=l.dataType,d=f.getData(v),p=this._renderMode,g=r.positionDefault,y=buildTooltipModel([d.getItemModel(h),f,c&&(c.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),_=y.get("trigger");if(!(_!=null&&_!=="item")){var S=f.getDataParams(h,v),x=new TooltipMarkupStyleCreator;S.marker=x.makeTooltipMarker("item",convertToColorString(S.color),p);var T=normalizeTooltipFormatResult(f.formatTooltip(h,!1,v)),b=y.get("order"),C=y.get("valueFormatter"),w=T.frag,M=w?buildTooltipMarkup(C?extend({valueFormatter:C},w):w,x,p,b,s.get("useUTC"),y.get("textStyle")):T.text,P="item_"+f.name+"_"+h;this._showOrMove(y,function(){this._showTooltipContent(y,M,S,P,r.offsetX,r.offsetY,r.position,r.target,x)}),o({type:"showTip",dataIndexInside:h,dataIndex:d.getRawIndex(h),seriesIndex:u,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,o){var s=this._renderMode==="html",l=getECData(n),u=l.tooltipConfig,c=u.option||{},f=c.encodeHTMLContent;if(isString(c)){var h=c;c={content:h,formatter:h},f=!0}f&&s&&c.content&&(c=clone$4(c),c.content=encodeHTML(c.content));var v=[c],d=this._ecModel.getComponent(l.componentMainType,l.componentIndex);d&&v.push(d),v.push({formatter:c.content});var p=r.positionDefault,g=buildTooltipModel(v,this._tooltipModel,p?{position:p}:null),y=g.get("content"),_=Math.random()+"",S=new TooltipMarkupStyleCreator;this._showOrMove(g,function(){var x=clone$4(g.get("formatterParams")||{});this._showTooltipContent(g,y,x,_,r.offsetX,r.offsetY,r.position,n,S)}),o({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,o,s,l,u,c,f,h){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var v=this._tooltipContent;v.setEnterable(r.get("enterable"));var d=r.get("formatter");c=c||r.get("position");var p=n,g=this._getNearestPoint([l,u],o,r.get("trigger"),r.get("borderColor"),r.get("defaultBorderColor",!0)),y=g.color;if(d)if(isString(d)){var _=r.ecModel.get("useUTC"),S=isArray$1(o)?o[0]:o,x=S&&S.axisType&&S.axisType.indexOf("time")>=0;p=d,x&&(p=format(S.axisValue,p,_)),p=formatTpl(p,o,!0)}else if(isFunction(d)){var T=bind$1(function(b,C){b===this._ticket&&(v.setContent(C,h,r,y,c),this._updatePosition(r,c,l,u,v,o,f))},this);this._ticket=s,p=d(o,s,T)}else p=d;v.setContent(p,h,r,y,c),v.show(r,y),this._updatePosition(r,c,l,u,v,o,f)}},t.prototype._getNearestPoint=function(r,n,o,s,l){if(o==="axis"||isArray$1(n))return{color:s||l};if(!isArray$1(n))return{color:s||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,o,s,l,u,c){var f=this._api.getWidth(),h=this._api.getHeight();n=n||r.get("position");var v=l.getSize(),d=r.get("align"),p=r.get("verticalAlign"),g=c&&c.getBoundingRect().clone();if(c&&g.applyTransform(c.transform),isFunction(n)&&(n=n([o,s],u,l.el,g,{viewSize:[f,h],contentSize:v.slice()})),isArray$1(n))o=parsePercent(n[0],f),s=parsePercent(n[1],h);else if(isObject$3(n)){var y=n;y.width=v[0],y.height=v[1];var _=getLayoutRect(y,{width:f,height:h});o=_.x,s=_.y,d=null,p=null}else if(isString(n)&&c){var S=calcTooltipPosition(n,g,v,r.get("borderWidth"));o=S[0],s=S[1]}else{var S=refixTooltipPosition(o,s,l,f,h,d?null:20,p?null:20);o=S[0],s=S[1]}if(d&&(o-=isCenterAlign(d)?v[0]/2:d==="right"?v[0]:0),p&&(s-=isCenterAlign(p)?v[1]/2:p==="bottom"?v[1]:0),shouldTooltipConfine(r)){var S=confineTooltipPosition(o,s,l,f,h);o=S[0],s=S[1]}l.moveTo(o,s)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var o=this._lastDataByCoordSys,s=this._cbParamsList,l=!!o&&o.length===r.length;return l&&each$f(o,function(u,c){var f=u.dataByAxis||[],h=r[c]||{},v=h.dataByAxis||[];l=l&&f.length===v.length,l&&each$f(f,function(d,p){var g=v[p]||{},y=d.seriesDataIndices||[],_=g.seriesDataIndices||[];l=l&&d.value===g.value&&d.axisType===g.axisType&&d.axisId===g.axisId&&y.length===_.length,l&&each$f(y,function(S,x){var T=_[x];l=l&&S.seriesIndex===T.seriesIndex&&S.dataIndex===T.dataIndex}),s&&each$f(d.seriesDataIndices,function(S){var x=S.seriesIndex,T=n[x],b=s[x];T&&b&&b.data!==T.data&&(l=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!l},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){env.node||!n.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",n))},t.type="tooltip",t}(ComponentView);function buildTooltipModel(a,t,r){var n=t.ecModel,o;r?(o=new Model(r,n,n),o=new Model(t.option,o,n)):o=t;for(var s=a.length-1;s>=0;s--){var l=a[s];l&&(l instanceof Model&&(l=l.get("tooltip",!0)),isString(l)&&(l={formatter:l}),l&&(o=new Model(l,o,n)))}return o}function makeDispatchAction(a,t){return a.dispatchAction||bind$1(t.dispatchAction,t)}function refixTooltipPosition(a,t,r,n,o,s,l){var u=r.getSize(),c=u[0],f=u[1];return s!=null&&(a+c+s+2>n?a-=c+s:a+=s),l!=null&&(t+f+l>o?t-=f+l:t+=l),[a,t]}function confineTooltipPosition(a,t,r,n,o){var s=r.getSize(),l=s[0],u=s[1];return a=Math.min(a+l,n)-l,t=Math.min(t+u,o)-u,a=Math.max(a,0),t=Math.max(t,0),[a,t]}function calcTooltipPosition(a,t,r,n){var o=r[0],s=r[1],l=Math.ceil(Math.SQRT2*n)+8,u=0,c=0,f=t.width,h=t.height;switch(a){case"inside":u=t.x+f/2-o/2,c=t.y+h/2-s/2;break;case"top":u=t.x+f/2-o/2,c=t.y-s-l;break;case"bottom":u=t.x+f/2-o/2,c=t.y+h+l;break;case"left":u=t.x-o-l,c=t.y+h/2-s/2;break;case"right":u=t.x+f+l,c=t.y+h/2-s/2}return[u,c]}function isCenterAlign(a){return a==="center"||a==="middle"}function findComponentReference(a,t,r){var n=preParseFinder(a).queryOptionMap,o=n.keys()[0];if(!(!o||o==="series")){var s=queryReferringComponents(t,o,n.get(o),{useDefault:!1,enableAll:!1,enableNone:!1}),l=s.models[0];if(l){var u=r.getViewOfComponentModel(l),c;if(u.group.traverse(function(f){var h=getECData(f).tooltipConfig;if(h&&h.name===a.name)return c=f,!0}),c)return{componentMainType:o,componentIndex:l.componentIndex,el:c}}}}function install$j(a){use(install$s),a.registerComponentModel(TooltipModel),a.registerComponentView(TooltipView),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(a,t){var r=normalizeToArray(a?a.brush:[]);if(r.length){var n=[];each$f(r,function(c){var f=c.hasOwnProperty("toolbox")?c.toolbox:[];f instanceof Array&&(n=n.concat(f))});var o=a&&a.toolbox;isArray$1(o)&&(o=o[0]),o||(o={feature:{}},a.toolbox=[o]);var s=o.feature||(o.feature={}),l=s.brush||(s.brush={}),u=l.type||(l.type=[]);u.push.apply(u,n),removeDuplicate(u),t&&!u.length&&u.push.apply(u,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(a){var t={};each$f(a,function(r){t[r]=1}),a.length=0,each$f(t,function(r,n){a.push(n)})}var each$4=each$f;function hasKeys(a){if(a){for(var t in a)if(a.hasOwnProperty(t))return!0}}function createVisualMappings(a,t,r){var n={};return each$4(t,function(s){var l=n[s]=o();each$4(a[s],function(u,c){if(VisualMapping.isValidType(c)){var f={type:c,visual:u};r&&r(f,s),l[c]=new VisualMapping(f),c==="opacity"&&(f=clone$4(f),f.type="colorAlpha",l.__hidden.__alphaForOpacity=new VisualMapping(f))}})}),n;function o(){var s=function(){};s.prototype.__hidden=s.prototype;var l=new s;return l}}function replaceVisualOption(a,t,r){var n;each$f(r,function(o){t.hasOwnProperty(o)&&hasKeys(t[o])&&(n=!0)}),n&&each$f(r,function(o){t.hasOwnProperty(o)&&hasKeys(t[o])?a[o]=clone$4(t[o]):delete a[o]})}function applyVisual(a,t,r,n,o,s){var l={};each$f(a,function(v){var d=VisualMapping.prepareVisualTypes(t[v]);l[v]=d});var u;function c(v){return getItemVisualFromData(r,u,v)}function f(v,d){setItemVisualFromData(r,u,v,d)}r.each(h);function h(v,d){u=v;var p=r.getRawDataItem(u);if(!(p&&p.visualMap===!1))for(var g=n.call(o,v),y=t[g],_=l[g],S=0,x=_.length;S<x;S++){var T=_[S];y[T]&&y[T].applyVisual(v,c,f)}}}function incrementalApplyVisual(a,t,r,n){var o={};return each$f(a,function(s){var l=VisualMapping.prepareVisualTypes(t[s]);o[s]=l}),{progress:function(l,u){var c;n!=null&&(c=u.getDimensionIndex(n));function f(C){return getItemVisualFromData(u,v,C)}function h(C,w){setItemVisualFromData(u,v,C,w)}for(var v,d=u.getStore();(v=l.next())!=null;){var p=u.getRawDataItem(v);if(!(p&&p.visualMap===!1))for(var g=n!=null?d.get(c,v):v,y=r(g),_=t[y],S=o[y],x=0,T=S.length;x<T;x++){var b=S[x];_[b]&&_[b].applyVisual(g,f,h)}}}}}function makeBrushCommonSelectorForSeries(a){var t=a.brushType,r={point:function(n){return selector[t].point(n,r,a)},rect:function(n){return selector[t].rect(n,r,a)}};return r}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(a,t,r){return a&&r.boundingRect.contain(a[0],a[1])},rect:function(a,t,r){return a&&r.boundingRect.intersect(a)}},polygon:{point:function(a,t,r){return a&&r.boundingRect.contain(a[0],a[1])&&contain(r.range,a[0],a[1])},rect:function(a,t,r){var n=r.range;if(!a||n.length<=1)return!1;var o=a.x,s=a.y,l=a.width,u=a.height,c=n[0];if(contain(n,o,s)||contain(n,o+l,s)||contain(n,o,s+u)||contain(n,o+l,s+u)||BoundingRect.create(a).contain(c[0],c[1])||linePolygonIntersect(o,s,o+l,s,n)||linePolygonIntersect(o,s,o,s+u,n)||linePolygonIntersect(o+l,s,o+l,s+u,n)||linePolygonIntersect(o,s+u,o+l,s+u,n))return!0}}};function getLineSelectors(a){var t=["x","y"],r=["width","height"];return{point:function(n,o,s){if(n){var l=s.range,u=n[a];return inLineRange(u,l)}},rect:function(n,o,s){if(n){var l=s.range,u=[n[t[a]],n[t[a]]+n[r[a]]];return u[1]<u[0]&&u.reverse(),inLineRange(u[0],l)||inLineRange(u[1],l)||inLineRange(l[0],u)||inLineRange(l[1],u)}}}}function inLineRange(a,t){return t[0]<=a&&a<=t[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(a){a.eachComponent({mainType:"brush"},function(t){var r=t.brushTargetManager=new BrushTargetManager(t.option,a);r.setInputRanges(t.areas,a)})}function brushVisual(a,t,r){var n=[],o,s;a.eachComponent({mainType:"brush"},function(l){r&&r.type==="takeGlobalCursor"&&l.setBrushOption(r.key==="brush"?r.brushOption:{brushType:!1})}),layoutCovers(a),a.eachComponent({mainType:"brush"},function(l,u){var c={brushId:l.id,brushIndex:u,brushName:l.name,areas:clone$4(l.areas),selected:[]};n.push(c);var f=l.option,h=f.brushLink,v=[],d=[],p=[],g=!1;u||(o=f.throttleType,s=f.throttleDelay);var y=map$1(l.areas,function(C){var w=boundingRectBuilders[C.brushType],M=defaults({boundingRect:w?w(C):void 0},C);return M.selectors=makeBrushCommonSelectorForSeries(M),M}),_=createVisualMappings(l.option,STATE_LIST,function(C){C.mappingMethod="fixed"});isArray$1(h)&&each$f(h,function(C){v[C]=1});function S(C){return h==="all"||!!v[C]}function x(C){return!!C.length}a.eachSeries(function(C,w){var M=p[w]=[];C.subType==="parallel"?T(C,w):b(C,w,M)});function T(C,w){var M=C.coordinateSystem;g=g||M.hasAxisBrushed(),S(w)&&M.eachActiveState(C.getData(),function(P,L){P==="active"&&(d[L]=1)})}function b(C,w,M){if(!(!C.brushSelector||brushModelNotControll(l,w))&&(each$f(y,function(L){l.brushTargetManager.controlSeries(L,C,a)&&M.push(L),g=g||x(M)}),S(w)&&x(M))){var P=C.getData();P.each(function(L){checkInRange(C,M,P,L)&&(d[L]=1)})}}a.eachSeries(function(C,w){var M={seriesId:C.id,seriesIndex:w,seriesName:C.name,dataIndex:[]};c.selected.push(M);var P=p[w],L=C.getData(),E=S(w)?function(I){return d[I]?(M.dataIndex.push(L.getRawIndex(I)),"inBrush"):"outOfBrush"}:function(I){return checkInRange(C,P,L,I)?(M.dataIndex.push(L.getRawIndex(I)),"inBrush"):"outOfBrush"};(S(w)?g:x(P))&&applyVisual(STATE_LIST,_,L,E)})}),dispatchAction$1(t,o,s,n,r)}function dispatchAction$1(a,t,r,n,o){if(o){var s=a.getZr();if(!s[DISPATCH_FLAG]){s[DISPATCH_METHOD]||(s[DISPATCH_METHOD]=doDispatch);var l=createOrUpdate(s,DISPATCH_METHOD,r,t);l(a,n)}}}function doDispatch(a,t){if(!a.isDisposed()){var r=a.getZr();r[DISPATCH_FLAG]=!0,a.dispatchAction({type:"brushSelect",batch:t}),r[DISPATCH_FLAG]=!1}}function checkInRange(a,t,r,n){for(var o=0,s=t.length;o<s;o++){var l=t[o];if(a.brushSelector(n,r,l.selectors,l))return!0}}function brushModelNotControll(a,t){var r=a.option.seriesIndex;return r!=null&&r!=="all"&&(isArray$1(r)?indexOf(r,t)<0:t!==r)}var boundingRectBuilders={rect:function(a){return getBoundingRectFromMinMax(a.range)},polygon:function(a){for(var t,r=a.range,n=0,o=r.length;n<o;n++){t=t||[[1/0,-1/0],[1/0,-1/0]];var s=r[n];s[0]<t[0][0]&&(t[0][0]=s[0]),s[0]>t[0][1]&&(t[0][1]=s[0]),s[1]<t[1][0]&&(t[1][0]=s[1]),s[1]>t[1][1]&&(t[1][1]=s[1])}return t&&getBoundingRectFromMinMax(t)}};function getBoundingRectFromMinMax(a){return new BoundingRect(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var BrushView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){this.ecModel=r,this.api=n,this.model,(this._brushController=new BrushController(n.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},t.prototype.render=function(r,n,o,s){this.model=r,this._updateController(r,n,o,s)},t.prototype.updateTransform=function(r,n,o,s){layoutCovers(n),this._updateController(r,n,o,s)},t.prototype.updateVisual=function(r,n,o,s){this.updateTransform(r,n,o,s)},t.prototype.updateView=function(r,n,o,s){this._updateController(r,n,o,s)},t.prototype._updateController=function(r,n,o,s){(!s||s.$from!==r.id)&&this._brushController.setPanels(r.brushTargetManager.makePanelOpts(o)).enableBrush(r.brushOption).updateCovers(r.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(r){var n=this.model.id,o=this.model.brushTargetManager.setOutputRanges(r.areas,this.ecModel);(!r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:n,areas:clone$4(o),$from:n}),r.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:clone$4(o),$from:n})},t.type="brush",t}(ComponentView),BrushModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.areas=[],r.brushOption={},r}return t.prototype.optionUpdated=function(r,n){var o=this.option;!n&&replaceVisualOption(o,r,["inBrush","outOfBrush"]);var s=o.inBrush=o.inBrush||{};o.outOfBrush=o.outOfBrush||{color:this.option.defaultOutOfBrushColor},s.hasOwnProperty("liftZ")||(s.liftZ=5)},t.prototype.setAreas=function(r){r&&(this.areas=map$1(r,function(n){return generateBrushOption(this.option,n)},this))},t.prototype.setBrushOption=function(r){this.brushOption=generateBrushOption(this.option,r),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:tokens.color.backgroundTint,borderColor:tokens.color.borderTint},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4,defaultOutOfBrushColor:tokens.color.disabled},t}(ComponentModel);function generateBrushOption(a,t){return merge({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:new Model(a.brushStyle).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},t,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.render=function(r,n,o){var s,l,u;n.eachComponent({mainType:"brush"},function(c){s=c.brushType,l=c.brushOption.brushMode||"single",u=u||!!c.areas.length}),this._brushType=s,this._brushMode=l,each$f(r.get("type",!0),function(c){r.setIconStatus(c,(c==="keep"?l==="multiple":c==="clear"?u:c===s)?"emphasis":"normal")})},t.prototype.updateView=function(r,n,o){this.render(r,n,o)},t.prototype.getIcons=function(){var r=this.model,n=r.get("icon",!0),o={};return each$f(r.get("type",!0),function(s){n[s]&&(o[s]=n[s])}),o},t.prototype.onclick=function(r,n,o){var s=this._brushType,l=this._brushMode;o==="clear"?(n.dispatchAction({type:"axisAreaSelect",intervals:[]}),n.dispatchAction({type:"brush",command:"clear",areas:[]})):n.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:o==="keep"?s:s===o?!1:o,brushMode:o==="keep"?l==="multiple"?"single":"multiple":l}})},t.getDefaultOption=function(r){var n={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:r.getLocaleModel().get(["toolbox","brush","title"])};return n},t}(ToolboxFeature);function install$i(a){a.registerComponentView(BrushView),a.registerComponentModel(BrushModel),a.registerPreprocessor(brushPreprocessor),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,brushVisual),a.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,r){r.eachComponent({mainType:"brush",query:t},function(n){n.setAreas(t.areas)})}),a.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),a.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature)}var TitleModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:"center",top:tokens.size.m,backgroundColor:tokens.color.transparent,borderColor:tokens.color.primary,borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:tokens.color.primary},subtextStyle:{fontSize:12,color:tokens.color.quaternary}},t}(ComponentModel),TitleView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){if(this.group.removeAll(),!!r.get("show")){var s=this.group,l=r.getModel("textStyle"),u=r.getModel("subtextStyle"),c=r.get("textAlign"),f=retrieve2(r.get("textBaseline"),r.get("textVerticalAlign")),h=new ZRText({style:createTextStyle(l,{text:r.get("text"),fill:l.getTextColor()},{disableBox:!0}),z2:10}),v=h.getBoundingRect(),d=r.get("subtext"),p=new ZRText({style:createTextStyle(u,{text:d,fill:u.getTextColor(),y:v.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),g=r.get("link"),y=r.get("sublink"),_=r.get("triggerEvent",!0);h.silent=!g&&!_,p.silent=!y&&!_,g&&h.on("click",function(){windowOpen(g,"_"+r.get("target"))}),y&&p.on("click",function(){windowOpen(y,"_"+r.get("subtarget"))}),getECData(h).eventData=getECData(p).eventData=_?{componentType:"title",componentIndex:r.componentIndex}:null,s.add(h),d&&s.add(p);var S=s.getBoundingRect(),x=r.getBoxLayoutParams();x.width=S.width,x.height=S.height;var T=createBoxLayoutReference(r,o),b=getLayoutRect(x,T.refContainer,r.get("padding"));c||(c=r.get("left")||r.get("right"),c==="middle"&&(c="center"),c==="right"?b.x+=b.width:c==="center"&&(b.x+=b.width/2)),f||(f=r.get("top")||r.get("bottom"),f==="center"&&(f="middle"),f==="bottom"?b.y+=b.height:f==="middle"&&(b.y+=b.height/2),f=f||"top"),s.x=b.x,s.y=b.y,s.markRedraw();var C={align:c,verticalAlign:f};h.setStyle(C),p.setStyle(C),S=s.getBoundingRect();var w=b.margin,M=r.getItemStyle(["color","opacity"]);M.fill=r.get("backgroundColor");var P=new Rect$2({shape:{x:S.x-w[3],y:S.y-w[0],width:S.width+w[1]+w[3],height:S.height+w[0]+w[2],r:r.get("borderRadius")},style:M,subPixelOptimize:!0,silent:!0});s.add(P)}},t.type="title",t}(ComponentView);function install$h(a){a.registerComponentModel(TitleModel),a.registerComponentView(TitleView)}var TimelineModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.layoutMode="box",r}return t.prototype.init=function(r,n,o){this.mergeDefaultAndTheme(r,o),this._initData()},t.prototype.mergeOption=function(r){a.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(r){r==null&&(r=this.option.currentIndex);var n=this._data.count();this.option.loop?r=(r%n+n)%n:(r>=n&&(r=n-1),r<0&&(r=0)),this.option.currentIndex=r},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(r){this.option.autoPlay=!!r},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var r=this.option,n=r.data||[],o=r.axisType,s=this._names=[],l;o==="category"?(l=[],each$f(n,function(f,h){var v=convertOptionIdName(getDataItemValue(f),""),d;isObject$3(f)?(d=clone$4(f),d.value=h):d=h,l.push(d),s.push(v)})):l=n;var u={category:"ordinal",time:"time",value:"number"}[o]||"number",c=this._data=new SeriesData([{name:"value",type:u}],this);c.initData(l,s)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:tokens.size.m,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:tokens.color.secondary},data:[]},t}(ComponentModel),SliderTimelineModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="timeline.slider",t.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:tokens.color.border,borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:tokens.color.accent10},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:tokens.color.tertiary},itemStyle:{color:tokens.color.accent20,borderWidth:0},checkpointStyle:{symbol:"circle",symbolSize:15,color:tokens.color.accent50,borderColor:tokens.color.accent50,borderWidth:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10.6699C11.5 9.90014 12.3333 9.41887 13 9.80371L20.5 14.1338C21.1667 14.5187 21.1667 15.4813 20.5 15.8662L13 20.1963C12.3333 20.5811 11.5 20.0999 11.5 19.3301V10.6699Z",stopIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10C12.3284 10 13 10.6716 13 11.5V18.5C13 19.3284 12.3284 20 11.5 20C10.6716 20 10 19.3284 10 18.5V11.5C10 10.6716 10.6716 10 11.5 10ZM18.5 10C19.3284 10 20 10.6716 20 11.5V18.5C20 19.3284 19.3284 20 18.5 20C17.6716 20 17 19.3284 17 18.5V11.5C17 10.6716 17.6716 10 18.5 10Z",nextIcon:"path://M0.838834 18.7383C0.253048 18.1525 0.253048 17.2028 0.838834 16.617L7.55635 9.89949L0.838834 3.18198C0.253048 2.59619 0.253048 1.64645 0.838834 1.06066C1.42462 0.474874 2.37437 0.474874 2.96015 1.06066L10.7383 8.83883L10.8412 8.95277C11.2897 9.50267 11.2897 10.2963 10.8412 10.8462L10.7383 10.9602L2.96015 18.7383C2.37437 19.3241 1.42462 19.3241 0.838834 18.7383Z",prevIcon:"path://M10.9602 1.06066C11.5459 1.64645 11.5459 2.59619 10.9602 3.18198L4.24264 9.89949L10.9602 16.617C11.5459 17.2028 11.5459 18.1525 10.9602 18.7383C10.3744 19.3241 9.42462 19.3241 8.83883 18.7383L1.06066 10.9602L0.957771 10.8462C0.509245 10.2963 0.509245 9.50267 0.957771 8.95277L1.06066 8.83883L8.83883 1.06066C9.42462 0.474874 10.3744 0.474874 10.9602 1.06066Z",prevBtnSize:18,nextBtnSize:18,color:tokens.color.accent50,borderColor:tokens.color.accent50,borderWidth:0},emphasis:{label:{show:!0,color:tokens.color.accent60},itemStyle:{color:tokens.color.accent60,borderColor:tokens.color.accent60},controlStyle:{color:tokens.color.accent70,borderColor:tokens.color.accent70}},progress:{lineStyle:{color:tokens.color.accent30},itemStyle:{color:tokens.color.accent40}},data:[]}),t}(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="timeline",t}(ComponentView),TimelineAxis=function(a){__extends(t,a);function t(r,n,o,s){var l=a.call(this,r,n,o)||this;return l.type=s||"value",l}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(Axis),PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){this.api=n},t.prototype.render=function(r,n,o){if(this.model=r,this.api=o,this.ecModel=n,this.group.removeAll(),r.get("show",!0)){var s=this._layout(r,o),l=this._createGroup("_mainGroup"),u=this._createGroup("_labelGroup"),c=this._axis=this._createAxis(s,r);r.formatTooltip=function(f){var h=c.scale.getLabel({value:f});return createTooltipMarkup("nameValue",{noName:!0,value:h})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(f){this["_render"+f](s,l,c,r)},this),this._renderAxisLabel(s,u,c,r),this._position(s,r)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(r,n){var o=r.get(["label","position"]),s=r.get("orient"),l=getViewRect(r,n),u;o==null||o==="auto"?u=s==="horizontal"?l.y+l.height/2<n.getHeight()/2?"-":"+":l.x+l.width/2<n.getWidth()/2?"+":"-":isString(o)?u={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][o]:u=o;var c={horizontal:"center",vertical:u>=0||u==="+"?"left":"right"},f={horizontal:u>=0||u==="+"?"top":"bottom",vertical:"middle"},h={horizontal:0,vertical:PI/2},v=s==="vertical"?l.height:l.width,d=r.getModel("controlStyle"),p=d.get("show",!0),g=p?d.get("itemSize"):0,y=p?d.get("itemGap"):0,_=g+y,S=r.get(["label","rotate"])||0;S=S*PI/180;var x,T,b,C=d.get("position",!0),w=p&&d.get("showPlayBtn",!0),M=p&&d.get("showPrevBtn",!0),P=p&&d.get("showNextBtn",!0),L=0,E=v;C==="left"||C==="bottom"?(w&&(x=[0,0],L+=_),M&&(T=[L,0],L+=_),P&&(b=[E-g,0],E-=_)):(w&&(x=[E-g,0],E-=_),M&&(T=[0,0],L+=_),P&&(b=[E-g,0],E-=_));var I=[L,E];return r.get("inverse")&&I.reverse(),{viewRect:l,mainLength:v,orient:s,rotation:h[s],labelRotation:S,labelPosOpt:u,labelAlign:r.get(["label","align"])||c[s],labelBaseline:r.get(["label","verticalAlign"])||r.get(["label","baseline"])||f[s],playPosition:x,prevBtnPosition:T,nextBtnPosition:b,axisExtent:I,controlSize:g,controlGap:y}},t.prototype._position=function(r,n){var o=this._mainGroup,s=this._labelGroup,l=r.viewRect;if(r.orient==="vertical"){var u=create$1(),c=l.x,f=l.y+l.height;translate(u,u,[-c,-f]),rotate(u,u,-PI/2),translate(u,u,[c,f]),l=l.clone(),l.applyTransform(u)}var h=x(l),v=x(o.getBoundingRect()),d=x(s.getBoundingRect()),p=[o.x,o.y],g=[s.x,s.y];g[0]=p[0]=h[0][0];var y=r.labelPosOpt;if(y==null||isString(y)){var _=y==="+"?0:1;T(p,v,h,1,_),T(g,d,h,1,1-_)}else{var _=y>=0?0:1;T(p,v,h,1,_),g[1]=p[1]+y}o.setPosition(p),s.setPosition(g),o.rotation=s.rotation=r.rotation,S(o),S(s);function S(b){b.originX=h[0][0]-b.x,b.originY=h[1][0]-b.y}function x(b){return[[b.x,b.x+b.width],[b.y,b.y+b.height]]}function T(b,C,w,M,P){b[M]+=w[M][P]-C[M][P]}},t.prototype._createAxis=function(r,n){var o=n.getData(),s=n.get("axisType"),l=createScaleByModel(n,s);l.getTicks=function(){return o.mapArray(["value"],function(f){return{value:f}})};var u=o.getDataExtent("value");l.setExtent(u[0],u[1]),l.calcNiceTicks();var c=new TimelineAxis("value",l,r.axisExtent,s);return c.model=n,c},t.prototype._createGroup=function(r){var n=this[r]=new Group$3;return this.group.add(n),n},t.prototype._renderAxisLine=function(r,n,o,s){var l=o.getExtent();if(s.get(["lineStyle","show"])){var u=new Line$1({shape:{x1:l[0],y1:0,x2:l[1],y2:0},style:extend({lineCap:"round"},s.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(u);var c=this._progressLine=new Line$1({shape:{x1:l[0],x2:this._currentPointer?this._currentPointer.x:l[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:u.style.lineWidth},s.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(c)}},t.prototype._renderAxisTick=function(r,n,o,s){var l=this,u=s.getData(),c=o.scale.getTicks();this._tickSymbols=[],each$f(c,function(f){var h=o.dataToCoord(f.value),v=u.getItemModel(f.value),d=v.getModel("itemStyle"),p=v.getModel(["emphasis","itemStyle"]),g=v.getModel(["progress","itemStyle"]),y={x:h,y:0,onclick:bind$1(l._changeTimeline,l,f.value)},_=giveSymbol(v,d,n,y);_.ensureState("emphasis").style=p.getItemStyle(),_.ensureState("progress").style=g.getItemStyle(),enableHoverEmphasis(_);var S=getECData(_);v.get("tooltip")?(S.dataIndex=f.value,S.dataModel=s):S.dataIndex=S.dataModel=null,l._tickSymbols.push(_)})},t.prototype._renderAxisLabel=function(r,n,o,s){var l=this,u=o.getLabelModel();if(u.get("show")){var c=s.getData(),f=o.getViewLabels();this._tickLabels=[],each$f(f,function(h){var v=h.tickValue,d=c.getItemModel(v),p=d.getModel("label"),g=d.getModel(["emphasis","label"]),y=d.getModel(["progress","label"]),_=o.dataToCoord(h.tickValue),S=new ZRText({x:_,y:0,rotation:r.labelRotation-r.rotation,onclick:bind$1(l._changeTimeline,l,v),silent:!1,style:createTextStyle(p,{text:h.formattedLabel,align:r.labelAlign,verticalAlign:r.labelBaseline})});S.ensureState("emphasis").style=createTextStyle(g),S.ensureState("progress").style=createTextStyle(y),n.add(S),enableHoverEmphasis(S),labelDataIndexStore(S).dataIndex=v,l._tickLabels.push(S)})}},t.prototype._renderControl=function(r,n,o,s){var l=r.controlSize,u=r.rotation,c=s.getModel("controlStyle").getItemStyle(),f=s.getModel(["emphasis","controlStyle"]).getItemStyle(),h=s.getPlayState(),v=s.get("inverse",!0);d(r.nextBtnPosition,"next",bind$1(this._changeTimeline,this,v?"-":"+")),d(r.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,v?"+":"-")),d(r.playPosition,h?"stop":"play",bind$1(this._handlePlayClick,this,!h),!0);function d(p,g,y,_){if(p){var S=parsePercent$1(retrieve2(s.get(["controlStyle",g+"BtnSize"]),l),l),x=[0,-S/2,S,S],T=makeControlIcon(s,g+"Icon",x,{x:p[0],y:p[1],originX:l/2,originY:0,rotation:_?-u:0,rectHover:!0,style:c,onclick:y});T.ensureState("emphasis").style=f,n.add(T),enableHoverEmphasis(T)}}},t.prototype._renderCurrentPointer=function(r,n,o,s){var l=s.getData(),u=s.getCurrentIndex(),c=l.getItemModel(u).getModel("checkpointStyle"),f=this,h={onCreate:function(v){v.draggable=!0,v.drift=bind$1(f._handlePointerDrag,f),v.ondragend=bind$1(f._handlePointerDragend,f),pointerMoveTo(v,f._progressLine,u,o,s,!0)},onUpdate:function(v){pointerMoveTo(v,f._progressLine,u,o,s)}};this._currentPointer=giveSymbol(c,c,this._mainGroup,{},this._currentPointer,h)},t.prototype._handlePlayClick=function(r){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:r,from:this.uid})},t.prototype._handlePointerDrag=function(r,n,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},t.prototype._handlePointerDragend=function(r){this._pointerChangeTimeline([r.offsetX,r.offsetY],!0)},t.prototype._pointerChangeTimeline=function(r,n){var o=this._toAxisCoord(r)[0],s=this._axis,l=asc$2(s.getExtent().slice());o>l[1]&&(o=l[1]),o<l[0]&&(o=l[0]),this._currentPointer.x=o,this._currentPointer.markRedraw();var u=this._progressLine;u&&(u.shape.x2=o,u.dirty());var c=this._findNearestTick(o),f=this.model;(n||c!==f.getCurrentIndex()&&f.get("realtime"))&&this._changeTimeline(c)},t.prototype._doPlayStop=function(){var r=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=r.model;r._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(r){var n=this._mainGroup.getLocalTransform();return applyTransform(r,n,!0)},t.prototype._findNearestTick=function(r){var n=this.model.getData(),o=1/0,s,l=this._axis;return n.each(["value"],function(u,c){var f=l.dataToCoord(u),h=Math.abs(f-r);h<o&&(o=h,s=c)}),s},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(r){var n=this.model.getCurrentIndex();r==="+"?r=n+1:r==="-"&&(r=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:r,from:this.uid})},t.prototype._updateTicksStatus=function(){var r=this.model.getCurrentIndex(),n=this._tickSymbols,o=this._tickLabels;if(n)for(var s=0;s<n.length;s++)n&&n[s]&&n[s].toggleState("progress",s<r);if(o)for(var s=0;s<o.length;s++)o&&o[s]&&o[s].toggleState("progress",labelDataIndexStore(o[s]).dataIndex<=r)},t.type="timeline.slider",t}(TimelineView);function createScaleByModel(a,t){if(t=t||a.get("type"),t)switch(t){case"category":return new OrdinalScale({ordinalMeta:a.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new IntervalScale}}function getViewRect(a,t){return getLayoutRect(a.getBoxLayoutParams(),createBoxLayoutReference(a,t).refContainer,a.get("padding"))}function makeControlIcon(a,t,r,n){var o=n.style,s=createIcon(a.get(["controlStyle",t]),n||{},new BoundingRect(r[0],r[1],r[2],r[3]));return o&&s.setStyle(o),s}function giveSymbol(a,t,r,n,o,s){var l=t.get("color");if(o)o.setColor(l),r.add(o),s&&s.onUpdate(o);else{var u=a.get("symbol");o=createSymbol$1(u,-1,-1,2,2,l),o.setStyle("strokeNoScale",!0),r.add(o),s&&s.onCreate(o)}var c=t.getItemStyle(["color"]);o.setStyle(c),n=merge({rectHover:!0,z2:100},n,!0);var f=normalizeSymbolSize(a.get("symbolSize"));n.scaleX=f[0]/2,n.scaleY=f[1]/2;var h=normalizeSymbolOffset(a.get("symbolOffset"),f);h&&(n.x=(n.x||0)+h[0],n.y=(n.y||0)+h[1]);var v=a.get("symbolRotate");return n.rotation=(v||0)*Math.PI/180||0,o.attr(n),o.updateTransform(),o}function pointerMoveTo(a,t,r,n,o,s){if(!a.dragging){var l=o.getModel("checkpointStyle"),u=n.dataToCoord(o.getData().get("value",r));if(s||!l.get("animation",!0))a.attr({x:u,y:0}),t&&t.attr({shape:{x2:u}});else{var c={duration:l.get("animationDuration",!0),easing:l.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:u,y:0},c),t&&t.animateTo({shape:{x2:u}},c)}}}function installTimelineAction(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,r,n){var o=r.getComponent("timeline");return o&&t.currentIndex!=null&&(o.setCurrentIndex(t.currentIndex),!o.get("loop",!0)&&o.isIndexMax()&&o.getPlayState()&&(o.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),r.resetOption("timeline",{replaceMerge:o.get("replaceMerge",!0)}),defaults({currentIndex:o.option.currentIndex},t)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,r){var n=r.getComponent("timeline");n&&t.playState!=null&&n.setPlayState(t.playState)})}function timelinePreprocessor(a){var t=a&&a.timeline;isArray$1(t)||(t=t?[t]:[]),each$f(t,function(r){r&&compatibleEC2(r)})}function compatibleEC2(a){var t=a.type,r={number:"value",time:"time"};if(r[t]&&(a.axisType=r[t],delete a.type),transferItem(a),has$1(a,"controlPosition")){var n=a.controlStyle||(a.controlStyle={});has$1(n,"position")||(n.position=a.controlPosition),n.position==="none"&&!has$1(n,"show")&&(n.show=!1,delete n.position),delete a.controlPosition}each$f(a.data||[],function(o){isObject$3(o)&&!isArray$1(o)&&(!has$1(o,"value")&&has$1(o,"name")&&(o.value=o.name),transferItem(o))})}function transferItem(a){var t=a.itemStyle||(a.itemStyle={}),r=t.emphasis||(t.emphasis={}),n=a.label||a.label||{},o=n.normal||(n.normal={}),s={normal:1,emphasis:1};each$f(n,function(l,u){!s[u]&&!has$1(o,u)&&(o[u]=l)}),r.label&&!has$1(n,"emphasis")&&(n.emphasis=r.label,delete r.label)}function has$1(a,t){return a.hasOwnProperty(t)}function install$g(a){a.registerComponentModel(SliderTimelineModel),a.registerComponentView(SliderTimelineView),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(a),a.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(a,t){if(!a)return!1;for(var r=isArray$1(a)?a:[a],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function fillLabel(a){defaultEmphasis(a,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r.preventAutoZ=!0,r}return t.prototype.init=function(r,n,o){this.mergeDefaultAndTheme(r,o),this._mergeOption(r,o,!1,!0)},t.prototype.isAnimationEnabled=function(){if(env.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,o,s){var l=this.mainType;o||n.eachSeries(function(u){var c=u.get(this.mainType,!0),f=inner$5(u)[l];if(!c||!c.data){inner$5(u)[l]=null;return}f?f._mergeOption(c,n,!0):(s&&fillLabel(c),each$f(c.data,function(h){h instanceof Array?(fillLabel(h[0]),fillLabel(h[1])):fillLabel(h)}),f=this.createMarkerModelFromSeries(c,this,n),extend(f,{mainType:this.mainType,seriesIndex:u.seriesIndex,name:u.name,createdBySelf:!0}),f.__hostSeries=u),inner$5(u)[l]=f},this)},t.prototype.formatTooltip=function(r,n,o){var s=this.getData(),l=this.getRawValue(r),u=s.getName(r);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:u,value:l,noName:!u,noValue:l==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.prototype.getDataParams=function(r,n){var o=DataFormatMixin.prototype.getDataParams.call(this,r,n),s=this.__hostSeries;return s&&(o.seriesId=s.id,o.seriesName=s.name,o.seriesType=s.subType),o},t.getMarkerModelFromSeries=function(r,n){return inner$5(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,o){return new t(r,n,o)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(MarkerModel);function hasXOrY(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function hasXAndY(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function markerTypeCalculatorWithExtent(a,t,r,n,o,s,l){var u=[],c=isDimensionStacked(t,o),f=c?t.getCalculationInfo("stackResultDimension"):o,h=numCalculate(t,f,a),v=t.hostModel,d=v.indicesOfNearest(r,f,h)[0];u[s]=t.get(n,d),u[l]=t.get(f,d);var p=t.get(o,d),g=getPrecision(t.get(o,d));return g=Math.min(g,20),g>=0&&(u[l]=+u[l].toFixed(g)),[u,p]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(a,t){if(t){var r=a.getData(),n=a.coordinateSystem,o=n&&n.dimensions;if(!hasXAndY(t)&&!isArray$1(t.coord)&&isArray$1(o)){var s=getAxisInfo(t,r,n,a);if(t=clone$4(t),t.type&&markerTypeCalculator[t.type]&&s.baseAxis&&s.valueAxis){var l=indexOf(o,s.baseAxis.dim),u=indexOf(o,s.valueAxis.dim),c=markerTypeCalculator[t.type](r,s.valueAxis.dim,s.baseDataDim,s.valueDataDim,l,u);t.coord=c[0],t.value=c[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!isArray$1(o)){t.coord=[];var f=a.getBaseAxis();if(f&&t.type&&markerTypeCalculator[t.type]){var h=n.getOtherAxis(f);h&&(t.value=numCalculate(r,r.mapDimension(h.dim),t.type))}}else for(var v=t.coord,d=0;d<2;d++)markerTypeCalculator[v[d]]&&(v[d]=numCalculate(r,r.mapDimension(o[d]),v[d]));return t}}function getAxisInfo(a,t,r,n){var o={};return a.valueIndex!=null||a.valueDim!=null?(o.valueDataDim=a.valueIndex!=null?t.getDimension(a.valueIndex):a.valueDim,o.valueAxis=r.getAxis(dataDimToCoordDim(n,o.valueDataDim)),o.baseAxis=r.getOtherAxis(o.valueAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim)):(o.baseAxis=n.getBaseAxis(),o.valueAxis=r.getOtherAxis(o.baseAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim),o.valueDataDim=t.mapDimension(o.valueAxis.dim)),o}function dataDimToCoordDim(a,t){var r=a.getData().getDimensionInfo(t);return r&&r.coordDim}function dataFilter(a,t){return a&&a.containData&&t.coord&&!hasXOrY(t)?a.containData(t.coord):!0}function zoneFilter(a,t,r){return a&&a.containZone&&t.coord&&r.coord&&!hasXOrY(t)&&!hasXOrY(r)?a.containZone(t.coord,r.coord):!0}function createMarkerDimValueGetter(a,t){return a?function(r,n,o,s){var l=s<2?r.coord&&r.coord[s]:r.value;return parseDataValue(l,t[s])}:function(r,n,o,s){return parseDataValue(r.value,t[s])}}function numCalculate(a,t,r){if(r==="average"){var n=0,o=0;return a.each(t,function(s,l){isNaN(s)||(n+=s,o++)}),n/o}else return r==="median"?a.getMedian(t):a.getDataExtent(t)[r==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=createHashMap()},t.prototype.render=function(r,n,o){var s=this,l=this.markerGroupMap;l.each(function(u){inner$4(u).keep=!1}),n.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,s.type);c&&s.renderSeries(u,c,n,o)}),l.each(function(u){!inner$4(u).keep&&s.group.remove(u.group)}),updateZ$1(n,l,this.type)},t.prototype.markKeep=function(r){inner$4(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var o=this;each$f(r,function(s){var l=MarkerModel.getMarkerModelFromSeries(s,o.type);if(l){var u=l.getData();u.eachItemGraphicEl(function(c){c&&(n?enterBlur(c):leaveBlur(c))})}})},t.type="marker",t}(ComponentView);function updateZ$1(a,t,r){a.eachSeries(function(n){var o=MarkerModel.getMarkerModelFromSeries(n,r),s=t.get(n.id);if(o&&s&&s.group){var l=retrieveZInfo(o),u=l.z,c=l.zlevel;traverseUpdateZ(s.group,u,c)}})}function updateMarkerLayout(a,t,r){var n=t.coordinateSystem,o=r.getWidth(),s=r.getHeight(),l=n&&n.getArea&&n.getArea();a.each(function(u){var c=a.getItemModel(u),f=c.get("relativeTo")==="coordinate",h=f?l?l.width:0:o,v=f?l?l.height:0:s,d=f&&l?l.x:0,p=f&&l?l.y:0,g,y=parsePercent(c.get("x"),h)+d,_=parsePercent(c.get("y"),v)+p;if(!isNaN(y)&&!isNaN(_))g=[y,_];else if(t.getMarkerPosition)g=t.getMarkerPosition(a.getValues(a.dimensions,u));else if(n){var S=a.get(n.dimensions[0],u),x=a.get(n.dimensions[1],u);g=n.dataToPoint([S,x])}isNaN(y)||(g[0]=y),isNaN(_)||(g[1]=_),a.setItemLayout(u,g)})}var MarkPointView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,o){n.eachSeries(function(s){var l=MarkerModel.getMarkerModelFromSeries(s,"markPoint");l&&(updateMarkerLayout(l.getData(),s,o),this.markerGroupMap.get(s.id).updateLayout())},this)},t.prototype.renderSeries=function(r,n,o,s){var l=r.coordinateSystem,u=r.id,c=r.getData(),f=this.markerGroupMap,h=f.get(u)||f.set(u,new SymbolDraw),v=createData(l,r,n);n.setData(v),updateMarkerLayout(n.getData(),r,s),v.each(function(d){var p=v.getItemModel(d),g=p.getShallow("symbol"),y=p.getShallow("symbolSize"),_=p.getShallow("symbolRotate"),S=p.getShallow("symbolOffset"),x=p.getShallow("symbolKeepAspect");if(isFunction(g)||isFunction(y)||isFunction(_)||isFunction(S)){var T=n.getRawValue(d),b=n.getDataParams(d);isFunction(g)&&(g=g(T,b)),isFunction(y)&&(y=y(T,b)),isFunction(_)&&(_=_(T,b)),isFunction(S)&&(S=S(T,b))}var C=p.getModel("itemStyle").getItemStyle(),w=p.get("z2"),M=getVisualFromData(c,"color");C.fill||(C.fill=M),v.setItemVisual(d,{z2:retrieve2(w,0),symbol:g,symbolSize:y,symbolRotate:_,symbolOffset:S,symbolKeepAspect:x,style:C})}),h.updateData(v),this.group.add(h.group),v.eachItemGraphicEl(function(d){d.traverse(function(p){getECData(p).dataModel=n})}),this.markKeep(h),h.group.silent=n.get("silent")||r.get("silent")},t.type="markPoint",t}(MarkerView);function createData(a,t,r){var n;a?n=map$1(a&&a.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return extend(extend({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var o=new SeriesData(n,r),s=map$1(r.get("data"),curry$1(dataTransform,t));a&&(s=filter(s,curry$1(dataFilter,a)));var l=createMarkerDimValueGetter(!!a,n);return o.initData(s,null,l),o}function install$f(a){a.registerComponentModel(MarkPointModel),a.registerComponentView(MarkPointView),a.registerPreprocessor(function(t){checkMarkerInSeries(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var MarkLineModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,o){return new t(r,n,o)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(MarkerModel),inner$3=makeInner(),markLineTransform=function(a,t,r,n){var o=a.getData(),s;if(isArray$1(n))s=n;else{var l=n.type;if(l==="min"||l==="max"||l==="average"||l==="median"||n.xAxis!=null||n.yAxis!=null){var u=void 0,c=void 0;if(n.yAxis!=null||n.xAxis!=null)u=t.getAxis(n.yAxis!=null?"y":"x"),c=retrieve(n.yAxis,n.xAxis);else{var f=getAxisInfo(n,o,t,a);u=f.valueAxis;var h=getStackedDimension(o,f.valueDataDim);c=numCalculate(o,h,l)}var v=u.dim==="x"?0:1,d=1-v,p=clone$4(n),g={coord:[]};p.type=null,p.coord=[],p.coord[d]=-1/0,g.coord[d]=1/0;var y=r.get("precision");y>=0&&isNumber(c)&&(c=+c.toFixed(Math.min(y,20))),p.coord[v]=g.coord[v]=c,s=[p,g,{type:l,valueIndex:n.valueIndex,value:c}]}else s=[]}var _=[dataTransform(a,s[0]),dataTransform(a,s[1]),extend({},s[2])];return _[2].type=_[2].type||null,merge(_[2],_[0]),merge(_[2],_[1]),_};function isInfinity$1(a){return!isNaN(a)&&!isFinite(a)}function ifMarkLineHasOnlyDim(a,t,r,n){var o=1-a,s=n.dimensions[a];return isInfinity$1(t[o])&&isInfinity$1(r[o])&&t[a]===r[a]&&n.getAxis(s).containData(t[a])}function markLineFilter(a,t){if(a.type==="cartesian2d"){var r=t[0].coord,n=t[1].coord;if(r&&n&&(ifMarkLineHasOnlyDim(1,r,n,a)||ifMarkLineHasOnlyDim(0,r,n,a)))return!0}return dataFilter(a,t[0])&&dataFilter(a,t[1])}function updateSingleMarkerEndLayout(a,t,r,n,o){var s=n.coordinateSystem,l=a.getItemModel(t),u,c=parsePercent(l.get("x"),o.getWidth()),f=parsePercent(l.get("y"),o.getHeight());if(!isNaN(c)&&!isNaN(f))u=[c,f];else{if(n.getMarkerPosition)u=n.getMarkerPosition(a.getValues(a.dimensions,t));else{var h=s.dimensions,v=a.get(h[0],t),d=a.get(h[1],t);u=s.dataToPoint([v,d])}if(isCoordinateSystemType(s,"cartesian2d")){var p=s.getAxis("x"),g=s.getAxis("y"),h=s.dimensions;isInfinity$1(a.get(h[0],t))?u[0]=p.toGlobalCoord(p.getExtent()[r?0:1]):isInfinity$1(a.get(h[1],t))&&(u[1]=g.toGlobalCoord(g.getExtent()[r?0:1]))}isNaN(c)||(u[0]=c),isNaN(f)||(u[1]=f)}a.setItemLayout(t,u)}var MarkLineView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,o){n.eachSeries(function(s){var l=MarkerModel.getMarkerModelFromSeries(s,"markLine");if(l){var u=l.getData(),c=inner$3(l).from,f=inner$3(l).to;c.each(function(h){updateSingleMarkerEndLayout(c,h,!0,s,o),updateSingleMarkerEndLayout(f,h,!1,s,o)}),u.each(function(h){u.setItemLayout(h,[c.getItemLayout(h),f.getItemLayout(h)])}),this.markerGroupMap.get(s.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,n,o,s){var l=r.coordinateSystem,u=r.id,c=r.getData(),f=this.markerGroupMap,h=f.get(u)||f.set(u,new LineDraw);this.group.add(h.group);var v=createList$1(l,r,n),d=v.from,p=v.to,g=v.line;inner$3(n).from=d,inner$3(n).to=p,n.setData(g);var y=n.get("symbol"),_=n.get("symbolSize"),S=n.get("symbolRotate"),x=n.get("symbolOffset");isArray$1(y)||(y=[y,y]),isArray$1(_)||(_=[_,_]),isArray$1(S)||(S=[S,S]),isArray$1(x)||(x=[x,x]),v.from.each(function(b){T(d,b,!0),T(p,b,!1)}),g.each(function(b){var C=g.getItemModel(b),w=C.getModel("lineStyle").getLineStyle();g.setItemLayout(b,[d.getItemLayout(b),p.getItemLayout(b)]);var M=C.get("z2");w.stroke==null&&(w.stroke=d.getItemVisual(b,"style").fill),g.setItemVisual(b,{z2:retrieve2(M,0),fromSymbolKeepAspect:d.getItemVisual(b,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(b,"symbolOffset"),fromSymbolRotate:d.getItemVisual(b,"symbolRotate"),fromSymbolSize:d.getItemVisual(b,"symbolSize"),fromSymbol:d.getItemVisual(b,"symbol"),toSymbolKeepAspect:p.getItemVisual(b,"symbolKeepAspect"),toSymbolOffset:p.getItemVisual(b,"symbolOffset"),toSymbolRotate:p.getItemVisual(b,"symbolRotate"),toSymbolSize:p.getItemVisual(b,"symbolSize"),toSymbol:p.getItemVisual(b,"symbol"),style:w})}),h.updateData(g),v.line.eachItemGraphicEl(function(b){getECData(b).dataModel=n,b.traverse(function(C){getECData(C).dataModel=n})});function T(b,C,w){var M=b.getItemModel(C);updateSingleMarkerEndLayout(b,C,w,r,s);var P=M.getModel("itemStyle").getItemStyle();P.fill==null&&(P.fill=getVisualFromData(c,"color")),b.setItemVisual(C,{symbolKeepAspect:M.get("symbolKeepAspect"),symbolOffset:retrieve2(M.get("symbolOffset",!0),x[w?0:1]),symbolRotate:retrieve2(M.get("symbolRotate",!0),S[w?0:1]),symbolSize:retrieve2(M.get("symbolSize"),_[w?0:1]),symbol:retrieve2(M.get("symbol",!0),y[w?0:1]),style:P})}this.markKeep(h),h.group.silent=n.get("silent")||r.get("silent")},t.type="markLine",t}(MarkerView);function createList$1(a,t,r){var n;a?n=map$1(a&&a.dimensions,function(f){var h=t.getData().getDimensionInfo(t.getData().mapDimension(f))||{};return extend(extend({},h),{name:f,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var o=new SeriesData(n,r),s=new SeriesData(n,r),l=new SeriesData([],r),u=map$1(r.get("data"),curry$1(markLineTransform,t,a,r));a&&(u=filter(u,curry$1(markLineFilter,a)));var c=createMarkerDimValueGetter(!!a,n);return o.initData(map$1(u,function(f){return f[0]}),null,c),s.initData(map$1(u,function(f){return f[1]}),null,c),l.initData(map$1(u,function(f){return f[2]})),l.hasItemOption=!0,{from:o,to:s,line:l}}function install$e(a){a.registerComponentModel(MarkLineModel),a.registerComponentView(MarkLineView),a.registerPreprocessor(function(t){checkMarkerInSeries(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var MarkAreaModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,o){return new t(r,n,o)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(MarkerModel),inner$2=makeInner(),markAreaTransform=function(a,t,r,n){var o=n[0],s=n[1];if(!(!o||!s)){var l=dataTransform(a,o),u=dataTransform(a,s),c=l.coord,f=u.coord;c[0]=retrieve(c[0],-1/0),c[1]=retrieve(c[1],-1/0),f[0]=retrieve(f[0],1/0),f[1]=retrieve(f[1],1/0);var h=mergeAll([{},l,u]);return h.coord=[l.coord,u.coord],h.x0=l.x,h.y0=l.y,h.x1=u.x,h.y1=u.y,h}};function isInfinity(a){return!isNaN(a)&&!isFinite(a)}function ifMarkAreaHasOnlyDim(a,t,r,n){var o=1-a;return isInfinity(t[o])&&isInfinity(r[o])}function markAreaFilter(a,t){var r=t.coord[0],n=t.coord[1],o={coord:r,x:t.x0,y:t.y0},s={coord:n,x:t.x1,y:t.y1};return isCoordinateSystemType(a,"cartesian2d")?r&&n&&(ifMarkAreaHasOnlyDim(1,r,n)||ifMarkAreaHasOnlyDim(0,r,n))?!0:zoneFilter(a,o,s):dataFilter(a,o)||dataFilter(a,s)}function getSingleMarkerEndPoint(a,t,r,n,o){var s=n.coordinateSystem,l=a.getItemModel(t),u,c=parsePercent(l.get(r[0]),o.getWidth()),f=parsePercent(l.get(r[1]),o.getHeight());if(!isNaN(c)&&!isNaN(f))u=[c,f];else{if(n.getMarkerPosition){var h=a.getValues(["x0","y0"],t),v=a.getValues(["x1","y1"],t),d=s.clampData(h),p=s.clampData(v),g=[];r[0]==="x0"?g[0]=d[0]>p[0]?v[0]:h[0]:g[0]=d[0]>p[0]?h[0]:v[0],r[1]==="y0"?g[1]=d[1]>p[1]?v[1]:h[1]:g[1]=d[1]>p[1]?h[1]:v[1],u=n.getMarkerPosition(g,r,!0)}else{var y=a.get(r[0],t),_=a.get(r[1],t),S=[y,_];s.clampData&&s.clampData(S,S),u=s.dataToPoint(S,!0)}if(isCoordinateSystemType(s,"cartesian2d")){var x=s.getAxis("x"),T=s.getAxis("y"),y=a.get(r[0],t),_=a.get(r[1],t);isInfinity(y)?u[0]=x.toGlobalCoord(x.getExtent()[r[0]==="x0"?0:1]):isInfinity(_)&&(u[1]=T.toGlobalCoord(T.getExtent()[r[1]==="y0"?0:1]))}isNaN(c)||(u[0]=c),isNaN(f)||(u[1]=f)}return u}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,o){n.eachSeries(function(s){var l=MarkerModel.getMarkerModelFromSeries(s,"markArea");if(l){var u=l.getData();u.each(function(c){var f=map$1(dimPermutations,function(v){return getSingleMarkerEndPoint(u,c,v,s,o)});u.setItemLayout(c,f);var h=u.getItemGraphicEl(c);h.setShape("points",f)})}},this)},t.prototype.renderSeries=function(r,n,o,s){var l=r.coordinateSystem,u=r.id,c=r.getData(),f=this.markerGroupMap,h=f.get(u)||f.set(u,{group:new Group$3});this.group.add(h.group),this.markKeep(h);var v=createList(l,r,n);n.setData(v),v.each(function(d){var p=map$1(dimPermutations,function(E){return getSingleMarkerEndPoint(v,d,E,r,s)}),g=l.getAxis("x").scale,y=l.getAxis("y").scale,_=g.getExtent(),S=y.getExtent(),x=[g.parse(v.get("x0",d)),g.parse(v.get("x1",d))],T=[y.parse(v.get("y0",d)),y.parse(v.get("y1",d))];asc$2(x),asc$2(T);var b=!(_[0]>x[1]||_[1]<x[0]||S[0]>T[1]||S[1]<T[0]),C=!b;v.setItemLayout(d,{points:p,allClipped:C});var w=v.getItemModel(d),M=w.getModel("itemStyle").getItemStyle(),P=w.get("z2"),L=getVisualFromData(c,"color");M.fill||(M.fill=L,isString(M.fill)&&(M.fill=modifyAlpha(M.fill,.4))),M.stroke||(M.stroke=L),v.setItemVisual(d,"style",M),v.setItemVisual(d,"z2",retrieve2(P,0))}),v.diff(inner$2(h).data).add(function(d){var p=v.getItemLayout(d),g=v.getItemVisual(d,"z2");if(!p.allClipped){var y=new Polygon({z2:retrieve2(g,0),shape:{points:p.points}});v.setItemGraphicEl(d,y),h.group.add(y)}}).update(function(d,p){var g=inner$2(h).data.getItemGraphicEl(p),y=v.getItemLayout(d),_=v.getItemVisual(d,"z2");y.allClipped?g&&h.group.remove(g):(g?updateProps$1(g,{z2:retrieve2(_,0),shape:{points:y.points}},n,d):g=new Polygon({shape:{points:y.points}}),v.setItemGraphicEl(d,g),h.group.add(g))}).remove(function(d){var p=inner$2(h).data.getItemGraphicEl(d);h.group.remove(p)}).execute(),v.eachItemGraphicEl(function(d,p){var g=v.getItemModel(p),y=v.getItemVisual(p,"style");d.useStyle(v.getItemVisual(p,"style")),setLabelStyle(d,getLabelStatesModels(g),{labelFetcher:n,labelDataIndex:p,defaultText:v.getName(p)||"",inheritColor:isString(y.fill)?modifyAlpha(y.fill,1):tokens.color.neutral99}),setStatesStylesFromModel(d,g),toggleHoverEmphasis(d,null,null,g.get(["emphasis","disabled"])),getECData(d).dataModel=n}),inner$2(h).data=v,h.group.silent=n.get("silent")||r.get("silent")},t.type="markArea",t}(MarkerView);function createList(a,t,r){var n,o,s=["x0","y0","x1","y1"];if(a){var l=map$1(a&&a.dimensions,function(f){var h=t.getData(),v=h.getDimensionInfo(h.mapDimension(f))||{};return extend(extend({},v),{name:f,ordinalMeta:null})});o=map$1(s,function(f,h){return{name:f,type:l[h%2].type}}),n=new SeriesData(o,r)}else o=[{name:"value",type:"float"}],n=new SeriesData(o,r);var u=map$1(r.get("data"),curry$1(markAreaTransform,t,a,r));a&&(u=filter(u,curry$1(markAreaFilter,a)));var c=a?function(f,h,v,d){var p=f.coord[Math.floor(d/2)][d%2];return parseDataValue(p,o[d])}:function(f,h,v,d){return parseDataValue(f.value,o[d])};return n.initData(u,null,c),n.hasItemOption=!0,n}function install$d(a){a.registerComponentModel(MarkAreaModel),a.registerComponentView(MarkAreaView),a.registerPreprocessor(function(t){checkMarkerInSeries(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var getDefaultSelectorOptions=function(a,t){if(t==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,n,o){this.mergeDefaultAndTheme(r,o),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,n){a.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},t.prototype._updateSelector=function(r){var n=r.selector,o=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),isArray$1(n)&&each$f(n,function(s,l){isString(s)&&(s={type:s}),n[l]=merge(s,getDefaultSelectorOptions(o,s.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,o=0;o<r.length;o++){var s=r[o].get("name");if(this.isSelected(s)){this.select(s),n=!0;break}}!n&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var n=[],o=[];r.eachRawSeries(function(c){var f=c.name;o.push(f);var h;if(c.legendVisualProvider){var v=c.legendVisualProvider,d=v.getAllNames();r.isSeriesFiltered(c)||(o=o.concat(d)),d.length?n=n.concat(d):h=!0}else h=!0;h&&isNameSpecified(c)&&n.push(c.name)}),this._availableNames=o;var s=this.get("data")||n,l=createHashMap(),u=map$1(s,function(c){return(isString(c)||isNumber(c))&&(c={name:c}),l.get(c.name)?null:(l.set(c.name,!0),new Model(c,this,this.ecModel))},this);this._data=filter(u,function(c){return!!c})},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var n=this.option.selected,o=this.get("selectedMode");if(o==="single"){var s=this._data;each$f(s,function(l){n[l.get("name")]=!1})}n[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,n=this.option.selected;each$f(r,function(o){n[o.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;each$f(r,function(o){var s=o.get("name",!0);n.hasOwnProperty(s)||(n[s]=!0),n[s]=!n[s]})},t.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&indexOf(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",bottom:tokens.size.m,align:"auto",backgroundColor:tokens.color.transparent,borderColor:tokens.color.border,borderRadius:0,borderWidth:0,padding:5,itemGap:8,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:tokens.color.disabled,inactiveBorderColor:tokens.color.disabled,inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:tokens.color.disabled,inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:tokens.color.secondary},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:tokens.color.tertiary,borderWidth:1,borderColor:tokens.color.border},emphasis:{selectorLabel:{show:!0,color:tokens.color.quaternary}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1},triggerEvent:!1},t}(ComponentModel),curry=curry$1,each$3=each$f,Group$1=Group$3,LegendView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,n,o){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var l=r.get("align"),u=r.get("orient");(!l||l==="auto")&&(l=r.get("left")==="right"&&u==="vertical"?"right":"left");var c=r.get("selector",!0),f=r.get("selectorPosition",!0);c&&(!f||f==="auto")&&(f=u==="horizontal"?"end":"start"),this.renderInner(l,r,n,o,c,u,f);var h=createBoxLayoutReference(r,o).refContainer,v=r.getBoxLayoutParams(),d=r.get("padding"),p=getLayoutRect(v,h,d),g=this.layoutInner(r,l,p,s,c,f),y=getLayoutRect(defaults({width:g.width,height:g.height},v),h,d);this.group.x=y.x-g.x,this.group.y=y.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(g,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,n,o,s,l,u,c){var f=this.getContentGroup(),h=createHashMap(),v=n.get("selectedMode"),d=n.get("triggerEvent"),p=[];o.eachRawSeries(function(g){!g.get("legendHoverLink")&&p.push(g.id)}),each$3(n.getData(),function(g,y){var _=this,S=g.get("name");if(!this.newlineDisabled&&(S===""||S===`
`)){var x=new Group$1;x.newline=!0,f.add(x);return}var T=o.getSeriesByName(S)[0];if(!h.get(S))if(T){var b=T.getData(),C=b.getVisual("legendLineStyle")||{},w=b.getVisual("legendIcon"),M=b.getVisual("style"),P=this._createItem(T,S,y,g,n,r,C,M,w,v,s);P.on("click",curry(dispatchSelectAction,S,null,s,p)).on("mouseover",curry(dispatchHighlightAction,T.name,null,s,p)).on("mouseout",curry(dispatchDownplayAction,T.name,null,s,p)),o.ssr&&P.eachChild(function(L){var E=getECData(L);E.seriesIndex=T.seriesIndex,E.dataIndex=y,E.ssrType="legend"}),d&&P.eachChild(function(L){_.packEventData(L,n,T,y,S)}),h.set(S,!0)}else o.eachRawSeries(function(L){var E=this;if(!h.get(S)&&L.legendVisualProvider){var I=L.legendVisualProvider;if(!I.containName(S))return;var R=I.indexOfName(S),D=I.getItemVisual(R,"style"),O=I.getItemVisual(R,"legendIcon"),$=parse(D.fill);$&&$[3]===0&&($[3]=.2,D=extend(extend({},D),{fill:stringify($,"rgba")}));var N=this._createItem(L,S,y,g,n,r,{},D,O,v,s);N.on("click",curry(dispatchSelectAction,null,S,s,p)).on("mouseover",curry(dispatchHighlightAction,null,S,s,p)).on("mouseout",curry(dispatchDownplayAction,null,S,s,p)),o.ssr&&N.eachChild(function(V){var B=getECData(V);B.seriesIndex=L.seriesIndex,B.dataIndex=y,B.ssrType="legend"}),d&&N.eachChild(function(V){E.packEventData(V,n,L,y,S)}),h.set(S,!0)}},this)},this),l&&this._createSelector(l,n,s,u,c)},t.prototype.packEventData=function(r,n,o,s,l){var u={componentType:"legend",componentIndex:n.componentIndex,dataIndex:s,value:l,seriesIndex:o.seriesIndex};getECData(r).eventData=u},t.prototype._createSelector=function(r,n,o,s,l){var u=this.getSelectorGroup();each$3(r,function(f){var h=f.type,v=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){o.dispatchAction({type:h==="all"?"legendAllSelect":"legendInverseSelect",legendId:n.id})}});u.add(v);var d=n.getModel("selectorLabel"),p=n.getModel(["emphasis","selectorLabel"]);setLabelStyle(v,{normal:d,emphasis:p},{defaultText:f.title}),enableHoverEmphasis(v)})},t.prototype._createItem=function(r,n,o,s,l,u,c,f,h,v,d){var p=r.visualDrawType,g=l.get("itemWidth"),y=l.get("itemHeight"),_=l.isSelected(n),S=s.get("symbolRotate"),x=s.get("symbolKeepAspect"),T=s.get("icon");h=T||h||"roundRect";var b=getLegendStyle(h,s,c,f,p,_,d),C=new Group$1,w=s.getModel("textStyle");if(isFunction(r.getLegendIcon)&&(!T||T==="inherit"))C.add(r.getLegendIcon({itemWidth:g,itemHeight:y,icon:h,iconRotate:S,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:x}));else{var M=T==="inherit"&&r.getData().getVisual("symbol")?S==="inherit"?r.getData().getVisual("symbolRotate"):S:0;C.add(getDefaultLegendIcon({itemWidth:g,itemHeight:y,icon:h,iconRotate:M,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:x}))}var P=u==="left"?g+5:-5,L=u,E=l.get("formatter"),I=n;isString(E)&&E?I=E.replace("{name}",n??""):isFunction(E)&&(I=E(n));var R=_?w.getTextColor():s.get("inactiveColor");C.add(new ZRText({style:createTextStyle(w,{text:I,x:P,y:y/2,fill:R,align:L,verticalAlign:"middle"},{inheritColor:R})}));var D=new Rect$2({shape:C.getBoundingRect(),style:{fill:"transparent"}}),O=s.getModel("tooltip");return O.get("show")&&setTooltipConfig({el:D,componentModel:l,itemName:n,itemTooltipOption:O.option}),C.add(D),C.eachChild(function($){$.silent=!0}),D.silent=!v,this.getContentGroup().add(C),enableHoverEmphasis(C),C.__legendDataIndex=o,C},t.prototype.layoutInner=function(r,n,o,s,l,u){var c=this.getContentGroup(),f=this.getSelectorGroup();box(r.get("orient"),c,r.get("itemGap"),o.width,o.height);var h=c.getBoundingRect(),v=[-h.x,-h.y];if(f.markRedraw(),c.markRedraw(),l){box("horizontal",f,r.get("selectorItemGap",!0));var d=f.getBoundingRect(),p=[-d.x,-d.y],g=r.get("selectorButtonGap",!0),y=r.getOrient().index,_=y===0?"width":"height",S=y===0?"height":"width",x=y===0?"y":"x";u==="end"?p[y]+=h[_]+g:v[y]+=d[_]+g,p[1-y]+=h[S]/2-d[S]/2,f.x=p[0],f.y=p[1],c.x=v[0],c.y=v[1];var T={x:0,y:0};return T[_]=h[_]+g+d[_],T[S]=Math.max(h[S],d[S]),T[x]=Math.min(0,d[x]+p[1-y]),T}else return c.x=v[0],c.y=v[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(ComponentView);function getLegendStyle(a,t,r,n,o,s,l){function u(_,S){_.lineWidth==="auto"&&(_.lineWidth=S.lineWidth>0?2:0),each$3(_,function(x,T){_[T]==="inherit"&&(_[T]=S[T])})}var c=t.getModel("itemStyle"),f=c.getItemStyle(),h=a.lastIndexOf("empty",0)===0?"fill":"stroke",v=c.getShallow("decal");f.decal=!v||v==="inherit"?n.decal:createOrUpdatePatternFromDecal(v,l),f.fill==="inherit"&&(f.fill=n[o]),f.stroke==="inherit"&&(f.stroke=n[h]),f.opacity==="inherit"&&(f.opacity=(o==="fill"?n:r).opacity),u(f,n);var d=t.getModel("lineStyle"),p=d.getLineStyle();if(u(p,r),f.fill==="auto"&&(f.fill=n.fill),f.stroke==="auto"&&(f.stroke=n.fill),p.stroke==="auto"&&(p.stroke=n.fill),!s){var g=t.get("inactiveBorderWidth"),y=f[h];f.lineWidth=g==="auto"?n.lineWidth>0&&y?2:0:f.lineWidth,f.fill=t.get("inactiveColor"),f.stroke=t.get("inactiveBorderColor"),p.stroke=d.get("inactiveColor"),p.lineWidth=d.get("inactiveWidth")}return{itemStyle:f,lineStyle:p}}function getDefaultLegendIcon(a){var t=a.icon||"roundRect",r=createSymbol$1(t,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return r.setStyle(a.itemStyle),r.rotation=(a.iconRotate||0)*Math.PI/180,r.setOrigin([a.itemWidth/2,a.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill=tokens.color.neutral00,r.style.lineWidth=2),r}function dispatchSelectAction(a,t,r,n){dispatchDownplayAction(a,t,r,n),r.dispatchAction({type:"legendToggleSelect",name:a??t}),dispatchHighlightAction(a,t,r,n)}function isUseHoverLayer(a){for(var t=a.getZr().storage.getDisplayList(),r,n=0,o=t.length;n<o&&!(r=t[n].states.emphasis);)n++;return r&&r.hoverLayer}function dispatchHighlightAction(a,t,r,n){isUseHoverLayer(r)||r.dispatchAction({type:"highlight",seriesName:a,name:t,excludeSeriesId:n})}function dispatchDownplayAction(a,t,r,n){isUseHoverLayer(r)||r.dispatchAction({type:"downplay",seriesName:a,name:t,excludeSeriesId:n})}function legendFilter(a){var t=a.findComponents({mainType:"legend"});t&&t.length&&a.filterSeries(function(r){for(var n=0;n<t.length;n++)if(!t[n].isSelected(r.name))return!1;return!0})}function legendSelectActionHandler(a,t,r){var n=a==="allSelect"||a==="inverseSelect",o={},s=[];r.eachComponent({mainType:"legend",query:t},function(u){n?u[a]():u[a](t.name),makeSelectedMap(u,o),s.push(u.componentIndex)});var l={};return r.eachComponent("legend",function(u){each$f(o,function(c,f){u[c?"select":"unSelect"](f)}),makeSelectedMap(u,l)}),n?{selected:l,legendIndex:s}:{name:t.name,selected:l}}function makeSelectedMap(a,t){var r=t||{};return each$f(a.getData(),function(n){var o=n.get("name");if(!(o===`
`||o==="")){var s=a.isSelected(o);hasOwn(r,o)?r[o]=r[o]&&s:r[o]=s}}),r}function installLegendAction(a){a.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),a.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),a.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$c(a){a.registerComponentModel(LegendModel),a.registerComponentView(LegendView),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),a.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(a)}var ScrollableLegendModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,n,o){var s=getLayoutParams(r);a.prototype.init.call(this,r,n,o),mergeAndNormalizeLayoutParams(this,r,s)},t.prototype.mergeOption=function(r,n){a.prototype.mergeOption.call(this,r,n),mergeAndNormalizeLayoutParams(this,this.option,r)},t.type="legend.scroll",t.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:tokens.color.accent50,pageIconInactiveColor:tokens.color.accent10,pageIconSize:15,pageTextStyle:{color:tokens.color.tertiary},animationDurationUpdate:800}),t}(LegendModel);function mergeAndNormalizeLayoutParams(a,t,r){var n=a.getOrient(),o=[1,1];o[n.index]=0,mergeLayoutParam(t,r,{type:"box",ignoreSize:!!o})}var Group=Group$3,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},t.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,n,o,s,l,u,c){var f=this;a.prototype.renderInner.call(this,r,n,o,s,l,u,c);var h=this._controllerGroup,v=n.get("pageIconSize",!0),d=isArray$1(v)?v:[v,v];g("pagePrev",0);var p=n.getModel("pageTextStyle");h.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:p.getTextColor(),font:p.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(y,_){var S=y+"DataIndex",x=createIcon(n.get("pageIcons",!0)[n.getOrient().name][_],{onclick:bind$1(f._pageGo,f,S,n,s)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});x.name=y,h.add(x)}},t.prototype.layoutInner=function(r,n,o,s,l,u){var c=this.getSelectorGroup(),f=r.getOrient().index,h=WH[f],v=XY[f],d=WH[1-f],p=XY[1-f];l&&box("horizontal",c,r.get("selectorItemGap",!0));var g=r.get("selectorButtonGap",!0),y=c.getBoundingRect(),_=[-y.x,-y.y],S=clone$4(o);l&&(S[h]=o[h]-y[h]-g);var x=this._layoutContentAndController(r,s,S,f,h,d,p,v);if(l){if(u==="end")_[f]+=x[h]+g;else{var T=y[h]+g;_[f]-=T,x[v]-=T}x[h]+=y[h]+g,_[1-f]+=x[p]+x[d]/2-y[d]/2,x[d]=Math.max(x[d],y[d]),x[p]=Math.min(x[p],y[p]+_[1-f]),c.x=_[0],c.y=_[1],c.markRedraw()}return x},t.prototype._layoutContentAndController=function(r,n,o,s,l,u,c,f){var h=this.getContentGroup(),v=this._containerGroup,d=this._controllerGroup;box(r.get("orient"),h,r.get("itemGap"),s?o.width:null,s?null:o.height),box("horizontal",d,r.get("pageButtonItemGap",!0));var p=h.getBoundingRect(),g=d.getBoundingRect(),y=this._showController=p[l]>o[l],_=[-p.x,-p.y];n||(_[s]=h[f]);var S=[0,0],x=[-g.x,-g.y],T=retrieve2(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(y){var b=r.get("pageButtonPosition",!0);b==="end"?x[s]+=o[l]-g[l]:S[s]+=g[l]+T}x[1-s]+=p[u]/2-g[u]/2,h.setPosition(_),v.setPosition(S),d.setPosition(x);var C={x:0,y:0};if(C[l]=y?o[l]:p[l],C[u]=Math.max(p[u],g[u]),C[c]=Math.min(0,g[c]+x[1-s]),v.__rectSize=o[l],y){var w={x:0,y:0};w[l]=Math.max(o[l]-g[l]-T,0),w[u]=C[u],v.setClipPath(new Rect$2({shape:w})),v.__rectSize=w[l]}else d.eachChild(function(P){P.attr({invisible:!0,silent:!0})});var M=this._getPageInfo(r);return M.pageIndex!=null&&updateProps$1(h,{x:M.contentPosition[0],y:M.contentPosition[1]},y?r:null),this._updatePageInfoView(r,M),C},t.prototype._pageGo=function(r,n,o){var s=this._getPageInfo(n)[r];s!=null&&o.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:n.id})},t.prototype._updatePageInfoView=function(r,n){var o=this._controllerGroup;each$f(["pagePrev","pageNext"],function(h){var v=h+"DataIndex",d=n[v]!=null,p=o.childOfName(h);p&&(p.setStyle("fill",d?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),p.cursor=d?"pointer":"default")});var s=o.childOfName("pageText"),l=r.get("pageFormatter"),u=n.pageIndex,c=u!=null?u+1:0,f=n.pageCount;s&&l&&s.setStyle("text",isString(l)?l.replace("{current}",c==null?"":c+"").replace("{total}",f==null?"":f+""):l({current:c,total:f}))},t.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),o=this.getContentGroup(),s=this._containerGroup.__rectSize,l=r.getOrient().index,u=WH[l],c=XY[l],f=this._findTargetItemIndex(n),h=o.children(),v=h[f],d=h.length,p=d?1:0,g={contentPosition:[o.x,o.y],pageCount:p,pageIndex:p-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!v)return g;var y=b(v);g.contentPosition[l]=-y.s;for(var _=f+1,S=y,x=y,T=null;_<=d;++_)T=b(h[_]),(!T&&x.e>S.s+s||T&&!C(T,S.s))&&(x.i>S.i?S=x:S=T,S&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=S.i),++g.pageCount)),x=T;for(var _=f-1,S=y,x=y,T=null;_>=-1;--_)T=b(h[_]),(!T||!C(x,T.s))&&S.i<x.i&&(x=S,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=S.i),++g.pageCount,++g.pageIndex),S=T;return g;function b(w){if(w){var M=w.getBoundingRect(),P=M[c]+w[c];return{s:P,e:P+M[u],i:w.__legendDataIndex}}}function C(w,M){return w.e>=M&&w.s<=M+s}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,o=this.getContentGroup(),s;return o.eachChild(function(l,u){var c=l.__legendDataIndex;s==null&&c!=null&&(s=u),c===r&&(n=u)}),n??s},t.type="legend.scroll",t}(LegendView);function installScrollableLegendAction(a){a.registerAction("legendScroll","legendscroll",function(t,r){var n=t.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(o){o.setScrollDataIndex(n)})})}function install$b(a){use(install$c),a.registerComponentModel(ScrollableLegendModel),a.registerComponentView(ScrollableLegendView),installScrollableLegendAction(a)}function install$a(a){use(install$c),use(install$b)}var InsideZoomModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.inside",t.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(DataZoomModel),inner$1=makeInner();function setViewInfoToCoordSysRecord(a,t,r){inner$1(a).coordSysRecordMap.each(function(n){var o=n.dataZoomInfoMap.get(t.uid);o&&(o.getRange=r)})}function disposeCoordSysRecordIfNeeded(a,t){for(var r=inner$1(a).coordSysRecordMap,n=r.keys(),o=0;o<n.length;o++){var s=n[o],l=r.get(s),u=l.dataZoomInfoMap;if(u){var c=t.uid,f=u.get(c);f&&(u.removeKey(c),u.keys().length||disposeCoordSysRecord(r,l))}}}function disposeCoordSysRecord(a,t){if(t){a.removeKey(t.model.uid);var r=t.controller;r&&r.dispose()}}function createCoordSysRecord(a,t){var r={model:t,containsPoint:curry$1(containsPoint,t),dispatchAction:curry$1(dispatchAction,a),dataZoomInfoMap:null,controller:null},n=r.controller=new RoamController(a.getZr());return each$f(["pan","zoom","scrollMove"],function(o){n.on(o,function(s){var l=[];r.dataZoomInfoMap.each(function(u){if(s.isAvailableBehavior(u.model.option)){var c=(u.getRange||{})[o],f=c&&c(u.dzReferCoordSysInfo,r.model.mainType,r.controller,s);!u.model.get("disabled",!0)&&f&&l.push({dataZoomId:u.model.id,start:f[0],end:f[1]})}}),l.length&&r.dispatchAction(l)})}),r}function dispatchAction(a,t){a.isDisposed()||a.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function containsPoint(a,t,r,n){return a.coordinateSystem.containPoint([r,n])}function mergeControllerParams(a,t,r){var n,o="type_",s={type_true:2,type_move:1,type_false:0,type_undefined:-1},l=!0;return a.each(function(u){var c=u.model,f=c.get("disabled",!0)?!1:c.get("zoomLock",!0)?"move":!0;s[o+f]>s[o+n]&&(n=f),l=l&&c.get("preventDefaultMouseMove",!0)}),{controlType:n,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!l,api:r,zInfo:{component:t.model},triggerInfo:{roamTrigger:null,isInSelf:t.containsPoint}}}}function installDataZoomRoamProcessor(a){a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,function(t,r){var n=inner$1(r),o=n.coordSysRecordMap||(n.coordSysRecordMap=createHashMap());o.each(function(s){s.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(s){var l=collectReferCoordSysModelInfo(s);each$f(l.infoList,function(u){var c=u.model.uid,f=o.get(c)||o.set(c,createCoordSysRecord(r,u.model)),h=f.dataZoomInfoMap||(f.dataZoomInfoMap=createHashMap());h.set(s.uid,{dzReferCoordSysInfo:u,model:s,getRange:null})})}),o.each(function(s){var l=s.controller,u,c=s.dataZoomInfoMap;if(c){var f=c.keys()[0];f!=null&&(u=c.get(f))}if(!u){disposeCoordSysRecord(o,s);return}var h=mergeControllerParams(c,s,r);l.enable(h.controlType,h.opt),createOrUpdate(s,"dispatchAction",u.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="dataZoom.inside",r}return t.prototype.render=function(r,n,o){if(a.prototype.render.apply(this,arguments),r.noTarget()){this._clear();return}this.range=r.getPercentRange(),setViewInfoToCoordSysRecord(o,r,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(DataZoomView),getRangeHandlers={zoom:function(a,t,r,n){var o=this.range,s=o.slice(),l=a.axisModels[0];if(l){var u=getDirectionInfo[t](null,[n.originX,n.originY],l,r,a),c=(u.signal>0?u.pixelStart+u.pixelLength-u.pixel:u.pixel-u.pixelStart)/u.pixelLength*(s[1]-s[0])+s[0],f=Math.max(1/n.scale,0);s[0]=(s[0]-c)*f+c,s[1]=(s[1]-c)*f+c;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,s,[0,100],0,h.minSpan,h.maxSpan),this.range=s,o[0]!==s[0]||o[1]!==s[1])return s}},pan:makeMover(function(a,t,r,n,o,s){var l=getDirectionInfo[n]([s.oldX,s.oldY],[s.newX,s.newY],t,o,r);return l.signal*(a[1]-a[0])*l.pixel/l.pixelLength}),scrollMove:makeMover(function(a,t,r,n,o,s){var l=getDirectionInfo[n]([0,0],[s.scrollDelta,s.scrollDelta],t,o,r);return l.signal*(a[1]-a[0])*s.scrollDelta})};function makeMover(a){return function(t,r,n,o){var s=this.range,l=s.slice(),u=t.axisModels[0];if(u){var c=a(l,u,t,r,n,o);if(sliderMove(c,l,[0,100],"all"),this.range=l,s[0]!==l[0]||s[1]!==l[1])return l}}}var getDirectionInfo={grid:function(a,t,r,n,o){var s=r.axis,l={},u=o.model.coordinateSystem.getRect();return a=a||[0,0],s.dim==="x"?(l.pixel=t[0]-a[0],l.pixelLength=u.width,l.pixelStart=u.x,l.signal=s.inverse?1:-1):(l.pixel=t[1]-a[1],l.pixelLength=u.height,l.pixelStart=u.y,l.signal=s.inverse?-1:1),l},polar:function(a,t,r,n,o){var s=r.axis,l={},u=o.model.coordinateSystem,c=u.getRadiusAxis().getExtent(),f=u.getAngleAxis().getExtent();return a=a?u.pointToCoord(a):[0,0],t=u.pointToCoord(t),r.mainType==="radiusAxis"?(l.pixel=t[0]-a[0],l.pixelLength=c[1]-c[0],l.pixelStart=c[0],l.signal=s.inverse?1:-1):(l.pixel=t[1]-a[1],l.pixelLength=f[1]-f[0],l.pixelStart=f[0],l.signal=s.inverse?-1:1),l},singleAxis:function(a,t,r,n,o){var s=r.axis,l=o.model.coordinateSystem.getRect(),u={};return a=a||[0,0],s.orient==="horizontal"?(u.pixel=t[0]-a[0],u.pixelLength=l.width,u.pixelStart=l.x,u.signal=s.inverse?1:-1):(u.pixel=t[1]-a[1],u.pixelLength=l.height,u.pixelStart=l.y,u.signal=s.inverse?-1:1),u}};function install$9(a){installCommon$1(a),a.registerComponentModel(InsideZoomModel),a.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(a)}var SliderZoomModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:tokens.color.accent10,borderRadius:0,backgroundColor:tokens.color.transparent,dataBackground:{lineStyle:{color:tokens.color.accent30,width:.5},areaStyle:{color:tokens.color.accent20,opacity:.2}},selectedDataBackground:{lineStyle:{color:tokens.color.accent40,width:.5},areaStyle:{color:tokens.color.accent20,opacity:.3}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:tokens.color.neutral00,borderColor:tokens.color.accent20},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:tokens.color.accent40,opacity:.5},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:tokens.color.tertiary},brushSelect:!0,brushStyle:{color:tokens.color.accent30,opacity:.3},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:tokens.color.accent40},moveHandleStyle:{opacity:.8}},defaultLocationEdgeGap:15}),t}(DataZoomModel),Rect=Rect$2,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r._displayables={},r}return t.prototype.init=function(r,n){this.api=n,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},t.prototype.render=function(r,n,o,s){if(a.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",r.get("throttle"),"fixRate"),this._orient=r.getOrient(),r.get("show")===!1){this.group.removeAll();return}if(r.noTarget()){this._clear(),this.group.removeAll();return}(!s||s.type!=="dataZoom"||s.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var r=this.api.getZr();r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var r=this.group;r.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var n=this._displayables.sliderGroup=new Group$3;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),r.add(n),this._positionGroup()},t.prototype._resetLocation=function(){var r=this.dataZoomModel,n=this.api,o=r.get("brushSelect"),s=o?DEFAULT_MOVE_HANDLE_SIZE:0,l=createBoxLayoutReference(r,n).refContainer,u=this._findCoordRect(),c=r.get("defaultLocationEdgeGap",!0)||0,f=this._orient===HORIZONTAL?{right:l.width-u.x-u.width,top:l.height-DEFAULT_FILLER_SIZE-c-s,width:u.width,height:DEFAULT_FILLER_SIZE}:{right:c,top:u.y,width:DEFAULT_FILLER_SIZE,height:u.height},h=getLayoutParams(r.option);each$f(["right","top","width","height"],function(d){h[d]==="ph"&&(h[d]=f[d])});var v=getLayoutRect(h,l);this._location={x:v.x,y:v.y},this._size=[v.width,v.height],this._orient===VERTICAL&&this._size.reverse()},t.prototype._positionGroup=function(){var r=this.group,n=this._location,o=this._orient,s=this.dataZoomModel.getFirstTargetAxisModel(),l=s&&s.get("inverse"),u=this._displayables.sliderGroup,c=(this._dataShadowInfo||{}).otherAxisInverse;u.attr(o===HORIZONTAL&&!l?{scaleY:c?1:-1,scaleX:1}:o===HORIZONTAL&&l?{scaleY:c?1:-1,scaleX:-1}:o===VERTICAL&&!l?{scaleY:c?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:c?-1:1,scaleX:-1,rotation:Math.PI/2});var f=r.getBoundingRect([u]);r.x=n.x-f.x,r.y=n.y-f.y,r.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var r=this.dataZoomModel,n=this._size,o=this._displayables.sliderGroup,s=r.get("brushSelect");o.add(new Rect({silent:!0,shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:r.get("backgroundColor")},z2:-40}));var l=new Rect({shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),u=this.api.getZr();s?(l.on("mousedown",this._onBrushStart,this),l.cursor="crosshair",u.on("mousemove",this._onBrush),u.on("mouseup",this._onBrushEnd)):(u.off("mousemove",this._onBrush),u.off("mouseup",this._onBrushEnd)),o.add(l)},t.prototype._renderDataShadow=function(){var r=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!r)return;var n=this._size,o=this._shadowSize||[],s=r.series,l=s.getRawData(),u=s.getShadowDim&&s.getShadowDim(),c=u&&l.getDimensionInfo(u)?s.getShadowDim():r.otherDim;if(c==null)return;var f=this._shadowPolygonPts,h=this._shadowPolylinePts;if(l!==this._shadowData||c!==this._shadowDim||n[0]!==o[0]||n[1]!==o[1]){var v=l.getDataExtent(r.thisDim),d=l.getDataExtent(c),p=(d[1]-d[0])*.3;d=[d[0]-p,d[1]+p];var g=[0,n[1]],y=[0,n[0]],_=[[n[0],0],[0,0]],S=[],x=y[1]/Math.max(1,l.count()-1),T=n[0]/(v[1]-v[0]),b=r.thisAxis.type==="time",C=-x,w=Math.round(l.count()/n[0]),M;l.each([r.thisDim,c],function(R,D,O){if(w>0&&O%w){b||(C+=x);return}C=b?(+R-v[0])*T:C+x;var $=D==null||isNaN(D)||D==="",N=$?0:linearMap$2(D,d,g,!0);$&&!M&&O?(_.push([_[_.length-1][0],0]),S.push([S[S.length-1][0],0])):!$&&M&&(_.push([C,0]),S.push([C,0])),$||(_.push([C,N]),S.push([C,N])),M=$}),f=this._shadowPolygonPts=_,h=this._shadowPolylinePts=S}this._shadowData=l,this._shadowDim=c,this._shadowSize=[n[0],n[1]];var P=this.dataZoomModel;function L(R){var D=P.getModel(R?"selectedDataBackground":"dataBackground"),O=new Group$3,$=new Polygon({shape:{points:f},segmentIgnoreThreshold:1,style:D.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),N=new Polyline$1({shape:{points:h},segmentIgnoreThreshold:1,style:D.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return O.add($),O.add(N),O}for(var E=0;E<3;E++){var I=L(E===1);this._displayables.sliderGroup.add(I),this._displayables.dataShadowSegs.push(I)}},t.prototype._prepareDataShadowInfo=function(){var r=this.dataZoomModel,n=r.get("showDataShadow");if(n!==!1){var o,s=this.ecModel;return r.eachTargetAxis(function(l,u){var c=r.getAxisProxy(l,u).getTargetSeriesModels();each$f(c,function(f){if(!o&&!(n!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,f.get("type"))<0)){var h=s.getComponent(getAxisMainType(l),u).axis,v=getOtherDim(l),d,p=f.coordinateSystem;v!=null&&p.getOtherAxis&&(d=p.getOtherAxis(h).inverse),v=f.getData().mapDimension(v);var g=f.getData().mapDimension(l);o={thisAxis:h,series:f,thisDim:g,otherDim:v,otherAxisInverse:d}}},this)},this),o}},t.prototype._renderHandle=function(){var r=this.group,n=this._displayables,o=n.handles=[null,null],s=n.handleLabels=[null,null],l=this._displayables.sliderGroup,u=this._size,c=this.dataZoomModel,f=this.api,h=c.get("borderRadius")||0,v=c.get("brushSelect"),d=n.filler=new Rect({silent:v,style:{fill:c.get("fillerColor")},textConfig:{position:"inside"}});l.add(d),l.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:u[0],height:u[1],r:h},style:{stroke:c.get("dataBackgroundColor")||c.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:tokens.color.transparent}})),each$f([0,1],function(T){var b=c.get("handleIcon");!symbolBuildProxies[b]&&b.indexOf("path://")<0&&b.indexOf("image://")<0&&(b="path://"+b);var C=createSymbol$1(b,-1,0,2,2,null,!0);C.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,T),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var w=C.getBoundingRect(),M=c.get("handleSize");this._handleHeight=parsePercent(M,this._size[1]),this._handleWidth=w.width/w.height*this._handleHeight,C.setStyle(c.getModel("handleStyle").getItemStyle()),C.style.strokeNoScale=!0,C.rectHover=!0,C.ensureState("emphasis").style=c.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(C);var P=c.get("handleColor");P!=null&&(C.style.fill=P),l.add(o[T]=C);var L=c.getModel("textStyle"),E=c.get("handleLabel")||{},I=E.show||!1;r.add(s[T]=new ZRText({silent:!0,invisible:!I,style:createTextStyle(L,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:L.getTextColor(),font:L.getFont()}),z2:10}))},this);var p=d;if(v){var g=parsePercent(c.get("moveHandleSize"),u[1]),y=n.moveHandle=new Rect$2({style:c.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:u[1]-.5,height:g}}),_=g*.8,S=n.moveHandleIcon=createSymbol$1(c.get("moveHandleIcon"),-_/2,-_/2,_,_,tokens.color.neutral00,!0);S.silent=!0,S.y=u[1]+g/2-.5,y.ensureState("emphasis").style=c.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var x=Math.min(u[1]/2,Math.max(g,10));p=n.moveZone=new Rect$2({invisible:!0,shape:{y:u[1]-x,height:g+x}}),p.on("mouseover",function(){f.enterEmphasis(y)}).on("mouseout",function(){f.leaveEmphasis(y)}),l.add(y),l.add(S),l.add(p)}p.attr({draggable:!0,cursor:"default",drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var r=this._range=this.dataZoomModel.getPercentRange(),n=this._getViewExtent();this._handleEnds=[linearMap$2(r[0],[0,100],n,!0),linearMap$2(r[1],[0,100],n,!0)]},t.prototype._updateInterval=function(r,n){var o=this.dataZoomModel,s=this._handleEnds,l=this._getViewExtent(),u=o.findRepresentativeAxisProxy().getMinMaxSpan(),c=[0,100];sliderMove(n,s,l,o.get("zoomLock")?"all":r,u.minSpan!=null?linearMap$2(u.minSpan,c,l,!0):null,u.maxSpan!=null?linearMap$2(u.maxSpan,c,l,!0):null);var f=this._range,h=this._range=asc$2([linearMap$2(s[0],l,c,!0),linearMap$2(s[1],l,c,!0)]);return!f||f[0]!==h[0]||f[1]!==h[1]},t.prototype._updateView=function(r){var n=this._displayables,o=this._handleEnds,s=asc$2(o.slice()),l=this._size;each$f([0,1],function(p){var g=n.handles[p],y=this._handleHeight;g.attr({scaleX:y/2,scaleY:y/2,x:o[p]+(p?-1:1),y:l[1]/2-y/2})},this),n.filler.setShape({x:s[0],y:0,width:s[1]-s[0],height:l[1]});var u={x:s[0],width:s[1]-s[0]};n.moveHandle&&(n.moveHandle.setShape(u),n.moveZone.setShape(u),n.moveZone.getBoundingRect(),n.moveHandleIcon&&n.moveHandleIcon.attr("x",u.x+u.width/2));for(var c=n.dataShadowSegs,f=[0,s[0],s[1],l[0]],h=0;h<c.length;h++){var v=c[h],d=v.getClipPath();d||(d=new Rect$2,v.setClipPath(d)),d.setShape({x:f[h],y:0,width:f[h+1]-f[h],height:l[1]})}this._updateDataInfo(r)},t.prototype._updateDataInfo=function(r){var n=this.dataZoomModel,o=this._displayables,s=o.handleLabels,l=this._orient,u=["",""];if(n.get("showDetail")){var c=n.findRepresentativeAxisProxy();if(c){var f=c.getAxisModel().axis,h=this._range,v=r?c.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:c.getDataValueWindow();u=[this._formatLabel(v[0],f),this._formatLabel(v[1],f)]}}var d=asc$2(this._handleEnds.slice());p.call(this,0),p.call(this,1);function p(g){var y=getTransform$1(o.handles[g].parent,this.group),_=transformDirection(g===0?"right":"left",y),S=this._handleWidth/2+LABEL_GAP,x=applyTransform([d[g]+(g===0?-S:S),this._size[1]/2],y);s[g].setStyle({x:x[0],y:x[1],verticalAlign:l===HORIZONTAL?"middle":_,align:l===HORIZONTAL?_:"center",text:u[g]})}},t.prototype._formatLabel=function(r,n){var o=this.dataZoomModel,s=o.get("labelFormatter"),l=o.get("labelPrecision");(l==null||l==="auto")&&(l=n.getPixelPrecision());var u=r==null||isNaN(r)?"":n.type==="category"||n.type==="time"?n.scale.getLabel({value:Math.round(r)}):r.toFixed(Math.min(l,20));return isFunction(s)?s(r,u):isString(s)?s.replace("{value}",u):u},t.prototype._showDataInfo=function(r){var n=this.dataZoomModel.get("handleLabel")||{},o=n.show||!1,s=this.dataZoomModel.getModel(["emphasis","handleLabel"]),l=s.get("show")||!1,u=r||this._dragging?l:o,c=this._displayables,f=c.handleLabels;f[0].attr("invisible",!u),f[1].attr("invisible",!u),c.moveHandle&&this.api[u?"enterEmphasis":"leaveEmphasis"](c.moveHandle,1)},t.prototype._onDragMove=function(r,n,o,s){this._dragging=!0,stop(s.event);var l=this._displayables.sliderGroup.getLocalTransform(),u=applyTransform([n,o],l,!0),c=this._updateInterval(r,u[0]),f=this.dataZoomModel.get("realtime");this._updateView(!f),c&&f&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var r=this.dataZoomModel.get("realtime");!r&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(r){var n=this._size,o=this._displayables.sliderGroup.transformCoordToLocal(r.offsetX,r.offsetY);if(!(o[0]<0||o[0]>n[0]||o[1]<0||o[1]>n[1])){var s=this._handleEnds,l=(s[0]+s[1])/2,u=this._updateInterval("all",o[0]-l);this._updateView(),u&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(r){var n=r.offsetX,o=r.offsetY;this._brushStart=new Point(n,o),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(r){if(this._brushing){var n=this._displayables.brushRect;if(this._brushing=!1,!!n){n.attr("ignore",!0);var o=n.shape,s=+new Date;if(!(s-this._brushStartTime<200&&Math.abs(o.width)<5)){var l=this._getViewExtent(),u=[0,100],c=this._handleEnds=[o.x,o.x+o.width],f=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();sliderMove(0,c,l,0,f.minSpan!=null?linearMap$2(f.minSpan,u,l,!0):null,f.maxSpan!=null?linearMap$2(f.maxSpan,u,l,!0):null),this._range=asc$2([linearMap$2(c[0],l,u,!0),linearMap$2(c[1],l,u,!0)]),this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(r){this._brushing&&(stop(r.event),this._updateBrushRect(r.offsetX,r.offsetY))},t.prototype._updateBrushRect=function(r,n){var o=this._displayables,s=this.dataZoomModel,l=o.brushRect;l||(l=o.brushRect=new Rect({silent:!0,style:s.getModel("brushStyle").getItemStyle()}),o.sliderGroup.add(l)),l.attr("ignore",!1);var u=this._brushStart,c=this._displayables.sliderGroup,f=c.transformCoordToLocal(r,n),h=c.transformCoordToLocal(u.x,u.y),v=this._size;f[0]=Math.max(Math.min(v[0],f[0]),0),l.setShape({x:h[0],y:0,width:f[0]-h[0],height:v[1]})},t.prototype._dispatchZoomAction=function(r){var n=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:r?REALTIME_ANIMATION_CONFIG:null,start:n[0],end:n[1]})},t.prototype._findCoordRect=function(){var r,n=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!r&&n.length){var o=n[0].model.coordinateSystem;r=o.getRect&&o.getRect()}if(!r){var s=this.api.getWidth(),l=this.api.getHeight();r={x:s*.2,y:l*.2,width:s*.6,height:l*.6}}return r},t.type="dataZoom.slider",t}(DataZoomView);function getOtherDim(a){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[a]}function getCursor$1(a){return a==="vertical"?"ns-resize":"ew-resize"}function install$8(a){a.registerComponentModel(SliderZoomModel),a.registerComponentView(SliderZoomView),installCommon$1(a)}function install$7(a){use(install$9),use(install$8)}var visualDefault={get:function(a,t,r){var n=clone$4((defaultOption[a]||{})[t]);return r&&isArray$1(n)?n[n.length-1]:n}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:[tokens.color.transparent]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,n,o){this.mergeDefaultAndTheme(r,o)},t.prototype.optionUpdated=function(r,n){var o=this.option;!n&&replaceVisualOption(o,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var n=this.stateList;r=bind$1(r,this),this.controllerVisuals=createVisualMappings(this.option.controller,n,r),this.targetVisuals=createVisualMappings(this.option.target,n,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesId,n=this.option.seriesIndex;n==null&&r==null&&(n="all");var o=queryReferringComponents(this.ecModel,"series",{index:n,id:r},{useDefault:!1,enableAll:!0,enableNone:!1}).models;return map$1(o,function(s){return s.componentIndex})},t.prototype.eachTargetSeries=function(r,n){each$f(this.getTargetSeriesIndices(),function(o){var s=this.ecModel.getSeriesByIndex(o);s&&r.call(n,s)},this)},t.prototype.isTargetSeries=function(r){var n=!1;return this.eachTargetSeries(function(o){o===r&&(n=!0)}),n},t.prototype.formatValueText=function(r,n,o){var s=this.option,l=s.precision,u=this.dataBound,c=s.formatter,f;o=o||["<",">"],isArray$1(r)&&(r=r.slice(),f=!0);var h=n?r:f?[v(r[0]),v(r[1])]:v(r);if(isString(c))return c.replace("{value}",f?h[0]:h).replace("{value2}",f?h[1]:h);if(isFunction(c))return f?c(r[0],r[1]):c(r);if(f)return r[0]===u[0]?o[0]+" "+h[1]:r[1]===u[1]?o[1]+" "+h[0]:h[0]+" - "+h[1];return h;function v(d){return d===u[0]?"min":d===u[1]?"max":(+d).toFixed(Math.min(l,20))}},t.prototype.resetExtent=function(){var r=this.option,n=asc([r.min,r.max]);this._dataExtent=n},t.prototype.getDataDimensionIndex=function(r){var n=this.option.dimension;if(n!=null)return r.getDimensionIndex(n);for(var o=r.dimensions,s=o.length-1;s>=0;s--){var l=o[s],u=r.getDimensionInfo(l);if(!u.isCalculationCoord)return u.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,n=this.option,o={inRange:n.inRange,outOfRange:n.outOfRange},s=n.target||(n.target={}),l=n.controller||(n.controller={});merge(s,o),merge(l,o);var u=this.isCategory();c.call(this,s),c.call(this,l),f.call(this,s,"inRange","outOfRange"),h.call(this,l);function c(v){isArray(n.color)&&!v.inRange&&(v.inRange={color:n.color.slice().reverse()}),v.inRange=v.inRange||{color:r.get("gradientColor")}}function f(v,d,p){var g=v[d],y=v[p];g&&!y&&(y=v[p]={},each$2(g,function(_,S){if(VisualMapping.isValidType(S)){var x=visualDefault.get(S,"inactive",u);x!=null&&(y[S]=x,S==="color"&&!y.hasOwnProperty("opacity")&&!y.hasOwnProperty("colorAlpha")&&(y.opacity=[0,0]))}}))}function h(v){var d=(v.inRange||{}).symbol||(v.outOfRange||{}).symbol,p=(v.inRange||{}).symbolSize||(v.outOfRange||{}).symbolSize,g=this.get("inactiveColor"),y=this.getItemSymbol(),_=y||"roundRect";each$2(this.stateList,function(S){var x=this.itemSize,T=v[S];T||(T=v[S]={color:u?g:[g]}),T.symbol==null&&(T.symbol=d&&clone$4(d)||(u?_:[_])),T.symbolSize==null&&(T.symbolSize=p&&clone$4(p)||(u?x[0]:[x[0],x[0]])),T.symbol=mapVisual(T.symbol,function(w){return w==="none"?_:w});var b=T.symbolSize;if(b!=null){var C=-1/0;eachVisual(b,function(w){w>C&&(C=w)}),T.symbolSize=mapVisual(b,function(w){return linearMap$1(w,[0,C],[0,x[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:tokens.color.transparent,borderColor:tokens.color.borderTint,contentColor:tokens.color.theme[0],inactiveColor:tokens.color.disabled,borderWidth:0,padding:tokens.size.m,textGap:10,precision:0,textStyle:{color:tokens.color.secondary}},t}(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,n){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(o){o.mappingMethod="linear",o.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){a.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=DEFAULT_BAR_BOUND[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=DEFAULT_BAR_BOUND[1])},t.prototype._resetRange=function(){var r=this.getExtent(),n=this.option.range;!n||n.auto?(r.auto=1,this.option.range=r):isArray$1(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],r[0]),n[1]=Math.min(n[1],r[1]))},t.prototype.completeVisualOption=function(){a.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(r){var n=this.option.controller[r].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),n=asc$2((this.get("range")||[]).slice());return n[0]>r[1]&&(n[0]=r[1]),n[1]>r[1]&&(n[1]=r[1]),n[0]<r[0]&&(n[0]=r[0]),n[1]<r[0]&&(n[1]=r[0]),n},t.prototype.getValueState=function(r){var n=this.option.range,o=this.getExtent(),s=retrieve2(this.option.unboundedRange,!0);return(s&&n[0]<=o[0]||n[0]<=r)&&(s&&n[1]>=o[1]||r<=n[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[];return this.eachTargetSeries(function(o){var s=[],l=o.getData();l.each(this.getDataDimensionIndex(l),function(u,c){r[0]<=u&&u<=r[1]&&s.push(c)},this),n.push({seriesId:o.id,dataIndex:s})},this),n},t.prototype.getVisualMeta=function(r){var n=getColorStopValues(this,"outOfRange",this.getExtent()),o=getColorStopValues(this,"inRange",this.option.range.slice()),s=[];function l(p,g){s.push({value:p,color:r(p,g)})}for(var u=0,c=0,f=o.length,h=n.length;c<h&&(!o.length||n[c]<=o[0]);c++)n[c]<o[u]&&l(n[c],"outOfRange");for(var v=1;u<f;u++,v=0)v&&s.length&&l(o[u],"outOfRange"),l(o[u],"inRange");for(var v=1;c<h;c++)(!o.length||o[o.length-1]<n[c])&&(v&&(s.length&&l(s[s.length-1].value,"outOfRange"),v=0),l(n[c],"outOfRange"));var d=s.length;return{stops:s,outerColors:[d?s[0].color:"transparent",d?s[d-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:tokens.color.neutral00,borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:tokens.color.neutral00,borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:tokens.color.shadow}}),t}(VisualMapModel);function getColorStopValues(a,t,r){if(r[0]===r[1])return r.slice();for(var n=200,o=(r[1]-r[0])/n,s=r[0],l=[],u=0;u<=n&&s<r[1];u++)l.push(s),s+=o;return l.push(r[1]),l}var VisualMapView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,n){this.ecModel=r,this.api=n},t.prototype.render=function(r,n,o,s){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,n,o,s)},t.prototype.renderBackground=function(r){var n=this.visualMapModel,o=normalizeCssArray(n.get("padding")||0),s=r.getBoundingRect();r.add(new Rect$2({z2:-1,silent:!0,shape:{x:s.x-o[3],y:s.y-o[0],width:s.width+o[3]+o[1],height:s.height+o[0]+o[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,n,o){o=o||{};var s=o.forceState,l=this.visualMapModel,u={};if(n==="color"){var c=l.get("contentColor");u.color=c}function f(p){return u[p]}function h(p,g){u[p]=g}var v=l.controllerVisuals[s||l.getValueState(r)],d=VisualMapping.prepareVisualTypes(v);return each$f(d,function(p){var g=v[p];o.convertOpacityToAlpha&&p==="opacity"&&(p="colorAlpha",g=v.__alphaForOpacity),VisualMapping.dependsOn(p,n)&&g&&g.applyVisual(r,f,h)}),u[n]},t.prototype.positionGroup=function(r){var n=this.visualMapModel,o=this.api,s=createBoxLayoutReference(n,o).refContainer;positionElement(r,n.getBoxLayoutParams(),s)},t.prototype.doRender=function(r,n,o,s){},t.type="visualMap",t}(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(a,t,r){var n=a.option,o=n.align;if(o!=null&&o!=="auto")return o;for(var s={width:t.getWidth(),height:t.getHeight()},l=n.orient==="horizontal"?1:0,u=paramsSet[l],c=[0,null,10],f={},h=0;h<3;h++)f[paramsSet[1-l][h]]=c[h],f[u[h]]=h===2?r[0]:n[u[h]];var v=[["x","width",3],["y","height",0]][l],d=getLayoutRect(f,s,n.padding);return u[(d.margin[v[2]]||0)+d[v[0]]+d[v[1]]*.5<s[v[1]]*.5?0:1]}function makeHighDownBatch(a,t){return each$f(a||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),a}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.init=function(r,n){a.prototype.init.call(this,r,n),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},t.prototype.doRender=function(r,n,o,s){(!s||s.type!=="selectDataRange"||s.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,n=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(n);var o=r.get("text");this._renderEndsText(n,o,0),this._renderEndsText(n,o,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},t.prototype._renderEndsText=function(r,n,o){if(n){var s=n[1-o];s=s!=null?s+"":"";var l=this.visualMapModel,u=l.get("textGap"),c=l.itemSize,f=this._shapes.mainGroup,h=this._applyTransform([c[0]/2,o===0?-u:c[1]+u],f),v=this._applyTransform(o===0?"bottom":"top",f),d=this._orient,p=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle(p,{x:h[0],y:h[1],verticalAlign:p.get("verticalAlign")||(d==="horizontal"?"middle":v),align:p.get("align")||(d==="horizontal"?v:"center"),text:s})}))}},t.prototype._renderBar=function(r){var n=this.visualMapModel,o=this._shapes,s=n.itemSize,l=this._orient,u=this._useHandle,c=getItemAlign(n,this.api,s),f=o.mainGroup=this._createBarGroup(c),h=new Group$3;f.add(h),h.add(o.outOfRange=createPolygon()),h.add(o.inRange=createPolygon(null,u?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),h.setClipPath(new Rect$2({shape:{x:0,y:0,width:s[0],height:s[1],r:3}}));var v=n.textStyleModel.getTextRect("å›½"),d=mathMax(v.width,v.height);u&&(o.handleThumbs=[],o.handleLabels=[],o.handleLabelPoints=[],this._createHandle(n,f,0,s,d,l),this._createHandle(n,f,1,s,d,l)),this._createIndicator(n,f,s,d,l),r.add(f)},t.prototype._createHandle=function(r,n,o,s,l,u){var c=bind$1(this._dragHandle,this,o,!1),f=bind$1(this._dragHandle,this,o,!0),h=parsePercent$1(r.get("handleSize"),s[0]),v=createSymbol$1(r.get("handleIcon"),-h/2,-h/2,h,h,null,!0),d=getCursor(this._orient);v.attr({cursor:d,draggable:!0,drift:c,ondragend:f,onmousemove:function(S){stop(S.event)}}),v.x=s[0]/2,v.useStyle(r.getModel("handleStyle").getItemStyle()),v.setStyle({strokeNoScale:!0,strokeFirst:!0}),v.style.lineWidth*=2,v.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(v,!0),n.add(v);var p=this.visualMapModel.textStyleModel,g=new ZRText({cursor:d,draggable:!0,drift:c,onmousemove:function(S){stop(S.event)},ondragend:f,style:createTextStyle(p,{x:0,y:0,text:""})});g.ensureState("blur").style={opacity:.1},g.stateTransition={duration:200},this.group.add(g);var y=[h,0],_=this._shapes;_.handleThumbs[o]=v,_.handleLabelPoints[o]=y,_.handleLabels[o]=g},t.prototype._createIndicator=function(r,n,o,s,l){var u=parsePercent$1(r.get("indicatorSize"),o[0]),c=createSymbol$1(r.get("indicatorIcon"),-u/2,-u/2,u,u,null,!0);c.attr({cursor:"move",invisible:!0,silent:!0,x:o[0]/2});var f=r.getModel("indicatorStyle").getItemStyle();if(c instanceof ZRImage){var h=c.style;c.useStyle(extend({image:h.image,x:h.x,y:h.y,width:h.width,height:h.height},f))}else c.useStyle(f);n.add(c);var v=this.visualMapModel.textStyleModel,d=new ZRText({silent:!0,invisible:!0,style:createTextStyle(v,{x:0,y:0,text:""})});this.group.add(d);var p=[(l==="horizontal"?s/2:HOVER_LINK_OUT)+o[0]/2,0],g=this._shapes;g.indicator=c,g.indicatorLabel=d,g.indicatorLabelPoint=p,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,n,o,s){if(this._useHandle){if(this._dragging=!n,!n){var l=this._applyTransform([o,s],this._shapes.mainGroup,!0);this._updateInterval(r,l[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,n=this._dataInterval=r.getSelected(),o=r.getExtent(),s=[0,r.itemSize[1]];this._handleEnds=[linearMap(n[0],o,s,!0),linearMap(n[1],o,s,!0)]},t.prototype._updateInterval=function(r,n){n=n||0;var o=this.visualMapModel,s=this._handleEnds,l=[0,o.itemSize[1]];sliderMove(n,s,l,r,0);var u=o.getExtent();this._dataInterval=[linearMap(s[0],l,u,!0),linearMap(s[1],l,u,!0)]},t.prototype._updateView=function(r){var n=this.visualMapModel,o=n.getExtent(),s=this._shapes,l=[0,n.itemSize[1]],u=r?l:this._handleEnds,c=this._createBarVisual(this._dataInterval,o,u,"inRange"),f=this._createBarVisual(o,o,l,"outOfRange");s.inRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),s.outOfRange.setStyle({fill:f.barColor}).setShape("points",f.barPoints),this._updateHandle(u,c)},t.prototype._createBarVisual=function(r,n,o,s){var l={forceState:s,convertOpacityToAlpha:!0},u=this._makeColorGradient(r,l),c=[this.getControllerVisual(r[0],"symbolSize",l),this.getControllerVisual(r[1],"symbolSize",l)],f=this._createBarPoints(o,c);return{barColor:new LinearGradient(0,0,0,1,u),barPoints:f,handlesColor:[u[0].color,u[u.length-1].color]}},t.prototype._makeColorGradient=function(r,n){var o=100,s=[],l=(r[1]-r[0])/o;s.push({color:this.getControllerVisual(r[0],"color",n),offset:0});for(var u=1;u<o;u++){var c=r[0]+l*u;if(c>r[1])break;s.push({color:this.getControllerVisual(c,"color",n),offset:u/o})}return s.push({color:this.getControllerVisual(r[1],"color",n),offset:1}),s},t.prototype._createBarPoints=function(r,n){var o=this.visualMapModel.itemSize;return[[o[0]-n[0],r[0]],[o[0],r[0]],[o[0],r[1]],[o[0]-n[1],r[1]]]},t.prototype._createBarGroup=function(r){var n=this._orient,o=this.visualMapModel.get("inverse");return new Group$3(n==="horizontal"&&!o?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&o?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!o?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,n){if(this._useHandle){var o=this._shapes,s=this.visualMapModel,l=o.handleThumbs,u=o.handleLabels,c=s.itemSize,f=s.getExtent(),h=this._applyTransform("left",o.mainGroup);each$1([0,1],function(v){var d=l[v];d.setStyle("fill",n.handlesColor[v]),d.y=r[v];var p=linearMap(r[v],[0,c[1]],f,!0),g=this.getControllerVisual(p,"symbolSize");d.scaleX=d.scaleY=g/c[0],d.x=c[0]-g/2;var y=applyTransform(o.handleLabelPoints[v],getTransform$1(d,this.group));if(this._orient==="horizontal"){var _=h==="left"||h==="top"?(c[0]-g)/2:(c[0]-g)/-2;y[1]+=_}u[v].setStyle({x:y[0],y:y[1],text:s.formatValueText(this._dataInterval[v]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",o.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,n,o,s){var l=this.visualMapModel,u=l.getExtent(),c=l.itemSize,f=[0,c[1]],h=this._shapes,v=h.indicator;if(v){v.attr("invisible",!1);var d={convertOpacityToAlpha:!0},p=this.getControllerVisual(r,"color",d),g=this.getControllerVisual(r,"symbolSize"),y=linearMap(r,u,f,!0),_=c[0]-g/2,S={x:v.x,y:v.y};v.y=y,v.x=_;var x=applyTransform(h.indicatorLabelPoint,getTransform$1(v,this.group)),T=h.indicatorLabel;T.attr("invisible",!1);var b=this._applyTransform("left",h.mainGroup),C=this._orient,w=C==="horizontal";T.setStyle({text:(o||"")+l.formatValueText(n),verticalAlign:w?b:"middle",align:w?"center":b});var M={x:_,y,style:{fill:p}},P={style:{x:x[0],y:x[1]}};if(l.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var L={duration:100,easing:"cubicInOut",additive:!0};v.x=S.x,v.y=S.y,v.animateTo(M,L),T.animateTo(P,L)}else v.attr(M),T.attr(P);this._firstShowIndicator=!1;var E=this._shapes.handleLabels;if(E)for(var I=0;I<E.length;I++)this.api.enterBlur(E[I])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(n){if(r._hovering=!0,!r._dragging){var o=r.visualMapModel.itemSize,s=r._applyTransform([n.offsetX,n.offsetY],r._shapes.mainGroup,!0,!0);s[1]=mathMin(mathMax(0,s[1]),o[1]),r._doHoverLinkToSeries(s[1],0<=s[0]&&s[0]<=o[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,n){var o=this.visualMapModel,s=o.itemSize;if(o.option.hoverLink){var l=[0,s[1]],u=o.getExtent();r=mathMin(mathMax(l[0],r),l[1]);var c=getHalfHoverLinkSize(o,u,l),f=[r-c,r+c],h=linearMap(r,l,u,!0),v=[linearMap(f[0],l,u,!0),linearMap(f[1],l,u,!0)];f[0]<l[0]&&(v[0]=-1/0),f[1]>l[1]&&(v[1]=1/0),n&&(v[0]===-1/0?this._showIndicator(h,v[1],"< ",c):v[1]===1/0?this._showIndicator(h,v[0],"> ",c):this._showIndicator(h,h,"â‰ˆ ",c));var d=this._hoverLinkDataIndices,p=[];(n||useHoverLinkOnHandle(o))&&(p=this._hoverLinkDataIndices=o.findTargetDataIndices(v));var g=compressBatches(d,p);this._dispatchHighDown("downplay",makeHighDownBatch(g[0],o)),this._dispatchHighDown("highlight",makeHighDownBatch(g[1],o))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var n;if(findEventDispatcher(r.target,function(c){var f=getECData(c);if(f.dataIndex!=null)return n=f,!0},!0),!!n){var o=this.ecModel.getSeriesByIndex(n.seriesIndex),s=this.visualMapModel;if(s.isTargetSeries(o)){var l=o.getData(n.dataType),u=l.getStore().get(s.getDataDimensionIndex(l),n.dataIndex);isNaN(u)||this._showIndicator(u,u)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var o=0;o<n.length;o++)this.api.leaveBlur(n[o])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,n,o,s){var l=getTransform$1(n,s?null:this.group);return isArray$1(r)?applyTransform(r,l,o):transformDirection(r,l,o)},t.prototype._dispatchHighDown=function(r,n){n&&n.length&&this.api.dispatchAction({type:r,batch:n})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(VisualMapView);function createPolygon(a,t,r,n){return new Polygon({shape:{points:a},draggable:!!r,cursor:t,drift:r,onmousemove:function(o){stop(o.event)},ondragend:n})}function getHalfHoverLinkSize(a,t,r){var n=HOVER_LINK_SIZE/2,o=a.get("hoverLinkDataSize");return o&&(n=linearMap(o,t,r,!0)/2),n}function useHoverLinkOnHandle(a){var t=a.get("hoverLinkOnHandle");return!!(t??a.get("realtime"))}function getCursor(a){return a==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(a,t){t.eachComponent({mainType:"visualMap",query:a},function(r){r.setSelected(a.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(a,t){var r=[];return t.eachComponent("visualMap",function(n){var o=a.pipelineContext;!n.isTargetSeries(a)||o&&o.large||r.push(incrementalApplyVisual(n.stateList,n.targetVisuals,bind$1(n.getValueState,n),n.getDataDimensionIndex(a.getData())))}),r}},{createOnAllSeries:!0,reset:function(a,t){var r=a.getData(),n=[];t.eachComponent("visualMap",function(o){if(o.isTargetSeries(a)){var s=o.getVisualMeta(bind$1(getColorVisual,null,a,o))||{stops:[],outerColors:[]},l=o.getDataDimensionIndex(r);l>=0&&(s.dimension=l,n.push(s))}}),a.getData().setVisual("visualMeta",n)}}];function getColorVisual(a,t,r,n){for(var o=t.targetVisuals[n],s=VisualMapping.prepareVisualTypes(o),l={color:getVisualFromData(a.getData(),"color")},u=0,c=s.length;u<c;u++){var f=s[u],h=o[f==="opacity"?"__alphaForOpacity":f];h&&h.applyVisual(r,v,d)}return l.color;function v(p){return l[p]}function d(p,g){l[p]=g}}var each=each$f;function visualMapPreprocessor(a){var t=a&&a.visualMap;isArray$1(t)||(t=t?[t]:[]),each(t,function(r){if(r){has(r,"splitList")&&!has(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var n=r.pieces;n&&isArray$1(n)&&each(n,function(o){isObject$3(o)&&(has(o,"start")&&!has(o,"min")&&(o.min=o.start),has(o,"end")&&!has(o,"max")&&(o.max=o.end))})}})}function has(a,t){return a&&a.hasOwnProperty&&a.hasOwnProperty(t)}var installed=!1;function installCommon(a){installed||(installed=!0,a.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),a.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(t){a.registerVisual(a.PRIORITY.VISUAL.COMPONENT,t)}),a.registerPreprocessor(visualMapPreprocessor))}function install$6(a){a.registerComponentModel(ContinuousModel),a.registerComponentView(ContinuousView),installCommon(a)}var PiecewiseModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,n){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var o=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(r,n);var s=this.option.categories;this.resetVisual(function(l,u){o==="categories"?(l.mappingMethod="category",l.categories=clone$4(s)):(l.dataExtent=this.getExtent(),l.mappingMethod="piecewise",l.pieceList=map$1(this._pieceList,function(c){return c=clone$4(c),u!=="inRange"&&(c.visual=null),c}))})},t.prototype.completeVisualOption=function(){var r=this.option,n={},o=VisualMapping.listVisualTypes(),s=this.isCategory();each$f(r.pieces,function(u){each$f(o,function(c){u.hasOwnProperty(c)&&(n[c]=1)})}),each$f(n,function(u,c){var f=!1;each$f(this.stateList,function(h){f=f||l(r,h,c)||l(r.target,h,c)},this),!f&&each$f(this.stateList,function(h){(r[h]||(r[h]={}))[c]=visualDefault.get(c,h==="inRange"?"active":"inactive",s)})},this);function l(u,c,f){return u&&u[c]&&u[c].hasOwnProperty(f)}a.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,n){var o=this.option,s=this._pieceList,l=(n?o:r).selected||{};if(o.selected=l,each$f(s,function(c,f){var h=this.getSelectedMapKey(c);l.hasOwnProperty(h)||(l[h]=!0)},this),o.selectedMode==="single"){var u=!1;each$f(s,function(c,f){var h=this.getSelectedMapKey(c);l[h]&&(u?l[h]=!1:u=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=clone$4(r)},t.prototype.getValueState=function(r){var n=VisualMapping.findPieceIndex(r,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[],o=this._pieceList;return this.eachTargetSeries(function(s){var l=[],u=s.getData();u.each(this.getDataDimensionIndex(u),function(c,f){var h=VisualMapping.findPieceIndex(c,o);h===r&&l.push(f)},this),n.push({seriesId:s.id,dataIndex:l})},this),n},t.prototype.getRepresentValue=function(r){var n;if(this.isCategory())n=r.value;else if(r.value!=null)n=r.value;else{var o=r.interval||[];n=o[0]===-1/0&&o[1]===1/0?0:(o[0]+o[1])/2}return n},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var n=[],o=["",""],s=this;function l(h,v){var d=s.getRepresentValue({interval:h});v||(v=s.getValueState(d));var p=r(d,v);h[0]===-1/0?o[0]=p:h[1]===1/0?o[1]=p:n.push({value:h[0],color:p},{value:h[1],color:p})}var u=this._pieceList.slice();if(!u.length)u.push({interval:[-1/0,1/0]});else{var c=u[0].interval[0];c!==-1/0&&u.unshift({interval:[-1/0,c]}),c=u[u.length-1].interval[1],c!==1/0&&u.push({interval:[c,1/0]})}var f=-1/0;return each$f(u,function(h){var v=h.interval;v&&(v[0]>f&&l([f,v[0]],"outOfRange"),l(v.slice()),f=v[1])},this),{stops:n,outerColors:o}},t.type="visualMap.piecewise",t.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(VisualMapModel),resetMethods={splitNumber:function(a){var t=this.option,r=Math.min(t.precision,20),n=this.getExtent(),o=t.splitNumber;o=Math.max(parseInt(o,10),1),t.splitNumber=o;for(var s=(n[1]-n[0])/o;+s.toFixed(r)!==s&&r<5;)r++;t.precision=r,s=+s.toFixed(r),t.minOpen&&a.push({interval:[-1/0,n[0]],close:[0,0]});for(var l=0,u=n[0];l<o;u+=s,l++){var c=l===o-1?n[1]:u+s;a.push({interval:[u,c],close:[1,1]})}t.maxOpen&&a.push({interval:[n[1],1/0],close:[0,0]}),reformIntervals(a),each$f(a,function(f,h){f.index=h,f.text=this.formatValueText(f.interval)},this)},categories:function(a){var t=this.option;each$f(t.categories,function(r){a.push({text:this.formatValueText(r,!0),value:r})},this),normalizeReverse(t,a)},pieces:function(a){var t=this.option;each$f(t.pieces,function(r,n){isObject$3(r)||(r={value:r});var o={text:"",index:n};if(r.label!=null&&(o.text=r.label),r.hasOwnProperty("value")){var s=o.value=r.value;o.interval=[s,s],o.close=[1,1]}else{for(var l=o.interval=[],u=o.close=[0,0],c=[1,0,1],f=[-1/0,1/0],h=[],v=0;v<2;v++){for(var d=[["gte","gt","min"],["lte","lt","max"]][v],p=0;p<3&&l[v]==null;p++)l[v]=r[d[p]],u[v]=c[p],h[v]=p===2;l[v]==null&&(l[v]=f[v])}h[0]&&l[1]===1/0&&(u[0]=0),h[1]&&l[0]===-1/0&&(u[1]=0),l[0]===l[1]&&u[0]&&u[1]&&(o.value=l[0])}o.visual=VisualMapping.retrieveVisuals(r),a.push(o)},this),normalizeReverse(t,a),reformIntervals(a),each$f(a,function(r){var n=r.close,o=[["<","â‰¤"][n[1]],[">","â‰¥"][n[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,o)},this)}};function normalizeReverse(a,t){var r=a.inverse;(a.orient==="vertical"?!r:r)&&t.reverse()}var PiecewiseVisualMapView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var n=this.visualMapModel,o=n.get("textGap"),s=n.textStyleModel,l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),f=c.endsText,h=retrieve(n.get("showLabel",!0),!f),v=!n.get("selectedMode");f&&this._renderEndsText(r,f[0],u,h,l),each$f(c.viewPieceList,function(d){var p=d.piece,g=new Group$3;g.onclick=bind$1(this._onItemClick,this,p),this._enableHoverLink(g,d.indexInModelPieceList);var y=n.getRepresentValue(p);if(this._createItemSymbol(g,y,[0,0,u[0],u[1]],v),h){var _=this.visualMapModel.getValueState(y),S=s.get("align")||l;g.add(new ZRText({style:createTextStyle(s,{x:S==="right"?-o:u[0]+o,y:u[1]/2,text:p.text,verticalAlign:s.get("verticalAlign")||"middle",align:S,opacity:retrieve2(s.get("opacity"),_==="outOfRange"?.5:1)}),silent:v}))}r.add(g)},this),f&&this._renderEndsText(r,f[1],u,h,l),box(n.get("orient"),r,n.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,n){var o=this;r.on("mouseover",function(){return s("highlight")}).on("mouseout",function(){return s("downplay")});var s=function(l){var u=o.visualMapModel;u.option.hoverLink&&o.api.dispatchAction({type:l,batch:makeHighDownBatch(u.findTargetDataIndices(n),u)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,n=r.option;if(n.orient==="vertical")return getItemAlign(r,this.api,r.itemSize);var o=n.align;return(!o||o==="auto")&&(o="left"),o},t.prototype._renderEndsText=function(r,n,o,s,l){if(n){var u=new Group$3,c=this.visualMapModel.textStyleModel;u.add(new ZRText({style:createTextStyle(c,{x:s?l==="right"?o[0]:0:o[0]/2,y:o[1]/2,verticalAlign:"middle",align:s?l:"center",text:n})})),r.add(u)}},t.prototype._getViewData=function(){var r=this.visualMapModel,n=map$1(r.getPieceList(),function(u,c){return{piece:u,indexInModelPieceList:c}}),o=r.get("text"),s=r.get("orient"),l=r.get("inverse");return(s==="horizontal"?l:!l)?n.reverse():o&&(o=o.slice().reverse()),{viewPieceList:n,endsText:o}},t.prototype._createItemSymbol=function(r,n,o,s){var l=createSymbol$1(this.getControllerVisual(n,"symbol"),o[0],o[1],o[2],o[3],this.getControllerVisual(n,"color"));l.silent=s,r.add(l)},t.prototype._onItemClick=function(r){var n=this.visualMapModel,o=n.option,s=o.selectedMode;if(s){var l=clone$4(o.selected),u=n.getSelectedMapKey(r);s==="single"||s===!0?(l[u]=!0,each$f(l,function(c,f){l[f]=f===u})):l[u]=!l[u],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:l})}},t.type="visualMap.piecewise",t}(VisualMapView);function install$5(a){a.registerComponentModel(PiecewiseModel),a.registerComponentView(PiecewiseVisualMapView),installCommon(a)}function install$4(a){use(install$6),use(install$5)}var ThumbnailBridgeImpl=function(){function a(t){this._thumbnailModel=t}return a.prototype.reset=function(t){this._renderVersion=t.getMainProcessVersion()},a.prototype.renderContent=function(t){var r=t.api.getViewOfComponentModel(this._thumbnailModel);r&&(t.group.silent=!0,r.renderContent({group:t.group,targetTrans:t.targetTrans,z2Range:calcZ2Range(t.group),roamType:t.roamType,viewportRect:t.viewportRect,renderVersion:this._renderVersion}))},a.prototype.updateWindow=function(t,r){var n=r.getViewOfComponentModel(this._thumbnailModel);n&&n.updateWindow({targetTrans:t,renderVersion:this._renderVersion})},a}(),ThumbnailModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r.preventAutoZ=!0,r}return t.prototype.optionUpdated=function(r,n){this._updateBridge()},t.prototype._updateBridge=function(){var r=this._birdge=this._birdge||new ThumbnailBridgeImpl(this);if(this._target=null,this.ecModel.eachSeries(function(o){injectThumbnailBridge(o,null)}),this.shouldShow()){var n=this.getTarget();injectThumbnailBridge(n.baseMapProvider,r)}},t.prototype.shouldShow=function(){return this.getShallow("show",!0)},t.prototype.getBridge=function(){return this._birdge},t.prototype.getTarget=function(){if(this._target)return this._target;var r=this.getReferringComponents("series",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];return r?r.subType!=="graph"&&(r=null):r=this.ecModel.queryComponents({mainType:"series",subType:"graph"})[0],this._target={baseMapProvider:r},this._target},t.type="thumbnail",t.layoutMode="box",t.dependencies=["series","geo"],t.defaultOption={show:!0,right:1,bottom:1,height:"25%",width:"25%",itemStyle:{borderColor:tokens.color.border,borderWidth:2},windowStyle:{borderWidth:1,color:tokens.color.neutral30,borderColor:tokens.color.neutral40,opacity:.3},z:10},t}(ComponentModel),ThumbnailView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,o){if(this._api=o,this._model=r,this._coordSys||(this._coordSys=new View),!this._isEnabled()){this._clear();return}this._renderVersion=o.getMainProcessVersion();var s=this.group;s.removeAll();var l=r.getModel("itemStyle"),u=l.getItemStyle();u.fill==null&&(u.fill=n.get("backgroundColor")||tokens.color.neutral00);var c=createBoxLayoutReference(r,o).refContainer,f=getLayoutRect(getBoxLayoutParams(r,!0),c),h=u.lineWidth||0,v=this._contentRect=expandOrShrinkRect(f.clone(),h/2,!0,!0),d=new Group$3;s.add(d),d.setClipPath(new Rect$2({shape:v.plain()}));var p=this._targetGroup=new Group$3;d.add(p);var g=f.plain();g.r=l.getShallow("borderRadius",!0),s.add(this._bgRect=new Rect$2({style:u,shape:g,silent:!1,cursor:"grab"}));var y=r.getModel("windowStyle"),_=y.getShallow("borderRadius",!0);d.add(this._windowRect=new Rect$2({shape:{x:0,y:0,width:0,height:0,r:_},style:y.getItemStyle(),silent:!1,cursor:"grab"})),this._dealRenderContent(),this._dealUpdateWindow(),updateZ(r,this)},t.prototype.renderContent=function(r){this._bridgeRendered=r,this._isEnabled()&&(this._dealRenderContent(),this._dealUpdateWindow(),updateZ(this._model,this))},t.prototype._dealRenderContent=function(){var r=this._bridgeRendered;if(!(!r||r.renderVersion!==this._renderVersion)){var n=this._targetGroup,o=this._coordSys,s=this._contentRect;if(n.removeAll(),!!r){var l=r.group,u=l.getBoundingRect();n.add(l),this._bgRect.z2=r.z2Range.min-10,o.setBoundingRect(u.x,u.y,u.width,u.height);var c=getLayoutRect({left:"center",top:"center",aspect:u.width/u.height},s);o.setViewRect(c.x,c.y,c.width,c.height),l.attr(o.getTransformInfo().raw),this._windowRect.z2=r.z2Range.max+10,this._resetRoamController(r.roamType)}}},t.prototype.updateWindow=function(r){var n=this._bridgeRendered;n&&n.renderVersion===r.renderVersion&&(n.targetTrans=r.targetTrans),this._isEnabled()&&this._dealUpdateWindow()},t.prototype._dealUpdateWindow=function(){var r=this._bridgeRendered;if(!(!r||r.renderVersion!==this._renderVersion)){var n=invert([],r.targetTrans),o=mul([],this._coordSys.transform,n);this._transThisToTarget=invert([],o);var s=r.viewportRect;s?s=s.clone():s=new BoundingRect(0,0,this._api.getWidth(),this._api.getHeight()),s.applyTransform(o);var l=this._windowRect,u=l.shape.r;l.setShape(defaults({r:u},s))}},t.prototype._resetRoamController=function(r){var n=this,o=this._api,s=this._roamController;if(s||(s=this._roamController=new RoamController(o.getZr())),!r||!this._isEnabled()){s.disable();return}s.enable(r,{api:o,zInfo:{component:this._model},triggerInfo:{roamTrigger:null,isInSelf:function(l,u,c){return n._contentRect.contain(u,c)}}}),s.off("pan").off("zoom").on("pan",bind$1(this._onPan,this)).on("zoom",bind$1(this._onZoom,this))},t.prototype._onPan=function(r){var n=this._transThisToTarget;if(!(!this._isEnabled()||!n)){var o=applyTransform$1([],[r.oldX,r.oldY],n),s=applyTransform$1([],[r.oldX-r.dx,r.oldY-r.dy],n);this._api.dispatchAction(makeRoamPayload(this._model.getTarget().baseMapProvider,{dx:s[0]-o[0],dy:s[1]-o[1]}))}},t.prototype._onZoom=function(r){var n=this._transThisToTarget;if(!(!this._isEnabled()||!n)){var o=applyTransform$1([],[r.originX,r.originY],n);this._api.dispatchAction(makeRoamPayload(this._model.getTarget().baseMapProvider,{zoom:1/r.scale,originX:o[0],originY:o[1]}))}},t.prototype._isEnabled=function(){var r=this._model;if(!r||!r.shouldShow())return!1;var n=r.getTarget().baseMapProvider;return!!n},t.prototype._clear=function(){this.group.removeAll(),this._bridgeRendered=null,this._roamController&&this._roamController.disable()},t.prototype.remove=function(){this._clear()},t.prototype.dispose=function(){this._clear()},t.type="thumbnail",t}(ComponentView);function makeRoamPayload(a,t){var r=a.mainType==="series"?a.subType+"Roam":a.mainType+"Roam",n={type:r};return n[a.mainType+"Id"]=a.id,extend(n,t),n}function updateZ(a,t){var r=retrieveZInfo(a);traverseUpdateZ(t.group,r.z,r.zlevel)}function install$3(a){a.registerComponentModel(ThumbnailModel),a.registerComponentView(ThumbnailView)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(a,t){var r=a.getModel("aria");if(!r.get("enabled"))return;var n=clone$4(DEFAULT_OPTION);merge(n.label,a.getLocaleModel().get("aria"),!1),merge(r.option,n,!1),o(),s();function o(){var f=r.getModel("decal"),h=f.get("show");if(h){var v=createHashMap();a.eachSeries(function(d){if(!d.isColorBySeries()){var p=v.get(d.type);p||(p={},v.set(d.type,p)),inner(d).scope=p}}),a.eachRawSeries(function(d){if(a.isSeriesFiltered(d))return;if(isFunction(d.enableAriaDecal)){d.enableAriaDecal();return}var p=d.getData();if(d.isColorBySeries()){var x=getDecalFromPalette(d.ecModel,d.name,decalPaletteScope,a.getSeriesCount()),T=p.getVisual("decal");p.setVisual("decal",b(T,x))}else{var g=d.getRawData(),y={},_=inner(d).scope;p.each(function(C){var w=p.getRawIndex(C);y[w]=C});var S=g.count();g.each(function(C){var w=y[C],M=g.getName(C)||C+"",P=getDecalFromPalette(d.ecModel,M,_,S),L=p.getItemVisual(w,"decal");p.setItemVisual(w,"decal",b(L,P))})}function b(C,w){var M=C?extend(extend({},w),C):w;return M.dirty=!0,M}})}}function s(){var f=t.getZr().dom;if(f){var h=a.getLocaleModel().get("aria"),v=r.getModel("label");if(v.option=defaults(v.option,h),!!v.get("enabled")){if(f.setAttribute("role","img"),v.get("description")){f.setAttribute("aria-label",v.get("description"));return}var d=a.getSeriesCount(),p=v.get(["data","maxCount"])||10,g=v.get(["series","maxCount"])||10,y=Math.min(d,g),_;if(!(d<1)){var S=u();if(S){var x=v.get(["general","withTitle"]);_=l(x,{title:S})}else _=v.get(["general","withoutTitle"]);var T=[],b=d>1?v.get(["series","multiple","prefix"]):v.get(["series","single","prefix"]);_+=l(b,{seriesCount:d}),a.eachSeries(function(P,L){if(L<y){var E=void 0,I=P.get("name"),R=I?"withName":"withoutName";E=d>1?v.get(["series","multiple",R]):v.get(["series","single",R]),E=l(E,{seriesId:P.seriesIndex,seriesName:P.get("name"),seriesType:c(P.subType)});var D=P.getData();if(D.count()>p){var O=v.get(["data","partialData"]);E+=l(O,{displayCnt:p})}else E+=v.get(["data","allData"]);for(var $=v.get(["data","separator","middle"]),N=v.get(["data","separator","end"]),V=v.get(["data","excludeDimensionId"]),B=[],F=0;F<D.count();F++)if(F<p){var G=D.getName(F),z=V?filter(D.getValues(F),function(U,Y){return indexOf(V,Y)===-1}):D.getValues(F),H=v.get(["data",G?"withName":"withoutName"]);B.push(l(H,{name:G,value:z.join($)}))}E+=B.join($)+N,T.push(E)}});var C=v.getModel(["series","multiple","separator"]),w=C.get("middle"),M=C.get("end");_+=T.join(w)+M,f.setAttribute("aria-label",_)}}}}function l(f,h){if(!isString(f))return f;var v=f;return each$f(h,function(d,p){v=v.replace(new RegExp("\\{\\s*"+p+"\\s*\\}","g"),d)}),v}function u(){var f=a.get("title");return f&&f.length&&(f=f[0]),f&&f.text}function c(f){var h=a.getLocaleModel().get(["series","typeNames"]);return h[f]||h.chart}}function ariaPreprocessor(a){if(!(!a||!a.aria)){var t=a.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},each$f(["description","general","series","data"],function(r){t[r]!=null&&(t.label[r]=t[r])})}}function install$2(a){a.registerPreprocessor(ariaPreprocessor),a.registerVisual(a.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function a(t){var r=this._condVal=isString(t)?new RegExp(t):isRegExp(t)?t:null;if(r==null){var n="";throwError(n)}}return a.prototype.evaluate=function(t){var r=typeof t;return isString(r)?this._condVal.test(t):isNumber(r)?this._condVal.test(t+""):!1},a}(),ConstConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){return this.value},a}(),AndConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},a}(),OrConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},a}(),NotConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){return!this.child.evaluate()},a}(),RelationalConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,n=r(this.valueGetterParam),o=t?this.valueParser(n):null,s=0;s<this.subCondList.length;s++)if(!this.subCondList[s].evaluate(t?o:n))return!1;return!0},a}();function parseOption(a,t){if(a===!0||a===!1){var r=new ConstConditionInternal;return r.value=a,r}var n="";return isObjectNotArray(a)||throwError(n),a.and?parseAndOrOption("and",a,t):a.or?parseAndOrOption("or",a,t):a.not?parseNotOption(a,t):parseRelationalOption(a,t)}function parseAndOrOption(a,t,r){var n=t[a],o="";isArray$1(n)||throwError(o),n.length||throwError(o);var s=a==="and"?new AndConditionInternal:new OrConditionInternal;return s.children=map$1(n,function(l){return parseOption(l,r)}),s.children.length||throwError(o),s}function parseNotOption(a,t){var r=a.not,n="";isObjectNotArray(r)||throwError(n);var o=new NotConditionInternal;return o.child=parseOption(r,t),o.child||throwError(n),o}function parseRelationalOption(a,t){for(var r="",n=t.prepareGetValue(a),o=[],s=keys(a),l=a.parser,u=l?getRawValueParser(l):null,c=0;c<s.length;c++){var f=s[c];if(!(f==="parser"||t.valueGetterAttrMap.get(f))){var h=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,f)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[f]:f,v=a[f],d=u?u(v):v,p=createFilterComparator(h,d)||h==="reg"&&new RegExpEvaluator(d);p||throwError(r),o.push(p)}}o.length||throwError(r);var g=new RelationalConditionInternal;return g.valueGetterParam=n,g.valueParser=u,g.getValue=t.getValue,g.subCondList=o,g}function isObjectNotArray(a){return isObject$3(a)&&!isArrayLike(a)}var ConditionalExpressionParsed=function(){function a(t,r){this._cond=parseOption(t,r)}return a.prototype.evaluate=function(){return this._cond.evaluate()},a}();function parseConditionalExpression(a,t){return new ConditionalExpressionParsed(a,t)}var filterTransform={type:"echarts:filter",transform:function(a){for(var t=a.upstream,r,n=parseConditionalExpression(a.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(u){var c="",f=u.dimension;hasOwn(u,"dimension")||throwError(c);var h=t.getDimensionInfo(f);return h||throwError(c),{dimIdx:h.index}},getValue:function(u){return t.retrieveValueFromItem(r,u.dimIdx)}}),o=[],s=0,l=t.count();s<l;s++)r=t.getRawDataItem(s),n.evaluate()&&o.push(r);return{data:o}}},sortTransform={type:"echarts:sort",transform:function(a){var t=a.upstream,r=a.config,n="",o=normalizeToArray(r);o.length||throwError(n);var s=[];each$f(o,function(h){var v=h.dimension,d=h.order,p=h.parser,g=h.incomparable;if(v==null&&throwError(n),d!=="asc"&&d!=="desc"&&throwError(n),g&&g!=="min"&&g!=="max"){var y="";throwError(y)}if(d!=="asc"&&d!=="desc"){var _="";throwError(_)}var S=t.getDimensionInfo(v);S||throwError(n);var x=p?getRawValueParser(p):null;p&&!x&&throwError(n),s.push({dimIdx:S.index,parser:x,comparator:new SortOrderComparator(d,g)})});var l=t.sourceFormat;l!==SOURCE_FORMAT_ARRAY_ROWS&&l!==SOURCE_FORMAT_OBJECT_ROWS&&throwError(n);for(var u=[],c=0,f=t.count();c<f;c++)u.push(t.getRawDataItem(c));return u.sort(function(h,v){for(var d=0;d<s.length;d++){var p=s[d],g=t.retrieveValueFromItem(h,p.dimIdx),y=t.retrieveValueFromItem(v,p.dimIdx);p.parser&&(g=p.parser(g),y=p.parser(y));var _=p.comparator.evaluate(g,y);if(_!==0)return _}return 0}),{data:u}}};function install$1(a){a.registerTransform(filterTransform),a.registerTransform(sortTransform)}var DatasetModel=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,n,o){a.prototype.init.call(this,r,n,o),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},t.prototype.mergeOption=function(r,n){a.prototype.mergeOption.call(this,r,n),disableTransformOptionMerge(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},t}(ComponentModel),DatasetView=function(a){__extends(t,a);function t(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(ComponentView);function install(a){a.registerComponentModel(DatasetModel),a.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(a,t){return Math.abs(a-t)<1e-5}function pathToBezierCurves(a){var t=a.data,r=a.len(),n=[],o,s=0,l=0,u=0,c=0;function f(D,O){o&&o.length>2&&n.push(o),o=[D,O]}function h(D,O,$,N){aroundEqual(D,$)&&aroundEqual(O,N)||o.push(D,O,$,N,$,N)}function v(D,O,$,N,V,B){var F=Math.abs(O-D),G=Math.tan(F/4)*4/3,z=O<D?-1:1,H=Math.cos(D),U=Math.sin(D),Y=Math.cos(O),Z=Math.sin(O),J=H*V+$,ee=U*B+N,K=Y*V+$,X=Z*B+N,q=V*G*z,W=B*G*z;o.push(J-q*U,ee+W*H,K+q*Z,X-W*Y,K,X)}for(var d,p,g,y,_=0;_<r;){var S=t[_++],x=_===1;switch(x&&(s=t[_],l=t[_+1],u=s,c=l,(S===CMD.L||S===CMD.C||S===CMD.Q)&&(o=[u,c])),S){case CMD.M:s=u=t[_++],l=c=t[_++],f(u,c);break;case CMD.L:d=t[_++],p=t[_++],h(s,l,d,p),s=d,l=p;break;case CMD.C:o.push(t[_++],t[_++],t[_++],t[_++],s=t[_++],l=t[_++]);break;case CMD.Q:d=t[_++],p=t[_++],g=t[_++],y=t[_++],o.push(s+2/3*(d-s),l+2/3*(p-l),g+2/3*(d-g),y+2/3*(p-y),g,y),s=g,l=y;break;case CMD.A:var T=t[_++],b=t[_++],C=t[_++],w=t[_++],M=t[_++],P=t[_++]+M;_+=1;var L=!t[_++];d=Math.cos(M)*C+T,p=Math.sin(M)*w+b,x?(u=d,c=p,f(u,c)):h(s,l,d,p),s=Math.cos(P)*C+T,l=Math.sin(P)*w+b;for(var E=(L?-1:1)*Math.PI/2,I=M;L?I>P:I<P;I+=E){var R=L?Math.max(I+E,P):Math.min(I+E,P);v(I,R,T,b,C,w)}break;case CMD.R:u=s=t[_++],c=l=t[_++],d=u+t[_++],p=c+t[_++],f(d,c),h(d,c,d,p),h(d,p,u,p),h(u,p,u,c),h(u,c,d,c);break;case CMD.Z:o&&h(s,l,u,c),s=u,l=c;break}}return o&&o.length>2&&n.push(o),n}function adpativeBezier(a,t,r,n,o,s,l,u,c,f){if(aroundEqual(a,r)&&aroundEqual(t,n)&&aroundEqual(o,l)&&aroundEqual(s,u)){c.push(l,u);return}var h=2/f,v=h*h,d=l-a,p=u-t,g=Math.sqrt(d*d+p*p);d/=g,p/=g;var y=r-a,_=n-t,S=o-l,x=s-u,T=y*y+_*_,b=S*S+x*x;if(T<v&&b<v){c.push(l,u);return}var C=d*y+p*_,w=-d*S-p*x,M=T-C*C,P=b-w*w;if(M<v&&C>=0&&P<v&&w>=0){c.push(l,u);return}var L=[],E=[];cubicSubdivide(a,r,o,l,.5,L),cubicSubdivide(t,n,s,u,.5,E),adpativeBezier(L[0],E[0],L[1],E[1],L[2],E[2],L[3],E[3],c,f),adpativeBezier(L[4],E[4],L[5],E[5],L[6],E[6],L[7],E[7],c,f)}function pathToPolygons(a,t){var r=pathToBezierCurves(a),n=[];t=t||1;for(var o=0;o<r.length;o++){var s=r[o],l=[],u=s[0],c=s[1];l.push(u,c);for(var f=2;f<s.length;){var h=s[f++],v=s[f++],d=s[f++],p=s[f++],g=s[f++],y=s[f++];adpativeBezier(u,c,h,v,d,p,g,y,l,t),u=g,c=y}n.push(l)}return n}function getDividingGrids(a,t,r){var n=a[t],o=a[1-t],s=Math.abs(n/o),l=Math.ceil(Math.sqrt(s*r)),u=Math.floor(r/l);u===0&&(u=1,l=r);for(var c=[],f=0;f<l;f++)c.push(u);var h=l*u,v=r-h;if(v>0)for(var f=0;f<v;f++)c[f%l]+=1;return c}function divideSector(a,t,r){for(var n=a.r0,o=a.r,s=a.startAngle,l=a.endAngle,u=Math.abs(l-s),c=u*o,f=o-n,h=c>Math.abs(f),v=getDividingGrids([c,f],h?0:1,t),d=(h?u:f)/v.length,p=0;p<v.length;p++)for(var g=(h?f:u)/v[p],y=0;y<v[p];y++){var _={};h?(_.startAngle=s+d*p,_.endAngle=s+d*(p+1),_.r0=n+g*y,_.r=n+g*(y+1)):(_.startAngle=s+g*y,_.endAngle=s+g*(y+1),_.r0=n+d*p,_.r=n+d*(p+1)),_.clockwise=a.clockwise,_.cx=a.cx,_.cy=a.cy,r.push(_)}}function divideRect(a,t,r){for(var n=a.width,o=a.height,s=n>o,l=getDividingGrids([n,o],s?0:1,t),u=s?"width":"height",c=s?"height":"width",f=s?"x":"y",h=s?"y":"x",v=a[u]/l.length,d=0;d<l.length;d++)for(var p=a[c]/l[d],g=0;g<l[d];g++){var y={};y[f]=d*v,y[h]=g*p,y[u]=v,y[c]=p,y.x+=a.x,y.y+=a.y,r.push(y)}}function crossProduct2d(a,t,r,n){return a*n-r*t}function lineLineIntersect(a,t,r,n,o,s,l,u){var c=r-a,f=n-t,h=l-o,v=u-s,d=crossProduct2d(h,v,c,f);if(Math.abs(d)<1e-6)return null;var p=a-o,g=t-s,y=crossProduct2d(p,g,h,v)/d;return y<0||y>1?null:new Point(y*c+a,y*f+t)}function projPtOnLine(a,t,r){var n=new Point;Point.sub(n,r,t),n.normalize();var o=new Point;Point.sub(o,a,t);var s=o.dot(n);return s}function addToPoly(a,t){var r=a[a.length-1];r&&r[0]===t[0]&&r[1]===t[1]||a.push(t)}function splitPolygonByLine(a,t,r){for(var n=a.length,o=[],s=0;s<n;s++){var l=a[s],u=a[(s+1)%n],c=lineLineIntersect(l[0],l[1],u[0],u[1],t.x,t.y,r.x,r.y);c&&o.push({projPt:projPtOnLine(c,t,r),pt:c,idx:s})}if(o.length<2)return[{points:a},{points:a}];o.sort(function(_,S){return _.projPt-S.projPt});var f=o[0],h=o[o.length-1];if(h.idx<f.idx){var v=f;f=h,h=v}for(var d=[f.pt.x,f.pt.y],p=[h.pt.x,h.pt.y],g=[d],y=[p],s=f.idx+1;s<=h.idx;s++)addToPoly(g,a[s].slice());addToPoly(g,p),addToPoly(g,d);for(var s=h.idx+1;s<=f.idx+n;s++)addToPoly(y,a[s%n].slice());return addToPoly(y,d),addToPoly(y,p),[{points:g},{points:y}]}function binaryDividePolygon(a){var t=a.points,r=[],n=[];fromPoints(t,r,n);var o=new BoundingRect(r[0],r[1],n[0]-r[0],n[1]-r[1]),s=o.width,l=o.height,u=o.x,c=o.y,f=new Point,h=new Point;return s>l?(f.x=h.x=u+s/2,f.y=c,h.y=c+l):(f.y=h.y=c+l/2,f.x=u,h.x=u+s),splitPolygonByLine(t,f,h)}function binaryDivideRecursive(a,t,r,n){if(r===1)n.push(t);else{var o=Math.floor(r/2),s=a(t);binaryDivideRecursive(a,s[0],o,n),binaryDivideRecursive(a,s[1],r-o,n)}return n}function clone(a,t){for(var r=[],n=0;n<t;n++)r.push(clonePath(a));return r}function copyPathProps(a,t){t.setStyle(a.style),t.z=a.z,t.z2=a.z2,t.zlevel=a.zlevel}function polygonConvert(a){for(var t=[],r=0;r<a.length;)t.push([a[r++],a[r++]]);return t}function split(a,t){var r=[],n=a.shape,o;switch(a.type){case"rect":divideRect(n,t,r),o=Rect$2;break;case"sector":divideSector(n,t,r),o=Sector;break;case"circle":divideSector({r0:0,r:n.r,startAngle:0,endAngle:Math.PI*2,cx:n.cx,cy:n.cy},t,r),o=Sector;break;default:var s=a.getComputedTransform(),l=s?Math.sqrt(Math.max(s[0]*s[0]+s[1]*s[1],s[2]*s[2]+s[3]*s[3])):1,u=map$1(pathToPolygons(a.getUpdatedPathProxy(),l),function(S){return polygonConvert(S)}),c=u.length;if(c===0)binaryDivideRecursive(binaryDividePolygon,{points:u[0]},t,r);else if(c===t)for(var f=0;f<c;f++)r.push({points:u[f]});else{var h=0,v=map$1(u,function(S){var x=[],T=[];fromPoints(S,x,T);var b=(T[1]-x[1])*(T[0]-x[0]);return h+=b,{poly:S,area:b}});v.sort(function(S,x){return x.area-S.area});for(var d=t,f=0;f<c;f++){var p=v[f];if(d<=0)break;var g=f===c-1?d:Math.ceil(p.area/h*t);g<0||(binaryDivideRecursive(binaryDividePolygon,{points:p.poly},g,r),d-=g)}}o=Polygon;break}if(!o)return clone(a,t);for(var y=[],f=0;f<r.length;f++){var _=new o;_.setShape(r[f]),copyPathProps(a,_),y.push(_)}return y}function alignSubpath(a,t){var r=a.length,n=t.length;if(r===n)return[a,t];for(var o=[],s=[],l=r<n?a:t,u=Math.min(r,n),c=Math.abs(n-r)/6,f=(u-2)/6,h=Math.ceil(c/f)+1,v=[l[0],l[1]],d=c,p=2;p<u;){var g=l[p-2],y=l[p-1],_=l[p++],S=l[p++],x=l[p++],T=l[p++],b=l[p++],C=l[p++];if(d<=0){v.push(_,S,x,T,b,C);continue}for(var w=Math.min(d,h-1)+1,M=1;M<=w;M++){var P=M/w;cubicSubdivide(g,_,x,b,P,o),cubicSubdivide(y,S,T,C,P,s),g=o[3],y=s[3],v.push(o[1],s[1],o[2],s[2],g,y),_=o[5],S=s[5],x=o[6],T=s[6]}d-=w-1}return l===a?[v,t]:[a,v]}function createSubpath(a,t){for(var r=a.length,n=a[r-2],o=a[r-1],s=[],l=0;l<t.length;)s[l++]=n,s[l++]=o;return s}function alignBezierCurves(a,t){for(var r,n,o,s=[],l=[],u=0;u<Math.max(a.length,t.length);u++){var c=a[u],f=t[u],h=void 0,v=void 0;c?f?(r=alignSubpath(c,f),h=r[0],v=r[1],n=h,o=v):(v=createSubpath(o||c,c),h=c):(h=createSubpath(n||f,f),v=f),s.push(h),l.push(v)}return[s,l]}function centroid(a){for(var t=0,r=0,n=0,o=a.length,s=0,l=o-2;s<o;l=s,s+=2){var u=a[l],c=a[l+1],f=a[s],h=a[s+1],v=u*h-f*c;t+=v,r+=(u+f)*v,n+=(c+h)*v}return t===0?[a[0]||0,a[1]||0]:[r/t/3,n/t/3,t]}function findBestRingOffset(a,t,r,n){for(var o=(a.length-2)/6,s=1/0,l=0,u=a.length,c=u-2,f=0;f<o;f++){for(var h=f*6,v=0,d=0;d<u;d+=2){var p=d===0?h:(h+d-2)%c+2,g=a[p]-r[0],y=a[p+1]-r[1],_=t[d]-n[0],S=t[d+1]-n[1],x=_-g,T=S-y;v+=x*x+T*T}v<s&&(s=v,l=f)}return l}function reverse(a){for(var t=[],r=a.length,n=0;n<r;n+=2)t[n]=a[r-n-2],t[n+1]=a[r-n-1];return t}function findBestMorphingRotation(a,t,r,n){for(var o=[],s,l=0;l<a.length;l++){var u=a[l],c=t[l],f=centroid(u),h=centroid(c);s==null&&(s=f[2]<0!=h[2]<0);var v=[],d=[],p=0,g=1/0,y=[],_=u.length;s&&(u=reverse(u));for(var S=findBestRingOffset(u,c,f,h)*6,x=_-2,T=0;T<x;T+=2){var b=(S+T)%x+2;v[T+2]=u[b]-f[0],v[T+3]=u[b+1]-f[1]}v[0]=u[S]-f[0],v[1]=u[S+1]-f[1];for(var C=n/r,w=-n/2;w<=n/2;w+=C){for(var M=Math.sin(w),P=Math.cos(w),L=0,T=0;T<u.length;T+=2){var E=v[T],I=v[T+1],R=c[T]-h[0],D=c[T+1]-h[1],O=R*P-D*M,$=R*M+D*P;y[T]=O,y[T+1]=$;var N=O-E,V=$-I;L+=N*N+V*V}if(L<g){g=L,p=w;for(var B=0;B<y.length;B++)d[B]=y[B]}}o.push({from:v,to:d,fromCp:f,toCp:h,rotation:-p})}return o}function isCombineMorphing(a){return a.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(a,t,r){var n=SAVED_METHOD_PREFIX+t,o=a[n]||a[t];a[n]||(a[n]=a[t]);var s=r.replace,l=r.after,u=r.before;a[t]=function(){var c=arguments,f;return u&&u.apply(this,c),s?f=s.apply(this,c):f=o.apply(this,c),l&&l.apply(this,c),f}}function restoreMethod(a,t){var r=SAVED_METHOD_PREFIX+t;a[r]&&(a[t]=a[r],a[r]=null)}function applyTransformOnBeziers(a,t){for(var r=0;r<a.length;r++)for(var n=a[r],o=0;o<n.length;){var s=n[o],l=n[o+1];n[o++]=t[0]*s+t[2]*l+t[4],n[o++]=t[1]*s+t[3]*l+t[5]}}function prepareMorphPath(a,t){var r=a.getUpdatedPathProxy(),n=t.getUpdatedPathProxy(),o=alignBezierCurves(pathToBezierCurves(r),pathToBezierCurves(n)),s=o[0],l=o[1],u=a.getComputedTransform(),c=t.getComputedTransform();function f(){this.transform=null}u&&applyTransformOnBeziers(s,u),c&&applyTransformOnBeziers(l,c),saveAndModifyMethod(t,"updateTransform",{replace:f}),t.transform=null;var h=findBestMorphingRotation(s,l,10,Math.PI),v=[];saveAndModifyMethod(t,"buildPath",{replace:function(d){for(var p=t.__morphT,g=1-p,y=[],_=0;_<h.length;_++){var S=h[_],x=S.from,T=S.to,b=S.rotation*p,C=S.fromCp,w=S.toCp,M=Math.sin(b),P=Math.cos(b);lerp$1(y,C,w,p);for(var L=0;L<x.length;L+=2){var E=x[L],I=x[L+1],R=T[L],D=T[L+1],O=E*g+R*p,$=I*g+D*p;v[L]=O*P-$*M+y[0],v[L+1]=O*M+$*P+y[1]}var N=v[0],V=v[1];d.moveTo(N,V);for(var L=2;L<x.length;){var R=v[L++],D=v[L++],B=v[L++],F=v[L++],G=v[L++],z=v[L++];N===R&&V===D&&B===G&&F===z?d.lineTo(G,z):d.bezierCurveTo(R,D,B,F,G,z),N=G,V=z}}}})}function morphPath(a,t,r){if(!a||!t)return t;var n=r.done,o=r.during;prepareMorphPath(a,t),t.__morphT=0;function s(){restoreMethod(t,"buildPath"),restoreMethod(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},defaults({during:function(l){t.dirtyShape(),o&&o(l)},done:function(){s(),n&&n()}},r)),t}function hilbert(a,t,r,n,o,s){var l=16;a=o===r?0:Math.round(32767*(a-r)/(o-r)),t=s===n?0:Math.round(32767*(t-n)/(s-n));for(var u=0,c,f=(1<<l)/2;f>0;f/=2){var h=0,v=0;(a&f)>0&&(h=1),(t&f)>0&&(v=1),u+=f*f*(3*h^v),v===0&&(h===1&&(a=f-1-a,t=f-1-t),c=a,a=t,t=c)}return u}function sortPaths(a){var t=1/0,r=1/0,n=-1/0,o=-1/0,s=map$1(a,function(u){var c=u.getBoundingRect(),f=u.getComputedTransform(),h=c.x+c.width/2+(f?f[4]:0),v=c.y+c.height/2+(f?f[5]:0);return t=Math.min(h,t),r=Math.min(v,r),n=Math.max(h,n),o=Math.max(v,o),[h,v]}),l=map$1(s,function(u,c){return{cp:u,z:hilbert(u[0],u[1],t,r,n,o),path:a[c]}});return l.sort(function(u,c){return u.z-c.z}).map(function(u){return u.path})}function defaultDividePath(a){return split(a.path,a.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(a,t,r){var n=[];function o(C){for(var w=0;w<C.length;w++){var M=C[w];isCombineMorphing(M)?o(M.childrenRef()):M instanceof Path&&n.push(M)}}o(a);var s=n.length;if(!s)return createEmptyReturn();var l=r.dividePath||defaultDividePath,u=l({path:t,count:s});if(u.length!==s)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();n=sortPaths(n),u=sortPaths(u);for(var c=r.done,f=r.during,h=r.individualDelay,v=new Transformable,d=0;d<s;d++){var p=n[d],g=u[d];g.parent=t,g.copyTransform(v),h||prepareMorphPath(p,g)}t.__isCombineMorphing=!0,t.childrenRef=function(){return u};function y(C){for(var w=0;w<u.length;w++)u[w].addSelfToZr(C)}saveAndModifyMethod(t,"addSelfToZr",{after:function(C){y(C)}}),saveAndModifyMethod(t,"removeSelfFromZr",{after:function(C){for(var w=0;w<u.length;w++)u[w].removeSelfFromZr(C)}});function _(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,restoreMethod(t,"addSelfToZr"),restoreMethod(t,"removeSelfFromZr")}var S=u.length;if(h)for(var x=S,T=function(){x--,x===0&&(_(),c&&c())},d=0;d<S;d++){var b=h?defaults({delay:(r.delay||0)+h(d,S,n[d],u[d]),done:T},r):r;morphPath(n[d],u[d],b)}else t.__morphT=0,t.animateTo({__morphT:1},defaults({during:function(C){for(var w=0;w<S;w++){var M=u[w];M.__morphT=t.__morphT,M.dirtyShape()}f&&f(C)},done:function(){_();for(var C=0;C<a.length;C++)restoreMethod(a[C],"updateTransform");c&&c()}},r));return t.__zr&&y(t.__zr),{fromIndividuals:n,toIndividuals:u,count:S}}function separateMorph(a,t,r){var n=t.length,o=[],s=r.dividePath||defaultDividePath;function l(p){for(var g=0;g<p.length;g++){var y=p[g];isCombineMorphing(y)?l(y.childrenRef()):y instanceof Path&&o.push(y)}}if(isCombineMorphing(a)){l(a.childrenRef());var u=o.length;if(u<n)for(var c=0,f=u;f<n;f++)o.push(clonePath(o[c++%u]));o.length=n}else{o=s({path:a,count:n});for(var h=a.getComputedTransform(),f=0;f<o.length;f++)o[f].setLocalTransform(h);if(o.length!==n)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}o=sortPaths(o),t=sortPaths(t);for(var v=r.individualDelay,f=0;f<n;f++){var d=v?defaults({delay:(r.delay||0)+v(f,n,o[f],t[f])},r):r;morphPath(o[f],t[f],d)}return{fromIndividuals:o,toIndividuals:t,count:t.length}}function isMultiple(a){return isArray$1(a[0])}function prepareMorphBatches(a,t){for(var r=[],n=a.length,o=0;o<n;o++)r.push({one:a[o],many:[]});for(var o=0;o<t.length;o++){var s=t[o].length,l=void 0;for(l=0;l<s;l++)r[l%n].many.push(t[o][l])}for(var u=0,o=n-1;o>=0;o--)if(!r[o].many.length){var c=r[u].many;if(c.length<=1)if(u)u=0;else return r;var s=c.length,f=Math.ceil(s/2);r[o].many=c.slice(f,s),r[u].many=c.slice(0,f),u++}return r}var pathDividers={clone:function(a){for(var t=[],r=1-Math.pow(1-a.path.style.opacity,1/a.count),n=0;n<a.count;n++){var o=clonePath(a.path);o.setStyle("opacity",r),t.push(o)}return t},split:null};function applyMorphAnimation(a,t,r,n,o,s){if(!a.length||!t.length)return;var l=getAnimationConfig("update",n,o);if(!(l&&l.duration>0))return;var u=n.getModel("universalTransition").get("delay"),c=Object.assign({setToFinal:!0},l),f,h;isMultiple(a)&&(f=a,h=t),isMultiple(t)&&(f=t,h=a);function v(S,x,T,b,C){var w=S.many,M=S.one;if(w.length===1&&!C){var P=x?w[0]:M,L=x?M:w[0];if(isCombineMorphing(P))v({many:[P],one:L},!0,T,b,!0);else{var E=u?defaults({delay:u(T,b)},c):c;morphPath(P,L,E),s(P,L,P,L,E)}}else for(var I=defaults({dividePath:pathDividers[r],individualDelay:u&&function(V,B,F,G){return u(V+T,b)}},c),R=x?combineMorph(w,M,I):separateMorph(M,w,I),D=R.fromIndividuals,O=R.toIndividuals,$=D.length,N=0;N<$;N++){var E=u?defaults({delay:u(N,$)},c):c;s(D[N],O[N],x?w[N]:S.one,x?S.one:w[N],E)}}for(var d=f?f===a:a.length>t.length,p=f?prepareMorphBatches(h,f):prepareMorphBatches(d?t:a,[d?a:t]),g=0,y=0;y<p.length;y++)g+=p[y].many.length;for(var _=0,y=0;y<p.length;y++)v(p[y],d,_,g),_+=p[y].many.length}function getPathList(a){if(!a)return[];if(isArray$1(a)){for(var t=[],r=0;r<a.length;r++)t.push(getPathList(a[r]));return t}var n=[];return a.traverse(function(o){o instanceof Path&&!o.disableMorphing&&!o.invisible&&!o.ignore&&n.push(o)}),n}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(a,t){for(var r=a.dimensions,n=0;n<r.length;n++){var o=a.getDimensionInfo(r[n]);if(o&&o.otherDims[t]===0)return r[n]}}function getValueByDimension(a,t,r){var n=a.getDimensionInfo(r),o=n&&n.ordinalMeta;if(n){var s=a.get(n.name,t);return o&&o.categories[s]||s+""}}function getGroupId(a,t,r,n){var o=n?"itemChildGroupId":"itemGroupId",s=getDimension(a,o);if(s){var l=getValueByDimension(a,t,s);return l}var u=a.getRawDataItem(t),c=n?"childGroupId":"groupId";if(u&&u[c])return u[c]+"";if(!n)return r||a.getId(t)}function flattenDataDiffItems(a){var t=[];return each$f(a,function(r){var n=r.data,o=r.dataGroupId;if(!(n.count()>DATA_COUNT_THRESHOLD))for(var s=n.getIndices(),l=0;l<s.length;l++)t.push({data:n,groupId:getGroupId(n,l,o,!1),childGroupId:getGroupId(n,l,o,!0),divide:r.divide,dataIndex:l})}),t}function fadeInElement(a,t,r){a.traverse(function(n){n instanceof Path&&initProps(n,{style:{opacity:0}},t,{dataIndex:r,isFrom:!0})})}function removeEl(a){if(a.parent){var t=a.getComputedTransform();a.setLocalTransform(t),a.parent.remove(a)}}function stopAnimation(a){a.stopAnimation(),a.isGroup&&a.traverse(function(t){t.stopAnimation()})}function animateElementStyles(a,t,r){var n=getAnimationConfig("update",r,t);n&&a.traverse(function(o){if(o instanceof Displayable){var s=getOldStyle(o);s&&o.animateFrom({style:s},n)}})}function isAllIdSame(a,t){var r=a.length;if(r!==t.length)return!1;for(var n=0;n<r;n++){var o=a[n],s=t[n];if(o.data.getId(o.dataIndex)!==s.data.getId(s.dataIndex))return!1}return!0}function transitionBetween(a,t,r){var n=flattenDataDiffItems(a),o=flattenDataDiffItems(t);function s(T,b,C,w,M){(C||T)&&b.animateFrom({style:C&&C!==T?extend(extend({},C.style),T.style):T.style},M)}var l=!1,u=TRANSITION_NONE,c=createHashMap(),f=createHashMap();n.forEach(function(T){T.groupId&&c.set(T.groupId,!0),T.childGroupId&&f.set(T.childGroupId,!0)});for(var h=0;h<o.length;h++){var v=o[h].groupId;if(f.get(v)){u=TRANSITION_P2C;break}var d=o[h].childGroupId;if(d&&c.get(d)){u=TRANSITION_C2P;break}}function p(T,b){return function(C){var w=C.data,M=C.dataIndex;return b?w.getId(M):T?u===TRANSITION_P2C?C.childGroupId:C.groupId:u===TRANSITION_C2P?C.childGroupId:C.groupId}}var g=isAllIdSame(n,o),y={};if(!g)for(var h=0;h<o.length;h++){var _=o[h],S=_.data.getItemGraphicEl(_.dataIndex);S&&(y[S.id]=!0)}function x(T,b){var C=n[b],w=o[T],M=w.data.hostModel,P=C.data.getItemGraphicEl(C.dataIndex),L=w.data.getItemGraphicEl(w.dataIndex);if(P===L){L&&animateElementStyles(L,w.dataIndex,M);return}P&&y[P.id]||L&&(stopAnimation(L),P?(stopAnimation(P),removeEl(P),l=!0,applyMorphAnimation(getPathList(P),getPathList(L),w.divide,M,T,s)):fadeInElement(L,M,T))}new DataDiffer(n,o,p(!0,g),p(!1,g),null,"multiple").update(x).updateManyToOne(function(T,b){var C=o[T],w=C.data,M=w.hostModel,P=w.getItemGraphicEl(C.dataIndex),L=filter(map$1(b,function(E){return n[E].data.getItemGraphicEl(n[E].dataIndex)}),function(E){return E&&E!==P&&!y[E.id]});P&&(stopAnimation(P),L.length?(each$f(L,function(E){stopAnimation(E),removeEl(E)}),l=!0,applyMorphAnimation(getPathList(L),getPathList(P),C.divide,M,T,s)):fadeInElement(P,M,C.dataIndex))}).updateOneToMany(function(T,b){var C=n[b],w=C.data.getItemGraphicEl(C.dataIndex);if(!(w&&y[w.id])){var M=filter(map$1(T,function(L){return o[L].data.getItemGraphicEl(o[L].dataIndex)}),function(L){return L&&L!==w}),P=o[T[0]].data.hostModel;M.length&&(each$f(M,function(L){return stopAnimation(L)}),w?(stopAnimation(w),removeEl(w),l=!0,applyMorphAnimation(getPathList(w),getPathList(M),C.divide,P,T[0],s)):each$f(M,function(L){return fadeInElement(L,P,T[0])}))}}).updateManyToMany(function(T,b){new DataDiffer(b,T,function(C){return n[C].data.getId(n[C].dataIndex)},function(C){return o[C].data.getId(o[C].dataIndex)}).update(function(C,w){x(T[C],b[w])}).execute()}).execute(),l&&each$f(t,function(T){var b=T.data,C=b.hostModel,w=C&&r.getViewOfSeriesModel(C),M=getAnimationConfig("update",C,0);w&&C.isAnimationEnabled()&&M&&M.duration>0&&w.group.traverse(function(P){P instanceof Path&&!P.animators.length&&P.animateFrom({style:{opacity:0}},M)})})}function getSeriesTransitionKey(a){var t=a.getModel("universalTransition").get("seriesKey");return t||a.id}function convertArraySeriesKeyToString(a){return isArray$1(a)?a.sort().join(","):a}function getDivideShapeFromData(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(a,t){var r=createHashMap(),n=createHashMap(),o=createHashMap();return each$f(a.oldSeries,function(s,l){var u=a.oldDataGroupIds[l],c=a.oldData[l],f=getSeriesTransitionKey(s),h=convertArraySeriesKeyToString(f);n.set(h,{dataGroupId:u,data:c}),isArray$1(f)&&each$f(f,function(v){o.set(v,{key:h,dataGroupId:u,data:c})})}),each$f(t.updatedSeries,function(s){if(s.isUniversalTransitionEnabled()&&s.isAnimationEnabled()){var l=s.get("dataGroupId"),u=s.getData(),c=getSeriesTransitionKey(s),f=convertArraySeriesKeyToString(c),h=n.get(f);if(h)r.set(f,{oldSeries:[{dataGroupId:h.dataGroupId,divide:getDivideShapeFromData(h.data),data:h.data}],newSeries:[{dataGroupId:l,divide:getDivideShapeFromData(u),data:u}]});else if(isArray$1(c)){var v=[];each$f(c,function(g){var y=n.get(g);y.data&&v.push({dataGroupId:y.dataGroupId,divide:getDivideShapeFromData(y.data),data:y.data})}),v.length&&r.set(f,{oldSeries:v,newSeries:[{dataGroupId:l,data:u,divide:getDivideShapeFromData(u)}]})}else{var d=o.get(c);if(d){var p=r.get(d.key);p||(p={oldSeries:[{dataGroupId:d.dataGroupId,data:d.data,divide:getDivideShapeFromData(d.data)}],newSeries:[]},r.set(d.key,p)),p.newSeries.push({dataGroupId:l,data:u,divide:getDivideShapeFromData(u)})}}}}),r}function querySeries(a,t){for(var r=0;r<a.length;r++){var n=t.seriesIndex!=null&&t.seriesIndex===a[r].seriesIndex||t.seriesId!=null&&t.seriesId===a[r].id;if(n)return r}}function transitionSeriesFromOpt(a,t,r,n){var o=[],s=[];each$f(normalizeToArray(a.from),function(l){var u=querySeries(t.oldSeries,l);u>=0&&o.push({dataGroupId:t.oldDataGroupIds[u],data:t.oldData[u],divide:getDivideShapeFromData(t.oldData[u]),groupIdDim:l.dimension})}),each$f(normalizeToArray(a.to),function(l){var u=querySeries(r.updatedSeries,l);if(u>=0){var c=r.updatedSeries[u].getData();s.push({dataGroupId:t.oldDataGroupIds[u],data:c,divide:getDivideShapeFromData(c),groupIdDim:l.dimension})}}),o.length>0&&s.length>0&&transitionBetween(o,s,n)}function installUniversalTransition(a){a.registerUpdateLifecycle("series:beforeupdate",function(t,r,n){each$f(normalizeToArray(n.seriesTransition),function(o){each$f(normalizeToArray(o.to),function(s){for(var l=n.updatedSeries,u=0;u<l.length;u++)(s.seriesIndex!=null&&s.seriesIndex===l[u].seriesIndex||s.seriesId!=null&&s.seriesId===l[u].id)&&(l[u][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(t,r,n){var o=getUniversalTransitionGlobalStore(r);if(o.oldSeries&&n.updatedSeries&&n.optionChanged){var s=n.seriesTransition;if(s)each$f(normalizeToArray(s),function(p){transitionSeriesFromOpt(p,o,n,r)});else{var l=findTransitionSeriesBatches(o,n);each$f(l.keys(),function(p){var g=l.get(p);transitionBetween(g.oldSeries,g.newSeries,r)})}each$f(n.updatedSeries,function(p){p[SERIES_UNIVERSAL_TRANSITION_PROP]&&(p[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var u=t.getSeries(),c=o.oldSeries=[],f=o.oldDataGroupIds=[],h=o.oldData=[],v=0;v<u.length;v++){var d=u[v].getData();d.count()<DATA_COUNT_THRESHOLD&&(c.push(u[v]),f.push(u[v].get("dataGroupId")),h.push(d))}})}var ScaleBreakContextImpl=function(){function a(){this.breaks=[],this._elapsedExtent=[1/0,-1/0]}return a.prototype.setBreaks=function(t){this.breaks=t.breaks},a.prototype.update=function(t){updateAxisBreakGapReal(this,t);var r=this._elapsedExtent;r[0]=this.elapse(t[0]),r[1]=this.elapse(t[1])},a.prototype.hasBreaks=function(){return!!this.breaks.length},a.prototype.calcNiceTickMultiple=function(t,r){for(var n=0;n<this.breaks.length;n++){var o=this.breaks[n];if(o.vmin<t&&t<o.vmax){var s=r(t,o.vmax);return s}}return 0},a.prototype.getExtentSpan=function(){return this._elapsedExtent[1]-this._elapsedExtent[0]},a.prototype.normalize=function(t){var r=this._elapsedExtent[1]-this._elapsedExtent[0];return r===0?.5:(this.elapse(t)-this._elapsedExtent[0])/r},a.prototype.scale=function(t){return this.unelapse(t*(this._elapsedExtent[1]-this._elapsedExtent[0])+this._elapsedExtent[0])},a.prototype.elapse=function(t){for(var r=AXIS_BREAK_ELAPSED_BASE,n=AXIS_BREAK_LAST_BREAK_END_BASE,o=!0,s=0;s<this.breaks.length;s++){var l=this.breaks[s];if(t<=l.vmax){t>l.vmin?r+=l.vmin-n+(t-l.vmin)/(l.vmax-l.vmin)*l.gapReal:r+=t-n,n=l.vmax,o=!1;break}r+=l.vmin-n+l.gapReal,n=l.vmax}return o&&(r+=t-n),r},a.prototype.unelapse=function(t){for(var r=AXIS_BREAK_ELAPSED_BASE,n=AXIS_BREAK_LAST_BREAK_END_BASE,o=!0,s=0,l=0;l<this.breaks.length;l++){var u=this.breaks[l],c=r+u.vmin-n,f=c+u.gapReal;if(t<=f){t>c?s=u.vmin+(t-c)/(f-c)*(u.vmax-u.vmin):s=n+t-r,n=u.vmax,o=!1;break}r=f,n=u.vmax}return o&&(s=n+t-r),s},a}();function createScaleBreakContext(){return new ScaleBreakContextImpl}var AXIS_BREAK_ELAPSED_BASE=0,AXIS_BREAK_LAST_BREAK_END_BASE=0;function updateAxisBreakGapReal(a,t){var r=0,n={tpAbs:{span:0,val:0},tpPrct:{span:0,val:0}},o=function(){return{has:!1,span:NaN,inExtFrac:NaN,val:NaN}},s={S:{tpAbs:o(),tpPrct:o()},E:{tpAbs:o(),tpPrct:o()}};each$f(a.breaks,function(u){var c=u.gapParsed;c.type==="tpPrct"&&(r+=c.val);var f=clampBreakByExtent(u,t);if(f){var h=f.vmin!==u.vmin,v=f.vmax!==u.vmax,d=f.vmax-f.vmin;if(!(h&&v))if(h||v){var p=h?"S":"E";s[p][c.type].has=!0,s[p][c.type].span=d,s[p][c.type].inExtFrac=d/(u.vmax-u.vmin),s[p][c.type].val=c.val}else n[c.type].span+=d,n[c.type].val+=c.val}});var l=r*(0+(t[1]-t[0])+(n.tpAbs.val-n.tpAbs.span)+(s.S.tpAbs.has?(s.S.tpAbs.val-s.S.tpAbs.span)*s.S.tpAbs.inExtFrac:0)+(s.E.tpAbs.has?(s.E.tpAbs.val-s.E.tpAbs.span)*s.E.tpAbs.inExtFrac:0)-n.tpPrct.span-(s.S.tpPrct.has?s.S.tpPrct.span*s.S.tpPrct.inExtFrac:0)-(s.E.tpPrct.has?s.E.tpPrct.span*s.E.tpPrct.inExtFrac:0))/(1-n.tpPrct.val-(s.S.tpPrct.has?s.S.tpPrct.val*s.S.tpPrct.inExtFrac:0)-(s.E.tpPrct.has?s.E.tpPrct.val*s.E.tpPrct.inExtFrac:0));each$f(a.breaks,function(u){var c=u.gapParsed;c.type==="tpPrct"&&(u.gapReal=r!==0?Math.max(l,0)*c.val/r:0),c.type==="tpAbs"&&(u.gapReal=c.val),u.gapReal==null&&(u.gapReal=0)})}function pruneTicksByBreak(a,t,r,n,o,s){a!=="no"&&each$f(r,function(l){var u=clampBreakByExtent(l,s);if(u)for(var c=t.length-1;c>=0;c--){var f=t[c],h=n(f),v=o*3/4;h>u.vmin-v&&h<u.vmax+v&&(a!=="preserve_extent_bound"||h!==s[0]&&h!==s[1])&&t.splice(c,1)}})}function addBreaksToTicks(a,t,r,n){each$f(t,function(o){var s=clampBreakByExtent(o,r);s&&(a.push({value:s.vmin,break:{type:"vmin",parsedBreak:s},time:n?n(s):void 0}),a.push({value:s.vmax,break:{type:"vmax",parsedBreak:s},time:n?n(s):void 0}))}),t.length&&a.sort(function(o,s){return o.value-s.value})}function clampBreakByExtent(a,t){var r=Math.max(a.vmin,t[0]),n=Math.min(a.vmax,t[1]);return r<n||r===n&&r>t[0]&&r<t[1]?{vmin:r,vmax:n,breakOption:a.breakOption,gapParsed:a.gapParsed,gapReal:a.gapReal}:null}function parseAxisBreakOption(a,t,r){var n=[];if(!a)return{breaks:n};function o(l,u){return l>=0&&l<1-1e-5}each$f(a,function(l){if(!(!l||l.start==null||l.end==null)&&!l.isExpanded){var u={breakOption:clone$4(l),vmin:t(l.start),vmax:t(l.end),gapParsed:{type:"tpAbs",val:0},gapReal:null};if(l.gap!=null){var c=!1;if(isString(l.gap)){var f=trim$1(l.gap);if(f.match(/%$/)){var h=parseFloat(f)/100;o(h)||(h=0),u.gapParsed.type="tpPrct",u.gapParsed.val=h,c=!0}}if(!c){var v=t(l.gap);(!isFinite(v)||v<0)&&(v=0),u.gapParsed.type="tpAbs",u.gapParsed.val=v}}if(u.vmin===u.vmax&&(u.gapParsed.type="tpAbs",u.gapParsed.val=0),r&&r.noNegative&&each$f(["vmin","vmax"],function(p){u[p]<0&&(u[p]=0)}),u.vmin>u.vmax){var d=u.vmax;u.vmax=u.vmin,u.vmin=d}n.push(u)}}),n.sort(function(l,u){return l.vmin-u.vmin});var s=-1/0;return each$f(n,function(l,u){s>l.vmin&&(n[u]=null),s=l.vmax}),{breaks:n.filter(function(l){return!!l})}}function identifyAxisBreak(a,t){return serializeAxisBreakIdentifier(t)===serializeAxisBreakIdentifier(a)}function serializeAxisBreakIdentifier(a){return a.start+"_\0_"+a.end}function retrieveAxisBreakPairs(a,t,r){var n=[];each$f(a,function(s,l){var u=t(s);u&&u.type==="vmin"&&n.push([l])}),each$f(a,function(s,l){var u=t(s);if(u&&u.type==="vmax"){var c=find(n,function(f){return identifyAxisBreak(t(a[f[0]]).parsedBreak.breakOption,u.parsedBreak.breakOption)});c&&c.push(l)}});var o=[];return each$f(n,function(s){s.length===2&&o.push(r?s:[a[s[0]],a[s[1]]])}),o}function getTicksLogTransformBreak(a,t,r,n){var o,s;if(a.break){var l=a.break.parsedBreak,u=find(r,function(v){return identifyAxisBreak(v.breakOption,a.break.parsedBreak.breakOption)}),c=n(Math.pow(t,l.vmin),u.vmin),f=n(Math.pow(t,l.vmax),u.vmax),h={type:l.gapParsed.type,val:l.gapParsed.type==="tpAbs"?round$4(Math.pow(t,l.vmin+l.gapParsed.val))-c:l.gapParsed.val};o={type:a.break.type,parsedBreak:{breakOption:l.breakOption,vmin:c,vmax:f,gapParsed:h,gapReal:l.gapReal}},s=u[a.break.type]}return{brkRoundingCriterion:s,vBreak:o}}function logarithmicParseBreaksFromOption(a,t,r){var n={noNegative:!0},o=parseAxisBreakOption(a,r,n),s=parseAxisBreakOption(a,r,n),l=Math.log(t);return s.breaks=map$1(s.breaks,function(u){var c=Math.log(u.vmin)/l,f=Math.log(u.vmax)/l,h={type:u.gapParsed.type,val:u.gapParsed.type==="tpAbs"?Math.log(u.vmin+u.gapParsed.val)/l-c:u.gapParsed.val};return{vmin:c,vmax:f,gapParsed:h,gapReal:u.gapReal,breakOption:u.breakOption}}),{parsedOriginal:o,parsedLogged:s}}var BREAK_MIN_MAX_TO_PARAM={vmin:"start",vmax:"end"};function makeAxisLabelFormatterParamBreak(a,t){return t&&(a=a||{},a.break={type:BREAK_MIN_MAX_TO_PARAM[t.type],start:t.parsedBreak.vmin,end:t.parsedBreak.vmax}),a}function installScaleBreakHelper(){registerScaleBreakHelperImpl({createScaleBreakContext,pruneTicksByBreak,addBreaksToTicks,parseAxisBreakOption,identifyAxisBreak,serializeAxisBreakIdentifier,retrieveAxisBreakPairs,getTicksLogTransformBreak,logarithmicParseBreaksFromOption,makeAxisLabelFormatterParamBreak})}var viewCache=makeInner();function ensureVisualInCache(a,t){var r=find(a,function(n){return getScaleBreakHelper().identifyAxisBreak(n.parsedBreak.breakOption,t.breakOption)});return r||a.push(r={zigzagRandomList:[],parsedBreak:t,shouldRemove:!1}),r}function resetCacheVisualRemoveFlag(a){each$f(a,function(t){return t.shouldRemove=!0})}function removeUnusedCacheVisual(a){for(var t=a.length-1;t>=0;t--)a[t].shouldRemove&&a.splice(t,1)}function rectCoordBuildBreakAxis(a,t,r,n,o){var s=r.axis;if(s.scale.isBlank()||!getScaleBreakHelper())return;var l=getScaleBreakHelper().retrieveAxisBreakPairs(s.scale.getTicks({breakTicks:"only_break"}),function(L){return L.break},!1);if(!l.length)return;var u=r.getModel("breakArea"),c=u.get("zigzagAmplitude"),f=u.get("zigzagMinSpan"),h=u.get("zigzagMaxSpan");f=Math.max(2,f||0),h=Math.max(f,h||0);var v=u.get("expandOnClick"),d=u.get("zigzagZ"),p=u.getModel("itemStyle"),g=p.getItemStyle(),y=g.stroke,_=g.lineWidth,S=g.lineDash,x=g.fill,T=new Group$3({ignoreModelZ:!0}),b=s.isHorizontal(),C=viewCache(t).visualList||(viewCache(t).visualList=[]);resetCacheVisualRemoveFlag(C);for(var w=function(L){var E=l[L][0].break.parsedBreak,I=[];I[0]=s.toGlobalCoord(s.dataToCoord(E.vmin,!0)),I[1]=s.toGlobalCoord(s.dataToCoord(E.vmax,!0)),I[1]<I[0]&&I.reverse();var R=ensureVisualInCache(C,E);R.shouldRemove=!1;var D=new Group$3;P(R.zigzagRandomList,D,I[0],I[1],b,E),v&&D.on("click",function(){var O={type:AXIS_BREAK_EXPAND_ACTION_TYPE,breaks:[{start:E.breakOption.start,end:E.breakOption.end}]};O[s.dim+"AxisIndex"]=r.componentIndex,o.dispatchAction(O)}),D.silent=!v,T.add(D)},M=0;M<l.length;M++)w(M);a.add(T),removeUnusedCacheVisual(C);function P(L,E,I,R,D,O){var $={stroke:y,lineWidth:_,lineDash:S,fill:"none"},N=D?0:1,V=1-N,B=n[XY$2[V]]+n[WH$2[V]];function F(re){var Q=[],te=[];Q[N]=te[N]=re,Q[V]=n[XY$2[V]],te[V]=B;var ae={x1:Q[0],y1:Q[1],x2:te[0],y2:te[1]};return subPixelOptimizeLine$1(ae,ae,{lineWidth:1}),Q[0]=ae.x1,Q[1]=ae.y1,Q[N]}I=F(I),R=F(R);for(var G=[],z=[],H=!0,U=n[XY$2[V]],Y=0;;Y++){var Z=U===n[XY$2[V]],J=U>=B;J&&(U=B);var ee=[],K=[];ee[N]=I,K[N]=R,!Z&&!J&&(ee[N]+=H?-c:c,K[N]-=H?c:-c),ee[V]=U,K[V]=U,G.push(ee),z.push(K);var X=void 0;if(Y<L.length?X=L[Y]:(X=Math.random(),L.push(X)),U+=X*(h-f)+f,H=!H,J)break}var q=getScaleBreakHelper().serializeAxisBreakIdentifier(O.breakOption);if(E.add(new Polyline$1({anid:"break_a_"+q,shape:{points:G},style:$,z:d})),O.gapReal!==0){E.add(new Polyline$1({anid:"break_b_"+q,shape:{points:z},style:$,z:d}));var W=z.slice();W.reverse();var j=G.concat(W);E.add(new Polygon({anid:"break_c_"+q,shape:{points:j},style:{fill:x,opacity:g.opacity},z:d}))}}}function buildAxisBreakLine(a,t,r,n){var o=a.axis,s=r.transform;assert(n.style);var l=o.getExtent();o.inverse&&(l=l.slice(),l.reverse());var u=getScaleBreakHelper().retrieveAxisBreakPairs(o.scale.getTicks({breakTicks:"only_break"}),function(_){return _.break},!1),c=map$1(u,function(_){var S=_[0].break.parsedBreak,x=[o.dataToCoord(S.vmin,!0),o.dataToCoord(S.vmax,!0)];return x[0]>x[1]&&x.reverse(),{coordPair:x,brkId:getScaleBreakHelper().serializeAxisBreakIdentifier(S.breakOption)}});c.sort(function(_,S){return _.coordPair[0]-S.coordPair[0]});for(var f=l[0],h=null,v=0;v<c.length;v++){var d=c[v],p=Math.max(d.coordPair[0],l[0]),g=Math.min(d.coordPair[1],l[1]);f<=p&&y(f,p,h,d),f=g,h=d}f<=l[1]&&y(f,l[1],h,null);function y(_,S,x,T){function b(I,R){s&&(applyTransform$1(I,I,s),applyTransform$1(R,R,s))}function C(I,R){var D={x1:I[0],y1:I[1],x2:R[0],y2:R[1]};subPixelOptimizeLine$1(D,D,n.style),I[0]=D.x1,I[1]=D.y1,R[0]=D.x2,R[1]=D.y2}var w=[_,0],M=[S,0],P=[_,5],L=[S,5];b(w,P),C(w,P),b(M,L),C(M,L),C(w,M);var E=new Line$1(extend({shape:{x1:w[0],y1:w[1],x2:M[0],y2:M[1]}},n));t.add(E),E.anid="breakLine_"+(x?x.brkId:"\0")+"_\0_"+(T?T.brkId:"\0")}}function adjustBreakLabelPair(a,t,r){if(find(r,function(x){return!x}))return;var n=new Point;if(!labelIntersect(r[0],r[1],n,{direction:-(a?t+Math.PI:t),touchThreshold:0,bidirectional:!1}))return;var o=create$1();rotate(o,o,-t);var s=map$1(r,function(x){return x.transform?mul(create$1(),o,x.transform):o});function l(x){var T=r[0].localRect,b=new Point(T[WH$2[x]]*s[0][0],T[WH$2[x]]*s[0][1]);return Math.abs(b.y)<1e-5}var u=.5;if(l(0)||l(1)){var c=map$1(r,function(x,T){var b=x.localRect.clone();return b.applyTransform(s[T]),b}),f=new Point;f.copy(r[0].label).add(r[1].label).scale(.5),f.transform(o);var h=n.clone().transform(o),v=c[0].x+c[1].x+(h.x>=0?c[0].width:c[1].width),d=(v+h.x)/2-f.x,p=Math.min(d,d-h.x),g=Math.max(d,d-h.x),y=g<0?g:p>0?p:0;u=(d-y)/h.x}var _=new Point,S=new Point;Point.scale(_,n,-u),Point.scale(S,n,1-u),labelLayoutApplyTranslation(r[0],_),labelLayoutApplyTranslation(r[1],S)}function updateModelAxisBreak(a,t){var r={breaks:[]};return each$f(t.breaks,function(n){if(n){var o=find(a.get("breaks",!0),function(u){return getScaleBreakHelper().identifyAxisBreak(u,n)});if(o){var s=t.type,l={isExpanded:!!o.isExpanded};o.isExpanded=s===AXIS_BREAK_EXPAND_ACTION_TYPE?!0:s===AXIS_BREAK_COLLAPSE_ACTION_TYPE?!1:s===AXIS_BREAK_TOGGLE_ACTION_TYPE?!o.isExpanded:o.isExpanded,r.breaks.push({start:o.start,end:o.end,isExpanded:!!o.isExpanded,old:l})}}}),r}function installAxisBreakHelper(){registerAxisBreakHelperImpl({adjustBreakLabelPair,buildAxisBreakLine,rectCoordBuildBreakAxis,updateModelAxisBreak})}function installAxisBreak(a){registerAction(a),installScaleBreakHelper(),installAxisBreakHelper()}function installLegacyGridContainLabel(){registerLegacyGridContainLabelImpl(legacyLayOutGridByContained)}function legacyLayOutGridByContained(a,t){each$f(a,function(r){if(!r.model.get(["axisLabel","inside"])){var n=estimateLabelUnionRect(r);if(n){var o=r.isHorizontal()?"height":"width",s=r.model.get(["axisLabel","margin"]);t[o]-=n[o]+s,r.position==="top"?t.y+=n.height+s:r.position==="left"&&(t.x+=n.width+s)}}})}function estimateLabelUnionRect(a){var t=a.model,r=a.scale;if(!t.get(["axisLabel","show"])||r.isBlank())return;var n,o,s=r.getExtent();r instanceof OrdinalScale?o=r.count():(n=r.getTicks(),o=n.length);var l=a.getLabelModel(),u=makeLabelFormatter(a),c,f=1;o>40&&(f=Math.ceil(o/40));for(var h=0;h<o;h+=f){var v=n?n[h]:{value:s[0]+h},d=u(v,h),p=l.getTextRect(d),g=y(p,l.get("rotate")||0);c?c.union(g):c=g}return c;function y(_,S){var x=S*Math.PI/180,T=_.width,b=_.height,C=T*Math.abs(Math.cos(x))+Math.abs(b*Math.sin(x)),w=T*Math.abs(Math.sin(x))+Math.abs(b*Math.cos(x)),M=new BoundingRect(_.x,_.y,C,w);return M}}use([install$U]);use([install$V]);use([install$T,install$S,install$R,install$P,install$N,install$L,install$K,install$J,install$I,install$H,install$G,install$F,install$D,install$C,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t]);use(install$r);use(install$q);use(install$M);use(install$p);use(install$E);use(install$o);use(install$n);use(install$m);use(install$k);use(install$j);use(install$s);use(install$i);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$a);use(install$7);use(install$9);use(install$8);use(install$4);use(install$6);use(install$5);use(install$3);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);use(installAxisBreak);use(installLegacyGridContainLabel);use(installScatterJitter);var _tmpl$=template('<div class="w-full h-20">'),_tmpl$2=template('<div class="w-full h-full bg-gray-50 p-4"><div class=mb-6><h1 class="text-2xl font-bold text-gray-800 mb-2">äº¬ä¸œå•†å“ä»·æ ¼ç›‘æŽ§</h1><p class="text-sm text-gray-500">ç›‘æŽ§å•†å“ä»·æ ¼ï¼Œå½“ä»·æ ¼ä½ŽäºŽè®¾å®šå€¼æ—¶é€šçŸ¥æ‚¨</p></div><div class="bg-white rounded-lg shadow-md p-4 mb-6"><h2 class="text-lg font-semibold text-gray-700 mb-3">æ·»åŠ ç›‘æŽ§å•†å“</h2><div class="flex gap-2"><input class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"type=text placeholder="è¾“å…¥å•†å“IDæˆ–é“¾æŽ¥ (å¦‚: 100084849115 æˆ– https://item.jd.com/100084849115.html)"><button class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all font-medium shadow-sm hover:shadow-md">æ·»åŠ </button></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),_tmpl$3=template('<div><div class="flex items-start justify-between mb-3"><div class="flex items-center gap-2 flex-1"><input type=checkbox class="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 cursor-pointer"><h3 class="font-semibold text-gray-800 text-sm leading-tight flex-1 line-clamp-2"></h3></div></div><div class="space-y-2 mb-3"><div class="flex items-center justify-between"><span class="text-xs text-gray-500">å½“å‰ä»·æ ¼</span><span>Â¥</span></div><div class="grid grid-cols-2 gap-2 text-xs"><div><span class=text-gray-500>æœ€ä½Ž:</span><span class="ml-1 font-medium text-gray-700">Â¥</span></div><div><span class=text-gray-500>æœ€é«˜:</span><span class="ml-1 font-medium text-gray-700">Â¥</span></div></div></div><div class="border-t pt-3"><label class="block text-xs text-gray-500 mb-1">é€šçŸ¥ä»·æ ¼</label><div class="flex items-center gap-2"><input class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"type=number placeholder=99999><span class="text-xs text-gray-400">å…ƒ</span></div></div><div class="mt-2 text-xs text-gray-400">ID: '),_tmpl$4=template('<div class="bg-green-50 border border-green-200 rounded px-2 py-1 text-xs text-green-700 font-medium">âœ“ å·²è¾¾åˆ°ç›®æ ‡ä»·æ ¼'),_tmpl$5=template('<div class="mt-3 pt-3 border-t border-gray-100"><div class="text-xs text-gray-500 mb-2">ä»·æ ¼è¶‹åŠ¿'),_tmpl$6=template('<div class="text-xs text-gray-400">æ›´æ–°: '),_tmpl$7=template('<div class="text-center py-12"><div class="text-gray-400 text-lg mb-2">æš‚æ— ç›‘æŽ§å•†å“</div><div class="text-gray-400 text-sm">åœ¨ä¸Šæ–¹è¾“å…¥å•†å“IDæˆ–é“¾æŽ¥å¼€å§‹ç›‘æŽ§');async function loadData(){const a=await fetch("https://api.internal/api/jd/items/watched").then(n=>n.json()),t=await fetch("https://api.internal/api/jd/items").then(n=>n.json()),r=n=>{if(!n||!n.price_history)return null;const o=Object.keys(n.price_history);if(o.length>0){const s=o.sort().reverse()[0],l=new Date(s);return l.setHours(l.getHours()+8),l.toISOString().slice(0,16).replace("T"," ")}return null};return Object.keys(a).filter(n=>n&&n!=="null"&&a[n]).map(n=>{var o,s,l,u,c;return{id:n,name:((o=t["item_"+n])==null?void 0:o.name)||n,notifyPrice:a[n].notifyPrice,price:(s=t["item_"+n])==null?void 0:s.price,minPrice:(l=t["item_"+n])==null?void 0:l.min_price,maxPrice:(u=t["item_"+n])==null?void 0:u.max_price,updatedAt:r(t["item_"+n]),priceHistory:((c=t["item_"+n])==null?void 0:c.price_history)||null,active:a[n].active}})}function Jd(){const[a,t]=createStore({items:[],item:{id:null,active:!0}});function r(){loadData().then(d=>{const p=d.map(g=>({...g})).sort((g,y)=>g.active&&!y.active?-1:!g.active&&y.active?1:0);t("items",p)})}(()=>{t({items:[],item:{id:null,active:!0}}),r()})();function o(d){t("items",d,"active",!a.items[d].active),s(a.items[d]),t("items",produce(p=>{p.sort((g,y)=>g.active&&!y.active?-1:!g.active&&y.active?1:0)}))}async function s(d){if(!d.id){console.error("Cannot update: missing required field (id)");return}await fetch("https://api.internal/api/jd/items/watched",{method:"put",headers:{"content-type":"application/json"},body:JSON.stringify({[d.id]:{notifyPrice:d.notifyPrice!==null&&d.notifyPrice!==void 0?parseFloat(d.notifyPrice):99999,active:d.active!==void 0?d.active:!0}})})}function l(d){if(!d)return null;if(/^\d+$/.test(d.trim()))return d.trim();const p=[/item\.jd\.com\/(\d+)/i,/\/item\/jd\.com\/(\d+)/i,/(\d+)\.html/i];for(const y of p){const _=d.match(y);if(_&&_[1])return _[1]}const g=d.match(/(\d{6,})/);return g?g[1]:null}function u(d){const p=d.target.value;t("item","id",p)}function c(d){const p=d.target.value,g=l(p);g&&t("item","id",g)}async function f(){if(!a.item.id){console.error("Cannot add: missing required field (id)");return}const d=l(a.item.id);if(!d){console.error("Cannot add: invalid ID format");return}await s({...a.item,id:d}),r(),t("item",{id:null,active:!0})}const h=d=>{if(!d.price||!d.notifyPrice)return"default";const p=parseFloat(d.price),g=parseFloat(d.notifyPrice);return p<=g?"good":"default"};function v(d){let p,g;const y=()=>{if(!p||!d.priceHistory)return;const _=d.priceHistory,S=new Date;S.setFullYear(S.getFullYear()-1);const x=Object.entries(_).map(([L,E])=>({date:new Date(L),price:parseFloat(E)})).filter(L=>L.date>=S).sort((L,E)=>L.date-E.date);if(x.length===0)return;const T=x.reduce((L,E)=>E.price<L.price?E:L);let b=x;if(x.length>50){const L=Math.ceil(x.length/50);b=x.filter((I,R)=>R%L===0||R===x.length-1),x.findIndex(I=>I.date.getTime()===T.date.getTime()&&I.price===T.price)!==-1&&(b.find(R=>R.date.getTime()===T.date.getTime()&&R.price===T.price)||(b.push(T),b.sort((R,D)=>R.date-D.date)))}const C=b.map(L=>{const E=new Date(L.date);return E.setHours(E.getHours()+8),`${E.getMonth()+1}/${E.getDate()}`}),w=b.map(L=>L.price),M=b.findIndex(L=>L.date.getTime()===T.date.getTime()&&L.price===T.price),P={grid:{left:"10%",right:"5%",top:"10%",bottom:"20%",containLabel:!1},xAxis:{type:"category",data:C,show:!0,boundaryGap:!1,axisLabel:{show:!0,formatter:(L,E)=>E===0||E===C.length-1||E===M?E===M?`{a|${L}}`:L:"",rich:{a:{color:"#10b981",fontWeight:"bold",fontSize:11}},fontSize:9,color:"#9ca3af",margin:8},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",show:!1,scale:!0},series:[{name:"ä»·æ ¼",type:"line",data:w,smooth:!0,symbol:"none",lineStyle:{color:"#3b82f6",width:2},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(59, 130, 246, 0.3)"},{offset:1,color:"rgba(59, 130, 246, 0.05)"}]}},markPoint:M!==-1?{data:[{name:"æœ€ä½Žä»·",coord:[M,T.price],symbol:"circle",symbolSize:8,itemStyle:{color:"#10b981",borderColor:"#fff",borderWidth:2},label:{show:!1}}]}:void 0,emphasis:{focus:"series"}}],tooltip:{trigger:"axis",formatter:L=>{const E=L[0];return`${E.name}<br/>Â¥${E.value.toFixed(2)}`},backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"transparent",textStyle:{color:"#fff",fontSize:12}}};if(!g){g=init$1(p);const L=()=>{g==null||g.resize()};window.addEventListener("resize",L),onCleanup(()=>{window.removeEventListener("resize",L),g==null||g.dispose()})}g.setOption(P)};return onMount(()=>{y()}),createEffect(()=>{d.priceHistory&&y()}),(()=>{var _=_tmpl$();return use$1(S=>p=S,_),_.style.setProperty("minHeight","80px"),_})()}return(()=>{var d=_tmpl$2(),p=d.firstChild,g=p.nextSibling,y=g.firstChild,_=y.nextSibling,S=_.firstChild,x=S.nextSibling,T=g.nextSibling;return S.addEventListener("blur",c),S.$$input=u,x.$$click=()=>f(),insert(T,createComponent(For,{get each(){return a.items},children:(b,C)=>{const M=h(b)==="good";return(()=>{var P=_tmpl$3(),L=P.firstChild,E=L.firstChild,I=E.firstChild,R=I.nextSibling,D=L.nextSibling,O=D.firstChild,$=O.firstChild,N=$.nextSibling;N.firstChild;var V=O.nextSibling,B=V.firstChild,F=B.firstChild,G=F.nextSibling;G.firstChild;var z=B.nextSibling,H=z.firstChild,U=H.nextSibling;U.firstChild;var Y=D.nextSibling,Z=Y.firstChild,J=Z.nextSibling,ee=J.firstChild,K=Y.nextSibling;return K.firstChild,I.addEventListener("change",()=>o(C())),insert(R,()=>b.name),N.className=`text-lg font-bold ${M?"text-green-600":"text-gray-800"}`,insert(N,()=>b.price||"--",null),insert(D,M&&_tmpl$4(),V),insert(D,(()=>{var X=createMemo(()=>!!b.priceHistory);return()=>X()&&(()=>{var q=_tmpl$5();return q.firstChild,insert(q,createComponent(v,{get priceHistory(){return b.priceHistory}}),null),q})()})(),V),insert(G,()=>b.minPrice||"--",null),insert(U,()=>b.maxPrice||"--",null),insert(D,(()=>{var X=createMemo(()=>!!b.updatedAt);return()=>X()&&(()=>{var q=_tmpl$6();return q.firstChild,insert(q,()=>b.updatedAt,null),q})()})(),null),ee.addEventListener("blur",X=>{t("items",C(),"notifyPrice",X.target.value);const q={...a.items[C()],notifyPrice:X.target.value};s(q)}),insert(K,()=>b.id,null),createRenderEffect(()=>P.className=`bg-white rounded-lg shadow-md p-4 transition-all hover:shadow-lg ${b.active?"":"opacity-60"}`),createRenderEffect(()=>I.checked=b.active),createRenderEffect(()=>ee.value=b.notifyPrice||""),P})()}})),insert(d,(()=>{var b=createMemo(()=>a.items.length===0);return()=>b()&&_tmpl$7()})(),null),createRenderEffect(()=>S.value=a.item.id||""),d})()}delegateEvents(["input","click"]);function App(){return createComponent(HashRouter,{get children(){return[createComponent(Route,{path:"/",component:Home}),createComponent(Route,{path:"/jd",component:Jd}),createComponent(Route,{path:"/manki",get children(){return[createComponent(Route,{path:"",component:Books}),createComponent(Route,{path:"/book",component:Book}),createComponent(Route,{path:"/chapter",component:Chapter})]}})]}})}const root=document.getElementById("root");render$1(()=>createComponent(App,{}),root);
